(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();var eE={exports:{}},Gh={};var FN;function IV(){if(FN)return Gh;FN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,r,a){var s=null;if(a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),"key"in r){a={};for(var l in r)l!=="key"&&(a[l]=r[l])}else a=r;return r=a.ref,{$$typeof:e,type:i,key:s,ref:r!==void 0?r:null,props:a}}return Gh.Fragment=t,Gh.jsx=n,Gh.jsxs=n,Gh}var LN;function PV(){return LN||(LN=1,eE.exports=IV()),eE.exports}var Te=PV(),tE={exports:{}},Be={};var UN;function HV(){if(UN)return Be;UN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),p=Symbol.iterator;function y(F){return F===null||typeof F!="object"?null:(F=p&&F[p]||F["@@iterator"],typeof F=="function"?F:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,S={};function _(F,G,ae){this.props=F,this.context=G,this.refs=S,this.updater=ae||v}_.prototype.isReactComponent={},_.prototype.setState=function(F,G){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,G,"setState")},_.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function w(){}w.prototype=_.prototype;function A(F,G,ae){this.props=F,this.context=G,this.refs=S,this.updater=ae||v}var T=A.prototype=new w;T.constructor=A,b(T,_.prototype),T.isPureReactComponent=!0;var $=Array.isArray;function k(){}var M={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function z(F,G,ae){var he=ae.ref;return{$$typeof:e,type:F,key:G,ref:he!==void 0?he:null,props:ae}}function j(F,G){return z(F.type,G,F.props)}function U(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function X(F){var G={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ae){return G[ae]})}var H=/\/+/g;function q(F,G){return typeof F=="object"&&F!==null&&F.key!=null?X(""+F.key):G.toString(36)}function R(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(k,k):(F.status="pending",F.then(function(G){F.status==="pending"&&(F.status="fulfilled",F.value=G)},function(G){F.status==="pending"&&(F.status="rejected",F.reason=G)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function O(F,G,ae,he,me){var Me=typeof F;(Me==="undefined"||Me==="boolean")&&(F=null);var Xe=!1;if(F===null)Xe=!0;else switch(Me){case"bigint":case"string":case"number":Xe=!0;break;case"object":switch(F.$$typeof){case e:case t:Xe=!0;break;case d:return Xe=F._init,O(Xe(F._payload),G,ae,he,me)}}if(Xe)return me=me(F),Xe=he===""?"."+q(F,0):he,$(me)?(ae="",Xe!=null&&(ae=Xe.replace(H,"$&/")+"/"),O(me,G,ae,"",function(Fe){return Fe})):me!=null&&(U(me)&&(me=j(me,ae+(me.key==null||F&&F.key===me.key?"":(""+me.key).replace(H,"$&/")+"/")+Xe)),G.push(me)),1;Xe=0;var Rt=he===""?".":he+":";if($(F))for(var pe=0;pe<F.length;pe++)he=F[pe],Me=Rt+q(he,pe),Xe+=O(he,G,ae,Me,me);else if(pe=y(F),typeof pe=="function")for(F=pe.call(F),pe=0;!(he=F.next()).done;)he=he.value,Me=Rt+q(he,pe++),Xe+=O(he,G,ae,Me,me);else if(Me==="object"){if(typeof F.then=="function")return O(R(F),G,ae,he,me);throw G=String(F),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return Xe}function B(F,G,ae){if(F==null)return F;var he=[],me=0;return O(F,he,"","",function(Me){return G.call(ae,Me,me++)}),he}function Y(F){if(F._status===-1){var G=F._result;G=G(),G.then(function(ae){(F._status===0||F._status===-1)&&(F._status=1,F._result=ae)},function(ae){(F._status===0||F._status===-1)&&(F._status=2,F._result=ae)}),F._status===-1&&(F._status=0,F._result=G)}if(F._status===1)return F._result.default;throw F._result}var Z=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},oe={map:B,forEach:function(F,G,ae){B(F,function(){G.apply(this,arguments)},ae)},count:function(F){var G=0;return B(F,function(){G++}),G},toArray:function(F){return B(F,function(G){return G})||[]},only:function(F){if(!U(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Be.Activity=g,Be.Children=oe,Be.Component=_,Be.Fragment=n,Be.Profiler=r,Be.PureComponent=A,Be.StrictMode=i,Be.Suspense=c,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Be.__COMPILER_RUNTIME={__proto__:null,c:function(F){return M.H.useMemoCache(F)}},Be.cache=function(F){return function(){return F.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(F,G,ae){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var he=b({},F.props),me=F.key;if(G!=null)for(Me in G.key!==void 0&&(me=""+G.key),G)!N.call(G,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&G.ref===void 0||(he[Me]=G[Me]);var Me=arguments.length-2;if(Me===1)he.children=ae;else if(1<Me){for(var Xe=Array(Me),Rt=0;Rt<Me;Rt++)Xe[Rt]=arguments[Rt+2];he.children=Xe}return z(F.type,me,he)},Be.createContext=function(F){return F={$$typeof:s,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},Be.createElement=function(F,G,ae){var he,me={},Me=null;if(G!=null)for(he in G.key!==void 0&&(Me=""+G.key),G)N.call(G,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(me[he]=G[he]);var Xe=arguments.length-2;if(Xe===1)me.children=ae;else if(1<Xe){for(var Rt=Array(Xe),pe=0;pe<Xe;pe++)Rt[pe]=arguments[pe+2];me.children=Rt}if(F&&F.defaultProps)for(he in Xe=F.defaultProps,Xe)me[he]===void 0&&(me[he]=Xe[he]);return z(F,Me,me)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(F){return{$$typeof:l,render:F}},Be.isValidElement=U,Be.lazy=function(F){return{$$typeof:d,_payload:{_status:-1,_result:F},_init:Y}},Be.memo=function(F,G){return{$$typeof:f,type:F,compare:G===void 0?null:G}},Be.startTransition=function(F){var G=M.T,ae={};M.T=ae;try{var he=F(),me=M.S;me!==null&&me(ae,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(k,Z)}catch(Me){Z(Me)}finally{G!==null&&ae.types!==null&&(G.types=ae.types),M.T=G}},Be.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Be.use=function(F){return M.H.use(F)},Be.useActionState=function(F,G,ae){return M.H.useActionState(F,G,ae)},Be.useCallback=function(F,G){return M.H.useCallback(F,G)},Be.useContext=function(F){return M.H.useContext(F)},Be.useDebugValue=function(){},Be.useDeferredValue=function(F,G){return M.H.useDeferredValue(F,G)},Be.useEffect=function(F,G){return M.H.useEffect(F,G)},Be.useEffectEvent=function(F){return M.H.useEffectEvent(F)},Be.useId=function(){return M.H.useId()},Be.useImperativeHandle=function(F,G,ae){return M.H.useImperativeHandle(F,G,ae)},Be.useInsertionEffect=function(F,G){return M.H.useInsertionEffect(F,G)},Be.useLayoutEffect=function(F,G){return M.H.useLayoutEffect(F,G)},Be.useMemo=function(F,G){return M.H.useMemo(F,G)},Be.useOptimistic=function(F,G){return M.H.useOptimistic(F,G)},Be.useReducer=function(F,G,ae){return M.H.useReducer(F,G,ae)},Be.useRef=function(F){return M.H.useRef(F)},Be.useState=function(F){return M.H.useState(F)},Be.useSyncExternalStore=function(F,G,ae){return M.H.useSyncExternalStore(F,G,ae)},Be.useTransition=function(){return M.H.useTransition()},Be.version="19.2.0",Be}var BN;function fC(){return BN||(BN=1,tE.exports=HV()),tE.exports}var Ie=fC(),nE={exports:{}},Yh={},iE={exports:{}},rE={};var jN;function GV(){return jN||(jN=1,(function(e){function t(O,B){var Y=O.length;O.push(B);e:for(;0<Y;){var Z=Y-1>>>1,oe=O[Z];if(0<r(oe,B))O[Z]=B,O[Y]=oe,Y=Z;else break e}}function n(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var B=O[0],Y=O.pop();if(Y!==B){O[0]=Y;e:for(var Z=0,oe=O.length,F=oe>>>1;Z<F;){var G=2*(Z+1)-1,ae=O[G],he=G+1,me=O[he];if(0>r(ae,Y))he<oe&&0>r(me,ae)?(O[Z]=me,O[he]=Y,Z=he):(O[Z]=ae,O[G]=Y,Z=G);else if(he<oe&&0>r(me,Y))O[Z]=me,O[he]=Y,Z=he;else break e}}return B}function r(O,B){var Y=O.sortIndex-B.sortIndex;return Y!==0?Y:O.id-B.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var c=[],f=[],d=1,g=null,p=3,y=!1,v=!1,b=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function T(O){for(var B=n(f);B!==null;){if(B.callback===null)i(f);else if(B.startTime<=O)i(f),B.sortIndex=B.expirationTime,t(c,B);else break;B=n(f)}}function $(O){if(b=!1,T(O),!v)if(n(c)!==null)v=!0,k||(k=!0,X());else{var B=n(f);B!==null&&R($,B.startTime-O)}}var k=!1,M=-1,N=5,z=-1;function j(){return S?!0:!(e.unstable_now()-z<N)}function U(){if(S=!1,k){var O=e.unstable_now();z=O;var B=!0;try{e:{v=!1,b&&(b=!1,w(M),M=-1),y=!0;var Y=p;try{t:{for(T(O),g=n(c);g!==null&&!(g.expirationTime>O&&j());){var Z=g.callback;if(typeof Z=="function"){g.callback=null,p=g.priorityLevel;var oe=Z(g.expirationTime<=O);if(O=e.unstable_now(),typeof oe=="function"){g.callback=oe,T(O),B=!0;break t}g===n(c)&&i(c),T(O)}else i(c);g=n(c)}if(g!==null)B=!0;else{var F=n(f);F!==null&&R($,F.startTime-O),B=!1}}break e}finally{g=null,p=Y,y=!1}B=void 0}}finally{B?X():k=!1}}}var X;if(typeof A=="function")X=function(){A(U)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,q=H.port2;H.port1.onmessage=U,X=function(){q.postMessage(null)}}else X=function(){_(U,0)};function R(O,B){M=_(function(){O(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(O){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var Y=p;p=B;try{return O()}finally{p=Y}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(O,B){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Y=p;p=O;try{return B()}finally{p=Y}},e.unstable_scheduleCallback=function(O,B,Y){var Z=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Z+Y:Z):Y=Z,O){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=Y+oe,O={id:d++,callback:B,priorityLevel:O,startTime:Y,expirationTime:oe,sortIndex:-1},Y>Z?(O.sortIndex=Y,t(f,O),n(c)===null&&O===n(f)&&(b?(w(M),M=-1):b=!0,R($,Y-Z))):(O.sortIndex=oe,t(c,O),v||y||(v=!0,k||(k=!0,X()))),O},e.unstable_shouldYield=j,e.unstable_wrapCallback=function(O){var B=p;return function(){var Y=p;p=B;try{return O.apply(this,arguments)}finally{p=Y}}}})(rE)),rE}var qN;function YV(){return qN||(qN=1,iE.exports=GV()),iE.exports}var aE={exports:{}},Hn={};var IN;function XV(){if(IN)return Hn;IN=1;var e=fC();function t(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(c,f,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:c,containerInfo:f,implementation:d}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Hn.createPortal=function(c,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(c,f,null,d)},Hn.flushSync=function(c){var f=s.T,d=i.p;try{if(s.T=null,i.p=2,c)return c()}finally{s.T=f,i.p=d,i.d.f()}},Hn.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(c,f))},Hn.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},Hn.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var d=f.as,g=l(d,f.crossOrigin),p=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?i.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:p,fetchPriority:y}):d==="script"&&i.d.X(c,{crossOrigin:g,integrity:p,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Hn.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=l(f.as,f.crossOrigin);i.d.M(c,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(c)},Hn.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,g=l(d,f.crossOrigin);i.d.L(c,d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Hn.preloadModule=function(c,f){if(typeof c=="string")if(f){var d=l(f.as,f.crossOrigin);i.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(c)},Hn.requestFormReset=function(c){i.d.r(c)},Hn.unstable_batchedUpdates=function(c,f){return c(f)},Hn.useFormState=function(c,f,d){return s.H.useFormState(c,f,d)},Hn.useFormStatus=function(){return s.H.useHostTransitionStatus()},Hn.version="19.2.0",Hn}var PN;function VV(){if(PN)return aE.exports;PN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),aE.exports=XV(),aE.exports}var HN;function WV(){if(HN)return Yh;HN=1;var e=YV(),t=fC(),n=VV();function i(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var u=o,h=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(h=u.return),o=u.return;while(o)}return u.tag===3?h:null}function s(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function c(o){if(a(o)!==o)throw Error(i(188))}function f(o){var u=o.alternate;if(!u){if(u=a(o),u===null)throw Error(i(188));return u!==o?null:o}for(var h=o,m=u;;){var x=h.return;if(x===null)break;var E=x.alternate;if(E===null){if(m=x.return,m!==null){h=m;continue}break}if(x.child===E.child){for(E=x.child;E;){if(E===h)return c(x),o;if(E===m)return c(x),u;E=E.sibling}throw Error(i(188))}if(h.return!==m.return)h=x,m=E;else{for(var C=!1,D=x.child;D;){if(D===h){C=!0,h=x,m=E;break}if(D===m){C=!0,m=x,h=E;break}D=D.sibling}if(!C){for(D=E.child;D;){if(D===h){C=!0,h=E,m=x;break}if(D===m){C=!0,m=E,h=x;break}D=D.sibling}if(!C)throw Error(i(189))}}if(h.alternate!==m)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?o:u}function d(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=d(o),u!==null)return u;o=o.sibling}return null}var g=Object.assign,p=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),A=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function X(o){return o===null||typeof o!="object"?null:(o=U&&o[U]||o["@@iterator"],typeof o=="function"?o:null)}var H=Symbol.for("react.client.reference");function q(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===H?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case b:return"Fragment";case _:return"Profiler";case S:return"StrictMode";case $:return"Suspense";case k:return"SuspenseList";case z:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case v:return"Portal";case A:return o.displayName||"Context";case w:return(o._context.displayName||"Context")+".Consumer";case T:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case M:return u=o.displayName||null,u!==null?u:q(o.type)||"Memo";case N:u=o._payload,o=o._init;try{return q(o(u))}catch{}}return null}var R=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},Z=[],oe=-1;function F(o){return{current:o}}function G(o){0>oe||(o.current=Z[oe],Z[oe]=null,oe--)}function ae(o,u){oe++,Z[oe]=o.current,o.current=u}var he=F(null),me=F(null),Me=F(null),Xe=F(null);function Rt(o,u){switch(ae(Me,u),ae(me,o),ae(he,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?aN(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=aN(u),o=sN(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}G(he),ae(he,o)}function pe(){G(he),G(me),G(Me)}function Fe(o){o.memoizedState!==null&&ae(Xe,o);var u=he.current,h=sN(u,o.type);u!==h&&(ae(me,o),ae(he,h))}function je(o){me.current===o&&(G(he),G(me)),Xe.current===o&&(G(Xe),qh._currentValue=Y)}var ce,tn;function Qe(o){if(ce===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);ce=u&&u[1]||"",tn=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ce+o+tn}var It=!1;function nn(o,u){if(!o||It)return"";It=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(u){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(K){var Q=K}Reflect.construct(o,[],se)}else{try{se.call()}catch(K){Q=K}o.call(se.prototype)}}else{try{throw Error()}catch(K){Q=K}(se=o())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(K){if(K&&Q&&typeof K.stack=="string")return[K.stack,Q.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),C=E[0],D=E[1];if(C&&D){var L=C.split(`
`),W=D.split(`
`);for(x=m=0;m<L.length&&!L[m].includes("DetermineComponentFrameRoot");)m++;for(;x<W.length&&!W[x].includes("DetermineComponentFrameRoot");)x++;if(m===L.length||x===W.length)for(m=L.length-1,x=W.length-1;1<=m&&0<=x&&L[m]!==W[x];)x--;for(;1<=m&&0<=x;m--,x--)if(L[m]!==W[x]){if(m!==1||x!==1)do if(m--,x--,0>x||L[m]!==W[x]){var te=`
`+L[m].replace(" at new "," at ");return o.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",o.displayName)),te}while(1<=m&&0<=x);break}}}finally{It=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?Qe(h):""}function Gr(o,u){switch(o.tag){case 26:case 27:case 5:return Qe(o.type);case 16:return Qe("Lazy");case 13:return o.child!==u&&u!==null?Qe("Suspense Fallback"):Qe("Suspense");case 19:return Qe("SuspenseList");case 0:case 15:return nn(o.type,!1);case 11:return nn(o.type.render,!1);case 1:return nn(o.type,!0);case 31:return Qe("Activity");default:return""}}function Kd(o){try{var u="",h=null;do u+=Gr(o,h),h=o,o=o.return;while(o);return u}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Bx=Object.prototype.hasOwnProperty,jx=e.unstable_scheduleCallback,qx=e.unstable_cancelCallback,xY=e.unstable_shouldYield,SY=e.unstable_requestPaint,Hi=e.unstable_now,EY=e.unstable_getCurrentPriorityLevel,Lk=e.unstable_ImmediatePriority,Uk=e.unstable_UserBlockingPriority,wm=e.unstable_NormalPriority,_Y=e.unstable_LowPriority,Bk=e.unstable_IdlePriority,wY=e.log,AY=e.unstable_setDisableYieldValue,Jd=null,Gi=null;function vo(o){if(typeof wY=="function"&&AY(o),Gi&&typeof Gi.setStrictMode=="function")try{Gi.setStrictMode(Jd,o)}catch{}}var Yi=Math.clz32?Math.clz32:MY,CY=Math.log,TY=Math.LN2;function MY(o){return o>>>=0,o===0?32:31-(CY(o)/TY|0)|0}var Am=256,Cm=262144,Tm=4194304;function Hl(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Mm(o,u,h){var m=o.pendingLanes;if(m===0)return 0;var x=0,E=o.suspendedLanes,C=o.pingedLanes;o=o.warmLanes;var D=m&134217727;return D!==0?(m=D&~E,m!==0?x=Hl(m):(C&=D,C!==0?x=Hl(C):h||(h=D&~o,h!==0&&(x=Hl(h))))):(D=m&~E,D!==0?x=Hl(D):C!==0?x=Hl(C):h||(h=m&~o,h!==0&&(x=Hl(h)))),x===0?0:u!==0&&u!==x&&(u&E)===0&&(E=x&-x,h=u&-u,E>=h||E===32&&(h&4194048)!==0)?u:x}function eh(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function $Y(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jk(){var o=Tm;return Tm<<=1,(Tm&62914560)===0&&(Tm=4194304),o}function Ix(o){for(var u=[],h=0;31>h;h++)u.push(o);return u}function th(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function kY(o,u,h,m,x,E){var C=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var D=o.entanglements,L=o.expirationTimes,W=o.hiddenUpdates;for(h=C&~h;0<h;){var te=31-Yi(h),se=1<<te;D[te]=0,L[te]=-1;var Q=W[te];if(Q!==null)for(W[te]=null,te=0;te<Q.length;te++){var K=Q[te];K!==null&&(K.lane&=-536870913)}h&=~se}m!==0&&qk(o,m,0),E!==0&&x===0&&o.tag!==0&&(o.suspendedLanes|=E&~(C&~u))}function qk(o,u,h){o.pendingLanes|=u,o.suspendedLanes&=~u;var m=31-Yi(u);o.entangledLanes|=u,o.entanglements[m]=o.entanglements[m]|1073741824|h&261930}function Ik(o,u){var h=o.entangledLanes|=u;for(o=o.entanglements;h;){var m=31-Yi(h),x=1<<m;x&u|o[m]&u&&(o[m]|=u),h&=~x}}function Pk(o,u){var h=u&-u;return h=(h&42)!==0?1:Px(h),(h&(o.suspendedLanes|u))!==0?0:h}function Px(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Hx(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Hk(){var o=B.p;return o!==0?o:(o=window.event,o===void 0?32:$N(o.type))}function Gk(o,u){var h=B.p;try{return B.p=o,u()}finally{B.p=h}}var bo=Math.random().toString(36).slice(2),kn="__reactFiber$"+bo,_i="__reactProps$"+bo,Tc="__reactContainer$"+bo,Gx="__reactEvents$"+bo,DY="__reactListeners$"+bo,OY="__reactHandles$"+bo,Yk="__reactResources$"+bo,nh="__reactMarker$"+bo;function Yx(o){delete o[kn],delete o[_i],delete o[Gx],delete o[DY],delete o[OY]}function Mc(o){var u=o[kn];if(u)return u;for(var h=o.parentNode;h;){if(u=h[Tc]||h[kn]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(o=hN(o);o!==null;){if(h=o[kn])return h;o=hN(o)}return u}o=h,h=o.parentNode}return null}function $c(o){if(o=o[kn]||o[Tc]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function ih(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(i(33))}function kc(o){var u=o[Yk];return u||(u=o[Yk]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function vn(o){o[nh]=!0}var Xk=new Set,Vk={};function Gl(o,u){Dc(o,u),Dc(o+"Capture",u)}function Dc(o,u){for(Vk[o]=u,o=0;o<u.length;o++)Xk.add(u[o])}var NY=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wk={},Qk={};function RY(o){return Bx.call(Qk,o)?!0:Bx.call(Wk,o)?!1:NY.test(o)?Qk[o]=!0:(Wk[o]=!0,!1)}function $m(o,u,h){if(RY(u))if(h===null)o.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var m=u.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+h)}}function km(o,u,h){if(h===null)o.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+h)}}function ps(o,u,h,m){if(m===null)o.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(u,h,""+m)}}function pr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Zk(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function zY(o,u,h){var m=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var x=m.get,E=m.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return x.call(this)},set:function(C){h=""+C,E.call(this,C)}}),Object.defineProperty(o,u,{enumerable:m.enumerable}),{getValue:function(){return h},setValue:function(C){h=""+C},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Xx(o){if(!o._valueTracker){var u=Zk(o)?"checked":"value";o._valueTracker=zY(o,u,""+o[u])}}function Kk(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var h=u.getValue(),m="";return o&&(m=Zk(o)?o.checked?"true":"false":o.value),o=m,o!==h?(u.setValue(o),!0):!1}function Dm(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var FY=/[\n"\\]/g;function mr(o){return o.replace(FY,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Vx(o,u,h,m,x,E,C,D){o.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?o.type=C:o.removeAttribute("type"),u!=null?C==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+pr(u)):o.value!==""+pr(u)&&(o.value=""+pr(u)):C!=="submit"&&C!=="reset"||o.removeAttribute("value"),u!=null?Wx(o,C,pr(u)):h!=null?Wx(o,C,pr(h)):m!=null&&o.removeAttribute("value"),x==null&&E!=null&&(o.defaultChecked=!!E),x!=null&&(o.checked=x&&typeof x!="function"&&typeof x!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?o.name=""+pr(D):o.removeAttribute("name")}function Jk(o,u,h,m,x,E,C,D){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(o.type=E),u!=null||h!=null){if(!(E!=="submit"&&E!=="reset"||u!=null)){Xx(o);return}h=h!=null?""+pr(h):"",u=u!=null?""+pr(u):h,D||u===o.value||(o.value=u),o.defaultValue=u}m=m??x,m=typeof m!="function"&&typeof m!="symbol"&&!!m,o.checked=D?o.checked:!!m,o.defaultChecked=!!m,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(o.name=C),Xx(o)}function Wx(o,u,h){u==="number"&&Dm(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function Oc(o,u,h,m){if(o=o.options,u){u={};for(var x=0;x<h.length;x++)u["$"+h[x]]=!0;for(h=0;h<o.length;h++)x=u.hasOwnProperty("$"+o[h].value),o[h].selected!==x&&(o[h].selected=x),x&&m&&(o[h].defaultSelected=!0)}else{for(h=""+pr(h),u=null,x=0;x<o.length;x++){if(o[x].value===h){o[x].selected=!0,m&&(o[x].defaultSelected=!0);return}u!==null||o[x].disabled||(u=o[x])}u!==null&&(u.selected=!0)}}function eD(o,u,h){if(u!=null&&(u=""+pr(u),u!==o.value&&(o.value=u),h==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=h!=null?""+pr(h):""}function tD(o,u,h,m){if(u==null){if(m!=null){if(h!=null)throw Error(i(92));if(R(m)){if(1<m.length)throw Error(i(93));m=m[0]}h=m}h==null&&(h=""),u=h}h=pr(u),o.defaultValue=h,m=o.textContent,m===h&&m!==""&&m!==null&&(o.value=m),Xx(o)}function Nc(o,u){if(u){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=u;return}}o.textContent=u}var LY=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nD(o,u,h){var m=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":m?o.setProperty(u,h):typeof h!="number"||h===0||LY.has(u)?u==="float"?o.cssFloat=h:o[u]=(""+h).trim():o[u]=h+"px"}function iD(o,u,h){if(u!=null&&typeof u!="object")throw Error(i(62));if(o=o.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||u!=null&&u.hasOwnProperty(m)||(m.indexOf("--")===0?o.setProperty(m,""):m==="float"?o.cssFloat="":o[m]="");for(var x in u)m=u[x],u.hasOwnProperty(x)&&h[x]!==m&&nD(o,x,m)}else for(var E in u)u.hasOwnProperty(E)&&nD(o,E,u[E])}function Qx(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var UY=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),BY=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Om(o){return BY.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function ms(){}var Zx=null;function Kx(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Rc=null,zc=null;function rD(o){var u=$c(o);if(u&&(o=u.stateNode)){var h=o[_i]||null;e:switch(o=u.stateNode,u.type){case"input":if(Vx(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+mr(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var m=h[u];if(m!==o&&m.form===o.form){var x=m[_i]||null;if(!x)throw Error(i(90));Vx(m,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(u=0;u<h.length;u++)m=h[u],m.form===o.form&&Kk(m)}break e;case"textarea":eD(o,h.value,h.defaultValue);break e;case"select":u=h.value,u!=null&&Oc(o,!!h.multiple,u,!1)}}}var Jx=!1;function aD(o,u,h){if(Jx)return o(u,h);Jx=!0;try{var m=o(u);return m}finally{if(Jx=!1,(Rc!==null||zc!==null)&&(b0(),Rc&&(u=Rc,o=zc,zc=Rc=null,rD(u),o)))for(u=0;u<o.length;u++)rD(o[u])}}function rh(o,u){var h=o.stateNode;if(h===null)return null;var m=h[_i]||null;if(m===null)return null;h=m[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(i(231,u,typeof h));return h}var ys=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),e2=!1;if(ys)try{var ah={};Object.defineProperty(ah,"passive",{get:function(){e2=!0}}),window.addEventListener("test",ah,ah),window.removeEventListener("test",ah,ah)}catch{e2=!1}var xo=null,t2=null,Nm=null;function sD(){if(Nm)return Nm;var o,u=t2,h=u.length,m,x="value"in xo?xo.value:xo.textContent,E=x.length;for(o=0;o<h&&u[o]===x[o];o++);var C=h-o;for(m=1;m<=C&&u[h-m]===x[E-m];m++);return Nm=x.slice(o,1<m?1-m:void 0)}function Rm(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function zm(){return!0}function oD(){return!1}function wi(o){function u(h,m,x,E,C){this._reactName=h,this._targetInst=x,this.type=m,this.nativeEvent=E,this.target=C,this.currentTarget=null;for(var D in o)o.hasOwnProperty(D)&&(h=o[D],this[D]=h?h(E):E[D]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?zm:oD,this.isPropagationStopped=oD,this}return g(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=zm)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=zm)},persist:function(){},isPersistent:zm}),u}var Yl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fm=wi(Yl),sh=g({},Yl,{view:0,detail:0}),jY=wi(sh),n2,i2,oh,Lm=g({},sh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:a2,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==oh&&(oh&&o.type==="mousemove"?(n2=o.screenX-oh.screenX,i2=o.screenY-oh.screenY):i2=n2=0,oh=o),n2)},movementY:function(o){return"movementY"in o?o.movementY:i2}}),lD=wi(Lm),qY=g({},Lm,{dataTransfer:0}),IY=wi(qY),PY=g({},sh,{relatedTarget:0}),r2=wi(PY),HY=g({},Yl,{animationName:0,elapsedTime:0,pseudoElement:0}),GY=wi(HY),YY=g({},Yl,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),XY=wi(YY),VY=g({},Yl,{data:0}),uD=wi(VY),WY={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QY={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZY={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KY(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=ZY[o])?!!u[o]:!1}function a2(){return KY}var JY=g({},sh,{key:function(o){if(o.key){var u=WY[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Rm(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?QY[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:a2,charCode:function(o){return o.type==="keypress"?Rm(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Rm(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),eX=wi(JY),tX=g({},Lm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cD=wi(tX),nX=g({},sh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:a2}),iX=wi(nX),rX=g({},Yl,{propertyName:0,elapsedTime:0,pseudoElement:0}),aX=wi(rX),sX=g({},Lm,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),oX=wi(sX),lX=g({},Yl,{newState:0,oldState:0}),uX=wi(lX),cX=[9,13,27,32],s2=ys&&"CompositionEvent"in window,lh=null;ys&&"documentMode"in document&&(lh=document.documentMode);var fX=ys&&"TextEvent"in window&&!lh,fD=ys&&(!s2||lh&&8<lh&&11>=lh),dD=" ",hD=!1;function gD(o,u){switch(o){case"keyup":return cX.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pD(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Fc=!1;function dX(o,u){switch(o){case"compositionend":return pD(u);case"keypress":return u.which!==32?null:(hD=!0,dD);case"textInput":return o=u.data,o===dD&&hD?null:o;default:return null}}function hX(o,u){if(Fc)return o==="compositionend"||!s2&&gD(o,u)?(o=sD(),Nm=t2=xo=null,Fc=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return fD&&u.locale!=="ko"?null:u.data;default:return null}}var gX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mD(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!gX[o.type]:u==="textarea"}function yD(o,u,h,m){Rc?zc?zc.push(m):zc=[m]:Rc=m,u=C0(u,"onChange"),0<u.length&&(h=new Fm("onChange","change",null,h,m),o.push({event:h,listeners:u}))}var uh=null,ch=null;function pX(o){J5(o,0)}function Um(o){var u=ih(o);if(Kk(u))return o}function vD(o,u){if(o==="change")return u}var bD=!1;if(ys){var o2;if(ys){var l2="oninput"in document;if(!l2){var xD=document.createElement("div");xD.setAttribute("oninput","return;"),l2=typeof xD.oninput=="function"}o2=l2}else o2=!1;bD=o2&&(!document.documentMode||9<document.documentMode)}function SD(){uh&&(uh.detachEvent("onpropertychange",ED),ch=uh=null)}function ED(o){if(o.propertyName==="value"&&Um(ch)){var u=[];yD(u,ch,o,Kx(o)),aD(pX,u)}}function mX(o,u,h){o==="focusin"?(SD(),uh=u,ch=h,uh.attachEvent("onpropertychange",ED)):o==="focusout"&&SD()}function yX(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Um(ch)}function vX(o,u){if(o==="click")return Um(u)}function bX(o,u){if(o==="input"||o==="change")return Um(u)}function xX(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var Xi=typeof Object.is=="function"?Object.is:xX;function fh(o,u){if(Xi(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var h=Object.keys(o),m=Object.keys(u);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var x=h[m];if(!Bx.call(u,x)||!Xi(o[x],u[x]))return!1}return!0}function _D(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function wD(o,u){var h=_D(o);o=0;for(var m;h;){if(h.nodeType===3){if(m=o+h.textContent.length,o<=u&&m>=u)return{node:h,offset:u-o};o=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=_D(h)}}function AD(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?AD(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function CD(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=Dm(o.document);u instanceof o.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)o=u.contentWindow;else break;u=Dm(o.document)}return u}function u2(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var SX=ys&&"documentMode"in document&&11>=document.documentMode,Lc=null,c2=null,dh=null,f2=!1;function TD(o,u,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;f2||Lc==null||Lc!==Dm(m)||(m=Lc,"selectionStart"in m&&u2(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),dh&&fh(dh,m)||(dh=m,m=C0(c2,"onSelect"),0<m.length&&(u=new Fm("onSelect","select",null,u,h),o.push({event:u,listeners:m}),u.target=Lc)))}function Xl(o,u){var h={};return h[o.toLowerCase()]=u.toLowerCase(),h["Webkit"+o]="webkit"+u,h["Moz"+o]="moz"+u,h}var Uc={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionrun:Xl("Transition","TransitionRun"),transitionstart:Xl("Transition","TransitionStart"),transitioncancel:Xl("Transition","TransitionCancel"),transitionend:Xl("Transition","TransitionEnd")},d2={},MD={};ys&&(MD=document.createElement("div").style,"AnimationEvent"in window||(delete Uc.animationend.animation,delete Uc.animationiteration.animation,delete Uc.animationstart.animation),"TransitionEvent"in window||delete Uc.transitionend.transition);function Vl(o){if(d2[o])return d2[o];if(!Uc[o])return o;var u=Uc[o],h;for(h in u)if(u.hasOwnProperty(h)&&h in MD)return d2[o]=u[h];return o}var $D=Vl("animationend"),kD=Vl("animationiteration"),DD=Vl("animationstart"),EX=Vl("transitionrun"),_X=Vl("transitionstart"),wX=Vl("transitioncancel"),OD=Vl("transitionend"),ND=new Map,h2="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");h2.push("scrollEnd");function Yr(o,u){ND.set(o,u),Gl(u,[o])}var Bm=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},yr=[],Bc=0,g2=0;function jm(){for(var o=Bc,u=g2=Bc=0;u<o;){var h=yr[u];yr[u++]=null;var m=yr[u];yr[u++]=null;var x=yr[u];yr[u++]=null;var E=yr[u];if(yr[u++]=null,m!==null&&x!==null){var C=m.pending;C===null?x.next=x:(x.next=C.next,C.next=x),m.pending=x}E!==0&&RD(h,x,E)}}function qm(o,u,h,m){yr[Bc++]=o,yr[Bc++]=u,yr[Bc++]=h,yr[Bc++]=m,g2|=m,o.lanes|=m,o=o.alternate,o!==null&&(o.lanes|=m)}function p2(o,u,h,m){return qm(o,u,h,m),Im(o)}function Wl(o,u){return qm(o,null,null,u),Im(o)}function RD(o,u,h){o.lanes|=h;var m=o.alternate;m!==null&&(m.lanes|=h);for(var x=!1,E=o.return;E!==null;)E.childLanes|=h,m=E.alternate,m!==null&&(m.childLanes|=h),E.tag===22&&(o=E.stateNode,o===null||o._visibility&1||(x=!0)),o=E,E=E.return;return o.tag===3?(E=o.stateNode,x&&u!==null&&(x=31-Yi(h),o=E.hiddenUpdates,m=o[x],m===null?o[x]=[u]:m.push(u),u.lane=h|536870912),E):null}function Im(o){if(50<Rh)throw Rh=0,wS=null,Error(i(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var jc={};function AX(o,u,h,m){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vi(o,u,h,m){return new AX(o,u,h,m)}function m2(o){return o=o.prototype,!(!o||!o.isReactComponent)}function vs(o,u){var h=o.alternate;return h===null?(h=Vi(o.tag,u,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=u,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,u=o.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function zD(o,u){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,u=h.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function Pm(o,u,h,m,x,E){var C=0;if(m=o,typeof o=="function")m2(o)&&(C=1);else if(typeof o=="string")C=kV(o,h,he.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case z:return o=Vi(31,h,u,x),o.elementType=z,o.lanes=E,o;case b:return Ql(h.children,x,E,u);case S:C=8,x|=24;break;case _:return o=Vi(12,h,u,x|2),o.elementType=_,o.lanes=E,o;case $:return o=Vi(13,h,u,x),o.elementType=$,o.lanes=E,o;case k:return o=Vi(19,h,u,x),o.elementType=k,o.lanes=E,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case A:C=10;break e;case w:C=9;break e;case T:C=11;break e;case M:C=14;break e;case N:C=16,m=null;break e}C=29,h=Error(i(130,o===null?"null":typeof o,"")),m=null}return u=Vi(C,h,u,x),u.elementType=o,u.type=m,u.lanes=E,u}function Ql(o,u,h,m){return o=Vi(7,o,m,u),o.lanes=h,o}function y2(o,u,h){return o=Vi(6,o,null,u),o.lanes=h,o}function FD(o){var u=Vi(18,null,null,0);return u.stateNode=o,u}function v2(o,u,h){return u=Vi(4,o.children!==null?o.children:[],o.key,u),u.lanes=h,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var LD=new WeakMap;function vr(o,u){if(typeof o=="object"&&o!==null){var h=LD.get(o);return h!==void 0?h:(u={value:o,source:u,stack:Kd(u)},LD.set(o,u),u)}return{value:o,source:u,stack:Kd(u)}}var qc=[],Ic=0,Hm=null,hh=0,br=[],xr=0,So=null,Aa=1,Ca="";function bs(o,u){qc[Ic++]=hh,qc[Ic++]=Hm,Hm=o,hh=u}function UD(o,u,h){br[xr++]=Aa,br[xr++]=Ca,br[xr++]=So,So=o;var m=Aa;o=Ca;var x=32-Yi(m)-1;m&=~(1<<x),h+=1;var E=32-Yi(u)+x;if(30<E){var C=x-x%5;E=(m&(1<<C)-1).toString(32),m>>=C,x-=C,Aa=1<<32-Yi(u)+x|h<<x|m,Ca=E+o}else Aa=1<<E|h<<x|m,Ca=o}function b2(o){o.return!==null&&(bs(o,1),UD(o,1,0))}function x2(o){for(;o===Hm;)Hm=qc[--Ic],qc[Ic]=null,hh=qc[--Ic],qc[Ic]=null;for(;o===So;)So=br[--xr],br[xr]=null,Ca=br[--xr],br[xr]=null,Aa=br[--xr],br[xr]=null}function BD(o,u){br[xr++]=Aa,br[xr++]=Ca,br[xr++]=So,Aa=u.id,Ca=u.overflow,So=o}var Dn=null,kt=null,nt=!1,Eo=null,Sr=!1,S2=Error(i(519));function _o(o){var u=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gh(vr(u,o)),S2}function jD(o){var u=o.stateNode,h=o.type,m=o.memoizedProps;switch(u[kn]=o,u[_i]=m,h){case"dialog":Ke("cancel",u),Ke("close",u);break;case"iframe":case"object":case"embed":Ke("load",u);break;case"video":case"audio":for(h=0;h<Fh.length;h++)Ke(Fh[h],u);break;case"source":Ke("error",u);break;case"img":case"image":case"link":Ke("error",u),Ke("load",u);break;case"details":Ke("toggle",u);break;case"input":Ke("invalid",u),Jk(u,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":Ke("invalid",u);break;case"textarea":Ke("invalid",u),tD(u,m.value,m.defaultValue,m.children)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||m.suppressHydrationWarning===!0||iN(u.textContent,h)?(m.popover!=null&&(Ke("beforetoggle",u),Ke("toggle",u)),m.onScroll!=null&&Ke("scroll",u),m.onScrollEnd!=null&&Ke("scrollend",u),m.onClick!=null&&(u.onclick=ms),u=!0):u=!1,u||_o(o,!0)}function qD(o){for(Dn=o.return;Dn;)switch(Dn.tag){case 5:case 31:case 13:Sr=!1;return;case 27:case 3:Sr=!0;return;default:Dn=Dn.return}}function Pc(o){if(o!==Dn)return!1;if(!nt)return qD(o),nt=!0,!1;var u=o.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||BS(o.type,o.memoizedProps)),h=!h),h&&kt&&_o(o),qD(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));kt=dN(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));kt=dN(o)}else u===27?(u=kt,Lo(o.type)?(o=HS,HS=null,kt=o):kt=u):kt=Dn?_r(o.stateNode.nextSibling):null;return!0}function Zl(){kt=Dn=null,nt=!1}function E2(){var o=Eo;return o!==null&&(Mi===null?Mi=o:Mi.push.apply(Mi,o),Eo=null),o}function gh(o){Eo===null?Eo=[o]:Eo.push(o)}var _2=F(null),Kl=null,xs=null;function wo(o,u,h){ae(_2,u._currentValue),u._currentValue=h}function Ss(o){o._currentValue=_2.current,G(_2)}function w2(o,u,h){for(;o!==null;){var m=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,m!==null&&(m.childLanes|=u)):m!==null&&(m.childLanes&u)!==u&&(m.childLanes|=u),o===h)break;o=o.return}}function A2(o,u,h,m){var x=o.child;for(x!==null&&(x.return=o);x!==null;){var E=x.dependencies;if(E!==null){var C=x.child;E=E.firstContext;e:for(;E!==null;){var D=E;E=x;for(var L=0;L<u.length;L++)if(D.context===u[L]){E.lanes|=h,D=E.alternate,D!==null&&(D.lanes|=h),w2(E.return,h,o),m||(C=null);break e}E=D.next}}else if(x.tag===18){if(C=x.return,C===null)throw Error(i(341));C.lanes|=h,E=C.alternate,E!==null&&(E.lanes|=h),w2(C,h,o),C=null}else C=x.child;if(C!==null)C.return=x;else for(C=x;C!==null;){if(C===o){C=null;break}if(x=C.sibling,x!==null){x.return=C.return,C=x;break}C=C.return}x=C}}function Hc(o,u,h,m){o=null;for(var x=u,E=!1;x!==null;){if(!E){if((x.flags&524288)!==0)E=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var C=x.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var D=x.type;Xi(x.pendingProps.value,C.value)||(o!==null?o.push(D):o=[D])}}else if(x===Xe.current){if(C=x.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(o!==null?o.push(qh):o=[qh])}x=x.return}o!==null&&A2(u,o,h,m),u.flags|=262144}function Gm(o){for(o=o.firstContext;o!==null;){if(!Xi(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Jl(o){Kl=o,xs=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function On(o){return ID(Kl,o)}function Ym(o,u){return Kl===null&&Jl(o),ID(o,u)}function ID(o,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},xs===null){if(o===null)throw Error(i(308));xs=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else xs=xs.next=u;return h}var CX=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(h,m){o.push(m)}};this.abort=function(){u.aborted=!0,o.forEach(function(h){return h()})}},TX=e.unstable_scheduleCallback,MX=e.unstable_NormalPriority,rn={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function C2(){return{controller:new CX,data:new Map,refCount:0}}function ph(o){o.refCount--,o.refCount===0&&TX(MX,function(){o.controller.abort()})}var mh=null,T2=0,Gc=0,Yc=null;function $X(o,u){if(mh===null){var h=mh=[];T2=0,Gc=kS(),Yc={status:"pending",value:void 0,then:function(m){h.push(m)}}}return T2++,u.then(PD,PD),u}function PD(){if(--T2===0&&mh!==null){Yc!==null&&(Yc.status="fulfilled");var o=mh;mh=null,Gc=0,Yc=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function kX(o,u){var h=[],m={status:"pending",value:null,reason:null,then:function(x){h.push(x)}};return o.then(function(){m.status="fulfilled",m.value=u;for(var x=0;x<h.length;x++)(0,h[x])(u)},function(x){for(m.status="rejected",m.reason=x,x=0;x<h.length;x++)(0,h[x])(void 0)}),m}var HD=O.S;O.S=function(o,u){T5=Hi(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&$X(o,u),HD!==null&&HD(o,u)};var eu=F(null);function M2(){var o=eu.current;return o!==null?o:Ct.pooledCache}function Xm(o,u){u===null?ae(eu,eu.current):ae(eu,u.pool)}function GD(){var o=M2();return o===null?null:{parent:rn._currentValue,pool:o}}var Xc=Error(i(460)),$2=Error(i(474)),Vm=Error(i(542)),Wm={then:function(){}};function YD(o){return o=o.status,o==="fulfilled"||o==="rejected"}function XD(o,u,h){switch(h=o[h],h===void 0?o.push(u):h!==u&&(u.then(ms,ms),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,WD(o),o;default:if(typeof u.status=="string")u.then(ms,ms);else{if(o=Ct,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=u,o.status="pending",o.then(function(m){if(u.status==="pending"){var x=u;x.status="fulfilled",x.value=m}},function(m){if(u.status==="pending"){var x=u;x.status="rejected",x.reason=m}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,WD(o),o}throw nu=u,Xc}}function tu(o){try{var u=o._init;return u(o._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(nu=h,Xc):h}}var nu=null;function VD(){if(nu===null)throw Error(i(459));var o=nu;return nu=null,o}function WD(o){if(o===Xc||o===Vm)throw Error(i(483))}var Vc=null,yh=0;function Qm(o){var u=yh;return yh+=1,Vc===null&&(Vc=[]),XD(Vc,o,u)}function vh(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function Zm(o,u){throw u.$$typeof===p?Error(i(525)):(o=Object.prototype.toString.call(u),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function QD(o){function u(P,I){if(o){var V=P.deletions;V===null?(P.deletions=[I],P.flags|=16):V.push(I)}}function h(P,I){if(!o)return null;for(;I!==null;)u(P,I),I=I.sibling;return null}function m(P){for(var I=new Map;P!==null;)P.key!==null?I.set(P.key,P):I.set(P.index,P),P=P.sibling;return I}function x(P,I){return P=vs(P,I),P.index=0,P.sibling=null,P}function E(P,I,V){return P.index=V,o?(V=P.alternate,V!==null?(V=V.index,V<I?(P.flags|=67108866,I):V):(P.flags|=67108866,I)):(P.flags|=1048576,I)}function C(P){return o&&P.alternate===null&&(P.flags|=67108866),P}function D(P,I,V,re){return I===null||I.tag!==6?(I=y2(V,P.mode,re),I.return=P,I):(I=x(I,V),I.return=P,I)}function L(P,I,V,re){var Oe=V.type;return Oe===b?te(P,I,V.props.children,re,V.key):I!==null&&(I.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===N&&tu(Oe)===I.type)?(I=x(I,V.props),vh(I,V),I.return=P,I):(I=Pm(V.type,V.key,V.props,null,P.mode,re),vh(I,V),I.return=P,I)}function W(P,I,V,re){return I===null||I.tag!==4||I.stateNode.containerInfo!==V.containerInfo||I.stateNode.implementation!==V.implementation?(I=v2(V,P.mode,re),I.return=P,I):(I=x(I,V.children||[]),I.return=P,I)}function te(P,I,V,re,Oe){return I===null||I.tag!==7?(I=Ql(V,P.mode,re,Oe),I.return=P,I):(I=x(I,V),I.return=P,I)}function se(P,I,V){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=y2(""+I,P.mode,V),I.return=P,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case y:return V=Pm(I.type,I.key,I.props,null,P.mode,V),vh(V,I),V.return=P,V;case v:return I=v2(I,P.mode,V),I.return=P,I;case N:return I=tu(I),se(P,I,V)}if(R(I)||X(I))return I=Ql(I,P.mode,V,null),I.return=P,I;if(typeof I.then=="function")return se(P,Qm(I),V);if(I.$$typeof===A)return se(P,Ym(P,I),V);Zm(P,I)}return null}function Q(P,I,V,re){var Oe=I!==null?I.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return Oe!==null?null:D(P,I,""+V,re);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case y:return V.key===Oe?L(P,I,V,re):null;case v:return V.key===Oe?W(P,I,V,re):null;case N:return V=tu(V),Q(P,I,V,re)}if(R(V)||X(V))return Oe!==null?null:te(P,I,V,re,null);if(typeof V.then=="function")return Q(P,I,Qm(V),re);if(V.$$typeof===A)return Q(P,I,Ym(P,V),re);Zm(P,V)}return null}function K(P,I,V,re,Oe){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return P=P.get(V)||null,D(I,P,""+re,Oe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case y:return P=P.get(re.key===null?V:re.key)||null,L(I,P,re,Oe);case v:return P=P.get(re.key===null?V:re.key)||null,W(I,P,re,Oe);case N:return re=tu(re),K(P,I,V,re,Oe)}if(R(re)||X(re))return P=P.get(V)||null,te(I,P,re,Oe,null);if(typeof re.then=="function")return K(P,I,V,Qm(re),Oe);if(re.$$typeof===A)return K(P,I,V,Ym(I,re),Oe);Zm(I,re)}return null}function _e(P,I,V,re){for(var Oe=null,st=null,Ae=I,Ge=I=0,et=null;Ae!==null&&Ge<V.length;Ge++){Ae.index>Ge?(et=Ae,Ae=null):et=Ae.sibling;var ot=Q(P,Ae,V[Ge],re);if(ot===null){Ae===null&&(Ae=et);break}o&&Ae&&ot.alternate===null&&u(P,Ae),I=E(ot,I,Ge),st===null?Oe=ot:st.sibling=ot,st=ot,Ae=et}if(Ge===V.length)return h(P,Ae),nt&&bs(P,Ge),Oe;if(Ae===null){for(;Ge<V.length;Ge++)Ae=se(P,V[Ge],re),Ae!==null&&(I=E(Ae,I,Ge),st===null?Oe=Ae:st.sibling=Ae,st=Ae);return nt&&bs(P,Ge),Oe}for(Ae=m(Ae);Ge<V.length;Ge++)et=K(Ae,P,Ge,V[Ge],re),et!==null&&(o&&et.alternate!==null&&Ae.delete(et.key===null?Ge:et.key),I=E(et,I,Ge),st===null?Oe=et:st.sibling=et,st=et);return o&&Ae.forEach(function(Io){return u(P,Io)}),nt&&bs(P,Ge),Oe}function ze(P,I,V,re){if(V==null)throw Error(i(151));for(var Oe=null,st=null,Ae=I,Ge=I=0,et=null,ot=V.next();Ae!==null&&!ot.done;Ge++,ot=V.next()){Ae.index>Ge?(et=Ae,Ae=null):et=Ae.sibling;var Io=Q(P,Ae,ot.value,re);if(Io===null){Ae===null&&(Ae=et);break}o&&Ae&&Io.alternate===null&&u(P,Ae),I=E(Io,I,Ge),st===null?Oe=Io:st.sibling=Io,st=Io,Ae=et}if(ot.done)return h(P,Ae),nt&&bs(P,Ge),Oe;if(Ae===null){for(;!ot.done;Ge++,ot=V.next())ot=se(P,ot.value,re),ot!==null&&(I=E(ot,I,Ge),st===null?Oe=ot:st.sibling=ot,st=ot);return nt&&bs(P,Ge),Oe}for(Ae=m(Ae);!ot.done;Ge++,ot=V.next())ot=K(Ae,P,Ge,ot.value,re),ot!==null&&(o&&ot.alternate!==null&&Ae.delete(ot.key===null?Ge:ot.key),I=E(ot,I,Ge),st===null?Oe=ot:st.sibling=ot,st=ot);return o&&Ae.forEach(function(qV){return u(P,qV)}),nt&&bs(P,Ge),Oe}function wt(P,I,V,re){if(typeof V=="object"&&V!==null&&V.type===b&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case y:e:{for(var Oe=V.key;I!==null;){if(I.key===Oe){if(Oe=V.type,Oe===b){if(I.tag===7){h(P,I.sibling),re=x(I,V.props.children),re.return=P,P=re;break e}}else if(I.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===N&&tu(Oe)===I.type){h(P,I.sibling),re=x(I,V.props),vh(re,V),re.return=P,P=re;break e}h(P,I);break}else u(P,I);I=I.sibling}V.type===b?(re=Ql(V.props.children,P.mode,re,V.key),re.return=P,P=re):(re=Pm(V.type,V.key,V.props,null,P.mode,re),vh(re,V),re.return=P,P=re)}return C(P);case v:e:{for(Oe=V.key;I!==null;){if(I.key===Oe)if(I.tag===4&&I.stateNode.containerInfo===V.containerInfo&&I.stateNode.implementation===V.implementation){h(P,I.sibling),re=x(I,V.children||[]),re.return=P,P=re;break e}else{h(P,I);break}else u(P,I);I=I.sibling}re=v2(V,P.mode,re),re.return=P,P=re}return C(P);case N:return V=tu(V),wt(P,I,V,re)}if(R(V))return _e(P,I,V,re);if(X(V)){if(Oe=X(V),typeof Oe!="function")throw Error(i(150));return V=Oe.call(V),ze(P,I,V,re)}if(typeof V.then=="function")return wt(P,I,Qm(V),re);if(V.$$typeof===A)return wt(P,I,Ym(P,V),re);Zm(P,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,I!==null&&I.tag===6?(h(P,I.sibling),re=x(I,V),re.return=P,P=re):(h(P,I),re=y2(V,P.mode,re),re.return=P,P=re),C(P)):h(P,I)}return function(P,I,V,re){try{yh=0;var Oe=wt(P,I,V,re);return Vc=null,Oe}catch(Ae){if(Ae===Xc||Ae===Vm)throw Ae;var st=Vi(29,Ae,null,P.mode);return st.lanes=re,st.return=P,st}finally{}}}var iu=QD(!0),ZD=QD(!1),Ao=!1;function k2(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function D2(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Co(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function To(o,u,h){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(dt&2)!==0){var x=m.pending;return x===null?u.next=u:(u.next=x.next,x.next=u),m.pending=u,u=Im(o),RD(o,null,h),u}return qm(o,m,u,h),Im(o)}function bh(o,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var m=u.lanes;m&=o.pendingLanes,h|=m,u.lanes=h,Ik(o,h)}}function O2(o,u){var h=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var x=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var C={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};E===null?x=E=C:E=E.next=C,h=h.next}while(h!==null);E===null?x=E=u:E=E.next=u}else x=E=u;h={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=u}var N2=!1;function xh(){if(N2){var o=Yc;if(o!==null)throw o}}function Sh(o,u,h,m){N2=!1;var x=o.updateQueue;Ao=!1;var E=x.firstBaseUpdate,C=x.lastBaseUpdate,D=x.shared.pending;if(D!==null){x.shared.pending=null;var L=D,W=L.next;L.next=null,C===null?E=W:C.next=W,C=L;var te=o.alternate;te!==null&&(te=te.updateQueue,D=te.lastBaseUpdate,D!==C&&(D===null?te.firstBaseUpdate=W:D.next=W,te.lastBaseUpdate=L))}if(E!==null){var se=x.baseState;C=0,te=W=L=null,D=E;do{var Q=D.lane&-536870913,K=Q!==D.lane;if(K?(Je&Q)===Q:(m&Q)===Q){Q!==0&&Q===Gc&&(N2=!0),te!==null&&(te=te.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var _e=o,ze=D;Q=u;var wt=h;switch(ze.tag){case 1:if(_e=ze.payload,typeof _e=="function"){se=_e.call(wt,se,Q);break e}se=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=ze.payload,Q=typeof _e=="function"?_e.call(wt,se,Q):_e,Q==null)break e;se=g({},se,Q);break e;case 2:Ao=!0}}Q=D.callback,Q!==null&&(o.flags|=64,K&&(o.flags|=8192),K=x.callbacks,K===null?x.callbacks=[Q]:K.push(Q))}else K={lane:Q,tag:D.tag,payload:D.payload,callback:D.callback,next:null},te===null?(W=te=K,L=se):te=te.next=K,C|=Q;if(D=D.next,D===null){if(D=x.shared.pending,D===null)break;K=D,D=K.next,K.next=null,x.lastBaseUpdate=K,x.shared.pending=null}}while(!0);te===null&&(L=se),x.baseState=L,x.firstBaseUpdate=W,x.lastBaseUpdate=te,E===null&&(x.shared.lanes=0),Oo|=C,o.lanes=C,o.memoizedState=se}}function KD(o,u){if(typeof o!="function")throw Error(i(191,o));o.call(u)}function JD(o,u){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)KD(h[o],u)}var Wc=F(null),Km=F(0);function eO(o,u){o=ks,ae(Km,o),ae(Wc,u),ks=o|u.baseLanes}function R2(){ae(Km,ks),ae(Wc,Wc.current)}function z2(){ks=Km.current,G(Wc),G(Km)}var Wi=F(null),Er=null;function Mo(o){var u=o.alternate;ae(Wt,Wt.current&1),ae(Wi,o),Er===null&&(u===null||Wc.current!==null||u.memoizedState!==null)&&(Er=o)}function F2(o){ae(Wt,Wt.current),ae(Wi,o),Er===null&&(Er=o)}function tO(o){o.tag===22?(ae(Wt,Wt.current),ae(Wi,o),Er===null&&(Er=o)):$o()}function $o(){ae(Wt,Wt.current),ae(Wi,Wi.current)}function Qi(o){G(Wi),Er===o&&(Er=null),G(Wt)}var Wt=F(0);function Jm(o){for(var u=o;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||IS(h)||PS(h)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Es=0,qe=null,Et=null,an=null,e0=!1,Qc=!1,ru=!1,t0=0,Eh=0,Zc=null,DX=0;function Pt(){throw Error(i(321))}function L2(o,u){if(u===null)return!1;for(var h=0;h<u.length&&h<o.length;h++)if(!Xi(o[h],u[h]))return!1;return!0}function U2(o,u,h,m,x,E){return Es=E,qe=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,O.H=o===null||o.memoizedState===null?UO:J2,ru=!1,E=h(m,x),ru=!1,Qc&&(E=iO(u,h,m,x)),nO(o),E}function nO(o){O.H=Ah;var u=Et!==null&&Et.next!==null;if(Es=0,an=Et=qe=null,e0=!1,Eh=0,Zc=null,u)throw Error(i(300));o===null||sn||(o=o.dependencies,o!==null&&Gm(o)&&(sn=!0))}function iO(o,u,h,m){qe=o;var x=0;do{if(Qc&&(Zc=null),Eh=0,Qc=!1,25<=x)throw Error(i(301));if(x+=1,an=Et=null,o.updateQueue!=null){var E=o.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}O.H=BO,E=u(h,m)}while(Qc);return E}function OX(){var o=O.H,u=o.useState()[0];return u=typeof u.then=="function"?_h(u):u,o=o.useState()[0],(Et!==null?Et.memoizedState:null)!==o&&(qe.flags|=1024),u}function B2(){var o=t0!==0;return t0=0,o}function j2(o,u,h){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~h}function q2(o){if(e0){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}e0=!1}Es=0,an=Et=qe=null,Qc=!1,Eh=t0=0,Zc=null}function ai(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?qe.memoizedState=an=o:an=an.next=o,an}function Qt(){if(Et===null){var o=qe.alternate;o=o!==null?o.memoizedState:null}else o=Et.next;var u=an===null?qe.memoizedState:an.next;if(u!==null)an=u,Et=o;else{if(o===null)throw qe.alternate===null?Error(i(467)):Error(i(310));Et=o,o={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},an===null?qe.memoizedState=an=o:an=an.next=o}return an}function n0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _h(o){var u=Eh;return Eh+=1,Zc===null&&(Zc=[]),o=XD(Zc,o,u),u=qe,(an===null?u.memoizedState:an.next)===null&&(u=u.alternate,O.H=u===null||u.memoizedState===null?UO:J2),o}function i0(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return _h(o);if(o.$$typeof===A)return On(o)}throw Error(i(438,String(o)))}function I2(o){var u=null,h=qe.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var m=qe.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(u={data:m.data.map(function(x){return x.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=n0(),qe.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(o),m=0;m<o;m++)h[m]=j;return u.index++,h}function _s(o,u){return typeof u=="function"?u(o):u}function r0(o){var u=Qt();return P2(u,Et,o)}function P2(o,u,h){var m=o.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=h;var x=o.baseQueue,E=m.pending;if(E!==null){if(x!==null){var C=x.next;x.next=E.next,E.next=C}u.baseQueue=x=E,m.pending=null}if(E=o.baseState,x===null)o.memoizedState=E;else{u=x.next;var D=C=null,L=null,W=u,te=!1;do{var se=W.lane&-536870913;if(se!==W.lane?(Je&se)===se:(Es&se)===se){var Q=W.revertLane;if(Q===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),se===Gc&&(te=!0);else if((Es&Q)===Q){W=W.next,Q===Gc&&(te=!0);continue}else se={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(D=L=se,C=E):L=L.next=se,qe.lanes|=Q,Oo|=Q;se=W.action,ru&&h(E,se),E=W.hasEagerState?W.eagerState:h(E,se)}else Q={lane:se,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(D=L=Q,C=E):L=L.next=Q,qe.lanes|=se,Oo|=se;W=W.next}while(W!==null&&W!==u);if(L===null?C=E:L.next=D,!Xi(E,o.memoizedState)&&(sn=!0,te&&(h=Yc,h!==null)))throw h;o.memoizedState=E,o.baseState=C,o.baseQueue=L,m.lastRenderedState=E}return x===null&&(m.lanes=0),[o.memoizedState,m.dispatch]}function H2(o){var u=Qt(),h=u.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=o;var m=h.dispatch,x=h.pending,E=u.memoizedState;if(x!==null){h.pending=null;var C=x=x.next;do E=o(E,C.action),C=C.next;while(C!==x);Xi(E,u.memoizedState)||(sn=!0),u.memoizedState=E,u.baseQueue===null&&(u.baseState=E),h.lastRenderedState=E}return[E,m]}function rO(o,u,h){var m=qe,x=Qt(),E=nt;if(E){if(h===void 0)throw Error(i(407));h=h()}else h=u();var C=!Xi((Et||x).memoizedState,h);if(C&&(x.memoizedState=h,sn=!0),x=x.queue,X2(oO.bind(null,m,x,o),[o]),x.getSnapshot!==u||C||an!==null&&an.memoizedState.tag&1){if(m.flags|=2048,Kc(9,{destroy:void 0},sO.bind(null,m,x,h,u),null),Ct===null)throw Error(i(349));E||(Es&127)!==0||aO(m,u,h)}return h}function aO(o,u,h){o.flags|=16384,o={getSnapshot:u,value:h},u=qe.updateQueue,u===null?(u=n0(),qe.updateQueue=u,u.stores=[o]):(h=u.stores,h===null?u.stores=[o]:h.push(o))}function sO(o,u,h,m){u.value=h,u.getSnapshot=m,lO(u)&&uO(o)}function oO(o,u,h){return h(function(){lO(u)&&uO(o)})}function lO(o){var u=o.getSnapshot;o=o.value;try{var h=u();return!Xi(o,h)}catch{return!0}}function uO(o){var u=Wl(o,2);u!==null&&$i(u,o,2)}function G2(o){var u=ai();if(typeof o=="function"){var h=o;if(o=h(),ru){vo(!0);try{h()}finally{vo(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:o},u}function cO(o,u,h,m){return o.baseState=h,P2(o,Et,typeof m=="function"?m:_s)}function NX(o,u,h,m,x){if(o0(o))throw Error(i(485));if(o=u.action,o!==null){var E={payload:x,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){E.listeners.push(C)}};O.T!==null?h(!0):E.isTransition=!1,m(E),h=u.pending,h===null?(E.next=u.pending=E,fO(u,E)):(E.next=h.next,u.pending=h.next=E)}}function fO(o,u){var h=u.action,m=u.payload,x=o.state;if(u.isTransition){var E=O.T,C={};O.T=C;try{var D=h(x,m),L=O.S;L!==null&&L(C,D),dO(o,u,D)}catch(W){Y2(o,u,W)}finally{E!==null&&C.types!==null&&(E.types=C.types),O.T=E}}else try{E=h(x,m),dO(o,u,E)}catch(W){Y2(o,u,W)}}function dO(o,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){hO(o,u,m)},function(m){return Y2(o,u,m)}):hO(o,u,h)}function hO(o,u,h){u.status="fulfilled",u.value=h,gO(u),o.state=h,u=o.pending,u!==null&&(h=u.next,h===u?o.pending=null:(h=h.next,u.next=h,fO(o,h)))}function Y2(o,u,h){var m=o.pending;if(o.pending=null,m!==null){m=m.next;do u.status="rejected",u.reason=h,gO(u),u=u.next;while(u!==m)}o.action=null}function gO(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function pO(o,u){return u}function mO(o,u){if(nt){var h=Ct.formState;if(h!==null){e:{var m=qe;if(nt){if(kt){t:{for(var x=kt,E=Sr;x.nodeType!==8;){if(!E){x=null;break t}if(x=_r(x.nextSibling),x===null){x=null;break t}}E=x.data,x=E==="F!"||E==="F"?x:null}if(x){kt=_r(x.nextSibling),m=x.data==="F!";break e}}_o(m)}m=!1}m&&(u=h[0])}}return h=ai(),h.memoizedState=h.baseState=u,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pO,lastRenderedState:u},h.queue=m,h=zO.bind(null,qe,m),m.dispatch=h,m=G2(!1),E=K2.bind(null,qe,!1,m.queue),m=ai(),x={state:u,dispatch:null,action:o,pending:null},m.queue=x,h=NX.bind(null,qe,x,E,h),x.dispatch=h,m.memoizedState=o,[u,h,!1]}function yO(o){var u=Qt();return vO(u,Et,o)}function vO(o,u,h){if(u=P2(o,u,pO)[0],o=r0(_s)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var m=_h(u)}catch(C){throw C===Xc?Vm:C}else m=u;u=Qt();var x=u.queue,E=x.dispatch;return h!==u.memoizedState&&(qe.flags|=2048,Kc(9,{destroy:void 0},RX.bind(null,x,h),null)),[m,E,o]}function RX(o,u){o.action=u}function bO(o){var u=Qt(),h=Et;if(h!==null)return vO(u,h,o);Qt(),u=u.memoizedState,h=Qt();var m=h.queue.dispatch;return h.memoizedState=o,[u,m,!1]}function Kc(o,u,h,m){return o={tag:o,create:h,deps:m,inst:u,next:null},u=qe.updateQueue,u===null&&(u=n0(),qe.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=o.next=o:(m=h.next,h.next=o,o.next=m,u.lastEffect=o),o}function xO(){return Qt().memoizedState}function a0(o,u,h,m){var x=ai();qe.flags|=o,x.memoizedState=Kc(1|u,{destroy:void 0},h,m===void 0?null:m)}function s0(o,u,h,m){var x=Qt();m=m===void 0?null:m;var E=x.memoizedState.inst;Et!==null&&m!==null&&L2(m,Et.memoizedState.deps)?x.memoizedState=Kc(u,E,h,m):(qe.flags|=o,x.memoizedState=Kc(1|u,E,h,m))}function SO(o,u){a0(8390656,8,o,u)}function X2(o,u){s0(2048,8,o,u)}function zX(o){qe.flags|=4;var u=qe.updateQueue;if(u===null)u=n0(),qe.updateQueue=u,u.events=[o];else{var h=u.events;h===null?u.events=[o]:h.push(o)}}function EO(o){var u=Qt().memoizedState;return zX({ref:u,nextImpl:o}),function(){if((dt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}function _O(o,u){return s0(4,2,o,u)}function wO(o,u){return s0(4,4,o,u)}function AO(o,u){if(typeof u=="function"){o=o();var h=u(o);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function CO(o,u,h){h=h!=null?h.concat([o]):null,s0(4,4,AO.bind(null,u,o),h)}function V2(){}function TO(o,u){var h=Qt();u=u===void 0?null:u;var m=h.memoizedState;return u!==null&&L2(u,m[1])?m[0]:(h.memoizedState=[o,u],o)}function MO(o,u){var h=Qt();u=u===void 0?null:u;var m=h.memoizedState;if(u!==null&&L2(u,m[1]))return m[0];if(m=o(),ru){vo(!0);try{o()}finally{vo(!1)}}return h.memoizedState=[m,u],m}function W2(o,u,h){return h===void 0||(Es&1073741824)!==0&&(Je&261930)===0?o.memoizedState=u:(o.memoizedState=h,o=$5(),qe.lanes|=o,Oo|=o,h)}function $O(o,u,h,m){return Xi(h,u)?h:Wc.current!==null?(o=W2(o,h,m),Xi(o,u)||(sn=!0),o):(Es&42)===0||(Es&1073741824)!==0&&(Je&261930)===0?(sn=!0,o.memoizedState=h):(o=$5(),qe.lanes|=o,Oo|=o,u)}function kO(o,u,h,m,x){var E=B.p;B.p=E!==0&&8>E?E:8;var C=O.T,D={};O.T=D,K2(o,!1,u,h);try{var L=x(),W=O.S;if(W!==null&&W(D,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var te=kX(L,m);wh(o,u,te,Ji(o))}else wh(o,u,m,Ji(o))}catch(se){wh(o,u,{then:function(){},status:"rejected",reason:se},Ji())}finally{B.p=E,C!==null&&D.types!==null&&(C.types=D.types),O.T=C}}function FX(){}function Q2(o,u,h,m){if(o.tag!==5)throw Error(i(476));var x=DO(o).queue;kO(o,x,u,Y,h===null?FX:function(){return OO(o),h(m)})}function DO(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:Y},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:h},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function OO(o){var u=DO(o);u.next===null&&(u=o.alternate.memoizedState),wh(o,u.next.queue,{},Ji())}function Z2(){return On(qh)}function NO(){return Qt().memoizedState}function RO(){return Qt().memoizedState}function LX(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var h=Ji();o=Co(h);var m=To(u,o,h);m!==null&&($i(m,u,h),bh(m,u,h)),u={cache:C2()},o.payload=u;return}u=u.return}}function UX(o,u,h){var m=Ji();h={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},o0(o)?FO(u,h):(h=p2(o,u,h,m),h!==null&&($i(h,o,m),LO(h,u,m)))}function zO(o,u,h){var m=Ji();wh(o,u,h,m)}function wh(o,u,h,m){var x={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(o0(o))FO(u,x);else{var E=o.alternate;if(o.lanes===0&&(E===null||E.lanes===0)&&(E=u.lastRenderedReducer,E!==null))try{var C=u.lastRenderedState,D=E(C,h);if(x.hasEagerState=!0,x.eagerState=D,Xi(D,C))return qm(o,u,x,0),Ct===null&&jm(),!1}catch{}finally{}if(h=p2(o,u,x,m),h!==null)return $i(h,o,m),LO(h,u,m),!0}return!1}function K2(o,u,h,m){if(m={lane:2,revertLane:kS(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},o0(o)){if(u)throw Error(i(479))}else u=p2(o,h,m,2),u!==null&&$i(u,o,2)}function o0(o){var u=o.alternate;return o===qe||u!==null&&u===qe}function FO(o,u){Qc=e0=!0;var h=o.pending;h===null?u.next=u:(u.next=h.next,h.next=u),o.pending=u}function LO(o,u,h){if((h&4194048)!==0){var m=u.lanes;m&=o.pendingLanes,h|=m,u.lanes=h,Ik(o,h)}}var Ah={readContext:On,use:i0,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt};Ah.useEffectEvent=Pt;var UO={readContext:On,use:i0,useCallback:function(o,u){return ai().memoizedState=[o,u===void 0?null:u],o},useContext:On,useEffect:SO,useImperativeHandle:function(o,u,h){h=h!=null?h.concat([o]):null,a0(4194308,4,AO.bind(null,u,o),h)},useLayoutEffect:function(o,u){return a0(4194308,4,o,u)},useInsertionEffect:function(o,u){a0(4,2,o,u)},useMemo:function(o,u){var h=ai();u=u===void 0?null:u;var m=o();if(ru){vo(!0);try{o()}finally{vo(!1)}}return h.memoizedState=[m,u],m},useReducer:function(o,u,h){var m=ai();if(h!==void 0){var x=h(u);if(ru){vo(!0);try{h(u)}finally{vo(!1)}}}else x=u;return m.memoizedState=m.baseState=x,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:x},m.queue=o,o=o.dispatch=UX.bind(null,qe,o),[m.memoizedState,o]},useRef:function(o){var u=ai();return o={current:o},u.memoizedState=o},useState:function(o){o=G2(o);var u=o.queue,h=zO.bind(null,qe,u);return u.dispatch=h,[o.memoizedState,h]},useDebugValue:V2,useDeferredValue:function(o,u){var h=ai();return W2(h,o,u)},useTransition:function(){var o=G2(!1);return o=kO.bind(null,qe,o.queue,!0,!1),ai().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,h){var m=qe,x=ai();if(nt){if(h===void 0)throw Error(i(407));h=h()}else{if(h=u(),Ct===null)throw Error(i(349));(Je&127)!==0||aO(m,u,h)}x.memoizedState=h;var E={value:h,getSnapshot:u};return x.queue=E,SO(oO.bind(null,m,E,o),[o]),m.flags|=2048,Kc(9,{destroy:void 0},sO.bind(null,m,E,h,u),null),h},useId:function(){var o=ai(),u=Ct.identifierPrefix;if(nt){var h=Ca,m=Aa;h=(m&~(1<<32-Yi(m)-1)).toString(32)+h,u="_"+u+"R_"+h,h=t0++,0<h&&(u+="H"+h.toString(32)),u+="_"}else h=DX++,u="_"+u+"r_"+h.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:Z2,useFormState:mO,useActionState:mO,useOptimistic:function(o){var u=ai();u.memoizedState=u.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=K2.bind(null,qe,!0,h),h.dispatch=u,[o,u]},useMemoCache:I2,useCacheRefresh:function(){return ai().memoizedState=LX.bind(null,qe)},useEffectEvent:function(o){var u=ai(),h={impl:o};return u.memoizedState=h,function(){if((dt&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}},J2={readContext:On,use:i0,useCallback:TO,useContext:On,useEffect:X2,useImperativeHandle:CO,useInsertionEffect:_O,useLayoutEffect:wO,useMemo:MO,useReducer:r0,useRef:xO,useState:function(){return r0(_s)},useDebugValue:V2,useDeferredValue:function(o,u){var h=Qt();return $O(h,Et.memoizedState,o,u)},useTransition:function(){var o=r0(_s)[0],u=Qt().memoizedState;return[typeof o=="boolean"?o:_h(o),u]},useSyncExternalStore:rO,useId:NO,useHostTransitionStatus:Z2,useFormState:yO,useActionState:yO,useOptimistic:function(o,u){var h=Qt();return cO(h,Et,o,u)},useMemoCache:I2,useCacheRefresh:RO};J2.useEffectEvent=EO;var BO={readContext:On,use:i0,useCallback:TO,useContext:On,useEffect:X2,useImperativeHandle:CO,useInsertionEffect:_O,useLayoutEffect:wO,useMemo:MO,useReducer:H2,useRef:xO,useState:function(){return H2(_s)},useDebugValue:V2,useDeferredValue:function(o,u){var h=Qt();return Et===null?W2(h,o,u):$O(h,Et.memoizedState,o,u)},useTransition:function(){var o=H2(_s)[0],u=Qt().memoizedState;return[typeof o=="boolean"?o:_h(o),u]},useSyncExternalStore:rO,useId:NO,useHostTransitionStatus:Z2,useFormState:bO,useActionState:bO,useOptimistic:function(o,u){var h=Qt();return Et!==null?cO(h,Et,o,u):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:I2,useCacheRefresh:RO};BO.useEffectEvent=EO;function eS(o,u,h,m){u=o.memoizedState,h=h(m,u),h=h==null?u:g({},u,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var tS={enqueueSetState:function(o,u,h){o=o._reactInternals;var m=Ji(),x=Co(m);x.payload=u,h!=null&&(x.callback=h),u=To(o,x,m),u!==null&&($i(u,o,m),bh(u,o,m))},enqueueReplaceState:function(o,u,h){o=o._reactInternals;var m=Ji(),x=Co(m);x.tag=1,x.payload=u,h!=null&&(x.callback=h),u=To(o,x,m),u!==null&&($i(u,o,m),bh(u,o,m))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var h=Ji(),m=Co(h);m.tag=2,u!=null&&(m.callback=u),u=To(o,m,h),u!==null&&($i(u,o,h),bh(u,o,h))}};function jO(o,u,h,m,x,E,C){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,E,C):u.prototype&&u.prototype.isPureReactComponent?!fh(h,m)||!fh(x,E):!0}function qO(o,u,h,m){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,m),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,m),u.state!==o&&tS.enqueueReplaceState(u,u.state,null)}function au(o,u){var h=u;if("ref"in u){h={};for(var m in u)m!=="ref"&&(h[m]=u[m])}if(o=o.defaultProps){h===u&&(h=g({},h));for(var x in o)h[x]===void 0&&(h[x]=o[x])}return h}function IO(o){Bm(o)}function PO(o){console.error(o)}function HO(o){Bm(o)}function l0(o,u){try{var h=o.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(m){setTimeout(function(){throw m})}}function GO(o,u,h){try{var m=o.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function nS(o,u,h){return h=Co(h),h.tag=3,h.payload={element:null},h.callback=function(){l0(o,u)},h}function YO(o){return o=Co(o),o.tag=3,o}function XO(o,u,h,m){var x=h.type.getDerivedStateFromError;if(typeof x=="function"){var E=m.value;o.payload=function(){return x(E)},o.callback=function(){GO(u,h,m)}}var C=h.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(o.callback=function(){GO(u,h,m),typeof x!="function"&&(No===null?No=new Set([this]):No.add(this));var D=m.stack;this.componentDidCatch(m.value,{componentStack:D!==null?D:""})})}function BX(o,u,h,m,x){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(u=h.alternate,u!==null&&Hc(u,h,x,!0),h=Wi.current,h!==null){switch(h.tag){case 31:case 13:return Er===null?x0():h.alternate===null&&Ht===0&&(Ht=3),h.flags&=-257,h.flags|=65536,h.lanes=x,m===Wm?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([m]):u.add(m),TS(o,m,x)),!1;case 22:return h.flags|=65536,m===Wm?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([m]):h.add(m)),TS(o,m,x)),!1}throw Error(i(435,h.tag))}return TS(o,m,x),x0(),!1}if(nt)return u=Wi.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=x,m!==S2&&(o=Error(i(422),{cause:m}),gh(vr(o,h)))):(m!==S2&&(u=Error(i(423),{cause:m}),gh(vr(u,h))),o=o.current.alternate,o.flags|=65536,x&=-x,o.lanes|=x,m=vr(m,h),x=nS(o.stateNode,m,x),O2(o,x),Ht!==4&&(Ht=2)),!1;var E=Error(i(520),{cause:m});if(E=vr(E,h),Nh===null?Nh=[E]:Nh.push(E),Ht!==4&&(Ht=2),u===null)return!0;m=vr(m,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,o=x&-x,h.lanes|=o,o=nS(h.stateNode,m,o),O2(h,o),!1;case 1:if(u=h.type,E=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(No===null||!No.has(E))))return h.flags|=65536,x&=-x,h.lanes|=x,x=YO(x),XO(x,o,h,m),O2(h,x),!1}h=h.return}while(h!==null);return!1}var iS=Error(i(461)),sn=!1;function Nn(o,u,h,m){u.child=o===null?ZD(u,null,h,m):iu(u,o.child,h,m)}function VO(o,u,h,m,x){h=h.render;var E=u.ref;if("ref"in m){var C={};for(var D in m)D!=="ref"&&(C[D]=m[D])}else C=m;return Jl(u),m=U2(o,u,h,C,E,x),D=B2(),o!==null&&!sn?(j2(o,u,x),ws(o,u,x)):(nt&&D&&b2(u),u.flags|=1,Nn(o,u,m,x),u.child)}function WO(o,u,h,m,x){if(o===null){var E=h.type;return typeof E=="function"&&!m2(E)&&E.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=E,QO(o,u,E,m,x)):(o=Pm(h.type,null,m,u,u.mode,x),o.ref=u.ref,o.return=u,u.child=o)}if(E=o.child,!fS(o,x)){var C=E.memoizedProps;if(h=h.compare,h=h!==null?h:fh,h(C,m)&&o.ref===u.ref)return ws(o,u,x)}return u.flags|=1,o=vs(E,m),o.ref=u.ref,o.return=u,u.child=o}function QO(o,u,h,m,x){if(o!==null){var E=o.memoizedProps;if(fh(E,m)&&o.ref===u.ref)if(sn=!1,u.pendingProps=m=E,fS(o,x))(o.flags&131072)!==0&&(sn=!0);else return u.lanes=o.lanes,ws(o,u,x)}return rS(o,u,h,m,x)}function ZO(o,u,h,m){var x=m.children,E=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((u.flags&128)!==0){if(E=E!==null?E.baseLanes|h:h,o!==null){for(m=u.child=o.child,x=0;m!==null;)x=x|m.lanes|m.childLanes,m=m.sibling;m=x&~E}else m=0,u.child=null;return KO(o,u,E,h,m)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&Xm(u,E!==null?E.cachePool:null),E!==null?eO(u,E):R2(),tO(u);else return m=u.lanes=536870912,KO(o,u,E!==null?E.baseLanes|h:h,h,m)}else E!==null?(Xm(u,E.cachePool),eO(u,E),$o(),u.memoizedState=null):(o!==null&&Xm(u,null),R2(),$o());return Nn(o,u,x,h),u.child}function Ch(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function KO(o,u,h,m,x){var E=M2();return E=E===null?null:{parent:rn._currentValue,pool:E},u.memoizedState={baseLanes:h,cachePool:E},o!==null&&Xm(u,null),R2(),tO(u),o!==null&&Hc(o,u,m,!0),u.childLanes=x,null}function u0(o,u){return u=f0({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function JO(o,u,h){return iu(u,o.child,null,h),o=u0(u,u.pendingProps),o.flags|=2,Qi(u),u.memoizedState=null,o}function jX(o,u,h){var m=u.pendingProps,x=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(nt){if(m.mode==="hidden")return o=u0(u,m),u.lanes=536870912,Ch(null,o);if(F2(u),(o=kt)?(o=fN(o,Sr),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:So!==null?{id:Aa,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},h=FD(o),h.return=u,u.child=h,Dn=u,kt=null)):o=null,o===null)throw _o(u);return u.lanes=536870912,null}return u0(u,m)}var E=o.memoizedState;if(E!==null){var C=E.dehydrated;if(F2(u),x)if(u.flags&256)u.flags&=-257,u=JO(o,u,h);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(i(558));else if(sn||Hc(o,u,h,!1),x=(h&o.childLanes)!==0,sn||x){if(m=Ct,m!==null&&(C=Pk(m,h),C!==0&&C!==E.retryLane))throw E.retryLane=C,Wl(o,C),$i(m,o,C),iS;x0(),u=JO(o,u,h)}else o=E.treeContext,kt=_r(C.nextSibling),Dn=u,nt=!0,Eo=null,Sr=!1,o!==null&&BD(u,o),u=u0(u,m),u.flags|=4096;return u}return o=vs(o.child,{mode:m.mode,children:m.children}),o.ref=u.ref,u.child=o,o.return=u,o}function c0(o,u){var h=u.ref;if(h===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(o===null||o.ref!==h)&&(u.flags|=4194816)}}function rS(o,u,h,m,x){return Jl(u),h=U2(o,u,h,m,void 0,x),m=B2(),o!==null&&!sn?(j2(o,u,x),ws(o,u,x)):(nt&&m&&b2(u),u.flags|=1,Nn(o,u,h,x),u.child)}function e5(o,u,h,m,x,E){return Jl(u),u.updateQueue=null,h=iO(u,m,h,x),nO(o),m=B2(),o!==null&&!sn?(j2(o,u,E),ws(o,u,E)):(nt&&m&&b2(u),u.flags|=1,Nn(o,u,h,E),u.child)}function t5(o,u,h,m,x){if(Jl(u),u.stateNode===null){var E=jc,C=h.contextType;typeof C=="object"&&C!==null&&(E=On(C)),E=new h(m,E),u.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=tS,u.stateNode=E,E._reactInternals=u,E=u.stateNode,E.props=m,E.state=u.memoizedState,E.refs={},k2(u),C=h.contextType,E.context=typeof C=="object"&&C!==null?On(C):jc,E.state=u.memoizedState,C=h.getDerivedStateFromProps,typeof C=="function"&&(eS(u,h,C,m),E.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(C=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),C!==E.state&&tS.enqueueReplaceState(E,E.state,null),Sh(u,m,E,x),xh(),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308),m=!0}else if(o===null){E=u.stateNode;var D=u.memoizedProps,L=au(h,D);E.props=L;var W=E.context,te=h.contextType;C=jc,typeof te=="object"&&te!==null&&(C=On(te));var se=h.getDerivedStateFromProps;te=typeof se=="function"||typeof E.getSnapshotBeforeUpdate=="function",D=u.pendingProps!==D,te||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(D||W!==C)&&qO(u,E,m,C),Ao=!1;var Q=u.memoizedState;E.state=Q,Sh(u,m,E,x),xh(),W=u.memoizedState,D||Q!==W||Ao?(typeof se=="function"&&(eS(u,h,se,m),W=u.memoizedState),(L=Ao||jO(u,h,L,m,Q,W,C))?(te||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(u.flags|=4194308)):(typeof E.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=m,u.memoizedState=W),E.props=m,E.state=W,E.context=C,m=L):(typeof E.componentDidMount=="function"&&(u.flags|=4194308),m=!1)}else{E=u.stateNode,D2(o,u),C=u.memoizedProps,te=au(h,C),E.props=te,se=u.pendingProps,Q=E.context,W=h.contextType,L=jc,typeof W=="object"&&W!==null&&(L=On(W)),D=h.getDerivedStateFromProps,(W=typeof D=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==se||Q!==L)&&qO(u,E,m,L),Ao=!1,Q=u.memoizedState,E.state=Q,Sh(u,m,E,x),xh();var K=u.memoizedState;C!==se||Q!==K||Ao||o!==null&&o.dependencies!==null&&Gm(o.dependencies)?(typeof D=="function"&&(eS(u,h,D,m),K=u.memoizedState),(te=Ao||jO(u,h,te,m,Q,K,L)||o!==null&&o.dependencies!==null&&Gm(o.dependencies))?(W||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,K,L),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,K,L)),typeof E.componentDidUpdate=="function"&&(u.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof E.componentDidUpdate!="function"||C===o.memoizedProps&&Q===o.memoizedState||(u.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&Q===o.memoizedState||(u.flags|=1024),u.memoizedProps=m,u.memoizedState=K),E.props=m,E.state=K,E.context=L,m=te):(typeof E.componentDidUpdate!="function"||C===o.memoizedProps&&Q===o.memoizedState||(u.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&Q===o.memoizedState||(u.flags|=1024),m=!1)}return E=m,c0(o,u),m=(u.flags&128)!==0,E||m?(E=u.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:E.render(),u.flags|=1,o!==null&&m?(u.child=iu(u,o.child,null,x),u.child=iu(u,null,h,x)):Nn(o,u,h,x),u.memoizedState=E.state,o=u.child):o=ws(o,u,x),o}function n5(o,u,h,m){return Zl(),u.flags|=256,Nn(o,u,h,m),u.child}var aS={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sS(o){return{baseLanes:o,cachePool:GD()}}function oS(o,u,h){return o=o!==null?o.childLanes&~h:0,u&&(o|=Ki),o}function i5(o,u,h){var m=u.pendingProps,x=!1,E=(u.flags&128)!==0,C;if((C=E)||(C=o!==null&&o.memoizedState===null?!1:(Wt.current&2)!==0),C&&(x=!0,u.flags&=-129),C=(u.flags&32)!==0,u.flags&=-33,o===null){if(nt){if(x?Mo(u):$o(),(o=kt)?(o=fN(o,Sr),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:So!==null?{id:Aa,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},h=FD(o),h.return=u,u.child=h,Dn=u,kt=null)):o=null,o===null)throw _o(u);return PS(o)?u.lanes=32:u.lanes=536870912,null}var D=m.children;return m=m.fallback,x?($o(),x=u.mode,D=f0({mode:"hidden",children:D},x),m=Ql(m,x,h,null),D.return=u,m.return=u,D.sibling=m,u.child=D,m=u.child,m.memoizedState=sS(h),m.childLanes=oS(o,C,h),u.memoizedState=aS,Ch(null,m)):(Mo(u),lS(u,D))}var L=o.memoizedState;if(L!==null&&(D=L.dehydrated,D!==null)){if(E)u.flags&256?(Mo(u),u.flags&=-257,u=uS(o,u,h)):u.memoizedState!==null?($o(),u.child=o.child,u.flags|=128,u=null):($o(),D=m.fallback,x=u.mode,m=f0({mode:"visible",children:m.children},x),D=Ql(D,x,h,null),D.flags|=2,m.return=u,D.return=u,m.sibling=D,u.child=m,iu(u,o.child,null,h),m=u.child,m.memoizedState=sS(h),m.childLanes=oS(o,C,h),u.memoizedState=aS,u=Ch(null,m));else if(Mo(u),PS(D)){if(C=D.nextSibling&&D.nextSibling.dataset,C)var W=C.dgst;C=W,m=Error(i(419)),m.stack="",m.digest=C,gh({value:m,source:null,stack:null}),u=uS(o,u,h)}else if(sn||Hc(o,u,h,!1),C=(h&o.childLanes)!==0,sn||C){if(C=Ct,C!==null&&(m=Pk(C,h),m!==0&&m!==L.retryLane))throw L.retryLane=m,Wl(o,m),$i(C,o,m),iS;IS(D)||x0(),u=uS(o,u,h)}else IS(D)?(u.flags|=192,u.child=o.child,u=null):(o=L.treeContext,kt=_r(D.nextSibling),Dn=u,nt=!0,Eo=null,Sr=!1,o!==null&&BD(u,o),u=lS(u,m.children),u.flags|=4096);return u}return x?($o(),D=m.fallback,x=u.mode,L=o.child,W=L.sibling,m=vs(L,{mode:"hidden",children:m.children}),m.subtreeFlags=L.subtreeFlags&65011712,W!==null?D=vs(W,D):(D=Ql(D,x,h,null),D.flags|=2),D.return=u,m.return=u,m.sibling=D,u.child=m,Ch(null,m),m=u.child,D=o.child.memoizedState,D===null?D=sS(h):(x=D.cachePool,x!==null?(L=rn._currentValue,x=x.parent!==L?{parent:L,pool:L}:x):x=GD(),D={baseLanes:D.baseLanes|h,cachePool:x}),m.memoizedState=D,m.childLanes=oS(o,C,h),u.memoizedState=aS,Ch(o.child,m)):(Mo(u),h=o.child,o=h.sibling,h=vs(h,{mode:"visible",children:m.children}),h.return=u,h.sibling=null,o!==null&&(C=u.deletions,C===null?(u.deletions=[o],u.flags|=16):C.push(o)),u.child=h,u.memoizedState=null,h)}function lS(o,u){return u=f0({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function f0(o,u){return o=Vi(22,o,null,u),o.lanes=0,o}function uS(o,u,h){return iu(u,o.child,null,h),o=lS(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function r5(o,u,h){o.lanes|=u;var m=o.alternate;m!==null&&(m.lanes|=u),w2(o.return,u,h)}function cS(o,u,h,m,x,E){var C=o.memoizedState;C===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:x,treeForkCount:E}:(C.isBackwards=u,C.rendering=null,C.renderingStartTime=0,C.last=m,C.tail=h,C.tailMode=x,C.treeForkCount=E)}function a5(o,u,h){var m=u.pendingProps,x=m.revealOrder,E=m.tail;m=m.children;var C=Wt.current,D=(C&2)!==0;if(D?(C=C&1|2,u.flags|=128):C&=1,ae(Wt,C),Nn(o,u,m,h),m=nt?hh:0,!D&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&r5(o,h,u);else if(o.tag===19)r5(o,h,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(x){case"forwards":for(h=u.child,x=null;h!==null;)o=h.alternate,o!==null&&Jm(o)===null&&(x=h),h=h.sibling;h=x,h===null?(x=u.child,u.child=null):(x=h.sibling,h.sibling=null),cS(u,!1,x,h,E,m);break;case"backwards":case"unstable_legacy-backwards":for(h=null,x=u.child,u.child=null;x!==null;){if(o=x.alternate,o!==null&&Jm(o)===null){u.child=x;break}o=x.sibling,x.sibling=h,h=x,x=o}cS(u,!0,h,null,E,m);break;case"together":cS(u,!1,null,null,void 0,m);break;default:u.memoizedState=null}return u.child}function ws(o,u,h){if(o!==null&&(u.dependencies=o.dependencies),Oo|=u.lanes,(h&u.childLanes)===0)if(o!==null){if(Hc(o,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(i(153));if(u.child!==null){for(o=u.child,h=vs(o,o.pendingProps),u.child=h,h.return=u;o.sibling!==null;)o=o.sibling,h=h.sibling=vs(o,o.pendingProps),h.return=u;h.sibling=null}return u.child}function fS(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&Gm(o)))}function qX(o,u,h){switch(u.tag){case 3:Rt(u,u.stateNode.containerInfo),wo(u,rn,o.memoizedState.cache),Zl();break;case 27:case 5:Fe(u);break;case 4:Rt(u,u.stateNode.containerInfo);break;case 10:wo(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,F2(u),null;break;case 13:var m=u.memoizedState;if(m!==null)return m.dehydrated!==null?(Mo(u),u.flags|=128,null):(h&u.child.childLanes)!==0?i5(o,u,h):(Mo(u),o=ws(o,u,h),o!==null?o.sibling:null);Mo(u);break;case 19:var x=(o.flags&128)!==0;if(m=(h&u.childLanes)!==0,m||(Hc(o,u,h,!1),m=(h&u.childLanes)!==0),x){if(m)return a5(o,u,h);u.flags|=128}if(x=u.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),ae(Wt,Wt.current),m)break;return null;case 22:return u.lanes=0,ZO(o,u,h,u.pendingProps);case 24:wo(u,rn,o.memoizedState.cache)}return ws(o,u,h)}function s5(o,u,h){if(o!==null)if(o.memoizedProps!==u.pendingProps)sn=!0;else{if(!fS(o,h)&&(u.flags&128)===0)return sn=!1,qX(o,u,h);sn=(o.flags&131072)!==0}else sn=!1,nt&&(u.flags&1048576)!==0&&UD(u,hh,u.index);switch(u.lanes=0,u.tag){case 16:e:{var m=u.pendingProps;if(o=tu(u.elementType),u.type=o,typeof o=="function")m2(o)?(m=au(o,m),u.tag=1,u=t5(null,u,o,m,h)):(u.tag=0,u=rS(null,u,o,m,h));else{if(o!=null){var x=o.$$typeof;if(x===T){u.tag=11,u=VO(null,u,o,m,h);break e}else if(x===M){u.tag=14,u=WO(null,u,o,m,h);break e}}throw u=q(o)||o,Error(i(306,u,""))}}return u;case 0:return rS(o,u,u.type,u.pendingProps,h);case 1:return m=u.type,x=au(m,u.pendingProps),t5(o,u,m,x,h);case 3:e:{if(Rt(u,u.stateNode.containerInfo),o===null)throw Error(i(387));m=u.pendingProps;var E=u.memoizedState;x=E.element,D2(o,u),Sh(u,m,null,h);var C=u.memoizedState;if(m=C.cache,wo(u,rn,m),m!==E.cache&&A2(u,[rn],h,!0),xh(),m=C.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:C.cache},u.updateQueue.baseState=E,u.memoizedState=E,u.flags&256){u=n5(o,u,m,h);break e}else if(m!==x){x=vr(Error(i(424)),u),gh(x),u=n5(o,u,m,h);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(kt=_r(o.firstChild),Dn=u,nt=!0,Eo=null,Sr=!0,h=ZD(u,null,m,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Zl(),m===x){u=ws(o,u,h);break e}Nn(o,u,m,h)}u=u.child}return u;case 26:return c0(o,u),o===null?(h=yN(u.type,null,u.pendingProps,null))?u.memoizedState=h:nt||(h=u.type,o=u.pendingProps,m=T0(Me.current).createElement(h),m[kn]=u,m[_i]=o,Rn(m,h,o),vn(m),u.stateNode=m):u.memoizedState=yN(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return Fe(u),o===null&&nt&&(m=u.stateNode=gN(u.type,u.pendingProps,Me.current),Dn=u,Sr=!0,x=kt,Lo(u.type)?(HS=x,kt=_r(m.firstChild)):kt=x),Nn(o,u,u.pendingProps.children,h),c0(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&nt&&((x=m=kt)&&(m=yV(m,u.type,u.pendingProps,Sr),m!==null?(u.stateNode=m,Dn=u,kt=_r(m.firstChild),Sr=!1,x=!0):x=!1),x||_o(u)),Fe(u),x=u.type,E=u.pendingProps,C=o!==null?o.memoizedProps:null,m=E.children,BS(x,E)?m=null:C!==null&&BS(x,C)&&(u.flags|=32),u.memoizedState!==null&&(x=U2(o,u,OX,null,null,h),qh._currentValue=x),c0(o,u),Nn(o,u,m,h),u.child;case 6:return o===null&&nt&&((o=h=kt)&&(h=vV(h,u.pendingProps,Sr),h!==null?(u.stateNode=h,Dn=u,kt=null,o=!0):o=!1),o||_o(u)),null;case 13:return i5(o,u,h);case 4:return Rt(u,u.stateNode.containerInfo),m=u.pendingProps,o===null?u.child=iu(u,null,m,h):Nn(o,u,m,h),u.child;case 11:return VO(o,u,u.type,u.pendingProps,h);case 7:return Nn(o,u,u.pendingProps,h),u.child;case 8:return Nn(o,u,u.pendingProps.children,h),u.child;case 12:return Nn(o,u,u.pendingProps.children,h),u.child;case 10:return m=u.pendingProps,wo(u,u.type,m.value),Nn(o,u,m.children,h),u.child;case 9:return x=u.type._context,m=u.pendingProps.children,Jl(u),x=On(x),m=m(x),u.flags|=1,Nn(o,u,m,h),u.child;case 14:return WO(o,u,u.type,u.pendingProps,h);case 15:return QO(o,u,u.type,u.pendingProps,h);case 19:return a5(o,u,h);case 31:return jX(o,u,h);case 22:return ZO(o,u,h,u.pendingProps);case 24:return Jl(u),m=On(rn),o===null?(x=M2(),x===null&&(x=Ct,E=C2(),x.pooledCache=E,E.refCount++,E!==null&&(x.pooledCacheLanes|=h),x=E),u.memoizedState={parent:m,cache:x},k2(u),wo(u,rn,x)):((o.lanes&h)!==0&&(D2(o,u),Sh(u,null,null,h),xh()),x=o.memoizedState,E=u.memoizedState,x.parent!==m?(x={parent:m,cache:m},u.memoizedState=x,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=x),wo(u,rn,m)):(m=E.cache,wo(u,rn,m),m!==x.cache&&A2(u,[rn],h,!0))),Nn(o,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(i(156,u.tag))}function As(o){o.flags|=4}function dS(o,u,h,m,x){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(x&335544128)===x)if(o.stateNode.complete)o.flags|=8192;else if(N5())o.flags|=8192;else throw nu=Wm,$2}else o.flags&=-16777217}function o5(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!EN(u))if(N5())o.flags|=8192;else throw nu=Wm,$2}function d0(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?jk():536870912,o.lanes|=u,nf|=u)}function Th(o,u){if(!nt)switch(o.tailMode){case"hidden":u=o.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function Dt(o){var u=o.alternate!==null&&o.alternate.child===o.child,h=0,m=0;if(u)for(var x=o.child;x!==null;)h|=x.lanes|x.childLanes,m|=x.subtreeFlags&65011712,m|=x.flags&65011712,x.return=o,x=x.sibling;else for(x=o.child;x!==null;)h|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=o,x=x.sibling;return o.subtreeFlags|=m,o.childLanes=h,u}function IX(o,u,h){var m=u.pendingProps;switch(x2(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(u),null;case 1:return Dt(u),null;case 3:return h=u.stateNode,m=null,o!==null&&(m=o.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),Ss(rn),pe(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(Pc(u)?As(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,E2())),Dt(u),null;case 26:var x=u.type,E=u.memoizedState;return o===null?(As(u),E!==null?(Dt(u),o5(u,E)):(Dt(u),dS(u,x,null,m,h))):E?E!==o.memoizedState?(As(u),Dt(u),o5(u,E)):(Dt(u),u.flags&=-16777217):(o=o.memoizedProps,o!==m&&As(u),Dt(u),dS(u,x,o,m,h)),null;case 27:if(je(u),h=Me.current,x=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==m&&As(u);else{if(!m){if(u.stateNode===null)throw Error(i(166));return Dt(u),null}o=he.current,Pc(u)?jD(u):(o=gN(x,m,h),u.stateNode=o,As(u))}return Dt(u),null;case 5:if(je(u),x=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==m&&As(u);else{if(!m){if(u.stateNode===null)throw Error(i(166));return Dt(u),null}if(E=he.current,Pc(u))jD(u);else{var C=T0(Me.current);switch(E){case 1:E=C.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:E=C.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":E=C.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":E=C.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":E=C.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof m.is=="string"?C.createElement("select",{is:m.is}):C.createElement("select"),m.multiple?E.multiple=!0:m.size&&(E.size=m.size);break;default:E=typeof m.is=="string"?C.createElement(x,{is:m.is}):C.createElement(x)}}E[kn]=u,E[_i]=m;e:for(C=u.child;C!==null;){if(C.tag===5||C.tag===6)E.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===u)break e;for(;C.sibling===null;){if(C.return===null||C.return===u)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}u.stateNode=E;e:switch(Rn(E,x,m),x){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&As(u)}}return Dt(u),dS(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,h),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==m&&As(u);else{if(typeof m!="string"&&u.stateNode===null)throw Error(i(166));if(o=Me.current,Pc(u)){if(o=u.stateNode,h=u.memoizedProps,m=null,x=Dn,x!==null)switch(x.tag){case 27:case 5:m=x.memoizedProps}o[kn]=u,o=!!(o.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||iN(o.nodeValue,h)),o||_o(u,!0)}else o=T0(o).createTextNode(m),o[kn]=u,u.stateNode=o}return Dt(u),null;case 31:if(h=u.memoizedState,o===null||o.memoizedState!==null){if(m=Pc(u),h!==null){if(o===null){if(!m)throw Error(i(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[kn]=u}else Zl(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Dt(u),o=!1}else h=E2(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=h),o=!0;if(!o)return u.flags&256?(Qi(u),u):(Qi(u),null);if((u.flags&128)!==0)throw Error(i(558))}return Dt(u),null;case 13:if(m=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(x=Pc(u),m!==null&&m.dehydrated!==null){if(o===null){if(!x)throw Error(i(318));if(x=u.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[kn]=u}else Zl(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Dt(u),x=!1}else x=E2(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=x),x=!0;if(!x)return u.flags&256?(Qi(u),u):(Qi(u),null)}return Qi(u),(u.flags&128)!==0?(u.lanes=h,u):(h=m!==null,o=o!==null&&o.memoizedState!==null,h&&(m=u.child,x=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(x=m.alternate.memoizedState.cachePool.pool),E=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==x&&(m.flags|=2048)),h!==o&&h&&(u.child.flags|=8192),d0(u,u.updateQueue),Dt(u),null);case 4:return pe(),o===null&&RS(u.stateNode.containerInfo),Dt(u),null;case 10:return Ss(u.type),Dt(u),null;case 19:if(G(Wt),m=u.memoizedState,m===null)return Dt(u),null;if(x=(u.flags&128)!==0,E=m.rendering,E===null)if(x)Th(m,!1);else{if(Ht!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(E=Jm(o),E!==null){for(u.flags|=128,Th(m,!1),o=E.updateQueue,u.updateQueue=o,d0(u,o),u.subtreeFlags=0,o=h,h=u.child;h!==null;)zD(h,o),h=h.sibling;return ae(Wt,Wt.current&1|2),nt&&bs(u,m.treeForkCount),u.child}o=o.sibling}m.tail!==null&&Hi()>y0&&(u.flags|=128,x=!0,Th(m,!1),u.lanes=4194304)}else{if(!x)if(o=Jm(E),o!==null){if(u.flags|=128,x=!0,o=o.updateQueue,u.updateQueue=o,d0(u,o),Th(m,!0),m.tail===null&&m.tailMode==="hidden"&&!E.alternate&&!nt)return Dt(u),null}else 2*Hi()-m.renderingStartTime>y0&&h!==536870912&&(u.flags|=128,x=!0,Th(m,!1),u.lanes=4194304);m.isBackwards?(E.sibling=u.child,u.child=E):(o=m.last,o!==null?o.sibling=E:u.child=E,m.last=E)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=Hi(),o.sibling=null,h=Wt.current,ae(Wt,x?h&1|2:h&1),nt&&bs(u,m.treeForkCount),o):(Dt(u),null);case 22:case 23:return Qi(u),z2(),m=u.memoizedState!==null,o!==null?o.memoizedState!==null!==m&&(u.flags|=8192):m&&(u.flags|=8192),m?(h&536870912)!==0&&(u.flags&128)===0&&(Dt(u),u.subtreeFlags&6&&(u.flags|=8192)):Dt(u),h=u.updateQueue,h!==null&&d0(u,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==h&&(u.flags|=2048),o!==null&&G(eu),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),Ss(rn),Dt(u),null;case 25:return null;case 30:return null}throw Error(i(156,u.tag))}function PX(o,u){switch(x2(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return Ss(rn),pe(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return je(u),null;case 31:if(u.memoizedState!==null){if(Qi(u),u.alternate===null)throw Error(i(340));Zl()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(Qi(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(i(340));Zl()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return G(Wt),null;case 4:return pe(),null;case 10:return Ss(u.type),null;case 22:case 23:return Qi(u),z2(),o!==null&&G(eu),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return Ss(rn),null;case 25:return null;default:return null}}function l5(o,u){switch(x2(u),u.tag){case 3:Ss(rn),pe();break;case 26:case 27:case 5:je(u);break;case 4:pe();break;case 31:u.memoizedState!==null&&Qi(u);break;case 13:Qi(u);break;case 19:G(Wt);break;case 10:Ss(u.type);break;case 22:case 23:Qi(u),z2(),o!==null&&G(eu);break;case 24:Ss(rn)}}function Mh(o,u){try{var h=u.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var x=m.next;h=x;do{if((h.tag&o)===o){m=void 0;var E=h.create,C=h.inst;m=E(),C.destroy=m}h=h.next}while(h!==x)}}catch(D){vt(u,u.return,D)}}function ko(o,u,h){try{var m=u.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var E=x.next;m=E;do{if((m.tag&o)===o){var C=m.inst,D=C.destroy;if(D!==void 0){C.destroy=void 0,x=u;var L=h,W=D;try{W()}catch(te){vt(x,L,te)}}}m=m.next}while(m!==E)}}catch(te){vt(u,u.return,te)}}function u5(o){var u=o.updateQueue;if(u!==null){var h=o.stateNode;try{JD(u,h)}catch(m){vt(o,o.return,m)}}}function c5(o,u,h){h.props=au(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(m){vt(o,u,m)}}function $h(o,u){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var m=o.stateNode;break;case 30:m=o.stateNode;break;default:m=o.stateNode}typeof h=="function"?o.refCleanup=h(m):h.current=m}}catch(x){vt(o,u,x)}}function Ta(o,u){var h=o.ref,m=o.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(x){vt(o,u,x)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(x){vt(o,u,x)}else h.current=null}function f5(o){var u=o.type,h=o.memoizedProps,m=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(x){vt(o,o.return,x)}}function hS(o,u,h){try{var m=o.stateNode;fV(m,o.type,h,u),m[_i]=u}catch(x){vt(o,o.return,x)}}function d5(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Lo(o.type)||o.tag===4}function gS(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||d5(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Lo(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function pS(o,u,h){var m=o.tag;if(m===5||m===6)o=o.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(o),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=ms));else if(m!==4&&(m===27&&Lo(o.type)&&(h=o.stateNode,u=null),o=o.child,o!==null))for(pS(o,u,h),o=o.sibling;o!==null;)pS(o,u,h),o=o.sibling}function h0(o,u,h){var m=o.tag;if(m===5||m===6)o=o.stateNode,u?h.insertBefore(o,u):h.appendChild(o);else if(m!==4&&(m===27&&Lo(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(h0(o,u,h),o=o.sibling;o!==null;)h0(o,u,h),o=o.sibling}function h5(o){var u=o.stateNode,h=o.memoizedProps;try{for(var m=o.type,x=u.attributes;x.length;)u.removeAttributeNode(x[0]);Rn(u,m,h),u[kn]=o,u[_i]=h}catch(E){vt(o,o.return,E)}}var Cs=!1,on=!1,mS=!1,g5=typeof WeakSet=="function"?WeakSet:Set,bn=null;function HX(o,u){if(o=o.containerInfo,LS=R0,o=CD(o),u2(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var x=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break e}var C=0,D=-1,L=-1,W=0,te=0,se=o,Q=null;t:for(;;){for(var K;se!==h||x!==0&&se.nodeType!==3||(D=C+x),se!==E||m!==0&&se.nodeType!==3||(L=C+m),se.nodeType===3&&(C+=se.nodeValue.length),(K=se.firstChild)!==null;)Q=se,se=K;for(;;){if(se===o)break t;if(Q===h&&++W===x&&(D=C),Q===E&&++te===m&&(L=C),(K=se.nextSibling)!==null)break;se=Q,Q=se.parentNode}se=K}h=D===-1||L===-1?null:{start:D,end:L}}else h=null}h=h||{start:0,end:0}}else h=null;for(US={focusedElem:o,selectionRange:h},R0=!1,bn=u;bn!==null;)if(u=bn,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,bn=o;else for(;bn!==null;){switch(u=bn,E=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(h=0;h<o.length;h++)x=o[h],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&E!==null){o=void 0,h=u,x=E.memoizedProps,E=E.memoizedState,m=h.stateNode;try{var _e=au(h.type,x);o=m.getSnapshotBeforeUpdate(_e,E),m.__reactInternalSnapshotBeforeUpdate=o}catch(ze){vt(h,h.return,ze)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,h=o.nodeType,h===9)qS(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":qS(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=u.sibling,o!==null){o.return=u.return,bn=o;break}bn=u.return}}function p5(o,u,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:Ms(o,h),m&4&&Mh(5,h);break;case 1:if(Ms(o,h),m&4)if(o=h.stateNode,u===null)try{o.componentDidMount()}catch(C){vt(h,h.return,C)}else{var x=au(h.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(x,u,o.__reactInternalSnapshotBeforeUpdate)}catch(C){vt(h,h.return,C)}}m&64&&u5(h),m&512&&$h(h,h.return);break;case 3:if(Ms(o,h),m&64&&(o=h.updateQueue,o!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{JD(o,u)}catch(C){vt(h,h.return,C)}}break;case 27:u===null&&m&4&&h5(h);case 26:case 5:Ms(o,h),u===null&&m&4&&f5(h),m&512&&$h(h,h.return);break;case 12:Ms(o,h);break;case 31:Ms(o,h),m&4&&v5(o,h);break;case 13:Ms(o,h),m&4&&b5(o,h),m&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=JX.bind(null,h),bV(o,h))));break;case 22:if(m=h.memoizedState!==null||Cs,!m){u=u!==null&&u.memoizedState!==null||on,x=Cs;var E=on;Cs=m,(on=u)&&!E?$s(o,h,(h.subtreeFlags&8772)!==0):Ms(o,h),Cs=x,on=E}break;case 30:break;default:Ms(o,h)}}function m5(o){var u=o.alternate;u!==null&&(o.alternate=null,m5(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&Yx(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var zt=null,Ai=!1;function Ts(o,u,h){for(h=h.child;h!==null;)y5(o,u,h),h=h.sibling}function y5(o,u,h){if(Gi&&typeof Gi.onCommitFiberUnmount=="function")try{Gi.onCommitFiberUnmount(Jd,h)}catch{}switch(h.tag){case 26:on||Ta(h,u),Ts(o,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:on||Ta(h,u);var m=zt,x=Ai;Lo(h.type)&&(zt=h.stateNode,Ai=!1),Ts(o,u,h),Uh(h.stateNode),zt=m,Ai=x;break;case 5:on||Ta(h,u);case 6:if(m=zt,x=Ai,zt=null,Ts(o,u,h),zt=m,Ai=x,zt!==null)if(Ai)try{(zt.nodeType===9?zt.body:zt.nodeName==="HTML"?zt.ownerDocument.body:zt).removeChild(h.stateNode)}catch(E){vt(h,u,E)}else try{zt.removeChild(h.stateNode)}catch(E){vt(h,u,E)}break;case 18:zt!==null&&(Ai?(o=zt,uN(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),ff(o)):uN(zt,h.stateNode));break;case 4:m=zt,x=Ai,zt=h.stateNode.containerInfo,Ai=!0,Ts(o,u,h),zt=m,Ai=x;break;case 0:case 11:case 14:case 15:ko(2,h,u),on||ko(4,h,u),Ts(o,u,h);break;case 1:on||(Ta(h,u),m=h.stateNode,typeof m.componentWillUnmount=="function"&&c5(h,u,m)),Ts(o,u,h);break;case 21:Ts(o,u,h);break;case 22:on=(m=on)||h.memoizedState!==null,Ts(o,u,h),on=m;break;default:Ts(o,u,h)}}function v5(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{ff(o)}catch(h){vt(u,u.return,h)}}}function b5(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{ff(o)}catch(h){vt(u,u.return,h)}}function GX(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new g5),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new g5),u;default:throw Error(i(435,o.tag))}}function g0(o,u){var h=GX(o);u.forEach(function(m){if(!h.has(m)){h.add(m);var x=eV.bind(null,o,m);m.then(x,x)}})}function Ci(o,u){var h=u.deletions;if(h!==null)for(var m=0;m<h.length;m++){var x=h[m],E=o,C=u,D=C;e:for(;D!==null;){switch(D.tag){case 27:if(Lo(D.type)){zt=D.stateNode,Ai=!1;break e}break;case 5:zt=D.stateNode,Ai=!1;break e;case 3:case 4:zt=D.stateNode.containerInfo,Ai=!0;break e}D=D.return}if(zt===null)throw Error(i(160));y5(E,C,x),zt=null,Ai=!1,E=x.alternate,E!==null&&(E.return=null),x.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)x5(u,o),u=u.sibling}var Xr=null;function x5(o,u){var h=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Ci(u,o),Ti(o),m&4&&(ko(3,o,o.return),Mh(3,o),ko(5,o,o.return));break;case 1:Ci(u,o),Ti(o),m&512&&(on||h===null||Ta(h,h.return)),m&64&&Cs&&(o=o.updateQueue,o!==null&&(m=o.callbacks,m!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var x=Xr;if(Ci(u,o),Ti(o),m&512&&(on||h===null||Ta(h,h.return)),m&4){var E=h!==null?h.memoizedState:null;if(m=o.memoizedState,h===null)if(m===null)if(o.stateNode===null){e:{m=o.type,h=o.memoizedProps,x=x.ownerDocument||x;t:switch(m){case"title":E=x.getElementsByTagName("title")[0],(!E||E[nh]||E[kn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=x.createElement(m),x.head.insertBefore(E,x.querySelector("head > title"))),Rn(E,m,h),E[kn]=o,vn(E),m=E;break e;case"link":var C=xN("link","href",x).get(m+(h.href||""));if(C){for(var D=0;D<C.length;D++)if(E=C[D],E.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&E.getAttribute("rel")===(h.rel==null?null:h.rel)&&E.getAttribute("title")===(h.title==null?null:h.title)&&E.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){C.splice(D,1);break t}}E=x.createElement(m),Rn(E,m,h),x.head.appendChild(E);break;case"meta":if(C=xN("meta","content",x).get(m+(h.content||""))){for(D=0;D<C.length;D++)if(E=C[D],E.getAttribute("content")===(h.content==null?null:""+h.content)&&E.getAttribute("name")===(h.name==null?null:h.name)&&E.getAttribute("property")===(h.property==null?null:h.property)&&E.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&E.getAttribute("charset")===(h.charSet==null?null:h.charSet)){C.splice(D,1);break t}}E=x.createElement(m),Rn(E,m,h),x.head.appendChild(E);break;default:throw Error(i(468,m))}E[kn]=o,vn(E),m=E}o.stateNode=m}else SN(x,o.type,o.stateNode);else o.stateNode=bN(x,m,o.memoizedProps);else E!==m?(E===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):E.count--,m===null?SN(x,o.type,o.stateNode):bN(x,m,o.memoizedProps)):m===null&&o.stateNode!==null&&hS(o,o.memoizedProps,h.memoizedProps)}break;case 27:Ci(u,o),Ti(o),m&512&&(on||h===null||Ta(h,h.return)),h!==null&&m&4&&hS(o,o.memoizedProps,h.memoizedProps);break;case 5:if(Ci(u,o),Ti(o),m&512&&(on||h===null||Ta(h,h.return)),o.flags&32){x=o.stateNode;try{Nc(x,"")}catch(_e){vt(o,o.return,_e)}}m&4&&o.stateNode!=null&&(x=o.memoizedProps,hS(o,x,h!==null?h.memoizedProps:x)),m&1024&&(mS=!0);break;case 6:if(Ci(u,o),Ti(o),m&4){if(o.stateNode===null)throw Error(i(162));m=o.memoizedProps,h=o.stateNode;try{h.nodeValue=m}catch(_e){vt(o,o.return,_e)}}break;case 3:if(k0=null,x=Xr,Xr=M0(u.containerInfo),Ci(u,o),Xr=x,Ti(o),m&4&&h!==null&&h.memoizedState.isDehydrated)try{ff(u.containerInfo)}catch(_e){vt(o,o.return,_e)}mS&&(mS=!1,S5(o));break;case 4:m=Xr,Xr=M0(o.stateNode.containerInfo),Ci(u,o),Ti(o),Xr=m;break;case 12:Ci(u,o),Ti(o);break;case 31:Ci(u,o),Ti(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,g0(o,m)));break;case 13:Ci(u,o),Ti(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(m0=Hi()),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,g0(o,m)));break;case 22:x=o.memoizedState!==null;var L=h!==null&&h.memoizedState!==null,W=Cs,te=on;if(Cs=W||x,on=te||L,Ci(u,o),on=te,Cs=W,Ti(o),m&8192)e:for(u=o.stateNode,u._visibility=x?u._visibility&-2:u._visibility|1,x&&(h===null||L||Cs||on||su(o)),h=null,u=o;;){if(u.tag===5||u.tag===26){if(h===null){L=h=u;try{if(E=L.stateNode,x)C=E.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{D=L.stateNode;var se=L.memoizedProps.style,Q=se!=null&&se.hasOwnProperty("display")?se.display:null;D.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(_e){vt(L,L.return,_e)}}}else if(u.tag===6){if(h===null){L=u;try{L.stateNode.nodeValue=x?"":L.memoizedProps}catch(_e){vt(L,L.return,_e)}}}else if(u.tag===18){if(h===null){L=u;try{var K=L.stateNode;x?cN(K,!0):cN(L.stateNode,!1)}catch(_e){vt(L,L.return,_e)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}m&4&&(m=o.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,g0(o,h))));break;case 19:Ci(u,o),Ti(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,g0(o,m)));break;case 30:break;case 21:break;default:Ci(u,o),Ti(o)}}function Ti(o){var u=o.flags;if(u&2){try{for(var h,m=o.return;m!==null;){if(d5(m)){h=m;break}m=m.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var x=h.stateNode,E=gS(o);h0(o,E,x);break;case 5:var C=h.stateNode;h.flags&32&&(Nc(C,""),h.flags&=-33);var D=gS(o);h0(o,D,C);break;case 3:case 4:var L=h.stateNode.containerInfo,W=gS(o);pS(o,W,L);break;default:throw Error(i(161))}}catch(te){vt(o,o.return,te)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function S5(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;S5(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function Ms(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)p5(o,u.alternate,u),u=u.sibling}function su(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:ko(4,u,u.return),su(u);break;case 1:Ta(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&c5(u,u.return,h),su(u);break;case 27:Uh(u.stateNode);case 26:case 5:Ta(u,u.return),su(u);break;case 22:u.memoizedState===null&&su(u);break;case 30:su(u);break;default:su(u)}o=o.sibling}}function $s(o,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var m=u.alternate,x=o,E=u,C=E.flags;switch(E.tag){case 0:case 11:case 15:$s(x,E,h),Mh(4,E);break;case 1:if($s(x,E,h),m=E,x=m.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(W){vt(m,m.return,W)}if(m=E,x=m.updateQueue,x!==null){var D=m.stateNode;try{var L=x.shared.hiddenCallbacks;if(L!==null)for(x.shared.hiddenCallbacks=null,x=0;x<L.length;x++)KD(L[x],D)}catch(W){vt(m,m.return,W)}}h&&C&64&&u5(E),$h(E,E.return);break;case 27:h5(E);case 26:case 5:$s(x,E,h),h&&m===null&&C&4&&f5(E),$h(E,E.return);break;case 12:$s(x,E,h);break;case 31:$s(x,E,h),h&&C&4&&v5(x,E);break;case 13:$s(x,E,h),h&&C&4&&b5(x,E);break;case 22:E.memoizedState===null&&$s(x,E,h),$h(E,E.return);break;case 30:break;default:$s(x,E,h)}u=u.sibling}}function yS(o,u){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&ph(h))}function vS(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&ph(o))}function Vr(o,u,h,m){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)E5(o,u,h,m),u=u.sibling}function E5(o,u,h,m){var x=u.flags;switch(u.tag){case 0:case 11:case 15:Vr(o,u,h,m),x&2048&&Mh(9,u);break;case 1:Vr(o,u,h,m);break;case 3:Vr(o,u,h,m),x&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&ph(o)));break;case 12:if(x&2048){Vr(o,u,h,m),o=u.stateNode;try{var E=u.memoizedProps,C=E.id,D=E.onPostCommit;typeof D=="function"&&D(C,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(L){vt(u,u.return,L)}}else Vr(o,u,h,m);break;case 31:Vr(o,u,h,m);break;case 13:Vr(o,u,h,m);break;case 23:break;case 22:E=u.stateNode,C=u.alternate,u.memoizedState!==null?E._visibility&2?Vr(o,u,h,m):kh(o,u):E._visibility&2?Vr(o,u,h,m):(E._visibility|=2,Jc(o,u,h,m,(u.subtreeFlags&10256)!==0||!1)),x&2048&&yS(C,u);break;case 24:Vr(o,u,h,m),x&2048&&vS(u.alternate,u);break;default:Vr(o,u,h,m)}}function Jc(o,u,h,m,x){for(x=x&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var E=o,C=u,D=h,L=m,W=C.flags;switch(C.tag){case 0:case 11:case 15:Jc(E,C,D,L,x),Mh(8,C);break;case 23:break;case 22:var te=C.stateNode;C.memoizedState!==null?te._visibility&2?Jc(E,C,D,L,x):kh(E,C):(te._visibility|=2,Jc(E,C,D,L,x)),x&&W&2048&&yS(C.alternate,C);break;case 24:Jc(E,C,D,L,x),x&&W&2048&&vS(C.alternate,C);break;default:Jc(E,C,D,L,x)}u=u.sibling}}function kh(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=o,m=u,x=m.flags;switch(m.tag){case 22:kh(h,m),x&2048&&yS(m.alternate,m);break;case 24:kh(h,m),x&2048&&vS(m.alternate,m);break;default:kh(h,m)}u=u.sibling}}var Dh=8192;function ef(o,u,h){if(o.subtreeFlags&Dh)for(o=o.child;o!==null;)_5(o,u,h),o=o.sibling}function _5(o,u,h){switch(o.tag){case 26:ef(o,u,h),o.flags&Dh&&o.memoizedState!==null&&DV(h,Xr,o.memoizedState,o.memoizedProps);break;case 5:ef(o,u,h);break;case 3:case 4:var m=Xr;Xr=M0(o.stateNode.containerInfo),ef(o,u,h),Xr=m;break;case 22:o.memoizedState===null&&(m=o.alternate,m!==null&&m.memoizedState!==null?(m=Dh,Dh=16777216,ef(o,u,h),Dh=m):ef(o,u,h));break;default:ef(o,u,h)}}function w5(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function Oh(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];bn=m,C5(m,o)}w5(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)A5(o),o=o.sibling}function A5(o){switch(o.tag){case 0:case 11:case 15:Oh(o),o.flags&2048&&ko(9,o,o.return);break;case 3:Oh(o);break;case 12:Oh(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,p0(o)):Oh(o);break;default:Oh(o)}}function p0(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];bn=m,C5(m,o)}w5(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:ko(8,u,u.return),p0(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,p0(u));break;default:p0(u)}o=o.sibling}}function C5(o,u){for(;bn!==null;){var h=bn;switch(h.tag){case 0:case 11:case 15:ko(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:ph(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,bn=m;else e:for(h=o;bn!==null;){m=bn;var x=m.sibling,E=m.return;if(m5(m),m===h){bn=null;break e}if(x!==null){x.return=E,bn=x;break e}bn=E}}}var YX={getCacheForType:function(o){var u=On(rn),h=u.data.get(o);return h===void 0&&(h=o(),u.data.set(o,h)),h},cacheSignal:function(){return On(rn).controller.signal}},XX=typeof WeakMap=="function"?WeakMap:Map,dt=0,Ct=null,Ze=null,Je=0,yt=0,Zi=null,Do=!1,tf=!1,bS=!1,ks=0,Ht=0,Oo=0,ou=0,xS=0,Ki=0,nf=0,Nh=null,Mi=null,SS=!1,m0=0,T5=0,y0=1/0,v0=null,No=null,cn=0,Ro=null,rf=null,Ds=0,ES=0,_S=null,M5=null,Rh=0,wS=null;function Ji(){return(dt&2)!==0&&Je!==0?Je&-Je:O.T!==null?kS():Hk()}function $5(){if(Ki===0)if((Je&536870912)===0||nt){var o=Cm;Cm<<=1,(Cm&3932160)===0&&(Cm=262144),Ki=o}else Ki=536870912;return o=Wi.current,o!==null&&(o.flags|=32),Ki}function $i(o,u,h){(o===Ct&&(yt===2||yt===9)||o.cancelPendingCommit!==null)&&(af(o,0),zo(o,Je,Ki,!1)),th(o,h),((dt&2)===0||o!==Ct)&&(o===Ct&&((dt&2)===0&&(ou|=h),Ht===4&&zo(o,Je,Ki,!1)),Ma(o))}function k5(o,u,h){if((dt&6)!==0)throw Error(i(327));var m=!h&&(u&127)===0&&(u&o.expiredLanes)===0||eh(o,u),x=m?QX(o,u):CS(o,u,!0),E=m;do{if(x===0){tf&&!m&&zo(o,u,0,!1);break}else{if(h=o.current.alternate,E&&!VX(h)){x=CS(o,u,!1),E=!1;continue}if(x===2){if(E=u,o.errorRecoveryDisabledLanes&E)var C=0;else C=o.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){u=C;e:{var D=o;x=Nh;var L=D.current.memoizedState.isDehydrated;if(L&&(af(D,C).flags|=256),C=CS(D,C,!1),C!==2){if(bS&&!L){D.errorRecoveryDisabledLanes|=E,ou|=E,x=4;break e}E=Mi,Mi=x,E!==null&&(Mi===null?Mi=E:Mi.push.apply(Mi,E))}x=C}if(E=!1,x!==2)continue}}if(x===1){af(o,0),zo(o,u,0,!0);break}e:{switch(m=o,E=x,E){case 0:case 1:throw Error(i(345));case 4:if((u&4194048)!==u)break;case 6:zo(m,u,Ki,!Do);break e;case 2:Mi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((u&62914560)===u&&(x=m0+300-Hi(),10<x)){if(zo(m,u,Ki,!Do),Mm(m,0,!0)!==0)break e;Ds=u,m.timeoutHandle=oN(D5.bind(null,m,h,Mi,v0,SS,u,Ki,ou,nf,Do,E,"Throttled",-0,0),x);break e}D5(m,h,Mi,v0,SS,u,Ki,ou,nf,Do,E,null,-0,0)}}break}while(!0);Ma(o)}function D5(o,u,h,m,x,E,C,D,L,W,te,se,Q,K){if(o.timeoutHandle=-1,se=u.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ms},_5(u,E,se);var _e=(E&62914560)===E?m0-Hi():(E&4194048)===E?T5-Hi():0;if(_e=OV(se,_e),_e!==null){Ds=E,o.cancelPendingCommit=_e(B5.bind(null,o,u,E,h,m,x,C,D,L,te,se,null,Q,K)),zo(o,E,C,!W);return}}B5(o,u,E,h,m,x,C,D,L)}function VX(o){for(var u=o;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var x=h[m],E=x.getSnapshot;x=x.value;try{if(!Xi(E(),x))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function zo(o,u,h,m){u&=~xS,u&=~ou,o.suspendedLanes|=u,o.pingedLanes&=~u,m&&(o.warmLanes|=u),m=o.expirationTimes;for(var x=u;0<x;){var E=31-Yi(x),C=1<<E;m[E]=-1,x&=~C}h!==0&&qk(o,h,u)}function b0(){return(dt&6)===0?(zh(0),!1):!0}function AS(){if(Ze!==null){if(yt===0)var o=Ze.return;else o=Ze,xs=Kl=null,q2(o),Vc=null,yh=0,o=Ze;for(;o!==null;)l5(o.alternate,o),o=o.return;Ze=null}}function af(o,u){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,gV(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),Ds=0,AS(),Ct=o,Ze=h=vs(o.current,null),Je=u,yt=0,Zi=null,Do=!1,tf=eh(o,u),bS=!1,nf=Ki=xS=ou=Oo=Ht=0,Mi=Nh=null,SS=!1,(u&8)!==0&&(u|=u&32);var m=o.entangledLanes;if(m!==0)for(o=o.entanglements,m&=u;0<m;){var x=31-Yi(m),E=1<<x;u|=o[x],m&=~E}return ks=u,jm(),h}function O5(o,u){qe=null,O.H=Ah,u===Xc||u===Vm?(u=VD(),yt=3):u===$2?(u=VD(),yt=4):yt=u===iS?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Zi=u,Ze===null&&(Ht=1,l0(o,vr(u,o.current)))}function N5(){var o=Wi.current;return o===null?!0:(Je&4194048)===Je?Er===null:(Je&62914560)===Je||(Je&536870912)!==0?o===Er:!1}function R5(){var o=O.H;return O.H=Ah,o===null?Ah:o}function z5(){var o=O.A;return O.A=YX,o}function x0(){Ht=4,Do||(Je&4194048)!==Je&&Wi.current!==null||(tf=!0),(Oo&134217727)===0&&(ou&134217727)===0||Ct===null||zo(Ct,Je,Ki,!1)}function CS(o,u,h){var m=dt;dt|=2;var x=R5(),E=z5();(Ct!==o||Je!==u)&&(v0=null,af(o,u)),u=!1;var C=Ht;e:do try{if(yt!==0&&Ze!==null){var D=Ze,L=Zi;switch(yt){case 8:AS(),C=6;break e;case 3:case 2:case 9:case 6:Wi.current===null&&(u=!0);var W=yt;if(yt=0,Zi=null,sf(o,D,L,W),h&&tf){C=0;break e}break;default:W=yt,yt=0,Zi=null,sf(o,D,L,W)}}WX(),C=Ht;break}catch(te){O5(o,te)}while(!0);return u&&o.shellSuspendCounter++,xs=Kl=null,dt=m,O.H=x,O.A=E,Ze===null&&(Ct=null,Je=0,jm()),C}function WX(){for(;Ze!==null;)F5(Ze)}function QX(o,u){var h=dt;dt|=2;var m=R5(),x=z5();Ct!==o||Je!==u?(v0=null,y0=Hi()+500,af(o,u)):tf=eh(o,u);e:do try{if(yt!==0&&Ze!==null){u=Ze;var E=Zi;t:switch(yt){case 1:yt=0,Zi=null,sf(o,u,E,1);break;case 2:case 9:if(YD(E)){yt=0,Zi=null,L5(u);break}u=function(){yt!==2&&yt!==9||Ct!==o||(yt=7),Ma(o)},E.then(u,u);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:YD(E)?(yt=0,Zi=null,L5(u)):(yt=0,Zi=null,sf(o,u,E,7));break;case 5:var C=null;switch(Ze.tag){case 26:C=Ze.memoizedState;case 5:case 27:var D=Ze;if(C?EN(C):D.stateNode.complete){yt=0,Zi=null;var L=D.sibling;if(L!==null)Ze=L;else{var W=D.return;W!==null?(Ze=W,S0(W)):Ze=null}break t}}yt=0,Zi=null,sf(o,u,E,5);break;case 6:yt=0,Zi=null,sf(o,u,E,6);break;case 8:AS(),Ht=6;break e;default:throw Error(i(462))}}ZX();break}catch(te){O5(o,te)}while(!0);return xs=Kl=null,O.H=m,O.A=x,dt=h,Ze!==null?0:(Ct=null,Je=0,jm(),Ht)}function ZX(){for(;Ze!==null&&!xY();)F5(Ze)}function F5(o){var u=s5(o.alternate,o,ks);o.memoizedProps=o.pendingProps,u===null?S0(o):Ze=u}function L5(o){var u=o,h=u.alternate;switch(u.tag){case 15:case 0:u=e5(h,u,u.pendingProps,u.type,void 0,Je);break;case 11:u=e5(h,u,u.pendingProps,u.type.render,u.ref,Je);break;case 5:q2(u);default:l5(h,u),u=Ze=zD(u,ks),u=s5(h,u,ks)}o.memoizedProps=o.pendingProps,u===null?S0(o):Ze=u}function sf(o,u,h,m){xs=Kl=null,q2(u),Vc=null,yh=0;var x=u.return;try{if(BX(o,x,u,h,Je)){Ht=1,l0(o,vr(h,o.current)),Ze=null;return}}catch(E){if(x!==null)throw Ze=x,E;Ht=1,l0(o,vr(h,o.current)),Ze=null;return}u.flags&32768?(nt||m===1?o=!0:tf||(Je&536870912)!==0?o=!1:(Do=o=!0,(m===2||m===9||m===3||m===6)&&(m=Wi.current,m!==null&&m.tag===13&&(m.flags|=16384))),U5(u,o)):S0(u)}function S0(o){var u=o;do{if((u.flags&32768)!==0){U5(u,Do);return}o=u.return;var h=IX(u.alternate,u,ks);if(h!==null){Ze=h;return}if(u=u.sibling,u!==null){Ze=u;return}Ze=u=o}while(u!==null);Ht===0&&(Ht=5)}function U5(o,u){do{var h=PX(o.alternate,o);if(h!==null){h.flags&=32767,Ze=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(o=o.sibling,o!==null)){Ze=o;return}Ze=o=h}while(o!==null);Ht=6,Ze=null}function B5(o,u,h,m,x,E,C,D,L){o.cancelPendingCommit=null;do E0();while(cn!==0);if((dt&6)!==0)throw Error(i(327));if(u!==null){if(u===o.current)throw Error(i(177));if(E=u.lanes|u.childLanes,E|=g2,kY(o,h,E,C,D,L),o===Ct&&(Ze=Ct=null,Je=0),rf=u,Ro=o,Ds=h,ES=E,_S=x,M5=m,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,tV(wm,function(){return H5(),null})):(o.callbackNode=null,o.callbackPriority=0),m=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||m){m=O.T,O.T=null,x=B.p,B.p=2,C=dt,dt|=4;try{HX(o,u,h)}finally{dt=C,B.p=x,O.T=m}}cn=1,j5(),q5(),I5()}}function j5(){if(cn===1){cn=0;var o=Ro,u=rf,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=O.T,O.T=null;var m=B.p;B.p=2;var x=dt;dt|=4;try{x5(u,o);var E=US,C=CD(o.containerInfo),D=E.focusedElem,L=E.selectionRange;if(C!==D&&D&&D.ownerDocument&&AD(D.ownerDocument.documentElement,D)){if(L!==null&&u2(D)){var W=L.start,te=L.end;if(te===void 0&&(te=W),"selectionStart"in D)D.selectionStart=W,D.selectionEnd=Math.min(te,D.value.length);else{var se=D.ownerDocument||document,Q=se&&se.defaultView||window;if(Q.getSelection){var K=Q.getSelection(),_e=D.textContent.length,ze=Math.min(L.start,_e),wt=L.end===void 0?ze:Math.min(L.end,_e);!K.extend&&ze>wt&&(C=wt,wt=ze,ze=C);var P=wD(D,ze),I=wD(D,wt);if(P&&I&&(K.rangeCount!==1||K.anchorNode!==P.node||K.anchorOffset!==P.offset||K.focusNode!==I.node||K.focusOffset!==I.offset)){var V=se.createRange();V.setStart(P.node,P.offset),K.removeAllRanges(),ze>wt?(K.addRange(V),K.extend(I.node,I.offset)):(V.setEnd(I.node,I.offset),K.addRange(V))}}}}for(se=[],K=D;K=K.parentNode;)K.nodeType===1&&se.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<se.length;D++){var re=se[D];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}R0=!!LS,US=LS=null}finally{dt=x,B.p=m,O.T=h}}o.current=u,cn=2}}function q5(){if(cn===2){cn=0;var o=Ro,u=rf,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=O.T,O.T=null;var m=B.p;B.p=2;var x=dt;dt|=4;try{p5(o,u.alternate,u)}finally{dt=x,B.p=m,O.T=h}}cn=3}}function I5(){if(cn===4||cn===3){cn=0,SY();var o=Ro,u=rf,h=Ds,m=M5;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?cn=5:(cn=0,rf=Ro=null,P5(o,o.pendingLanes));var x=o.pendingLanes;if(x===0&&(No=null),Hx(h),u=u.stateNode,Gi&&typeof Gi.onCommitFiberRoot=="function")try{Gi.onCommitFiberRoot(Jd,u,void 0,(u.current.flags&128)===128)}catch{}if(m!==null){u=O.T,x=B.p,B.p=2,O.T=null;try{for(var E=o.onRecoverableError,C=0;C<m.length;C++){var D=m[C];E(D.value,{componentStack:D.stack})}}finally{O.T=u,B.p=x}}(Ds&3)!==0&&E0(),Ma(o),x=o.pendingLanes,(h&261930)!==0&&(x&42)!==0?o===wS?Rh++:(Rh=0,wS=o):Rh=0,zh(0)}}function P5(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,ph(u)))}function E0(){return j5(),q5(),I5(),H5()}function H5(){if(cn!==5)return!1;var o=Ro,u=ES;ES=0;var h=Hx(Ds),m=O.T,x=B.p;try{B.p=32>h?32:h,O.T=null,h=_S,_S=null;var E=Ro,C=Ds;if(cn=0,rf=Ro=null,Ds=0,(dt&6)!==0)throw Error(i(331));var D=dt;if(dt|=4,A5(E.current),E5(E,E.current,C,h),dt=D,zh(0,!1),Gi&&typeof Gi.onPostCommitFiberRoot=="function")try{Gi.onPostCommitFiberRoot(Jd,E)}catch{}return!0}finally{B.p=x,O.T=m,P5(o,u)}}function G5(o,u,h){u=vr(h,u),u=nS(o.stateNode,u,2),o=To(o,u,2),o!==null&&(th(o,2),Ma(o))}function vt(o,u,h){if(o.tag===3)G5(o,o,h);else for(;u!==null;){if(u.tag===3){G5(u,o,h);break}else if(u.tag===1){var m=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(No===null||!No.has(m))){o=vr(h,o),h=YO(2),m=To(u,h,2),m!==null&&(XO(h,m,u,o),th(m,2),Ma(m));break}}u=u.return}}function TS(o,u,h){var m=o.pingCache;if(m===null){m=o.pingCache=new XX;var x=new Set;m.set(u,x)}else x=m.get(u),x===void 0&&(x=new Set,m.set(u,x));x.has(h)||(bS=!0,x.add(h),o=KX.bind(null,o,u,h),u.then(o,o))}function KX(o,u,h){var m=o.pingCache;m!==null&&m.delete(u),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,Ct===o&&(Je&h)===h&&(Ht===4||Ht===3&&(Je&62914560)===Je&&300>Hi()-m0?(dt&2)===0&&af(o,0):xS|=h,nf===Je&&(nf=0)),Ma(o)}function Y5(o,u){u===0&&(u=jk()),o=Wl(o,u),o!==null&&(th(o,u),Ma(o))}function JX(o){var u=o.memoizedState,h=0;u!==null&&(h=u.retryLane),Y5(o,h)}function eV(o,u){var h=0;switch(o.tag){case 31:case 13:var m=o.stateNode,x=o.memoizedState;x!==null&&(h=x.retryLane);break;case 19:m=o.stateNode;break;case 22:m=o.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(u),Y5(o,h)}function tV(o,u){return jx(o,u)}var _0=null,of=null,MS=!1,w0=!1,$S=!1,Fo=0;function Ma(o){o!==of&&o.next===null&&(of===null?_0=of=o:of=of.next=o),w0=!0,MS||(MS=!0,iV())}function zh(o,u){if(!$S&&w0){$S=!0;do for(var h=!1,m=_0;m!==null;){if(o!==0){var x=m.pendingLanes;if(x===0)var E=0;else{var C=m.suspendedLanes,D=m.pingedLanes;E=(1<<31-Yi(42|o)+1)-1,E&=x&~(C&~D),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(h=!0,Q5(m,E))}else E=Je,E=Mm(m,m===Ct?E:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(E&3)===0||eh(m,E)||(h=!0,Q5(m,E));m=m.next}while(h);$S=!1}}function nV(){X5()}function X5(){w0=MS=!1;var o=0;Fo!==0&&hV()&&(o=Fo);for(var u=Hi(),h=null,m=_0;m!==null;){var x=m.next,E=V5(m,u);E===0?(m.next=null,h===null?_0=x:h.next=x,x===null&&(of=h)):(h=m,(o!==0||(E&3)!==0)&&(w0=!0)),m=x}cn!==0&&cn!==5||zh(o),Fo!==0&&(Fo=0)}function V5(o,u){for(var h=o.suspendedLanes,m=o.pingedLanes,x=o.expirationTimes,E=o.pendingLanes&-62914561;0<E;){var C=31-Yi(E),D=1<<C,L=x[C];L===-1?((D&h)===0||(D&m)!==0)&&(x[C]=$Y(D,u)):L<=u&&(o.expiredLanes|=D),E&=~D}if(u=Ct,h=Je,h=Mm(o,o===u?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m=o.callbackNode,h===0||o===u&&(yt===2||yt===9)||o.cancelPendingCommit!==null)return m!==null&&m!==null&&qx(m),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||eh(o,h)){if(u=h&-h,u===o.callbackPriority)return u;switch(m!==null&&qx(m),Hx(h)){case 2:case 8:h=Uk;break;case 32:h=wm;break;case 268435456:h=Bk;break;default:h=wm}return m=W5.bind(null,o),h=jx(h,m),o.callbackPriority=u,o.callbackNode=h,u}return m!==null&&m!==null&&qx(m),o.callbackPriority=2,o.callbackNode=null,2}function W5(o,u){if(cn!==0&&cn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(E0()&&o.callbackNode!==h)return null;var m=Je;return m=Mm(o,o===Ct?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m===0?null:(k5(o,m,u),V5(o,Hi()),o.callbackNode!=null&&o.callbackNode===h?W5.bind(null,o):null)}function Q5(o,u){if(E0())return null;k5(o,u,!0)}function iV(){pV(function(){(dt&6)!==0?jx(Lk,nV):X5()})}function kS(){if(Fo===0){var o=Gc;o===0&&(o=Am,Am<<=1,(Am&261888)===0&&(Am=256)),Fo=o}return Fo}function Z5(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Om(""+o)}function K5(o,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,o.id&&h.setAttribute("form",o.id),u.parentNode.insertBefore(h,u),o=new FormData(o),h.parentNode.removeChild(h),o}function rV(o,u,h,m,x){if(u==="submit"&&h&&h.stateNode===x){var E=Z5((x[_i]||null).action),C=m.submitter;C&&(u=(u=C[_i]||null)?Z5(u.formAction):C.getAttribute("formAction"),u!==null&&(E=u,C=null));var D=new Fm("action","action",null,m,x);o.push({event:D,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Fo!==0){var L=C?K5(x,C):new FormData(x);Q2(h,{pending:!0,data:L,method:x.method,action:E},null,L)}}else typeof E=="function"&&(D.preventDefault(),L=C?K5(x,C):new FormData(x),Q2(h,{pending:!0,data:L,method:x.method,action:E},E,L))},currentTarget:x}]})}}for(var DS=0;DS<h2.length;DS++){var OS=h2[DS],aV=OS.toLowerCase(),sV=OS[0].toUpperCase()+OS.slice(1);Yr(aV,"on"+sV)}Yr($D,"onAnimationEnd"),Yr(kD,"onAnimationIteration"),Yr(DD,"onAnimationStart"),Yr("dblclick","onDoubleClick"),Yr("focusin","onFocus"),Yr("focusout","onBlur"),Yr(EX,"onTransitionRun"),Yr(_X,"onTransitionStart"),Yr(wX,"onTransitionCancel"),Yr(OD,"onTransitionEnd"),Dc("onMouseEnter",["mouseout","mouseover"]),Dc("onMouseLeave",["mouseout","mouseover"]),Dc("onPointerEnter",["pointerout","pointerover"]),Dc("onPointerLeave",["pointerout","pointerover"]),Gl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oV=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fh));function J5(o,u){u=(u&4)!==0;for(var h=0;h<o.length;h++){var m=o[h],x=m.event;m=m.listeners;e:{var E=void 0;if(u)for(var C=m.length-1;0<=C;C--){var D=m[C],L=D.instance,W=D.currentTarget;if(D=D.listener,L!==E&&x.isPropagationStopped())break e;E=D,x.currentTarget=W;try{E(x)}catch(te){Bm(te)}x.currentTarget=null,E=L}else for(C=0;C<m.length;C++){if(D=m[C],L=D.instance,W=D.currentTarget,D=D.listener,L!==E&&x.isPropagationStopped())break e;E=D,x.currentTarget=W;try{E(x)}catch(te){Bm(te)}x.currentTarget=null,E=L}}}}function Ke(o,u){var h=u[Gx];h===void 0&&(h=u[Gx]=new Set);var m=o+"__bubble";h.has(m)||(eN(u,o,2,!1),h.add(m))}function NS(o,u,h){var m=0;u&&(m|=4),eN(h,o,m,u)}var A0="_reactListening"+Math.random().toString(36).slice(2);function RS(o){if(!o[A0]){o[A0]=!0,Xk.forEach(function(h){h!=="selectionchange"&&(oV.has(h)||NS(h,!1,o),NS(h,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[A0]||(u[A0]=!0,NS("selectionchange",!1,u))}}function eN(o,u,h,m){switch($N(u)){case 2:var x=zV;break;case 8:x=FV;break;default:x=WS}h=x.bind(null,u,h,o),x=void 0,!e2||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(x=!0),m?x!==void 0?o.addEventListener(u,h,{capture:!0,passive:x}):o.addEventListener(u,h,!0):x!==void 0?o.addEventListener(u,h,{passive:x}):o.addEventListener(u,h,!1)}function zS(o,u,h,m,x){var E=m;if((u&1)===0&&(u&2)===0&&m!==null)e:for(;;){if(m===null)return;var C=m.tag;if(C===3||C===4){var D=m.stateNode.containerInfo;if(D===x)break;if(C===4)for(C=m.return;C!==null;){var L=C.tag;if((L===3||L===4)&&C.stateNode.containerInfo===x)return;C=C.return}for(;D!==null;){if(C=Mc(D),C===null)return;if(L=C.tag,L===5||L===6||L===26||L===27){m=E=C;continue e}D=D.parentNode}}m=m.return}aD(function(){var W=E,te=Kx(h),se=[];e:{var Q=ND.get(o);if(Q!==void 0){var K=Fm,_e=o;switch(o){case"keypress":if(Rm(h)===0)break e;case"keydown":case"keyup":K=eX;break;case"focusin":_e="focus",K=r2;break;case"focusout":_e="blur",K=r2;break;case"beforeblur":case"afterblur":K=r2;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=lD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=IY;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=iX;break;case $D:case kD:case DD:K=GY;break;case OD:K=aX;break;case"scroll":case"scrollend":K=jY;break;case"wheel":K=oX;break;case"copy":case"cut":case"paste":K=XY;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=cD;break;case"toggle":case"beforetoggle":K=uX}var ze=(u&4)!==0,wt=!ze&&(o==="scroll"||o==="scrollend"),P=ze?Q!==null?Q+"Capture":null:Q;ze=[];for(var I=W,V;I!==null;){var re=I;if(V=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||V===null||P===null||(re=rh(I,P),re!=null&&ze.push(Lh(I,re,V))),wt)break;I=I.return}0<ze.length&&(Q=new K(Q,_e,null,h,te),se.push({event:Q,listeners:ze}))}}if((u&7)===0){e:{if(Q=o==="mouseover"||o==="pointerover",K=o==="mouseout"||o==="pointerout",Q&&h!==Zx&&(_e=h.relatedTarget||h.fromElement)&&(Mc(_e)||_e[Tc]))break e;if((K||Q)&&(Q=te.window===te?te:(Q=te.ownerDocument)?Q.defaultView||Q.parentWindow:window,K?(_e=h.relatedTarget||h.toElement,K=W,_e=_e?Mc(_e):null,_e!==null&&(wt=a(_e),ze=_e.tag,_e!==wt||ze!==5&&ze!==27&&ze!==6)&&(_e=null)):(K=null,_e=W),K!==_e)){if(ze=lD,re="onMouseLeave",P="onMouseEnter",I="mouse",(o==="pointerout"||o==="pointerover")&&(ze=cD,re="onPointerLeave",P="onPointerEnter",I="pointer"),wt=K==null?Q:ih(K),V=_e==null?Q:ih(_e),Q=new ze(re,I+"leave",K,h,te),Q.target=wt,Q.relatedTarget=V,re=null,Mc(te)===W&&(ze=new ze(P,I+"enter",_e,h,te),ze.target=V,ze.relatedTarget=wt,re=ze),wt=re,K&&_e)t:{for(ze=lV,P=K,I=_e,V=0,re=P;re;re=ze(re))V++;re=0;for(var Oe=I;Oe;Oe=ze(Oe))re++;for(;0<V-re;)P=ze(P),V--;for(;0<re-V;)I=ze(I),re--;for(;V--;){if(P===I||I!==null&&P===I.alternate){ze=P;break t}P=ze(P),I=ze(I)}ze=null}else ze=null;K!==null&&tN(se,Q,K,ze,!1),_e!==null&&wt!==null&&tN(se,wt,_e,ze,!0)}}e:{if(Q=W?ih(W):window,K=Q.nodeName&&Q.nodeName.toLowerCase(),K==="select"||K==="input"&&Q.type==="file")var st=vD;else if(mD(Q))if(bD)st=bX;else{st=yX;var Ae=mX}else K=Q.nodeName,!K||K.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?W&&Qx(W.elementType)&&(st=vD):st=vX;if(st&&(st=st(o,W))){yD(se,st,h,te);break e}Ae&&Ae(o,Q,W),o==="focusout"&&W&&Q.type==="number"&&W.memoizedProps.value!=null&&Wx(Q,"number",Q.value)}switch(Ae=W?ih(W):window,o){case"focusin":(mD(Ae)||Ae.contentEditable==="true")&&(Lc=Ae,c2=W,dh=null);break;case"focusout":dh=c2=Lc=null;break;case"mousedown":f2=!0;break;case"contextmenu":case"mouseup":case"dragend":f2=!1,TD(se,h,te);break;case"selectionchange":if(SX)break;case"keydown":case"keyup":TD(se,h,te)}var Ge;if(s2)e:{switch(o){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else Fc?gD(o,h)&&(et="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(et="onCompositionStart");et&&(fD&&h.locale!=="ko"&&(Fc||et!=="onCompositionStart"?et==="onCompositionEnd"&&Fc&&(Ge=sD()):(xo=te,t2="value"in xo?xo.value:xo.textContent,Fc=!0)),Ae=C0(W,et),0<Ae.length&&(et=new uD(et,o,null,h,te),se.push({event:et,listeners:Ae}),Ge?et.data=Ge:(Ge=pD(h),Ge!==null&&(et.data=Ge)))),(Ge=fX?dX(o,h):hX(o,h))&&(et=C0(W,"onBeforeInput"),0<et.length&&(Ae=new uD("onBeforeInput","beforeinput",null,h,te),se.push({event:Ae,listeners:et}),Ae.data=Ge)),rV(se,o,W,h,te)}J5(se,u)})}function Lh(o,u,h){return{instance:o,listener:u,currentTarget:h}}function C0(o,u){for(var h=u+"Capture",m=[];o!==null;){var x=o,E=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||E===null||(x=rh(o,h),x!=null&&m.unshift(Lh(o,x,E)),x=rh(o,u),x!=null&&m.push(Lh(o,x,E))),o.tag===3)return m;o=o.return}return[]}function lV(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function tN(o,u,h,m,x){for(var E=u._reactName,C=[];h!==null&&h!==m;){var D=h,L=D.alternate,W=D.stateNode;if(D=D.tag,L!==null&&L===m)break;D!==5&&D!==26&&D!==27||W===null||(L=W,x?(W=rh(h,E),W!=null&&C.unshift(Lh(h,W,L))):x||(W=rh(h,E),W!=null&&C.push(Lh(h,W,L)))),h=h.return}C.length!==0&&o.push({event:u,listeners:C})}var uV=/\r\n?/g,cV=/\u0000|\uFFFD/g;function nN(o){return(typeof o=="string"?o:""+o).replace(uV,`
`).replace(cV,"")}function iN(o,u){return u=nN(u),nN(o)===u}function _t(o,u,h,m,x,E){switch(h){case"children":typeof m=="string"?u==="body"||u==="textarea"&&m===""||Nc(o,m):(typeof m=="number"||typeof m=="bigint")&&u!=="body"&&Nc(o,""+m);break;case"className":km(o,"class",m);break;case"tabIndex":km(o,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":km(o,h,m);break;case"style":iD(o,m,E);break;case"data":if(u!=="object"){km(o,"data",m);break}case"src":case"href":if(m===""&&(u!=="a"||h!=="href")){o.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(h);break}m=Om(""+m),o.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(h==="formAction"?(u!=="input"&&_t(o,u,"name",x.name,x,null),_t(o,u,"formEncType",x.formEncType,x,null),_t(o,u,"formMethod",x.formMethod,x,null),_t(o,u,"formTarget",x.formTarget,x,null)):(_t(o,u,"encType",x.encType,x,null),_t(o,u,"method",x.method,x,null),_t(o,u,"target",x.target,x,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(h);break}m=Om(""+m),o.setAttribute(h,m);break;case"onClick":m!=null&&(o.onclick=ms);break;case"onScroll":m!=null&&Ke("scroll",o);break;case"onScrollEnd":m!=null&&Ke("scrollend",o);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(x.children!=null)throw Error(i(60));o.innerHTML=h}}break;case"multiple":o.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":o.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){o.removeAttribute("xlink:href");break}h=Om(""+m),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,""+m):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":m===!0?o.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,m):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?o.setAttribute(h,m):o.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?o.removeAttribute(h):o.setAttribute(h,m);break;case"popover":Ke("beforetoggle",o),Ke("toggle",o),$m(o,"popover",m);break;case"xlinkActuate":ps(o,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":ps(o,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":ps(o,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":ps(o,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":ps(o,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":ps(o,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":ps(o,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":ps(o,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":ps(o,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":$m(o,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=UY.get(h)||h,$m(o,h,m))}}function FS(o,u,h,m,x,E){switch(h){case"style":iD(o,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(x.children!=null)throw Error(i(60));o.innerHTML=h}}break;case"children":typeof m=="string"?Nc(o,m):(typeof m=="number"||typeof m=="bigint")&&Nc(o,""+m);break;case"onScroll":m!=null&&Ke("scroll",o);break;case"onScrollEnd":m!=null&&Ke("scrollend",o);break;case"onClick":m!=null&&(o.onclick=ms);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vk.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(x=h.endsWith("Capture"),u=h.slice(2,x?h.length-7:void 0),E=o[_i]||null,E=E!=null?E[h]:null,typeof E=="function"&&o.removeEventListener(u,E,x),typeof m=="function")){typeof E!="function"&&E!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(u,m,x);break e}h in o?o[h]=m:m===!0?o.setAttribute(h,""):$m(o,h,m)}}}function Rn(o,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",o),Ke("load",o);var m=!1,x=!1,E;for(E in h)if(h.hasOwnProperty(E)){var C=h[E];if(C!=null)switch(E){case"src":m=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:_t(o,u,E,C,h,null)}}x&&_t(o,u,"srcSet",h.srcSet,h,null),m&&_t(o,u,"src",h.src,h,null);return;case"input":Ke("invalid",o);var D=E=C=x=null,L=null,W=null;for(m in h)if(h.hasOwnProperty(m)){var te=h[m];if(te!=null)switch(m){case"name":x=te;break;case"type":C=te;break;case"checked":L=te;break;case"defaultChecked":W=te;break;case"value":E=te;break;case"defaultValue":D=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,u));break;default:_t(o,u,m,te,h,null)}}Jk(o,E,D,L,W,C,x,!1);return;case"select":Ke("invalid",o),m=C=E=null;for(x in h)if(h.hasOwnProperty(x)&&(D=h[x],D!=null))switch(x){case"value":E=D;break;case"defaultValue":C=D;break;case"multiple":m=D;default:_t(o,u,x,D,h,null)}u=E,h=C,o.multiple=!!m,u!=null?Oc(o,!!m,u,!1):h!=null&&Oc(o,!!m,h,!0);return;case"textarea":Ke("invalid",o),E=x=m=null;for(C in h)if(h.hasOwnProperty(C)&&(D=h[C],D!=null))switch(C){case"value":m=D;break;case"defaultValue":x=D;break;case"children":E=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(i(91));break;default:_t(o,u,C,D,h,null)}tD(o,m,x,E);return;case"option":for(L in h)if(h.hasOwnProperty(L)&&(m=h[L],m!=null))switch(L){case"selected":o.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:_t(o,u,L,m,h,null)}return;case"dialog":Ke("beforetoggle",o),Ke("toggle",o),Ke("cancel",o),Ke("close",o);break;case"iframe":case"object":Ke("load",o);break;case"video":case"audio":for(m=0;m<Fh.length;m++)Ke(Fh[m],o);break;case"image":Ke("error",o),Ke("load",o);break;case"details":Ke("toggle",o);break;case"embed":case"source":case"link":Ke("error",o),Ke("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in h)if(h.hasOwnProperty(W)&&(m=h[W],m!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:_t(o,u,W,m,h,null)}return;default:if(Qx(u)){for(te in h)h.hasOwnProperty(te)&&(m=h[te],m!==void 0&&FS(o,u,te,m,h,void 0));return}}for(D in h)h.hasOwnProperty(D)&&(m=h[D],m!=null&&_t(o,u,D,m,h,null))}function fV(o,u,h,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,E=null,C=null,D=null,L=null,W=null,te=null;for(K in h){var se=h[K];if(h.hasOwnProperty(K)&&se!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":L=se;default:m.hasOwnProperty(K)||_t(o,u,K,null,m,se)}}for(var Q in m){var K=m[Q];if(se=h[Q],m.hasOwnProperty(Q)&&(K!=null||se!=null))switch(Q){case"type":E=K;break;case"name":x=K;break;case"checked":W=K;break;case"defaultChecked":te=K;break;case"value":C=K;break;case"defaultValue":D=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,u));break;default:K!==se&&_t(o,u,Q,K,m,se)}}Vx(o,C,D,L,W,te,E,x);return;case"select":K=C=D=Q=null;for(E in h)if(L=h[E],h.hasOwnProperty(E)&&L!=null)switch(E){case"value":break;case"multiple":K=L;default:m.hasOwnProperty(E)||_t(o,u,E,null,m,L)}for(x in m)if(E=m[x],L=h[x],m.hasOwnProperty(x)&&(E!=null||L!=null))switch(x){case"value":Q=E;break;case"defaultValue":D=E;break;case"multiple":C=E;default:E!==L&&_t(o,u,x,E,m,L)}u=D,h=C,m=K,Q!=null?Oc(o,!!h,Q,!1):!!m!=!!h&&(u!=null?Oc(o,!!h,u,!0):Oc(o,!!h,h?[]:"",!1));return;case"textarea":K=Q=null;for(D in h)if(x=h[D],h.hasOwnProperty(D)&&x!=null&&!m.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:_t(o,u,D,null,m,x)}for(C in m)if(x=m[C],E=h[C],m.hasOwnProperty(C)&&(x!=null||E!=null))switch(C){case"value":Q=x;break;case"defaultValue":K=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==E&&_t(o,u,C,x,m,E)}eD(o,Q,K);return;case"option":for(var _e in h)if(Q=h[_e],h.hasOwnProperty(_e)&&Q!=null&&!m.hasOwnProperty(_e))switch(_e){case"selected":o.selected=!1;break;default:_t(o,u,_e,null,m,Q)}for(L in m)if(Q=m[L],K=h[L],m.hasOwnProperty(L)&&Q!==K&&(Q!=null||K!=null))switch(L){case"selected":o.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:_t(o,u,L,Q,m,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in h)Q=h[ze],h.hasOwnProperty(ze)&&Q!=null&&!m.hasOwnProperty(ze)&&_t(o,u,ze,null,m,Q);for(W in m)if(Q=m[W],K=h[W],m.hasOwnProperty(W)&&Q!==K&&(Q!=null||K!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,u));break;default:_t(o,u,W,Q,m,K)}return;default:if(Qx(u)){for(var wt in h)Q=h[wt],h.hasOwnProperty(wt)&&Q!==void 0&&!m.hasOwnProperty(wt)&&FS(o,u,wt,void 0,m,Q);for(te in m)Q=m[te],K=h[te],!m.hasOwnProperty(te)||Q===K||Q===void 0&&K===void 0||FS(o,u,te,Q,m,K);return}}for(var P in h)Q=h[P],h.hasOwnProperty(P)&&Q!=null&&!m.hasOwnProperty(P)&&_t(o,u,P,null,m,Q);for(se in m)Q=m[se],K=h[se],!m.hasOwnProperty(se)||Q===K||Q==null&&K==null||_t(o,u,se,Q,m,K)}function rN(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function dV(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,h=performance.getEntriesByType("resource"),m=0;m<h.length;m++){var x=h[m],E=x.transferSize,C=x.initiatorType,D=x.duration;if(E&&D&&rN(C)){for(C=0,D=x.responseEnd,m+=1;m<h.length;m++){var L=h[m],W=L.startTime;if(W>D)break;var te=L.transferSize,se=L.initiatorType;te&&rN(se)&&(L=L.responseEnd,C+=te*(L<D?1:(D-W)/(L-W)))}if(--m,u+=8*(E+C)/(x.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var LS=null,US=null;function T0(o){return o.nodeType===9?o:o.ownerDocument}function aN(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sN(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function BS(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var jS=null;function hV(){var o=window.event;return o&&o.type==="popstate"?o===jS?!1:(jS=o,!0):(jS=null,!1)}var oN=typeof setTimeout=="function"?setTimeout:void 0,gV=typeof clearTimeout=="function"?clearTimeout:void 0,lN=typeof Promise=="function"?Promise:void 0,pV=typeof queueMicrotask=="function"?queueMicrotask:typeof lN<"u"?function(o){return lN.resolve(null).then(o).catch(mV)}:oN;function mV(o){setTimeout(function(){throw o})}function Lo(o){return o==="head"}function uN(o,u){var h=u,m=0;do{var x=h.nextSibling;if(o.removeChild(h),x&&x.nodeType===8)if(h=x.data,h==="/$"||h==="/&"){if(m===0){o.removeChild(x),ff(u);return}m--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")m++;else if(h==="html")Uh(o.ownerDocument.documentElement);else if(h==="head"){h=o.ownerDocument.head,Uh(h);for(var E=h.firstChild;E;){var C=E.nextSibling,D=E.nodeName;E[nh]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&E.rel.toLowerCase()==="stylesheet"||h.removeChild(E),E=C}}else h==="body"&&Uh(o.ownerDocument.body);h=x}while(h);ff(u)}function cN(o,u){var h=o;o=0;do{var m=h.nextSibling;if(h.nodeType===1?u?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(u?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),m&&m.nodeType===8)if(h=m.data,h==="/$"){if(o===0)break;o--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||o++;h=m}while(h)}function qS(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":qS(h),Yx(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function yV(o,u,h,m){for(;o.nodeType===1;){var x=h;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!m&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(m){if(!o[nh])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(E=o.getAttribute("rel"),E==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(E!==x.rel||o.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||o.getAttribute("title")!==(x.title==null?null:x.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(E=o.getAttribute("src"),(E!==(x.src==null?null:x.src)||o.getAttribute("type")!==(x.type==null?null:x.type)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&E&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var E=x.name==null?null:""+x.name;if(x.type==="hidden"&&o.getAttribute("name")===E)return o}else return o;if(o=_r(o.nextSibling),o===null)break}return null}function vV(o,u,h){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=_r(o.nextSibling),o===null))return null;return o}function fN(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=_r(o.nextSibling),o===null))return null;return o}function IS(o){return o.data==="$?"||o.data==="$~"}function PS(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function bV(o,u){var h=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||h.readyState!=="loading")u();else{var m=function(){u(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),o._reactRetry=m}}function _r(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var HS=null;function dN(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"||h==="/&"){if(u===0)return _r(o.nextSibling);u--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||u++}o=o.nextSibling}return null}function hN(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(u===0)return o;u--}else h!=="/$"&&h!=="/&"||u++}o=o.previousSibling}return null}function gN(o,u,h){switch(u=T0(h),o){case"html":if(o=u.documentElement,!o)throw Error(i(452));return o;case"head":if(o=u.head,!o)throw Error(i(453));return o;case"body":if(o=u.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function Uh(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);Yx(o)}var wr=new Map,pN=new Set;function M0(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Os=B.d;B.d={f:xV,r:SV,D:EV,C:_V,L:wV,m:AV,X:TV,S:CV,M:MV};function xV(){var o=Os.f(),u=b0();return o||u}function SV(o){var u=$c(o);u!==null&&u.tag===5&&u.type==="form"?OO(u):Os.r(o)}var lf=typeof document>"u"?null:document;function mN(o,u,h){var m=lf;if(m&&typeof u=="string"&&u){var x=mr(u);x='link[rel="'+o+'"][href="'+x+'"]',typeof h=="string"&&(x+='[crossorigin="'+h+'"]'),pN.has(x)||(pN.add(x),o={rel:o,crossOrigin:h,href:u},m.querySelector(x)===null&&(u=m.createElement("link"),Rn(u,"link",o),vn(u),m.head.appendChild(u)))}}function EV(o){Os.D(o),mN("dns-prefetch",o,null)}function _V(o,u){Os.C(o,u),mN("preconnect",o,u)}function wV(o,u,h){Os.L(o,u,h);var m=lf;if(m&&o&&u){var x='link[rel="preload"][as="'+mr(u)+'"]';u==="image"&&h&&h.imageSrcSet?(x+='[imagesrcset="'+mr(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(x+='[imagesizes="'+mr(h.imageSizes)+'"]')):x+='[href="'+mr(o)+'"]';var E=x;switch(u){case"style":E=uf(o);break;case"script":E=cf(o)}wr.has(E)||(o=g({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:o,as:u},h),wr.set(E,o),m.querySelector(x)!==null||u==="style"&&m.querySelector(Bh(E))||u==="script"&&m.querySelector(jh(E))||(u=m.createElement("link"),Rn(u,"link",o),vn(u),m.head.appendChild(u)))}}function AV(o,u){Os.m(o,u);var h=lf;if(h&&o){var m=u&&typeof u.as=="string"?u.as:"script",x='link[rel="modulepreload"][as="'+mr(m)+'"][href="'+mr(o)+'"]',E=x;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=cf(o)}if(!wr.has(E)&&(o=g({rel:"modulepreload",href:o},u),wr.set(E,o),h.querySelector(x)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(jh(E)))return}m=h.createElement("link"),Rn(m,"link",o),vn(m),h.head.appendChild(m)}}}function CV(o,u,h){Os.S(o,u,h);var m=lf;if(m&&o){var x=kc(m).hoistableStyles,E=uf(o);u=u||"default";var C=x.get(E);if(!C){var D={loading:0,preload:null};if(C=m.querySelector(Bh(E)))D.loading=5;else{o=g({rel:"stylesheet",href:o,"data-precedence":u},h),(h=wr.get(E))&&GS(o,h);var L=C=m.createElement("link");vn(L),Rn(L,"link",o),L._p=new Promise(function(W,te){L.onload=W,L.onerror=te}),L.addEventListener("load",function(){D.loading|=1}),L.addEventListener("error",function(){D.loading|=2}),D.loading|=4,$0(C,u,m)}C={type:"stylesheet",instance:C,count:1,state:D},x.set(E,C)}}}function TV(o,u){Os.X(o,u);var h=lf;if(h&&o){var m=kc(h).hoistableScripts,x=cf(o),E=m.get(x);E||(E=h.querySelector(jh(x)),E||(o=g({src:o,async:!0},u),(u=wr.get(x))&&YS(o,u),E=h.createElement("script"),vn(E),Rn(E,"link",o),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function MV(o,u){Os.M(o,u);var h=lf;if(h&&o){var m=kc(h).hoistableScripts,x=cf(o),E=m.get(x);E||(E=h.querySelector(jh(x)),E||(o=g({src:o,async:!0,type:"module"},u),(u=wr.get(x))&&YS(o,u),E=h.createElement("script"),vn(E),Rn(E,"link",o),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function yN(o,u,h,m){var x=(x=Me.current)?M0(x):null;if(!x)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=uf(h.href),h=kc(x).hoistableStyles,m=h.get(u),m||(m={type:"style",instance:null,count:0,state:null},h.set(u,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=uf(h.href);var E=kc(x).hoistableStyles,C=E.get(o);if(C||(x=x.ownerDocument||x,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(o,C),(E=x.querySelector(Bh(o)))&&!E._p&&(C.instance=E,C.state.loading=5),wr.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},wr.set(o,h),E||$V(x,o,h,C.state))),u&&m===null)throw Error(i(528,""));return C}if(u&&m!==null)throw Error(i(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=cf(h),h=kc(x).hoistableScripts,m=h.get(u),m||(m={type:"script",instance:null,count:0,state:null},h.set(u,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function uf(o){return'href="'+mr(o)+'"'}function Bh(o){return'link[rel="stylesheet"]['+o+"]"}function vN(o){return g({},o,{"data-precedence":o.precedence,precedence:null})}function $V(o,u,h,m){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?m.loading=1:(u=o.createElement("link"),m.preload=u,u.addEventListener("load",function(){return m.loading|=1}),u.addEventListener("error",function(){return m.loading|=2}),Rn(u,"link",h),vn(u),o.head.appendChild(u))}function cf(o){return'[src="'+mr(o)+'"]'}function jh(o){return"script[async]"+o}function bN(o,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var m=o.querySelector('style[data-href~="'+mr(h.href)+'"]');if(m)return u.instance=m,vn(m),m;var x=g({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(o.ownerDocument||o).createElement("style"),vn(m),Rn(m,"style",x),$0(m,h.precedence,o),u.instance=m;case"stylesheet":x=uf(h.href);var E=o.querySelector(Bh(x));if(E)return u.state.loading|=4,u.instance=E,vn(E),E;m=vN(h),(x=wr.get(x))&&GS(m,x),E=(o.ownerDocument||o).createElement("link"),vn(E);var C=E;return C._p=new Promise(function(D,L){C.onload=D,C.onerror=L}),Rn(E,"link",m),u.state.loading|=4,$0(E,h.precedence,o),u.instance=E;case"script":return E=cf(h.src),(x=o.querySelector(jh(E)))?(u.instance=x,vn(x),x):(m=h,(x=wr.get(E))&&(m=g({},h),YS(m,x)),o=o.ownerDocument||o,x=o.createElement("script"),vn(x),Rn(x,"link",m),o.head.appendChild(x),u.instance=x);case"void":return null;default:throw Error(i(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(m=u.instance,u.state.loading|=4,$0(m,h.precedence,o));return u.instance}function $0(o,u,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=m.length?m[m.length-1]:null,E=x,C=0;C<m.length;C++){var D=m[C];if(D.dataset.precedence===u)E=D;else if(E!==x)break}E?E.parentNode.insertBefore(o,E.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(o,u.firstChild))}function GS(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function YS(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var k0=null;function xN(o,u,h){if(k0===null){var m=new Map,x=k0=new Map;x.set(h,m)}else x=k0,m=x.get(h),m||(m=new Map,x.set(h,m));if(m.has(o))return m;for(m.set(o,null),h=h.getElementsByTagName(o),x=0;x<h.length;x++){var E=h[x];if(!(E[nh]||E[kn]||o==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var C=E.getAttribute(u)||"";C=o+C;var D=m.get(C);D?D.push(E):m.set(C,[E])}}return m}function SN(o,u,h){o=o.ownerDocument||o,o.head.insertBefore(h,u==="title"?o.querySelector("head > title"):null)}function kV(o,u,h){if(h===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function EN(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function DV(o,u,h,m){if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var x=uf(m.href),E=u.querySelector(Bh(x));if(E){u=E._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=D0.bind(o),u.then(o,o)),h.state.loading|=4,h.instance=E,vn(E);return}E=u.ownerDocument||u,m=vN(m),(x=wr.get(x))&&GS(m,x),E=E.createElement("link"),vn(E);var C=E;C._p=new Promise(function(D,L){C.onload=D,C.onerror=L}),Rn(E,"link",m),h.instance=E}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(h,u),(u=h.state.preload)&&(h.state.loading&3)===0&&(o.count++,h=D0.bind(o),u.addEventListener("load",h),u.addEventListener("error",h))}}var XS=0;function OV(o,u){return o.stylesheets&&o.count===0&&N0(o,o.stylesheets),0<o.count||0<o.imgCount?function(h){var m=setTimeout(function(){if(o.stylesheets&&N0(o,o.stylesheets),o.unsuspend){var E=o.unsuspend;o.unsuspend=null,E()}},6e4+u);0<o.imgBytes&&XS===0&&(XS=62500*dV());var x=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&N0(o,o.stylesheets),o.unsuspend)){var E=o.unsuspend;o.unsuspend=null,E()}},(o.imgBytes>XS?50:800)+u);return o.unsuspend=h,function(){o.unsuspend=null,clearTimeout(m),clearTimeout(x)}}:null}function D0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)N0(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var O0=null;function N0(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,O0=new Map,u.forEach(NV,o),O0=null,D0.call(o))}function NV(o,u){if(!(u.state.loading&4)){var h=O0.get(o);if(h)var m=h.get(null);else{h=new Map,O0.set(o,h);for(var x=o.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<x.length;E++){var C=x[E];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(h.set(C.dataset.precedence,C),m=C)}m&&h.set(null,m)}x=u.instance,C=x.getAttribute("data-precedence"),E=h.get(C)||m,E===m&&h.set(null,x),h.set(C,x),this.count++,m=D0.bind(this),x.addEventListener("load",m),x.addEventListener("error",m),E?E.parentNode.insertBefore(x,E.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(x,o.firstChild)),u.state.loading|=4}}var qh={$$typeof:A,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function RV(o,u,h,m,x,E,C,D,L){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ix(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ix(0),this.hiddenUpdates=Ix(null),this.identifierPrefix=m,this.onUncaughtError=x,this.onCaughtError=E,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function _N(o,u,h,m,x,E,C,D,L,W,te,se){return o=new RV(o,u,h,C,L,W,te,se,D),u=1,E===!0&&(u|=24),E=Vi(3,null,null,u),o.current=E,E.stateNode=o,u=C2(),u.refCount++,o.pooledCache=u,u.refCount++,E.memoizedState={element:m,isDehydrated:h,cache:u},k2(E),o}function wN(o){return o?(o=jc,o):jc}function AN(o,u,h,m,x,E){x=wN(x),m.context===null?m.context=x:m.pendingContext=x,m=Co(u),m.payload={element:h},E=E===void 0?null:E,E!==null&&(m.callback=E),h=To(o,m,u),h!==null&&($i(h,o,u),bh(h,o,u))}function CN(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<u?h:u}}function VS(o,u){CN(o,u),(o=o.alternate)&&CN(o,u)}function TN(o){if(o.tag===13||o.tag===31){var u=Wl(o,67108864);u!==null&&$i(u,o,67108864),VS(o,67108864)}}function MN(o){if(o.tag===13||o.tag===31){var u=Ji();u=Px(u);var h=Wl(o,u);h!==null&&$i(h,o,u),VS(o,u)}}var R0=!0;function zV(o,u,h,m){var x=O.T;O.T=null;var E=B.p;try{B.p=2,WS(o,u,h,m)}finally{B.p=E,O.T=x}}function FV(o,u,h,m){var x=O.T;O.T=null;var E=B.p;try{B.p=8,WS(o,u,h,m)}finally{B.p=E,O.T=x}}function WS(o,u,h,m){if(R0){var x=QS(m);if(x===null)zS(o,u,m,z0,h),kN(o,m);else if(UV(x,o,u,h,m))m.stopPropagation();else if(kN(o,m),u&4&&-1<LV.indexOf(o)){for(;x!==null;){var E=$c(x);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var C=Hl(E.pendingLanes);if(C!==0){var D=E;for(D.pendingLanes|=2,D.entangledLanes|=2;C;){var L=1<<31-Yi(C);D.entanglements[1]|=L,C&=~L}Ma(E),(dt&6)===0&&(y0=Hi()+500,zh(0))}}break;case 31:case 13:D=Wl(E,2),D!==null&&$i(D,E,2),b0(),VS(E,2)}if(E=QS(m),E===null&&zS(o,u,m,z0,h),E===x)break;x=E}x!==null&&m.stopPropagation()}else zS(o,u,m,null,h)}}function QS(o){return o=Kx(o),ZS(o)}var z0=null;function ZS(o){if(z0=null,o=Mc(o),o!==null){var u=a(o);if(u===null)o=null;else{var h=u.tag;if(h===13){if(o=s(u),o!==null)return o;o=null}else if(h===31){if(o=l(u),o!==null)return o;o=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return z0=o,null}function $N(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(EY()){case Lk:return 2;case Uk:return 8;case wm:case _Y:return 32;case Bk:return 268435456;default:return 32}default:return 32}}var KS=!1,Uo=null,Bo=null,jo=null,Ih=new Map,Ph=new Map,qo=[],LV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kN(o,u){switch(o){case"focusin":case"focusout":Uo=null;break;case"dragenter":case"dragleave":Bo=null;break;case"mouseover":case"mouseout":jo=null;break;case"pointerover":case"pointerout":Ih.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ph.delete(u.pointerId)}}function Hh(o,u,h,m,x,E){return o===null||o.nativeEvent!==E?(o={blockedOn:u,domEventName:h,eventSystemFlags:m,nativeEvent:E,targetContainers:[x]},u!==null&&(u=$c(u),u!==null&&TN(u)),o):(o.eventSystemFlags|=m,u=o.targetContainers,x!==null&&u.indexOf(x)===-1&&u.push(x),o)}function UV(o,u,h,m,x){switch(u){case"focusin":return Uo=Hh(Uo,o,u,h,m,x),!0;case"dragenter":return Bo=Hh(Bo,o,u,h,m,x),!0;case"mouseover":return jo=Hh(jo,o,u,h,m,x),!0;case"pointerover":var E=x.pointerId;return Ih.set(E,Hh(Ih.get(E)||null,o,u,h,m,x)),!0;case"gotpointercapture":return E=x.pointerId,Ph.set(E,Hh(Ph.get(E)||null,o,u,h,m,x)),!0}return!1}function DN(o){var u=Mc(o.target);if(u!==null){var h=a(u);if(h!==null){if(u=h.tag,u===13){if(u=s(h),u!==null){o.blockedOn=u,Gk(o.priority,function(){MN(h)});return}}else if(u===31){if(u=l(h),u!==null){o.blockedOn=u,Gk(o.priority,function(){MN(h)});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function F0(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var h=QS(o.nativeEvent);if(h===null){h=o.nativeEvent;var m=new h.constructor(h.type,h);Zx=m,h.target.dispatchEvent(m),Zx=null}else return u=$c(h),u!==null&&TN(u),o.blockedOn=h,!1;u.shift()}return!0}function ON(o,u,h){F0(o)&&h.delete(u)}function BV(){KS=!1,Uo!==null&&F0(Uo)&&(Uo=null),Bo!==null&&F0(Bo)&&(Bo=null),jo!==null&&F0(jo)&&(jo=null),Ih.forEach(ON),Ph.forEach(ON)}function L0(o,u){o.blockedOn===u&&(o.blockedOn=null,KS||(KS=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,BV)))}var U0=null;function NN(o){U0!==o&&(U0=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){U0===o&&(U0=null);for(var u=0;u<o.length;u+=3){var h=o[u],m=o[u+1],x=o[u+2];if(typeof m!="function"){if(ZS(m||h)===null)continue;break}var E=$c(h);E!==null&&(o.splice(u,3),u-=3,Q2(E,{pending:!0,data:x,method:h.method,action:m},m,x))}}))}function ff(o){function u(L){return L0(L,o)}Uo!==null&&L0(Uo,o),Bo!==null&&L0(Bo,o),jo!==null&&L0(jo,o),Ih.forEach(u),Ph.forEach(u);for(var h=0;h<qo.length;h++){var m=qo[h];m.blockedOn===o&&(m.blockedOn=null)}for(;0<qo.length&&(h=qo[0],h.blockedOn===null);)DN(h),h.blockedOn===null&&qo.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var x=h[m],E=h[m+1],C=x[_i]||null;if(typeof E=="function")C||NN(h);else if(C){var D=null;if(E&&E.hasAttribute("formAction")){if(x=E,C=E[_i]||null)D=C.formAction;else if(ZS(x)!==null)continue}else D=C.action;typeof D=="function"?h[m+1]=D:(h.splice(m,3),m-=3),NN(h)}}}function RN(){function o(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(C){return x=C})},focusReset:"manual",scroll:"manual"})}function u(){x!==null&&(x(),x=null),m||setTimeout(h,20)}function h(){if(!m&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,x=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(h,100),function(){m=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),x!==null&&(x(),x=null)}}}function JS(o){this._internalRoot=o}B0.prototype.render=JS.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(i(409));var h=u.current,m=Ji();AN(h,m,o,u,null,null)},B0.prototype.unmount=JS.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;AN(o.current,2,null,o,null,null),b0(),u[Tc]=null}};function B0(o){this._internalRoot=o}B0.prototype.unstable_scheduleHydration=function(o){if(o){var u=Hk();o={blockedOn:null,target:o,priority:u};for(var h=0;h<qo.length&&u!==0&&u<qo[h].priority;h++);qo.splice(h,0,o),h===0&&DN(o)}};var zN=t.version;if(zN!=="19.2.0")throw Error(i(527,zN,"19.2.0"));B.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=f(u),o=o!==null?d(o):null,o=o===null?null:o.stateNode,o};var jV={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var j0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!j0.isDisabled&&j0.supportsFiber)try{Jd=j0.inject(jV),Gi=j0}catch{}}return Yh.createRoot=function(o,u){if(!r(o))throw Error(i(299));var h=!1,m="",x=IO,E=PO,C=HO;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(x=u.onUncaughtError),u.onCaughtError!==void 0&&(E=u.onCaughtError),u.onRecoverableError!==void 0&&(C=u.onRecoverableError)),u=_N(o,1,!1,null,null,h,m,null,x,E,C,RN),o[Tc]=u.current,RS(o),new JS(u)},Yh.hydrateRoot=function(o,u,h){if(!r(o))throw Error(i(299));var m=!1,x="",E=IO,C=PO,D=HO,L=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(C=h.onCaughtError),h.onRecoverableError!==void 0&&(D=h.onRecoverableError),h.formState!==void 0&&(L=h.formState)),u=_N(o,1,!0,u,h??null,m,x,L,E,C,D,RN),u.context=wN(null),h=u.current,m=Ji(),m=Px(m),x=Co(m),x.callback=null,To(h,x,m),h=m,u.current.lanes=h,th(u,h),Ma(u),o[Tc]=u.current,RS(o),new B0(u)},Yh.version="19.2.0",Yh}var GN;function QV(){if(GN)return nE.exports;GN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),nE.exports=WV(),nE.exports}var ZV=QV();const KV=/("(?:[^\\"]|\\.)*")|[:,]/g;function sE(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),i=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:r}=t;return(function a(s,l,c){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const f=JSON.stringify(s,r);if(f===void 0)return f;const d=i-l.length-c;if(f.length<=d){const g=f.replace(KV,(p,y)=>y||`${p} `);if(g.length<=d)return g}if(r!=null&&(s=JSON.parse(f),r=void 0),typeof s=="object"&&s!==null){const g=l+n,p=[];let y=0,v,b;if(Array.isArray(s)){v="[",b="]";const{length:S}=s;for(;y<S;y++)p.push(a(s[y],g,y===S-1?0:1)||"null")}else{v="{",b="}";const S=Object.keys(s),{length:_}=S;for(;y<_;y++){const w=S[y],A=`${JSON.stringify(w)}: `,T=a(s[w],g,A.length+(y===_-1?0:1));T!==void 0&&p.push(A+T)}}if(p.length>0)return[v,n+p.join(`,
${g}`),b].join(`
${l}`)}return f})(e,"",0)}function Ii(e,t,n){return e.fields=t||[],e.fname=n,e}function Vt(e){return e==null?null:e.fname}function Jn(e){return e==null?null:e.fields}function T8(e){return e.length===1?JV(e[0]):eW(e)}const JV=e=>function(t){return t[e]},eW=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function ee(e){throw Error(e)}function ns(e){const t=[],n=e.length;let i=null,r=0,a="",s,l,c;e=e+"";function f(){t.push(a+e.substring(s,l)),a="",s=l+1}for(s=l=0;l<n;++l)if(c=e[l],c==="\\")a+=e.substring(s,l++),s=l;else if(c===i)f(),i=null,r=-1;else{if(i)continue;s===r&&c==='"'||s===r&&c==="'"?(s=l+1,i=c):c==="."&&!r?l>s?f():s=l+1:c==="["?(l>s&&f(),r=s=l+1):c==="]"&&(r||ee("Access path missing open bracket: "+e),r>0&&f(),r=0,s=l+1)}return r&&ee("Access path missing closing bracket: "+e),i&&ee("Access path missing closing quote: "+e),l>s&&(l++,f()),t}function zr(e,t,n){const i=ns(e);return e=i.length===1?i[0]:e,Ii((n&&n.get||T8)(i),[e],t||e)}const Op=zr("id"),ii=Ii(e=>e,[],"identity"),Ko=Ii(()=>0,[],"zero"),Ad=Ii(()=>1,[],"one"),Fr=Ii(()=>!0,[],"true"),Ho=Ii(()=>!1,[],"false"),dC=new Set([...Object.getOwnPropertyNames(Object.prototype).filter(e=>typeof Object.prototype[e]=="function"),"__proto__"]);function tW(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const M8=0,hC=1,gC=2,$8=3,k8=4;function Ov(e,t,n=tW){let i=e||M8;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=hC&&n(t||"error","ERROR",arguments),this},warn(){return i>=gC&&n(t||"warn","WARN",arguments),this},info(){return i>=$8&&n(t||"log","INFO",arguments),this},debug(){return i>=k8&&n(t||"log","DEBUG",arguments),this}}}var ie=Array.isArray;function be(e){return e===Object(e)}const YN=e=>e!=="__proto__";function Cd(...e){return e.reduce((t,n)=>{for(const i in n)if(i==="signals")t.signals=nW(t.signals,n.signals);else{const r=i==="legend"?{layout:1}:i==="style"?!0:null;Td(t,i,n[i],r)}return t},{})}function Td(e,t,n,i){if(!YN(t))return;let r,a;if(be(n)&&!ie(n)){a=be(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?Td(a,r,n[r]):YN(r)&&(a[r]=n[r])}else e[t]=n}function nW(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function rt(e){return e[e.length-1]}function Zn(e){return e==null||e===""?null:+e}const D8=e=>t=>e*Math.exp(t),O8=e=>t=>Math.log(e*t),N8=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),R8=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,J1=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Nv(e,t,n,i){const r=n(e[0]),a=n(rt(e)),s=(a-r)*t;return[i(r-s),i(a-s)]}function z8(e,t){return Nv(e,t,Zn,ii)}function F8(e,t){var n=Math.sign(e[0]);return Nv(e,t,O8(n),D8(n))}function L8(e,t,n){return Nv(e,t,J1(n),J1(1/n))}function U8(e,t,n){return Nv(e,t,N8(n),R8(n))}function Rv(e,t,n,i,r){const a=i(e[0]),s=i(rt(e)),l=t!=null?i(t):(a+s)/2;return[r(l+(a-l)*n),r(l+(s-l)*n)]}function pC(e,t,n){return Rv(e,t,n,Zn,ii)}function mC(e,t,n){const i=Math.sign(e[0]);return Rv(e,t,n,O8(i),D8(i))}function ey(e,t,n,i){return Rv(e,t,n,J1(i),J1(1/i))}function yC(e,t,n,i){return Rv(e,t,n,N8(i),R8(i))}function B8(e){return 1+~~(new Date(e).getMonth()/3)}function j8(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Se(e){return e!=null?ie(e)?e:[e]:[]}function q8(e,t,n){let i=e[0],r=e[1],a;return r<i&&(a=r,r=i,i=a),a=r-i,a>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-a),i+a]}function He(e){return typeof e=="function"}const iW="descending";function vC(e,t,n){n=n||{},t=Se(t)||[];const i=[],r=[],a={},s=n.comparator||rW;return Se(e).forEach((l,c)=>{l!=null&&(i.push(t[c]===iW?-1:1),r.push(l=He(l)?l:zr(l,null,n)),(Jn(l)||[]).forEach(f=>a[f]=1))}),r.length===0?null:Ii(s(r,i),Object.keys(a))}const Md=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),rW=(e,t)=>e.length===1?aW(e[0],t[0]):sW(e,t,e.length),aW=(e,t)=>function(n,i){return Md(e(n),e(i))*t},sW=(e,t,n)=>(t.push(0),function(i,r){let a,s=0,l=-1;for(;s===0&&++l<n;)a=e[l],s=Md(a(i),a(r));return s*t[l]});function ri(e){return He(e)?e:()=>e}function bC(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function Pe(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function Xa(e,t){let n=0,i,r,a,s;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=s=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function I8(e,t){const n=e.length;let i=-1,r,a,s,l,c;if(t==null){for(;++i<n;)if(a=e[i],a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(l=c=i;++i<n;)a=e[i],a!=null&&(r>a&&(r=a,l=i),s<a&&(s=a,c=i))}else{for(;++i<n;)if(a=t(e[i],i,e),a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(l=c=i;++i<n;)a=t(e[i],i,e),a!=null&&(r>a&&(r=a,l=i),s<a&&(s=a,c=i))}return[l,c]}function Ee(e,t){return Object.hasOwn(e,t)}const q0={};function $d(e){let t={},n;function i(a){return Ee(t,a)&&t[a]!==q0}const r={size:0,empty:0,object:t,has:i,get(a){return i(a)?t[a]:void 0},set(a,s){return i(a)||(++r.size,t[a]===q0&&--r.empty),t[a]=s,this},delete(a){return i(a)&&(--r.size,++r.empty,t[a]=q0),this},clear(){r.size=r.empty=0,r.object=t={}},test(a){return arguments.length?(n=a,r):n},clean(){const a={};let s=0;for(const l in t){const c=t[l];c!==q0&&(!n||!n(c))&&(a[l]=c,++s)}r.size=s,r.empty=0,r.object=t=a}};return e&&Object.keys(e).forEach(a=>{r.set(a,e[a])}),r}function P8(e,t,n,i,r,a){if(!n&&n!==0)return a;const s=+n;let l=e[0],c=rt(e),f;c<l&&(f=l,l=c,c=f),f=Math.abs(t-l);const d=Math.abs(c-t);return f<d&&f<=s?i:d<=s?r:a}function ye(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Pe(i,n)}function Tf(e,t,n,i){let r=t[0],a=t[t.length-1],s;return r>a&&(s=r,r=a,a=s),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=a:e<a)}function $l(e){return typeof e=="boolean"}function ll(e){return Object.prototype.toString.call(e)==="[object Date]"}function H8(e){return e&&He(e[Symbol.iterator])}function ut(e){return typeof e=="number"}function xC(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function xe(e){return typeof e=="string"}function SC(e,t,n){e&&(e=t?Se(e).map(l=>l.replace(/\\(.)/g,"$1")):Se(e));const i=e&&e.length,r=n&&n.get||T8,a=l=>r(t?[l]:ns(l));let s;if(!i)s=function(){return""};else if(i===1){const l=a(e[0]);s=function(c){return""+l(c)}}else{const l=e.map(a);s=function(c){let f=""+l[0](c),d=0;for(;++d<i;)f+="|"+l[d](c);return f}}return Ii(s,e,"key")}function G8(e,t){const n=e[0],i=rt(e),r=+t;return r?r===1?i:n+r*(i-n):n}const oW=1e4;function Y8(e){e=+e||oW;let t,n,i;const r=()=>{t={},n={},i=0},a=(s,l)=>(++i>e&&(n=t,t={},i=1),t[s]=l);return r(),{clear:r,has:s=>Ee(t,s)||Ee(n,s),get:s=>Ee(t,s)?t[s]:Ee(n,s)?a(s,n[s]):void 0,set:(s,l)=>Ee(t,s)?t[s]=l:a(s,l)}}function X8(e,t,n,i){const r=t.length,a=n.length;if(!a)return t;if(!r)return n;const s=i||new t.constructor(r+a);let l=0,c=0,f=0;for(;l<r&&c<a;++f)s[f]=e(t[l],n[c])>0?n[c++]:t[l++];for(;l<r;++l,++f)s[f]=t[l];for(;c<a;++c,++f)s[f]=n[c];return s}function vg(e,t){let n="";for(;--t>=0;)n+=e;return n}function V8(e,t,n,i){const r=n||" ",a=e+"",s=t-a.length;return s<=0?a:i==="left"?vg(r,s)+a:i==="center"?vg(r,~~(s/2))+a+vg(r,Math.ceil(s/2)):a+vg(r,s)}function Np(e){return e&&rt(e)-e[0]||0}function ge(e){return ie(e)?`[${e.map(t=>t===null?"null":ge(t))}]`:be(e)||xe(e)?JSON.stringify(e).replaceAll("\u2028","\\u2028").replaceAll("\u2029","\\u2029"):e}function EC(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const lW=e=>ut(e)||ll(e)?e:Date.parse(e);function _C(e,t){return t=t||lW,e==null||e===""?null:t(e)}function wC(e){return e==null||e===""?null:e+""}function ca(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function W8(e,t,n,i){const r=i??"",a=e+"",s=a.length,l=Math.max(0,t-r.length);return s<=t?a:n==="left"?r+a.slice(s-l):n==="center"?a.slice(0,Math.ceil(l/2))+r+a.slice(s-~~(l/2)):a.slice(0,l)+r}function Xo(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const a=t(e[r]);a&&n(a,r,e)}}else e.forEach(n)}var XN={},oE={},lE=34,Xh=10,uE=13;function Q8(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function uW(e,t){var n=Q8(e);return function(i,r){return t(n(i),r,e)}}function VN(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function ki(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function cW(e){return e<0?"-"+ki(-e,6):e>9999?"+"+ki(e,6):ki(e,4)}function fW(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":cW(e.getUTCFullYear())+"-"+ki(e.getUTCMonth()+1,2)+"-"+ki(e.getUTCDate(),2)+(r?"T"+ki(t,2)+":"+ki(n,2)+":"+ki(i,2)+"."+ki(r,3)+"Z":i?"T"+ki(t,2)+":"+ki(n,2)+":"+ki(i,2)+"Z":n||t?"T"+ki(t,2)+":"+ki(n,2)+"Z":"")}function dW(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(g,p){var y,v,b=r(g,function(S,_){if(y)return y(S,_-1);v=S,y=p?uW(S,p):Q8(S)});return b.columns=v||[],b}function r(g,p){var y=[],v=g.length,b=0,S=0,_,w=v<=0,A=!1;g.charCodeAt(v-1)===Xh&&--v,g.charCodeAt(v-1)===uE&&--v;function T(){if(w)return oE;if(A)return A=!1,XN;var k,M=b,N;if(g.charCodeAt(M)===lE){for(;b++<v&&g.charCodeAt(b)!==lE||g.charCodeAt(++b)===lE;);return(k=b)>=v?w=!0:(N=g.charCodeAt(b++))===Xh?A=!0:N===uE&&(A=!0,g.charCodeAt(b)===Xh&&++b),g.slice(M+1,k-1).replace(/""/g,'"')}for(;b<v;){if((N=g.charCodeAt(k=b++))===Xh)A=!0;else if(N===uE)A=!0,g.charCodeAt(b)===Xh&&++b;else if(N!==n)continue;return g.slice(M,k)}return w=!0,g.slice(M,v)}for(;(_=T())!==oE;){for(var $=[];_!==XN&&_!==oE;)$.push(_),_=T();p&&($=p($,S++))==null||y.push($)}return y}function a(g,p){return g.map(function(y){return p.map(function(v){return d(y[v])}).join(e)})}function s(g,p){return p==null&&(p=VN(g)),[p.map(d).join(e)].concat(a(g,p)).join(`
`)}function l(g,p){return p==null&&(p=VN(g)),a(g,p).join(`
`)}function c(g){return g.map(f).join(`
`)}function f(g){return g.map(d).join(e)}function d(g){return g==null?"":g instanceof Date?fW(g):t.test(g+="")?'"'+g.replace(/"/g,'""')+'"':g}return{parse:i,parseRows:r,format:s,formatBody:l,formatRows:c,formatRow:f,formatValue:d}}function hW(e){return e}function gW(e){if(e==null)return hW;var t,n,i=e.scale[0],r=e.scale[1],a=e.translate[0],s=e.translate[1];return function(l,c){c||(t=n=0);var f=2,d=l.length,g=new Array(d);for(g[0]=(t+=l[0])*i+a,g[1]=(n+=l[1])*r+s;f<d;)g[f]=l[f],++f;return g}}function pW(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function mW(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return WN(e,n)})}:WN(e,t)}function WN(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,a=Z8(e,t);return n==null&&i==null?{type:"Feature",properties:r,geometry:a}:i==null?{type:"Feature",id:n,properties:r,geometry:a}:{type:"Feature",id:n,bbox:i,properties:r,geometry:a}}function Z8(e,t){var n=gW(e.transform),i=e.arcs;function r(d,g){g.length&&g.pop();for(var p=i[d<0?~d:d],y=0,v=p.length;y<v;++y)g.push(n(p[y],y));d<0&&pW(g,v)}function a(d){return n(d)}function s(d){for(var g=[],p=0,y=d.length;p<y;++p)r(d[p],g);return g.length<2&&g.push(g[0]),g}function l(d){for(var g=s(d);g.length<4;)g.push(g[0]);return g}function c(d){return d.map(l)}function f(d){var g=d.type,p;switch(g){case"GeometryCollection":return{type:g,geometries:d.geometries.map(f)};case"Point":p=a(d.coordinates);break;case"MultiPoint":p=d.coordinates.map(a);break;case"LineString":p=s(d.arcs);break;case"MultiLineString":p=d.arcs.map(s);break;case"Polygon":p=c(d.arcs);break;case"MultiPolygon":p=d.arcs.map(c);break;default:return null}return{type:g,coordinates:p}}return f(t)}function yW(e,t){var n={},i={},r={},a=[],s=-1;t.forEach(function(f,d){var g=e.arcs[f<0?~f:f],p;g.length<3&&!g[1][0]&&!g[1][1]&&(p=t[++s],t[s]=f,t[d]=p)}),t.forEach(function(f){var d=l(f),g=d[0],p=d[1],y,v;if(y=r[g])if(delete r[y.end],y.push(f),y.end=p,v=i[p]){delete i[v.start];var b=v===y?y:y.concat(v);i[b.start=y.start]=r[b.end=v.end]=b}else i[y.start]=r[y.end]=y;else if(y=i[p])if(delete i[y.start],y.unshift(f),y.start=g,v=r[g]){delete r[v.end];var S=v===y?y:v.concat(y);i[S.start=v.start]=r[S.end=y.end]=S}else i[y.start]=r[y.end]=y;else y=[f],i[y.start=g]=r[y.end=p]=y});function l(f){var d=e.arcs[f<0?~f:f],g=d[0],p;return e.transform?(p=[0,0],d.forEach(function(y){p[0]+=y[0],p[1]+=y[1]})):p=d[d.length-1],f<0?[p,g]:[g,p]}function c(f,d){for(var g in f){var p=f[g];delete d[p.start],delete p.start,delete p.end,p.forEach(function(y){n[y<0?~y:y]=1}),a.push(p)}}return c(r,i),c(i,r),t.forEach(function(f){n[f<0?~f:f]||a.push([f])}),a}function vW(e){return Z8(e,bW.apply(this,arguments))}function bW(e,t,n){var i,r,a;if(arguments.length>1)i=xW(e,t,n);else for(r=0,i=new Array(a=e.arcs.length);r<a;++r)i[r]=r;return{type:"MultiLineString",arcs:yW(e,i)}}function xW(e,t,n){var i=[],r=[],a;function s(g){var p=g<0?~g:g;(r[p]||(r[p]=[])).push({i:g,g:a})}function l(g){g.forEach(s)}function c(g){g.forEach(l)}function f(g){g.forEach(c)}function d(g){switch(a=g,g.type){case"GeometryCollection":g.geometries.forEach(d);break;case"LineString":l(g.arcs);break;case"MultiLineString":case"Polygon":c(g.arcs);break;case"MultiPolygon":f(g.arcs);break}}return d(t),r.forEach(n==null?function(g){i.push(g[0].i)}:function(g){n(g[0].g,g[g.length-1].g)&&i.push(g[0].i)}),i}function Vs(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function SW(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function kd(e){let t,n,i;e.length!==2?(t=Vs,n=(l,c)=>Vs(e(l),c),i=(l,c)=>e(l)-c):(t=e===Vs||e===SW?e:EW,n=e,i=e);function r(l,c,f=0,d=l.length){if(f<d){if(t(c,c)!==0)return d;do{const g=f+d>>>1;n(l[g],c)<0?f=g+1:d=g}while(f<d)}return f}function a(l,c,f=0,d=l.length){if(f<d){if(t(c,c)!==0)return d;do{const g=f+d>>>1;n(l[g],c)<=0?f=g+1:d=g}while(f<d)}return f}function s(l,c,f=0,d=l.length){const g=r(l,c,f,d-1);return g>f&&i(l[g-1],c)>-i(l[g],c)?g-1:g}return{left:r,center:s,right:a}}function EW(){return 0}function K8(e){return e===null?NaN:+e}function*_W(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const J8=kd(Vs),gl=J8.right,wW=J8.left;kd(K8).center;function AW(e,t){let n=0,i,r=0,a=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(i=s-r,r+=i/++n,a+=i*(s-r));else{let s=-1;for(let l of e)(l=t(l,++s,e))!=null&&(l=+l)>=l&&(i=l-r,r+=i/++n,a+=i*(l-r))}if(n>1)return a/(n-1)}function CW(e,t){const n=AW(e,t);return n&&Math.sqrt(n)}class mi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const a=n[r],s=t+a,l=Math.abs(t)<Math.abs(a)?t-(s-a):a-(s-t);l&&(n[i++]=l),t=s}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,a,s=0;if(n>0){for(s=t[--n];n>0&&(i=s,r=t[--n],s=i+r,a=r-(s-i),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(r=a*2,i=s+r,r==i-s&&(s=i))}return s}}class QN extends Map{constructor(t,n=n9){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(Q_(this,t))}has(t){return super.has(Q_(this,t))}set(t,n){return super.set(e9(this,t),n)}delete(t){return super.delete(t9(this,t))}}class ty extends Set{constructor(t,n=n9){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(Q_(this,t))}add(t){return super.add(e9(this,t))}delete(t){return super.delete(t9(this,t))}}function Q_({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function e9({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function t9({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function n9(e){return e!==null&&typeof e=="object"?e.valueOf():e}function TW(e,t){return Array.from(t,n=>e[n])}function MW(e=Vs){if(e===Vs)return i9;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function i9(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const $W=Math.sqrt(50),kW=Math.sqrt(10),DW=Math.sqrt(2);function ny(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),s=a>=$W?10:a>=kW?5:a>=DW?2:1;let l,c,f;return r<0?(f=Math.pow(10,-r)/s,l=Math.round(e*f),c=Math.round(t*f),l/f<e&&++l,c/f>t&&--c,f=-f):(f=Math.pow(10,r)*s,l=Math.round(e/f),c=Math.round(t/f),l*f<e&&++l,c*f>t&&--c),c<l&&.5<=n&&n<2?ny(e,t,n*2):[l,c,f]}function Z_(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,a,s]=i?ny(t,e,n):ny(e,t,n);if(!(a>=r))return[];const l=a-r+1,c=new Array(l);if(i)if(s<0)for(let f=0;f<l;++f)c[f]=(a-f)/-s;else for(let f=0;f<l;++f)c[f]=(a-f)*s;else if(s<0)for(let f=0;f<l;++f)c[f]=(r+f)/-s;else for(let f=0;f<l;++f)c[f]=(r+f)*s;return c}function K_(e,t,n){return t=+t,e=+e,n=+n,ny(e,t,n)[2]}function pl(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?K_(t,e,n):K_(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function Du(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function J_(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function r9(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?i9:MW(r);i>n;){if(i-n>600){const c=i-n+1,f=t-n+1,d=Math.log(c),g=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*g*(c-g)/c)*(f-c/2<0?-1:1),y=Math.max(n,Math.floor(t-f*g/c+p)),v=Math.min(i,Math.floor(t+(c-f)*g/c+p));r9(e,t,y,v,r)}const a=e[t];let s=n,l=i;for(Vh(e,n,t),r(e[i],a)>0&&Vh(e,n,i);s<l;){for(Vh(e,s,l),++s,--l;r(e[s],a)<0;)++s;for(;r(e[l],a)>0;)--l}r(e[n],a)===0?Vh(e,n,l):(++l,Vh(e,l,i)),l<=t&&(n=l+1),t<=l&&(i=l-1)}return e}function Vh(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function ew(e,t,n){if(e=Float64Array.from(_W(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return J_(e);if(t>=1)return Du(e);var i,r=(i-1)*t,a=Math.floor(r),s=Du(r9(e,a).subarray(0,a+1)),l=J_(e.subarray(a+1));return s+(l-s)*(r-a)}}function a9(e,t,n=K8){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,a=Math.floor(r),s=+n(e[a],a,e),l=+n(e[a+1],a+1,e);return s+(l-s)*(r-a)}}function OW(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(a=+a)>=a&&(++n,i+=a)}if(n)return i/n}function s9(e,t){return ew(e,.5,t)}function*NW(e){for(const t of e)yield*t}function o9(e){return Array.from(NW(e))}function rr(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(r);++i<r;)a[i]=e+i*n;return a}function l9(e,t){let n=0;for(let i of e)(i=+i)&&(n+=i);return n}function RW(e,...t){e=new ty(e),t=t.map(zW);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function zW(e){return e instanceof ty?e:new ty(e)}function FW(...e){const t=new ty;for(const n of e)for(const i of n)t.add(i);return t}function LW(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function iy(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Hf(e){return e=iy(Math.abs(e)),e?e[1]:NaN}function UW(e,t){return function(n,i){for(var r=n.length,a=[],s=0,l=e[0],c=0;r>0&&l>0&&(c+l+1>i&&(l=Math.max(1,i-c)),a.push(n.substring(r-=l,r+l)),!((c+=l+1)>i));)l=e[s=(s+1)%e.length];return a.reverse().join(t)}}function BW(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var jW=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qu(e){if(!(t=jW.exec(e)))throw new Error("invalid format: "+e);var t;return new AC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}qu.prototype=AC.prototype;function AC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}AC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function qW(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var u9;function IW(e,t){var n=iy(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(u9=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+iy(e,Math.max(0,t+a-1))[0]}function ZN(e,t){var n=iy(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const KN={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:LW,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ZN(e*100,t),r:ZN,s:IW,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function JN(e){return e}var eR=Array.prototype.map,tR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function c9(e){var t=e.grouping===void 0||e.thousands===void 0?JN:UW(eR.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?JN:BW(eR.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function f(g){g=qu(g);var p=g.fill,y=g.align,v=g.sign,b=g.symbol,S=g.zero,_=g.width,w=g.comma,A=g.precision,T=g.trim,$=g.type;$==="n"?(w=!0,$="g"):KN[$]||(A===void 0&&(A=12),T=!0,$="g"),(S||p==="0"&&y==="=")&&(S=!0,p="0",y="=");var k=b==="$"?n:b==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",M=b==="$"?i:/[%p]/.test($)?s:"",N=KN[$],z=/[defgprs%]/.test($);A=A===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function j(U){var X=k,H=M,q,R,O;if($==="c")H=N(U)+H,U="";else{U=+U;var B=U<0||1/U<0;if(U=isNaN(U)?c:N(Math.abs(U),A),T&&(U=qW(U)),B&&+U==0&&v!=="+"&&(B=!1),X=(B?v==="("?v:l:v==="-"||v==="("?"":v)+X,H=($==="s"?tR[8+u9/3]:"")+H+(B&&v==="("?")":""),z){for(q=-1,R=U.length;++q<R;)if(O=U.charCodeAt(q),48>O||O>57){H=(O===46?r+U.slice(q+1):U.slice(q))+H,U=U.slice(0,q);break}}}w&&!S&&(U=t(U,1/0));var Y=X.length+U.length+H.length,Z=Y<_?new Array(_-Y+1).join(p):"";switch(w&&S&&(U=t(Z+U,Z.length?_-H.length:1/0),Z=""),y){case"<":U=X+U+H+Z;break;case"=":U=X+Z+U+H;break;case"^":U=Z.slice(0,Y=Z.length>>1)+X+U+H+Z.slice(Y);break;default:U=Z+X+U+H;break}return a(U)}return j.toString=function(){return g+""},j}function d(g,p){var y=f((g=qu(g),g.type="f",g)),v=Math.max(-8,Math.min(8,Math.floor(Hf(p)/3)))*3,b=Math.pow(10,-v),S=tR[8+v/3];return function(_){return y(b*_)+S}}return{format:f,formatPrefix:d}}var I0,zv,CC;PW({thousands:",",grouping:[3],currency:["$",""]});function PW(e){return I0=c9(e),zv=I0.format,CC=I0.formatPrefix,I0}function f9(e){return Math.max(0,-Hf(Math.abs(e)))}function d9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Hf(t)/3)))*3-Hf(Math.abs(e)))}function h9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Hf(t)-Hf(e))+1}const cE=new Date,fE=new Date;function mn(e,t,n,i){function r(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(e(a=new Date(+a)),a),r.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),r.round=a=>{const s=r(a),l=r.ceil(a);return a-s<l-a?s:l},r.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),r.range=(a,s,l)=>{const c=[];if(a=r.ceil(a),l=l==null?1:Math.floor(l),!(a<s)||!(l>0))return c;let f;do c.push(f=new Date(+a)),t(a,l),e(a);while(f<a&&a<s);return c},r.filter=a=>mn(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;t(s,-1),!a(s););else for(;--l>=0;)for(;t(s,1),!a(s););}),n&&(r.count=(a,s)=>(cE.setTime(+a),fE.setTime(+s),e(cE),e(fE),Math.floor(n(cE,fE))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?s=>i(s)%a===0:s=>r.count(0,s)%a===0):r)),r}const Gf=mn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Gf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?mn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Gf);Gf.range;const Is=1e3,$r=Is*60,Ps=$r*60,no=Ps*24,TC=no*7,nR=no*30,dE=no*365,Hs=mn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Is)},(e,t)=>(t-e)/Is,e=>e.getUTCSeconds());Hs.range;const Fv=mn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Is)},(e,t)=>{e.setTime(+e+t*$r)},(e,t)=>(t-e)/$r,e=>e.getMinutes());Fv.range;const Lv=mn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*$r)},(e,t)=>(t-e)/$r,e=>e.getUTCMinutes());Lv.range;const Uv=mn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Is-e.getMinutes()*$r)},(e,t)=>{e.setTime(+e+t*Ps)},(e,t)=>(t-e)/Ps,e=>e.getHours());Uv.range;const Bv=mn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ps)},(e,t)=>(t-e)/Ps,e=>e.getUTCHours());Bv.range;const Ws=mn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*$r)/no,e=>e.getDate()-1);Ws.range;const ul=mn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/no,e=>e.getUTCDate()-1);ul.range;const g9=mn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/no,e=>Math.floor(e/no));g9.range;function uc(e){return mn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*$r)/TC)}const Dd=uc(0),ry=uc(1),HW=uc(2),GW=uc(3),Yf=uc(4),YW=uc(5),XW=uc(6);Dd.range;ry.range;HW.range;GW.range;Yf.range;YW.range;XW.range;function cc(e){return mn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/TC)}const Od=cc(0),ay=cc(1),VW=cc(2),WW=cc(3),Xf=cc(4),QW=cc(5),ZW=cc(6);Od.range;ay.range;VW.range;WW.range;Xf.range;QW.range;ZW.range;const tp=mn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());tp.range;const np=mn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());np.range;const Va=mn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Va.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:mn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Va.range;const Wa=mn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Wa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:mn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Wa.range;function p9(e,t,n,i,r,a){const s=[[Hs,1,Is],[Hs,5,5*Is],[Hs,15,15*Is],[Hs,30,30*Is],[a,1,$r],[a,5,5*$r],[a,15,15*$r],[a,30,30*$r],[r,1,Ps],[r,3,3*Ps],[r,6,6*Ps],[r,12,12*Ps],[i,1,no],[i,2,2*no],[n,1,TC],[t,1,nR],[t,3,3*nR],[e,1,dE]];function l(f,d,g){const p=d<f;p&&([f,d]=[d,f]);const y=g&&typeof g.range=="function"?g:c(f,d,g),v=y?y.range(f,+d+1):[];return p?v.reverse():v}function c(f,d,g){const p=Math.abs(d-f)/g,y=kd(([,,S])=>S).right(s,p);if(y===s.length)return e.every(pl(f/dE,d/dE,g));if(y===0)return Gf.every(Math.max(pl(f,d,g),1));const[v,b]=s[p/s[y-1][2]<s[y][2]/p?y-1:y];return v.every(b)}return[l,c]}const[KW,JW]=p9(Wa,np,Od,g9,Bv,Lv),[eQ,tQ]=p9(Va,tp,Dd,Ws,Uv,Fv),qn="year",Fi="quarter",ei="month",hn="week",Li="date",Qn="day",Qa="dayofyear",fr="hours",dr="minutes",Lr="seconds",fa="milliseconds",MC=[qn,Fi,ei,hn,Li,Qn,Qa,fr,dr,Lr,fa],hE=MC.reduce((e,t,n)=>(e[t]=1+n,e),{});function $C(e){const t=Se(e).slice(),n={};return t.length||ee("Missing time unit."),t.forEach(r=>{Ee(hE,r)?n[r]=1:ee(`Invalid time unit: ${r}.`)}),(n[hn]||n[Qn]?1:0)+(n[Fi]||n[ei]||n[Li]?1:0)+(n[Qa]?1:0)>1&&ee(`Incompatible time units: ${e}`),t.sort((r,a)=>hE[r]-hE[a]),t}const nQ={[qn]:"%Y ",[Fi]:"Q%q ",[ei]:"%b ",[Li]:"%d ",[hn]:"W%U ",[Qn]:"%a ",[Qa]:"%j ",[fr]:"%H:00",[dr]:"00:%M",[Lr]:":%S",[fa]:".%L",[`${qn}-${ei}`]:"%Y-%m ",[`${qn}-${ei}-${Li}`]:"%Y-%m-%d ",[`${fr}-${dr}`]:"%H:%M"};function m9(e,t){const n=Pe({},nQ,t),i=$C(e),r=i.length;let a="",s=0,l,c;for(s=0;s<r;)for(l=i.length;l>s;--l)if(c=i.slice(s,l).join("-"),n[c]!=null){a+=n[c],s=l;break}return a.trim()}const Eu=new Date;function kC(e){return Eu.setFullYear(e),Eu.setMonth(0),Eu.setDate(1),Eu.setHours(0,0,0,0),Eu}function y9(e){return b9(new Date(e))}function v9(e){return tw(new Date(e))}function b9(e){return Ws.count(kC(e.getFullYear())-1,e)}function tw(e){return Dd.count(kC(e.getFullYear())-1,e)}function nw(e){return kC(e).getDay()}function iQ(e,t,n,i,r,a,s){if(0<=e&&e<100){const l=new Date(-1,t,n,i,r,a,s);return l.setFullYear(e),l}return new Date(e,t,n,i,r,a,s)}function x9(e){return E9(new Date(e))}function S9(e){return iw(new Date(e))}function E9(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return ul.count(t-1,e)}function iw(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Od.count(t-1,e)}function rw(e){return Eu.setTime(Date.UTC(e,0,1)),Eu.getUTCDay()}function rQ(e,t,n,i,r,a,s){if(0<=e&&e<100){const l=new Date(Date.UTC(-1,t,n,i,r,a,s));return l.setUTCFullYear(n.y),l}return new Date(Date.UTC(e,t,n,i,r,a,s))}function _9(e,t,n,i,r){const a=t||1,s=rt(e),l=(_,w,A)=>(A=A||_,aQ(n[A],i[A],_===s&&a,w)),c=new Date,f=ca(e),d=f[qn]?l(qn):ri(2012),g=f[ei]?l(ei):f[Fi]?l(Fi):Ko,p=f[hn]&&f[Qn]?l(Qn,1,hn+Qn):f[hn]?l(hn,1):f[Qn]?l(Qn,1):f[Li]?l(Li,1):f[Qa]?l(Qa,1):Ad,y=f[fr]?l(fr):Ko,v=f[dr]?l(dr):Ko,b=f[Lr]?l(Lr):Ko,S=f[fa]?l(fa):Ko;return function(_){c.setTime(+_);const w=d(c);return r(w,g(c),p(c,w),y(c),v(c),b(c),S(c))}}function aQ(e,t,n,i){const r=n<=1?e:i?(a,s)=>i+n*Math.floor((e(a,s)-i)/n):(a,s)=>n*Math.floor(e(a,s)/n);return t?(a,s)=>t(r(a,s),s):r}function Vf(e,t,n){return t+e*7-(n+6)%7}const sQ={[qn]:e=>e.getFullYear(),[Fi]:e=>Math.floor(e.getMonth()/3),[ei]:e=>e.getMonth(),[Li]:e=>e.getDate(),[fr]:e=>e.getHours(),[dr]:e=>e.getMinutes(),[Lr]:e=>e.getSeconds(),[fa]:e=>e.getMilliseconds(),[Qa]:e=>b9(e),[hn]:e=>tw(e),[hn+Qn]:(e,t)=>Vf(tw(e),e.getDay(),nw(t)),[Qn]:(e,t)=>Vf(1,e.getDay(),nw(t))},oQ={[Fi]:e=>3*e,[hn]:(e,t)=>Vf(e,0,nw(t))};function w9(e,t){return _9(e,t||1,sQ,oQ,iQ)}const lQ={[qn]:e=>e.getUTCFullYear(),[Fi]:e=>Math.floor(e.getUTCMonth()/3),[ei]:e=>e.getUTCMonth(),[Li]:e=>e.getUTCDate(),[fr]:e=>e.getUTCHours(),[dr]:e=>e.getUTCMinutes(),[Lr]:e=>e.getUTCSeconds(),[fa]:e=>e.getUTCMilliseconds(),[Qa]:e=>E9(e),[hn]:e=>iw(e),[Qn]:(e,t)=>Vf(1,e.getUTCDay(),rw(t)),[hn+Qn]:(e,t)=>Vf(iw(e),e.getUTCDay(),rw(t))},uQ={[Fi]:e=>3*e,[hn]:(e,t)=>Vf(e,0,rw(t))};function A9(e,t){return _9(e,t||1,lQ,uQ,rQ)}const cQ={[qn]:Va,[Fi]:tp.every(3),[ei]:tp,[hn]:Dd,[Li]:Ws,[Qn]:Ws,[Qa]:Ws,[fr]:Uv,[dr]:Fv,[Lr]:Hs,[fa]:Gf},fQ={[qn]:Wa,[Fi]:np.every(3),[ei]:np,[hn]:Od,[Li]:ul,[Qn]:ul,[Qa]:ul,[fr]:Bv,[dr]:Lv,[Lr]:Hs,[fa]:Gf};function Nd(e){return cQ[e]}function Rd(e){return fQ[e]}function C9(e,t,n){return e?e.offset(t,n):void 0}function T9(e,t,n){return C9(Nd(e),t,n)}function M9(e,t,n){return C9(Rd(e),t,n)}function $9(e,t,n,i){return e?e.range(t,n,i):void 0}function k9(e,t,n,i){return $9(Nd(e),t,n,i)}function D9(e,t,n,i){return $9(Rd(e),t,n,i)}const bg=1e3,xg=bg*60,Sg=xg*60,jv=Sg*24,dQ=jv*7,iR=jv*30,aw=jv*365,O9=[qn,ei,Li,fr,dr,Lr,fa],Eg=O9.slice(0,-1),_g=Eg.slice(0,-1),wg=_g.slice(0,-1),hQ=wg.slice(0,-1),gQ=[qn,hn],rR=[qn,ei],N9=[qn],Wh=[[Eg,1,bg],[Eg,5,5*bg],[Eg,15,15*bg],[Eg,30,30*bg],[_g,1,xg],[_g,5,5*xg],[_g,15,15*xg],[_g,30,30*xg],[wg,1,Sg],[wg,3,3*Sg],[wg,6,6*Sg],[wg,12,12*Sg],[hQ,1,jv],[gQ,1,dQ],[rR,1,iR],[rR,3,3*iR],[N9,1,aw]];function R9(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(Np(t))/n;let r=kd(l=>l[2]).right(Wh,i),a,s;return r===Wh.length?(a=N9,s=pl(t[0]/aw,t[1]/aw,n)):r?(r=Wh[i/Wh[r-1][2]<Wh[r][2]/i?r-1:r],a=r[0],s=r[1]):(a=O9,s=Math.max(pl(t[0],t[1],n),1)),{units:a,step:s}}function gE(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function pE(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Qh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function z9(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,a=e.days,s=e.shortDays,l=e.months,c=e.shortMonths,f=Zh(r),d=Kh(r),g=Zh(a),p=Kh(a),y=Zh(s),v=Kh(s),b=Zh(l),S=Kh(l),_=Zh(c),w=Kh(c),A={a:B,A:Y,b:Z,B:oe,c:null,d:cR,e:cR,f:LQ,g:XQ,G:WQ,H:RQ,I:zQ,j:FQ,L:F9,m:UQ,M:BQ,p:F,q:G,Q:hR,s:gR,S:jQ,u:qQ,U:IQ,V:PQ,w:HQ,W:GQ,x:null,X:null,y:YQ,Y:VQ,Z:QQ,"%":dR},T={a:ae,A:he,b:me,B:Me,c:null,d:fR,e:fR,f:eZ,g:cZ,G:dZ,H:ZQ,I:KQ,j:JQ,L:U9,m:tZ,M:nZ,p:Xe,q:Rt,Q:hR,s:gR,S:iZ,u:rZ,U:aZ,V:sZ,w:oZ,W:lZ,x:null,X:null,y:uZ,Y:fZ,Z:hZ,"%":dR},$={a:j,A:U,b:X,B:H,c:q,d:lR,e:lR,f:kQ,g:oR,G:sR,H:uR,I:uR,j:CQ,L:$Q,m:AQ,M:TQ,p:z,q:wQ,Q:OQ,s:NQ,S:MQ,u:bQ,U:xQ,V:SQ,w:vQ,W:EQ,x:R,X:O,y:oR,Y:sR,Z:_Q,"%":DQ};A.x=k(n,A),A.X=k(i,A),A.c=k(t,A),T.x=k(n,T),T.X=k(i,T),T.c=k(t,T);function k(pe,Fe){return function(je){var ce=[],tn=-1,Qe=0,It=pe.length,nn,Gr,Kd;for(je instanceof Date||(je=new Date(+je));++tn<It;)pe.charCodeAt(tn)===37&&(ce.push(pe.slice(Qe,tn)),(Gr=aR[nn=pe.charAt(++tn)])!=null?nn=pe.charAt(++tn):Gr=nn==="e"?" ":"0",(Kd=Fe[nn])&&(nn=Kd(je,Gr)),ce.push(nn),Qe=tn+1);return ce.push(pe.slice(Qe,tn)),ce.join("")}}function M(pe,Fe){return function(je){var ce=Qh(1900,void 0,1),tn=N(ce,pe,je+="",0),Qe,It;if(tn!=je.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(Fe&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(Qe=pE(Qh(ce.y,0,1)),It=Qe.getUTCDay(),Qe=It>4||It===0?ay.ceil(Qe):ay(Qe),Qe=ul.offset(Qe,(ce.V-1)*7),ce.y=Qe.getUTCFullYear(),ce.m=Qe.getUTCMonth(),ce.d=Qe.getUTCDate()+(ce.w+6)%7):(Qe=gE(Qh(ce.y,0,1)),It=Qe.getDay(),Qe=It>4||It===0?ry.ceil(Qe):ry(Qe),Qe=Ws.offset(Qe,(ce.V-1)*7),ce.y=Qe.getFullYear(),ce.m=Qe.getMonth(),ce.d=Qe.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),It="Z"in ce?pE(Qh(ce.y,0,1)).getUTCDay():gE(Qh(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(It+5)%7:ce.w+ce.U*7-(It+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,pE(ce)):gE(ce)}}function N(pe,Fe,je,ce){for(var tn=0,Qe=Fe.length,It=je.length,nn,Gr;tn<Qe;){if(ce>=It)return-1;if(nn=Fe.charCodeAt(tn++),nn===37){if(nn=Fe.charAt(tn++),Gr=$[nn in aR?Fe.charAt(tn++):nn],!Gr||(ce=Gr(pe,je,ce))<0)return-1}else if(nn!=je.charCodeAt(ce++))return-1}return ce}function z(pe,Fe,je){var ce=f.exec(Fe.slice(je));return ce?(pe.p=d.get(ce[0].toLowerCase()),je+ce[0].length):-1}function j(pe,Fe,je){var ce=y.exec(Fe.slice(je));return ce?(pe.w=v.get(ce[0].toLowerCase()),je+ce[0].length):-1}function U(pe,Fe,je){var ce=g.exec(Fe.slice(je));return ce?(pe.w=p.get(ce[0].toLowerCase()),je+ce[0].length):-1}function X(pe,Fe,je){var ce=_.exec(Fe.slice(je));return ce?(pe.m=w.get(ce[0].toLowerCase()),je+ce[0].length):-1}function H(pe,Fe,je){var ce=b.exec(Fe.slice(je));return ce?(pe.m=S.get(ce[0].toLowerCase()),je+ce[0].length):-1}function q(pe,Fe,je){return N(pe,t,Fe,je)}function R(pe,Fe,je){return N(pe,n,Fe,je)}function O(pe,Fe,je){return N(pe,i,Fe,je)}function B(pe){return s[pe.getDay()]}function Y(pe){return a[pe.getDay()]}function Z(pe){return c[pe.getMonth()]}function oe(pe){return l[pe.getMonth()]}function F(pe){return r[+(pe.getHours()>=12)]}function G(pe){return 1+~~(pe.getMonth()/3)}function ae(pe){return s[pe.getUTCDay()]}function he(pe){return a[pe.getUTCDay()]}function me(pe){return c[pe.getUTCMonth()]}function Me(pe){return l[pe.getUTCMonth()]}function Xe(pe){return r[+(pe.getUTCHours()>=12)]}function Rt(pe){return 1+~~(pe.getUTCMonth()/3)}return{format:function(pe){var Fe=k(pe+="",A);return Fe.toString=function(){return pe},Fe},parse:function(pe){var Fe=M(pe+="",!1);return Fe.toString=function(){return pe},Fe},utcFormat:function(pe){var Fe=k(pe+="",T);return Fe.toString=function(){return pe},Fe},utcParse:function(pe){var Fe=M(pe+="",!0);return Fe.toString=function(){return pe},Fe}}}var aR={"-":"",_:" ",0:"0"},Mn=/^\s*\d+/,pQ=/^%/,mQ=/[\\^$*+?|[\]().{}]/g;function ct(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function yQ(e){return e.replace(mQ,"\\$&")}function Zh(e){return new RegExp("^(?:"+e.map(yQ).join("|")+")","i")}function Kh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function vQ(e,t,n){var i=Mn.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function bQ(e,t,n){var i=Mn.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function xQ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function SQ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function EQ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function sR(e,t,n){var i=Mn.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function oR(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function _Q(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function wQ(e,t,n){var i=Mn.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function AQ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function lR(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function CQ(e,t,n){var i=Mn.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function uR(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function TQ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function MQ(e,t,n){var i=Mn.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function $Q(e,t,n){var i=Mn.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function kQ(e,t,n){var i=Mn.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function DQ(e,t,n){var i=pQ.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function OQ(e,t,n){var i=Mn.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function NQ(e,t,n){var i=Mn.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function cR(e,t){return ct(e.getDate(),t,2)}function RQ(e,t){return ct(e.getHours(),t,2)}function zQ(e,t){return ct(e.getHours()%12||12,t,2)}function FQ(e,t){return ct(1+Ws.count(Va(e),e),t,3)}function F9(e,t){return ct(e.getMilliseconds(),t,3)}function LQ(e,t){return F9(e,t)+"000"}function UQ(e,t){return ct(e.getMonth()+1,t,2)}function BQ(e,t){return ct(e.getMinutes(),t,2)}function jQ(e,t){return ct(e.getSeconds(),t,2)}function qQ(e){var t=e.getDay();return t===0?7:t}function IQ(e,t){return ct(Dd.count(Va(e)-1,e),t,2)}function L9(e){var t=e.getDay();return t>=4||t===0?Yf(e):Yf.ceil(e)}function PQ(e,t){return e=L9(e),ct(Yf.count(Va(e),e)+(Va(e).getDay()===4),t,2)}function HQ(e){return e.getDay()}function GQ(e,t){return ct(ry.count(Va(e)-1,e),t,2)}function YQ(e,t){return ct(e.getFullYear()%100,t,2)}function XQ(e,t){return e=L9(e),ct(e.getFullYear()%100,t,2)}function VQ(e,t){return ct(e.getFullYear()%1e4,t,4)}function WQ(e,t){var n=e.getDay();return e=n>=4||n===0?Yf(e):Yf.ceil(e),ct(e.getFullYear()%1e4,t,4)}function QQ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ct(t/60|0,"0",2)+ct(t%60,"0",2)}function fR(e,t){return ct(e.getUTCDate(),t,2)}function ZQ(e,t){return ct(e.getUTCHours(),t,2)}function KQ(e,t){return ct(e.getUTCHours()%12||12,t,2)}function JQ(e,t){return ct(1+ul.count(Wa(e),e),t,3)}function U9(e,t){return ct(e.getUTCMilliseconds(),t,3)}function eZ(e,t){return U9(e,t)+"000"}function tZ(e,t){return ct(e.getUTCMonth()+1,t,2)}function nZ(e,t){return ct(e.getUTCMinutes(),t,2)}function iZ(e,t){return ct(e.getUTCSeconds(),t,2)}function rZ(e){var t=e.getUTCDay();return t===0?7:t}function aZ(e,t){return ct(Od.count(Wa(e)-1,e),t,2)}function B9(e){var t=e.getUTCDay();return t>=4||t===0?Xf(e):Xf.ceil(e)}function sZ(e,t){return e=B9(e),ct(Xf.count(Wa(e),e)+(Wa(e).getUTCDay()===4),t,2)}function oZ(e){return e.getUTCDay()}function lZ(e,t){return ct(ay.count(Wa(e)-1,e),t,2)}function uZ(e,t){return ct(e.getUTCFullYear()%100,t,2)}function cZ(e,t){return e=B9(e),ct(e.getUTCFullYear()%100,t,2)}function fZ(e,t){return ct(e.getUTCFullYear()%1e4,t,4)}function dZ(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Xf(e):Xf.ceil(e),ct(e.getUTCFullYear()%1e4,t,4)}function hZ(){return"+0000"}function dR(){return"%"}function hR(e){return+e}function gR(e){return Math.floor(+e/1e3)}var df,DC,j9,OC,q9;gZ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function gZ(e){return df=z9(e),DC=df.format,j9=df.parse,OC=df.utcFormat,q9=df.utcParse,df}function Ag(e){const t={};return n=>t[n]||(t[n]=e(n))}function pZ(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let a=mZ(i,r);const s=a<i.length?i.slice(a):"";for(;--a>r;)if(i[a]!=="0"){++a;break}return i.slice(0,a)+s}}function mZ(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function I9(e){const t=Ag(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=qu(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return pZ(t(r),t(".1f")(1)[1])}else return t(r)},formatSpan(i,r,a,s){s=qu(s??",f");const l=pl(i,r,a),c=Math.max(Math.abs(i),Math.abs(r));let f;if(s.precision==null)switch(s.type){case"s":return isNaN(f=d9(l,c))||(s.precision=f),n(s,c);case"":case"e":case"g":case"p":case"r":{isNaN(f=h9(l,c))||(s.precision=f-(s.type==="e"));break}case"f":case"%":{isNaN(f=f9(l))||(s.precision=f-(s.type==="%")*2);break}}return t(s)}}}let sw;P9();function P9(){return sw=I9({format:zv,formatPrefix:CC})}function H9(e){return I9(c9(e))}function sy(e){return arguments.length?sw=H9(e):sw}function pR(e,t,n){n=n||{},be(n)||ee(`Invalid time multi-format specifier: ${n}`);const i=t(Lr),r=t(dr),a=t(fr),s=t(Li),l=t(hn),c=t(ei),f=t(Fi),d=t(qn),g=e(n[fa]||".%L"),p=e(n[Lr]||":%S"),y=e(n[dr]||"%I:%M"),v=e(n[fr]||"%I %p"),b=e(n[Li]||n[Qn]||"%a %d"),S=e(n[hn]||"%b %d"),_=e(n[ei]||"%B"),w=e(n[Fi]||"%B"),A=e(n[qn]||"%Y");return T=>(i(T)<T?g:r(T)<T?p:a(T)<T?y:s(T)<T?v:c(T)<T?l(T)<T?b:S:d(T)<T?f(T)<T?_:w:A)(T)}function G9(e){const t=Ag(e.format),n=Ag(e.utcFormat);return{timeFormat:i=>xe(i)?t(i):pR(t,Nd,i),utcFormat:i=>xe(i)?n(i):pR(n,Rd,i),timeParse:Ag(e.parse),utcParse:Ag(e.utcParse)}}let ow;Y9();function Y9(){return ow=G9({format:DC,parse:j9,utcFormat:OC,utcParse:q9})}function X9(e){return G9(z9(e))}function ip(e){return arguments.length?ow=X9(e):ow}const lw=(e,t)=>Pe({},e,t);function V9(e,t){const n=e?H9(e):sy(),i=t?X9(t):ip();return lw(n,i)}function NC(e,t){const n=arguments.length;return n&&n!==2&&ee("defaultLocale expects either zero or two arguments."),n?lw(sy(e),ip(t)):lw(sy(),ip())}function yZ(){return P9(),Y9(),NC()}const vZ=/^(data:|([A-Za-z]+:)?\/\/)/,bZ=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,xZ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,mR="file://";function SZ(e){return t=>({options:t||{},sanitize:_Z,load:EZ,fileAccess:!1,file:wZ(),http:CZ})}async function EZ(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t?.http)}async function _Z(e,t){t=Pe({},this.options,t);const n=this.fileAccess,i={href:null};let r,a,s;const l=bZ.test(e.replace(xZ,""));(e==null||typeof e!="string"||!l)&&ee("Sanitize failure, invalid URI: "+ge(e));const c=vZ.test(e);return(s=t.baseURL)&&!c&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),a=(r=e.startsWith(mR))||t.mode==="file"||t.mode!=="http"&&!c&&n,r?e=e.slice(mR.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!a}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function wZ(e){return AZ}async function AZ(){ee("No file system access.")}async function CZ(e,t){const n=Pe({},this.options.http,t),i=t&&t.response,r=await fetch(e,n);return r.ok?He(r[i])?r[i]():r.text():ee(r.status+""+r.statusText)}const TZ=e=>e!=null&&e===e,MZ=e=>e==="true"||e==="false"||e===!0||e===!1,$Z=e=>!Number.isNaN(Date.parse(e)),W9=e=>!Number.isNaN(+e)&&!(e instanceof Date),kZ=e=>W9(e)&&Number.isInteger(+e),uw={boolean:EC,integer:Zn,number:Zn,date:_C,string:wC,unknown:ii},P0=[MZ,kZ,W9,$Z],DZ=["boolean","integer","number","date"];function Q9(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=P0.length,r=P0.map((a,s)=>s+1);for(let a=0,s=0,l,c;a<n;++a)for(c=t?e[a][t]:e[a],l=0;l<i;++l)if(r[l]&&TZ(c)&&!P0[l](c)&&(r[l]=0,++s,s===P0.length))return"string";return DZ[r.reduce((a,s)=>a===0?s:a,0)-1]}function Z9(e,t){return t.reduce((n,i)=>(n[i]=Q9(e,i),n),{})}function yR(e){const t=function(n,i){const r={delimiter:e};return RC(n,i?Pe(i,r):r)};return t.responseType="text",t}function RC(e,t){return t.header&&(e=t.header.map(ge).join(t.delimiter)+`
`+e),dW(t.delimiter).parse(e+"")}RC.responseType="text";function OZ(e){return typeof Buffer=="function"&&He(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function zC(e,t){const n=t&&t.property?zr(t.property):ii;return be(e)&&!OZ(e)?NZ(n(e),t):n(JSON.parse(e))}zC.responseType="json";function NZ(e,t){return!ie(e)&&H8(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const RZ={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function K9(e,t){let n,i,r,a;return e=zC(e,t),t&&t.feature?(n=mW,r=t.feature):t&&t.mesh?(n=vW,r=t.mesh,a=RZ[t.filter]):ee("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,a):ee("Invalid TopoJSON object: "+r),i&&i.features||[i]}K9.responseType="json";const T1={dsv:RC,csv:yR(","),tsv:yR("	"),json:zC,topojson:K9};function FC(e,t){return arguments.length>1?(T1[e]=t,this):Ee(T1,e)?T1[e]:null}function J9(e){const t=FC(e);return t&&t.responseType||"text"}function e7(e,t,n,i){t=t||{};const r=FC(t.type||"json");return r||ee("Unknown data format type: "+t.type),e=r(e,t),t.parse&&zZ(e,t.parse,n,i),Ee(e,"columns")&&delete e.columns,e}function zZ(e,t,n,i){if(!e.length)return;const r=ip();n=n||r.timeParse,i=i||r.utcParse;let a=e.columns||Object.keys(e[0]),s,l,c,f,d,g;t==="auto"&&(t=Z9(e,a)),a=Object.keys(t);const p=a.map(y=>{const v=t[y];let b,S;if(v&&(v.startsWith("date:")||v.startsWith("utc:")))return b=v.split(/:(.+)?/,2),S=b[1],(S[0]==="'"&&S[S.length-1]==="'"||S[0]==='"'&&S[S.length-1]==='"')&&(S=S.slice(1,-1)),(b[0]==="utc"?i:n)(S);if(!uw[v])throw Error("Illegal format pattern: "+y+":"+v);return uw[v]});for(c=0,d=e.length,g=a.length;c<d;++c)for(s=e[c],f=0;f<g;++f)l=a[f],s[l]=p[f](s[l])}const qv=SZ();function Iv(e){const t=e||ii,n=[],i={};return n.add=r=>{const a=t(r);return i[a]||(i[a]=1,n.push(r)),n},n.remove=r=>{const a=t(r);if(i[a]){i[a]=0;const s=n.indexOf(r);s>=0&&n.splice(s,1)}return n},n}async function M1(e,t){try{await t(e)}catch(n){e.error(n)}}const t7=Symbol("vega_id");let FZ=1;function Pv(e){return!!(e&&ke(e))}function ke(e){return e[t7]}function n7(e,t){return e[t7]=t,e}function ht(e){const t=e===Object(e)?e:{data:e};return ke(t)?t:n7(t,FZ++)}function LC(e){return Hv(e,ht({}))}function Hv(e,t){for(const n in e)t[n]=e[n];return t}function i7(e,t){return n7(t,ke(e))}function fc(e,t){return e?t?(n,i)=>e(n,i)||ke(t(n))-ke(t(i)):(n,i)=>e(n,i)||ke(n)-ke(i):null}function r7(e){return e&&e.constructor===dc}function dc(){const e=[],t=[],n=[],i=[],r=[];let a=null,s=!1;return{constructor:dc,insert(l){const c=Se(l),f=c.length;for(let d=0;d<f;++d)e.push(c[d]);return this},remove(l){const c=He(l)?i:t,f=Se(l),d=f.length;for(let g=0;g<d;++g)c.push(f[g]);return this},modify(l,c,f){const d={field:c,value:ri(f)};return He(l)?(d.filter=l,r.push(d)):(d.tuple=l,n.push(d)),this},encode(l,c){return He(l)?r.push({filter:l,field:c}):n.push({tuple:l,field:c}),this},clean(l){return a=l,this},reflow(){return s=!0,this},pulse(l,c){const f={},d={};let g,p,y,v,b,S;for(g=0,p=c.length;g<p;++g)f[ke(c[g])]=1;for(g=0,p=t.length;g<p;++g)b=t[g],f[ke(b)]=-1;for(g=0,p=i.length;g<p;++g)v=i[g],c.forEach(w=>{v(w)&&(f[ke(w)]=-1)});for(g=0,p=e.length;g<p;++g)b=e[g],S=ke(b),f[S]?f[S]=1:l.add.push(ht(e[g]));for(g=0,p=c.length;g<p;++g)b=c[g],f[ke(b)]<0&&l.rem.push(b);function _(w,A,T){T?w[A]=T(w):l.encode=A,s||(d[ke(w)]=w)}for(g=0,p=n.length;g<p;++g)y=n[g],b=y.tuple,v=y.field,S=f[ke(b)],S>0&&(_(b,v,y.value),l.modifies(v));for(g=0,p=r.length;g<p;++g)y=r[g],v=y.filter,c.forEach(w=>{v(w)&&f[ke(w)]>0&&_(w,y.field,y.value)}),l.modifies(y.field);if(s)l.mod=t.length||i.length?c.filter(w=>f[ke(w)]>0):c.slice();else for(S in d)l.mod.push(d[S]);return(a||a==null&&(t.length||i.length))&&l.clean(!0),l}}}const $1="_:mod:_";function Gv(){Object.defineProperty(this,$1,{writable:!0,value:{}})}Gv.prototype={set(e,t,n,i){const r=this,a=r[e],s=r[$1];return t!=null&&t>=0?(a[t]!==n||i)&&(a[t]=n,s[t+":"+e]=-1,s[e]=-1):(a!==n||i)&&(r[e]=n,s[e]=ie(n)?1+n.length:-1),r},modified(e,t){const n=this[$1];if(arguments.length){if(ie(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[$1]={},this}};let LZ=0;const UZ="pulse",BZ=new Gv,jZ=1,qZ=2;function Tt(e,t,n,i){this.id=++LZ,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function vR(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Tt.prototype={targets(){return this._targets||(this._targets=Iv(Op))},set(e){return this.value!==e?(this.value=e,1):0},skip:vR(jZ),modified:vR(qZ),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new Gv,r=this._argops=this._argops||[],a=[];let s,l,c,f;const d=(g,p,y)=>{y instanceof Tt?(y!==this&&(t&&y.targets().add(this),a.push(y)),r.push({op:y,name:g,index:p})):i.set(g,p,y)};for(s in e)if(l=e[s],s===UZ)Se(l).forEach(g=>{g instanceof Tt?g!==this&&(g.targets().add(this),a.push(g)):ee("Pulse parameters must be operator instances.")}),this.source=l;else if(ie(l))for(i.set(s,-1,Array(c=l.length)),f=0;f<c;++f)d(s,f,l[f]);else d(s,-1,l);return this.marshall().clear(),n&&(r.initonly=!0),a},marshall(e){const t=this._argval||BZ,n=this._argops;let i,r,a,s;if(n){const l=n.length;for(r=0;r<l;++r)i=n[r],a=i.op,s=a.modified()&&a.stamp===e,t.set(i.name,i.index,a.value,s);if(n.initonly){for(r=0;r<l;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function IZ(e,t,n,i){let r=1,a;return e instanceof Tt?a=e:e&&e.prototype instanceof Tt?a=new e:He(e)?a=new Tt(null,e):(r=0,a=new Tt(e,t)),this.rank(a),r&&(i=n,n=t),n&&this.connect(a,a.parameters(n,i)),this.touch(a),a}function PZ(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank){this.rerank(e);return}}let HZ=0;function Yv(e,t,n){this.id=++HZ,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Go(e,t,n){return new Yv(e,t,n)}Yv.prototype={_filter:Fr,_apply:ii,targets(){return this._targets||(this._targets=Iv(Op))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Go(e);return this.targets().add(t),t},apply(e){const t=Go(null,e);return this.targets().add(t),t},merge(){const e=Go();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Go();return this.targets().add(Go(null,null,bC(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(Go(null,null,()=>n=!0)),t.targets().add(Go(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Fr,this._targets=null}};function GZ(e,t,n,i){const r=this,a=Go(n,i),s=function(f){f.dataflow=r;try{a.receive(f)}catch(d){r.error(d)}finally{r.run()}};let l;typeof e=="string"&&typeof document<"u"?l=document.querySelectorAll(e):l=Se(e);const c=l.length;for(let f=0;f<c;++f)l[f].addEventListener(t,s);return a}function YZ(e,t){const n=this.locale();return e7(e,t,n.timeParse,n.utcParse)}function XZ(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function VZ(e,t){const n=this;let i=0,r;try{r=await n.loader().load(e,{context:"dataflow",response:J9(t&&t.type)});try{r=n.parse(r,t)}catch(a){i=-2,n.warn("Data ingestion failed",e,a)}}catch(a){i=-1,n.warn("Loading failed",e,a)}return{data:r,status:i}}async function WZ(e,t,n){const i=this,r=i._pending||QZ(i);r.requests+=1;const a=await i.request(t,n);return i.pulse(e,i.changeset().remove(Fr).insert(a.data||[])),r.done(),a}function QZ(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const ZZ={skip:!0};function KZ(e,t,n,i,r){return(e instanceof Tt?eK:JZ)(this,e,t,n,i,r),this}function JZ(e,t,n,i,r,a){const s=Pe({},a,ZZ);let l,c;He(n)||(n=ri(n)),i===void 0?l=f=>e.touch(n(f)):He(i)?(c=new Tt(null,i,r,!1),l=f=>{c.evaluate(f);const d=n(f),g=c.value;r7(g)?e.pulse(d,g,a):e.update(d,g,s)}):l=f=>e.update(n(f),i,s),t.apply(l)}function eK(e,t,n,i,r,a){if(i===void 0)t.targets().add(n);else{const s=a||{},l=new Tt(null,tK(n,i),r,!1);l.modified(s.force),l.rank=t.rank,t.targets().add(l),n&&(l.skip(!0),l.value=n.value,l.targets().add(n),e.connect(n,[l]))}}function tK(e,t){return t=He(t)?t:ri(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}function nK(e){e.rank=++this._rank}function iK(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&ee("Cycle detected in dataflow graph.")}const oy={},Na=1,Vo=2,Ls=4,rK=Na|Vo,bR=Na|Ls,hf=Na|Vo|Ls,xR=8,Jh=16,SR=32,ER=64;function cl(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function mE(e,t){const n=[];return Xo(e,t,i=>n.push(i)),n}function _R(e,t){const n={};return e.visit(t,i=>{n[ke(i)]=1}),i=>n[ke(i)]?null:i}function H0(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}cl.prototype={StopPropagation:oy,ADD:Na,REM:Vo,MOD:Ls,ADD_REM:rK,ADD_MOD:bR,ALL:hf,REFLOW:xR,SOURCE:Jh,NO_SOURCE:SR,NO_FIELDS:ER,fork(e){return new cl(this.dataflow).init(this,e)},clone(){const e=this.fork(hf);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(hf|Jh)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new cl(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&ER)&&(n.fields=e.fields),t&Na?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Vo?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Ls?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&SR?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||hf;return t&Na&&this.add.length||t&Vo&&this.rem.length||t&Ls&&this.mod.length},reflow(e){if(e)return this.fork(hf).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Ls,_R(this,Na))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return ie(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?ie(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Na&&(n.addF=H0(n.addF,t)),e&Vo&&(n.remF=H0(n.remF,t)),e&Ls&&(n.modF=H0(n.modF,t)),e&Jh&&(n.srcF=H0(n.srcF,t)),n},materialize(e){e=e||hf;const t=this;return e&Na&&t.addF&&(t.add=mE(t.add,t.addF),t.addF=null),e&Vo&&t.remF&&(t.rem=mE(t.rem,t.remF),t.remF=null),e&Ls&&t.modF&&(t.mod=mE(t.mod,t.modF),t.modF=null),e&Jh&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&Jh)return Xo(n.source,n.srcF,i),n;e&Na&&Xo(n.add,n.addF,i),e&Vo&&Xo(n.rem,n.remF,i),e&Ls&&Xo(n.mod,n.modF,i);const r=n.source;if(e&xR&&r){const a=n.add.length+n.mod.length;a===r.length||(a?Xo(r,_R(n,bR),i):Xo(r,n.srcF,i))}return n}};function UC(e,t,n,i){const r=this;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const l=r.fields||(r.fields={});for(const c in s.fields)l[c]=1}s.changed(r.ADD)&&(a|=r.ADD),s.changed(r.REM)&&(a|=r.REM),s.changed(r.MOD)&&(a|=r.MOD)}this.changes=a}ye(UC,cl,{fork(e){const t=new cl(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?ie(e)?e.some(i=>n[i]):n[e]:0},filter(){ee("MultiPulse does not support filtering.")},materialize(){ee("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let a=0;if(e&n.SOURCE)for(;a<r;++a)i[a].visit(e,t);else for(;a<r;++a)i[a].stamp===n.stamp&&i[a].visit(e,t);return n}});async function aK(e,t,n){const i=this,r=[];if(i._pulse)return a7(i);if(i._pending&&await i._pending,t&&await M1(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const a=++i._clock;i._pulse=new cl(i,a,e),i._touched.forEach(d=>i._enqueue(d,!0)),i._touched=Iv(Op);let s=0,l,c,f;try{for(;i._heap.size()>0;){if(l=i._heap.pop(),l.rank!==l.qrank){i._enqueue(l,!0);continue}c=l.run(i._getPulse(l,e)),c.then?c=await c:c.async&&(r.push(c.async),c=oy),c!==oy&&l._targets&&l._targets.forEach(d=>i._enqueue(d)),++s}}catch(d){i._heap.clear(),f=d}if(i._input={},i._pulse=null,i.debug(`Pulse ${a}: ${s} operators`),f&&(i._postrun=[],i.error(f)),i._postrun.length){const d=i._postrun.sort((g,p)=>p.priority-g.priority);i._postrun=[];for(let g=0;g<d.length;++g)await M1(i,d[g].callback)}return n&&await M1(i,n),r.length&&Promise.all(r).then(d=>i.runAsync(null,()=>{d.forEach(g=>{try{g(i)}catch(p){i.error(p)}})})),i}async function sK(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function oK(e,t,n){return this._pulse?a7(this):(this.evaluate(e,t,n),this)}function lK(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function a7(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function uK(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function cK(e,t){const n=e.source,i=this._clock;return n&&ie(n)?new UC(this,i,n.map(r=>r.pulse),t):this._input[e.id]||fK(this._pulse,n&&n.pulse)}function fK(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==oy&&(e.source=t.source),e)}const BC={skip:!1,force:!1};function dK(e,t){const n=t||BC;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function hK(e,t,n){const i=n||BC;return(e.set(t)||i.force)&&this.touch(e,i),this}function gK(e,t,n){this.touch(e,n||BC);const i=new cl(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this}function pK(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),s7(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,mK(t,0,e)):i=n,i}}}function s7(e,t,n,i){let r,a;const s=e[n];for(;n>t;){if(a=n-1>>1,r=e[a],i(s,r)<0){e[n]=r,n=a;continue}break}return e[n]=s}function mK(e,t,n){const i=t,r=e.length,a=e[t];let s=(t<<1)+1,l;for(;s<r;)l=s+1,l<r&&n(e[s],e[l])>=0&&(s=l),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=a,s7(e,i,t,n)}function Rf(){this.logger(Ov()),this.logLevel(hC),this._clock=0,this._rank=0,this._locale=NC();try{this._loader=qv()}catch{}this._touched=Iv(Op),this._input={},this._pulse=null,this._heap=pK((e,t)=>e.qrank-t.qrank),this._postrun=[]}function eg(e){return function(){return this._log[e].apply(this,arguments)}}Rf.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:eg("error"),warn:eg("warn"),info:eg("info"),debug:eg("debug"),logLevel:eg("level"),cleanThreshold:1e4,add:IZ,connect:PZ,rank:nK,rerank:iK,pulse:gK,touch:dK,update:hK,changeset:dc,ingest:XZ,parse:YZ,preload:WZ,request:VZ,events:GZ,on:KZ,evaluate:aK,run:oK,runAsync:sK,runAfter:lK,_enqueue:uK,_getPulse:cK};function J(e,t){Tt.call(this,e,null,t)}ye(J,Tt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Wf={};function o7(e){const t=l7(e);return t&&t.Definition||null}function l7(e){return e=e&&e.toLowerCase(),Ee(Wf,e)?Wf[e]:null}function*u7(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function jC(e,t,n){const i=Float64Array.from(u7(e,n));return i.sort(Vs),t.map(r=>a9(i,r))}function qC(e,t){return jC(e,[.25,.5,.75],t)}function IC(e,t){const n=e.length,i=CW(e,t),r=qC(e,t),a=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,a)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function c7(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let a=e.extent[0],s=e.extent[1],l,c,f,d,g,p;const y=e.span||s-a||Math.abs(a)||1;if(e.step)l=e.step;else if(e.steps){for(d=y/t,g=0,p=e.steps.length;g<p&&e.steps[g]<d;++g);l=e.steps[Math.max(0,g-1)]}else{for(c=Math.ceil(Math.log(t)/i),f=e.minstep||0,l=Math.max(f,Math.pow(n,Math.round(Math.log(y)/i)-c));Math.ceil(y/l)>t;)l*=n;for(g=0,p=r.length;g<p;++g)d=l/r[g],d>=f&&y/d<=t&&(l=d)}d=Math.log(l);const v=d>=0?0:~~(-d/i)+1,b=Math.pow(n,-v-1);return(e.nice||e.nice===void 0)&&(d=Math.floor(a/l+b)*l,a=a<d?d-l:d,s=Math.ceil(s/l)*l),{start:a,stop:s===a?a+l:s,step:l}}var Ur=Math.random;function yK(e){Ur=e}function f7(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(u7(e,i)),a=r.length,s=t;let l,c,f,d;for(f=0,d=Array(s);f<s;++f){for(l=0,c=0;c<a;++c)l+=r[~~(Ur()*a)];d[f]=l/a}return d.sort(Vs),[ew(d,n/2),ew(d,1-n/2)]}function d7(e,t,n,i){i=i||(p=>p);const r=e.length,a=new Float64Array(r);let s=0,l=1,c=i(e[0]),f=c,d=c+t,g;for(;l<r;++l){if(g=i(e[l]),g>=d){for(f=(c+f)/2;s<l;++s)a[s]=f;d=g+t,c=g}f=g}for(f=(c+f)/2;s<l;++s)a[s]=f;return n?vK(a,t+t/4):a}function vK(e,t){const n=e.length;let i=0,r=1,a,s;for(;e[i]===e[r];)++r;for(;r<n;){for(a=r+1;e[r]===e[a];)++a;if(e[r]-e[r-1]<t){for(s=r+(i+a-r-r>>1);s<r;)e[s++]=e[r];for(;s>r;)e[s--]=e[i]}i=r,r=a}return e}function bK(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function xK(e,t){t==null&&(t=e,e=0);let n,i,r;const a={min(s){return arguments.length?(n=s||0,r=i-n,a):n},max(s){return arguments.length?(i=s||0,r=i-n,a):i},sample(){return n+Math.floor(r*Ur())},pdf(s){return s===Math.floor(s)&&s>=n&&s<i?1/r:0},cdf(s){const l=Math.floor(s);return l<n?0:l>=i?1:(l-n+1)/r},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*r):NaN}};return a.min(e).max(t)}const h7=Math.sqrt(2*Math.PI),SK=Math.SQRT2;let tg=NaN;function Xv(e,t){e=e||0,t=t??1;let n=0,i=0,r,a;if(tg===tg)n=tg,tg=NaN;else{do n=Ur()*2-1,i=Ur()*2-1,r=n*n+i*i;while(r===0||r>1);a=Math.sqrt(-2*Math.log(r)/r),n*=a,tg=i*a}return e+n*t}function PC(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*h7)}function Vv(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,r=Math.abs(i);let a;if(r>37)a=0;else{const s=Math.exp(-r*r/2);let l;r<7.07106781186547?(l=.0352624965998911*r+.700383064443688,l=l*r+6.37396220353165,l=l*r+33.912866078383,l=l*r+112.079291497871,l=l*r+221.213596169931,l=l*r+220.206867912376,a=s*l,l=.0883883476483184*r+1.75566716318264,l=l*r+16.064177579207,l=l*r+86.7807322029461,l=l*r+296.564248779674,l=l*r+637.333633378831,l=l*r+793.826512519948,l=l*r+440.413735824752,a=a/l):(l=r+.65,l=r+4/l,l=r+3/l,l=r+2/l,l=r+1/l,a=s/l/2.506628274631)}return i>0?1-a:a}function Wv(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*SK*EK(2*e-1)}function EK(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function HC(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>Xv(n,i),pdf:a=>PC(a,n,i),cdf:a=>Vv(a,n,i),icdf:a=>Wv(a,n,i)};return r.mean(e).stdev(t)}function GC(e,t){const n=HC();let i=0;const r={data(a){return arguments.length?(e=a,i=a?a.length:0,r.bandwidth(t)):e},bandwidth(a){return arguments.length?(t=a,!t&&e&&(t=IC(e)),r):t},sample(){return e[~~(Ur()*i)]+t*n.sample()},pdf(a){let s=0,l=0;for(;l<i;++l)s+=n.pdf((a-e[l])/t);return s/t/i},cdf(a){let s=0,l=0;for(;l<i;++l)s+=n.cdf((a-e[l])/t);return s/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function YC(e,t){return e=e||0,t=t??1,Math.exp(e+Xv()*t)}function XC(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*h7*e)}function VC(e,t,n){return Vv(Math.log(e),t,n)}function WC(e,t,n){return Math.exp(Wv(e,t,n))}function g7(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>YC(n,i),pdf:a=>XC(a,n,i),cdf:a=>VC(a,n,i),icdf:a=>WC(a,n,i)};return r.mean(e).stdev(t)}function p7(e,t){let n=0,i;function r(s){const l=[];let c=0,f;for(f=0;f<n;++f)c+=l[f]=s[f]==null?1:+s[f];for(f=0;f<n;++f)l[f]/=c;return l}const a={weights(s){return arguments.length?(i=r(t=s||[]),a):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),a.weights(t)):e},sample(){const s=Ur();let l=e[n-1],c=i[0],f=0;for(;f<n-1;c+=i[++f])if(s<c){l=e[f];break}return l.sample()},pdf(s){let l=0,c=0;for(;c<n;++c)l+=i[c]*e[c].pdf(s);return l},cdf(s){let l=0,c=0;for(;c<n;++c)l+=i[c]*e[c].cdf(s);return l},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(e).weights(t)}function QC(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Ur()}function ZC(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function KC(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function JC(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function m7(e,t){let n,i;const r={min(a){return arguments.length?(n=a||0,r):n},max(a){return arguments.length?(i=a??1,r):i},sample:()=>QC(n,i),pdf:a=>ZC(a,n,i),cdf:a=>KC(a,n,i),icdf:a=>JC(a,n,i)};return t==null&&(t=e??1,e=0),r.min(e).max(t)}function e3(e,t,n){let i=0,r=0;for(const a of e){const s=n(a);t(a)==null||s==null||isNaN(s)||(i+=(s-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function Rp(e,t,n,i){const r=i-e*e,a=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-a*e,a]}function Qv(e,t,n,i){e=e.filter(y=>{let v=t(y),b=n(y);return v!=null&&(v=+v)>=v&&b!=null&&(b=+b)>=b}),i&&e.sort((y,v)=>t(y)-t(v));const r=e.length,a=new Float64Array(r),s=new Float64Array(r);let l=0,c=0,f=0,d,g,p;for(p of e)a[l]=d=+t(p),s[l]=g=+n(p),++l,c+=(d-c)/l,f+=(g-f)/l;for(l=0;l<r;++l)a[l]-=c,s[l]-=f;return[a,s,c,f]}function zp(e,t,n,i){let r=-1,a,s;for(const l of e)a=t(l),s=n(l),a!=null&&(a=+a)>=a&&s!=null&&(s=+s)>=s&&i(a,s,++r)}function zd(e,t,n,i,r){let a=0,s=0;return zp(e,t,n,(l,c)=>{const f=c-r(l),d=c-i;a+=f*f,s+=d*d}),1-a/s}function t3(e,t,n){let i=0,r=0,a=0,s=0,l=0;zp(e,t,n,(d,g)=>{++l,i+=(d-i)/l,r+=(g-r)/l,a+=(d*g-a)/l,s+=(d*d-s)/l});const c=Rp(i,r,a,s),f=d=>c[0]+c[1]*d;return{coef:c,predict:f,rSquared:zd(e,t,n,r,f)}}function y7(e,t,n){let i=0,r=0,a=0,s=0,l=0;zp(e,t,n,(d,g)=>{++l,d=Math.log(d),i+=(d-i)/l,r+=(g-r)/l,a+=(d*g-a)/l,s+=(d*d-s)/l});const c=Rp(i,r,a,s),f=d=>c[0]+c[1]*Math.log(d);return{coef:c,predict:f,rSquared:zd(e,t,n,r,f)}}function v7(e,t,n){const[i,r,a,s]=Qv(e,t,n);let l=0,c=0,f=0,d=0,g=0,p,y,v;zp(e,t,n,(w,A)=>{p=i[g++],y=Math.log(A),v=p*A,l+=(A*y-l)/g,c+=(v-c)/g,f+=(v*y-f)/g,d+=(p*v-d)/g});const[b,S]=Rp(c/s,l/s,f/s,d/s),_=w=>Math.exp(b+S*(w-a));return{coef:[Math.exp(b-S*a),S],predict:_,rSquared:zd(e,t,n,s,_)}}function b7(e,t,n){let i=0,r=0,a=0,s=0,l=0,c=0;zp(e,t,n,(g,p)=>{const y=Math.log(g),v=Math.log(p);++c,i+=(y-i)/c,r+=(v-r)/c,a+=(y*v-a)/c,s+=(y*y-s)/c,l+=(p-l)/c});const f=Rp(i,r,a,s),d=g=>f[0]*Math.pow(g,f[1]);return f[0]=Math.exp(f[0]),{coef:f,predict:d,rSquared:zd(e,t,n,l,d)}}function n3(e,t,n){const[i,r,a,s]=Qv(e,t,n),l=i.length;let c=0,f=0,d=0,g=0,p=0,y,v,b,S;for(y=0;y<l;)v=i[y],b=r[y++],S=v*v,c+=(S-c)/y,f+=(S*v-f)/y,d+=(S*S-d)/y,g+=(v*b-g)/y,p+=(S*b-p)/y;const _=d-c*c,w=c*_-f*f,A=(p*c-g*f)/w,T=(g*_-p*f)/w,$=-A*c,k=M=>(M=M-a,A*M*M+T*M+$+s);return{coef:[$-T*a+A*a*a+s,T-2*A*a,A],predict:k,rSquared:zd(e,t,n,s,k)}}function x7(e,t,n,i){if(i===0)return e3(e,t,n);if(i===1)return t3(e,t,n);if(i===2)return n3(e,t,n);const[r,a,s,l]=Qv(e,t,n),c=r.length,f=[],d=[],g=i+1;let p,y,v,b,S;for(p=0;p<g;++p){for(v=0,b=0;v<c;++v)b+=Math.pow(r[v],p)*a[v];for(f.push(b),S=new Float64Array(g),y=0;y<g;++y){for(v=0,b=0;v<c;++v)b+=Math.pow(r[v],p+y);S[y]=b}d.push(S)}d.push(f);const _=wK(d),w=A=>{A-=s;let T=l+_[0]+_[1]*A+_[2]*A*A;for(p=3;p<g;++p)T+=_[p]*Math.pow(A,p);return T};return{coef:_K(g,_,-s,l),predict:w,rSquared:zd(e,t,n,l,w)}}function _K(e,t,n,i){const r=Array(e);let a,s,l,c;for(a=0;a<e;++a)r[a]=0;for(a=e-1;a>=0;--a)for(l=t[a],c=1,r[a]+=l,s=1;s<=a;++s)c*=(a+1-s)/s,r[a-s]+=l*Math.pow(n,s)*c;return r[0]+=i,r}function wK(e){const t=e.length-1,n=[];let i,r,a,s,l;for(i=0;i<t;++i){for(s=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][s])&&(s=r);for(a=i;a<t+1;++a)l=e[a][i],e[a][i]=e[a][s],e[a][s]=l;for(r=i+1;r<t;++r)for(a=t;a>=i;a--)e[a][r]-=e[a][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(l=0,a=r+1;a<t;++a)l+=e[a][r]*n[a];n[r]=(e[t][r]-l)/e[r][r]}return n}const wR=2,AR=1e-12;function S7(e,t,n,i){const[r,a,s,l]=Qv(e,t,n,!0),c=r.length,f=Math.max(2,~~(i*c)),d=new Float64Array(c),g=new Float64Array(c),p=new Float64Array(c).fill(1);for(let y=-1;++y<=wR;){const v=[0,f-1];for(let S=0;S<c;++S){const _=r[S],w=v[0],A=v[1],T=_-r[w]>r[A]-_?w:A;let $=0,k=0,M=0,N=0,z=0;const j=1/Math.abs(r[T]-_||1);for(let H=w;H<=A;++H){const q=r[H],R=a[H],O=AK(Math.abs(_-q)*j)*p[H],B=q*O;$+=O,k+=B,M+=R*O,N+=R*B,z+=q*B}const[U,X]=Rp(k/$,M/$,N/$,z/$);d[S]=U+X*_,g[S]=Math.abs(a[S]-d[S]),CK(r,S+1,v)}if(y===wR)break;const b=s9(g);if(Math.abs(b)<AR)break;for(let S=0,_,w;S<c;++S)_=g[S]/(6*b),p[S]=_>=1?AR:(w=1-_*_)*w}return TK(r,d,s,l)}function AK(e){return(e=1-e*e*e)*e*e}function CK(e,t,n){const i=e[t];let r=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>r&&e[a]-i<=i-e[r];)n[0]=++r,n[1]=a,++a}function TK(e,t,n,i){const r=e.length,a=[];let s=0,l=0,c=[],f;for(;s<r;++s)f=e[s]+n,c[0]===f?c[1]+=(t[s]-c[1])/++l:(l=0,c[1]+=i,c=[f,t[s]],a.push(c));return c[1]+=i,a}const MK=.5*Math.PI/180;function Zv(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=b=>[b,e(b)],a=t[0],s=t[1],l=s-a,c=l/i,f=[r(a)],d=[];if(n===i){for(let b=1;b<i;++b)f.push(r(a+b/n*l));return f.push(r(s)),f}else{d.push(r(s));for(let b=n;--b>0;)d.push(r(a+b/n*l))}let g=f[0],p=d[d.length-1];const y=1/l,v=$K(g[1],d);for(;p;){const b=r((g[0]+p[0])/2);b[0]-g[0]>=c&&kK(g,b,p,y,v)>MK?d.push(b):(g=p,f.push(p),d.pop()),p=d[d.length-1]}return f}function $K(e,t){let n=e,i=e;const r=t.length;for(let a=0;a<r;++a){const s=t[a][1];s<n&&(n=s),s>i&&(i=s)}return 1/(i-n)}function kK(e,t,n,i,r){const a=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),s=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(a-s)}function DK(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}function cw(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:DK(e)}function E7(e,t,n){return n||e+(t?"_"+t:"")}const yE=()=>{},OK={init:yE,add:yE,rem:yE,idx:0},rp={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Fp=Object.keys(rp).filter(e=>e!=="__count__");function NK(e,t){return(n,i)=>Pe({name:e,aggregate_param:i,out:n||e},OK,t)}[...Fp,"__count__"].forEach(e=>{rp[e]=NK(e,rp[e])});function _7(e,t,n){return rp[e](n,t)}function w7(e,t){return e.idx-t.idx}function RK(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{t[r]||n(t[r]=rp[r]())})};return e.forEach(n),Object.values(t).sort(w7)}function zK(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function FK(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function LK(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function UK(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function A7(e,t){const n=t||ii,i=RK(e),r=e.slice().sort(w7);function a(s){this._ops=i,this._out=r,this.cell=s,this.init()}return a.prototype.init=zK,a.prototype.add=FK,a.prototype.rem=LK,a.prototype.set=UK,a.prototype.get=n,a.fields=e.map(s=>s.out),a}function i3(e){this._key=e?zr(e):ke,this.reset()}const Pn=i3.prototype;Pn.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Pn.add=function(e){this._add.push(e)};Pn.rem=function(e){this._rem.push(e)};Pn.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,a=Array(i-r),s={};let l,c,f;for(l=0;l<r;++l)s[n(t[l])]=1;for(l=0,c=0;l<i;++l)s[n(f=e[l])]?s[n(f)]=0:a[c++]=f;return this._rem=[],this._add=a};Pn.distinct=function(e){const t=this.values(),n={};let i=t.length,r=0,a;for(;--i>=0;)a=e(t[i])+"",Ee(n,a)||(n[a]=1,++r);return r};Pn.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=I8(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Pn.argmin=function(e){return this.extent(e)[0]||{}};Pn.argmax=function(e){return this.extent(e)[1]||{}};Pn.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Pn.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Pn.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=qC(this.values(),e),this._get=e),this._q};Pn.q1=function(e){return this.quartile(e)[0]};Pn.q2=function(e){return this.quartile(e)[1]};Pn.q3=function(e){return this.quartile(e)[2]};Pn.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=f7(this.values(),1e3,.05,e),this._get=e),this._ci};Pn.ci0=function(e){return this.ci(e)[0]};Pn.ci1=function(e){return this.ci(e)[1]};function ml(e){J.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ml.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Fp},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ye(ml,J,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,a=>n.add(a))):(n.value=n.value||n.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function a(l){let c,f,d,g;for(c in l)for(d=l[c].tuple,f=0;f<r;++f)i[f][g=d[n[f]]]=g}a(e._prev),a(t);function s(l,c,f){const d=n[f],g=i[f++];for(const p in g){const y=l?l+"|"+p:p;c[d]=g[p],f<r?s(y,c,f):t[y]||e.cell(y,c)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(w){const A=Se(Jn(w)),T=A.length;let $=0,k;for(;$<T;++$)i[k=A[$]]||(i[k]=1,t.push(k))}this._dims=Se(e.groupby),this._dnames=this._dims.map(w=>{const A=Vt(w);return r(w),n.push(A),A}),this.cellkey=e.key?e.key:cw(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],s=e.ops||["count"],l=e.aggregate_params||[null],c=e.as||[],f=a.length,d={};let g,p,y,v,b,S,_;for(f!==s.length&&ee("Unmatched number of fields and aggregate ops."),_=0;_<f;++_){if(g=a[_],p=s[_],y=l[_]||null,g==null&&p!=="count"&&ee("Null aggregate field specified."),b=Vt(g),S=E7(p,b,c[_]),n.push(S),p==="count"){this._counts.push(S);continue}v=d[b],v||(r(g),v=d[b]=[],v.field=g,this._measures.push(v)),p!=="count"&&(this._countOnly=!1),v.push(_7(p,y,S))}return this._measures=this._measures.map(w=>A7(w,w.field)),Object.create(null)},cellkey:cw(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let a=0;a<r;++a)n.agg[a]=new i[a](n)}return n.store&&(n.data=new i3),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,a={};for(let s=0;s<r;++s)a[n[s]]=i[s](e);return t?i7(t.tuple,a):ht(a)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,a=i.length;r<a;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,a=e.add,s=e.rem,l=e.mod;let c,f,d,g;if(i)for(f in i)c=i[f],(!r||c.num)&&s.push(c.tuple);for(d=0,g=this._alen;d<g;++d)a.push(this.celltuple(t[d])),t[d]=null;for(d=0,g=this._mlen;d<g;++d)c=n[d],(c.num===0&&r?s:l).push(this.celltuple(c)),n[d]=null;return this._alen=this._mlen=0,this._prev=null,e}});const BK=1e-14;function r3(e){J.call(this,null,e)}r3.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ye(r3,J,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),r=i.start,a=i.step,s=e.as||["bin0","bin1"],l=s[0],c=s[1];let f;return e.modified()?(t=t.reflow(!0),f=t.SOURCE):f=t.modified(Jn(e.field))?t.ADD_MOD:t.ADD,t.visit(f,n?d=>{const g=i(d);d[l]=g,d[c]=g==null?null:r+a*(1+(g-r)/a)}:d=>d[l]=i(d)),t.modifies(n?s:l)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=c7(e),i=n.step;let r=n.start,a=r+Math.ceil((n.stop-r)/i)*i,s,l;(s=e.anchor)!=null&&(l=s-(r+i*Math.floor((s-r)/i)),r+=l,a+=l);const c=function(f){let d=Zn(t(f));return d==null?null:d<r?-1/0:d>a?1/0:(d=Math.max(r,Math.min(d,a-i)),r+i*Math.floor(BK+(d-r)/i))};return c.start=r,c.stop=n.stop,c.step=i,this.value=Ii(c,Jn(t),e.name||"bin_"+Vt(t))}});function C7(e,t,n){const i=e;let r=t||[],a=n||[],s={},l=0;return{add:c=>a.push(c),remove:c=>s[i(c)]=++l,size:()=>r.length,data:(c,f)=>(l&&(r=r.filter(d=>!s[i(d)]),s={},l=0),f&&c&&r.sort(c),a.length&&(r=c?X8(c,r,a.sort(c)):r.concat(a),a=[]),r)}}function a3(e){J.call(this,[],e)}a3.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ye(a3,J,{transform(e,t){const n=t.fork(t.ALL),i=C7(ke,this.value,n.materialize(n.ADD).add),r=e.sort,a=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(a),this.value=n.source=i.data(fc(r),a),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function T7(e){Tt.call(this,null,jK,e)}ye(T7,Tt);function jK(e){return this.value&&!e.modified()?this.value:vC(e.fields,e.orders)}function s3(e){J.call(this,null,e)}s3.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function qK(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ye(s3,J,{transform(e,t){const n=g=>p=>{for(var y=qK(l(p),e.case,a)||[],v,b=0,S=y.length;b<S;++b)s.test(v=y[b])||g(v)},i=this._parameterCheck(e,t),r=this._counts,a=this._match,s=this._stop,l=e.field,c=e.as||["text","count"],f=n(g=>r[g]=1+(r[g]||0)),d=n(g=>r[g]-=1);return i?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,d)),this._finish(t,c)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],a=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let l,c,f;for(l in n)c=i[l],f=n[l]||0,!c&&f?(i[l]=c=ht({}),c[r]=l,c[a]=f,s.add.push(c)):f===0?(c&&s.rem.push(c),n[l]=null,i[l]=null):c[a]!==f&&(c[a]=f,s.mod.push(c));return s.modifies(t)}});function o3(e){J.call(this,null,e)}o3.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ye(o3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],a=i[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let l=this.value;return s?(l&&(n.rem=l),l=t.materialize(t.SOURCE).source,n.add=this.value=IK(l,r,a,e.filter||Fr)):n.mod=l,n.source=this.value,n.modifies(i)}});function IK(e,t,n,i){for(var r=[],a={},s=e.length,l=0,c,f;l<s;++l)for(a[t]=f=e[l],c=0;c<s;++c)a[n]=e[c],i(a)&&(r.push(ht(a)),a={},a[t]=f);return r}const CR={kde:GC,mixture:p7,normal:HC,lognormal:g7,uniform:m7},PK="distributions",TR="function",HK="field";function M7(e,t){const n=e[TR];Ee(CR,n)||ee("Unknown distribution function: "+n);const i=CR[n]();for(const r in e)r===HK?i.data((e.from||t()).map(e[r])):r===PK?i[r](e[r].map(a=>M7(a,t))):typeof i[r]===TR&&i[r](e[r]);return i}function l3(e){J.call(this,null,e)}const $7=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],GK={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:$7},{name:"weights",type:"number",array:!0}]};l3.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:$7.concat(GK)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ye(l3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=M7(e.distribution,YK(t)),r=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&ee("Invalid density method: "+s),!e.extent&&!i.data&&ee("Missing density extent parameter."),s=i[s];const l=e.as||["value","density"],c=e.extent||Xa(i.data()),f=Zv(s,c,r,a).map(d=>{const g={};return g[l[0]]=d[0],g[l[1]]=d[1],ht(g)});this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function YK(e){return()=>e.materialize(e.SOURCE).source}function k7(e,t){return e?e.map((n,i)=>t[i]||Vt(n)):null}function u3(e,t,n){const i=[],r=g=>g(c);let a,s,l,c,f,d;if(t==null)i.push(e.map(n));else for(a={},s=0,l=e.length;s<l;++s)c=e[s],f=t.map(r),d=a[f],d||(a[f]=d=[],d.dims=f,i.push(d)),d.push(n(c));return i}const D7="bin";function c3(e){J.call(this,null,e)}c3.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:D7}]};const XK=(e,t)=>Np(Xa(e,t))/30;ye(c3,J,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=u3(t.source,e.groupby,ii),r=e.smooth||!1,a=e.field,s=e.step||XK(n,a),l=fc((v,b)=>a(v)-a(b)),c=e.as||D7,f=i.length;let d=1/0,g=-1/0,p=0,y;for(;p<f;++p){const v=i[p].sort(l);y=-1;for(const b of d7(v,s,r,a))b<d&&(d=b),b>g&&(g=b),v[++y][c]=b}return this.value={start:d,stop:g,step:s},t.reflow(!0).modifies(c)}});function O7(e){Tt.call(this,null,VK,e),this.modified(!0)}ye(O7,Tt);function VK(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Ii(n=>t(n,e),Jn(t),Vt(t))}function f3(e){J.call(this,[void 0,void 0],e)}f3.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ye(f3,J,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let a=n[0],s=n[1];if((r||a==null)&&(a=1/0,s=-1/0),t.visit(r?t.SOURCE:t.ADD,l=>{const c=Zn(i(l));c!=null&&(c<a&&(a=c),c>s&&(s=c))}),!Number.isFinite(a)||!Number.isFinite(s)){let l=Vt(i);l&&(l=` for field "${l}"`),t.dataflow.warn(`Infinite extent${l}: [${a}, ${s}]`),a=s=void 0}this.value=[a,s]}});function d3(e,t){Tt.call(this,e),this.parent=t,this.count=0}ye(d3,Tt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Kv(e){J.call(this,{},e),this._keys=$d();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}ye(Kv,J,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let a=Ee(r,e)&&r[e],s,l;return a?a.value.stamp<n.stamp&&(a.init(n),this.activate(a)):(l=i||(l=this._group[e])&&l.tuple,s=n.dataflow,a=new d3(n.fork(n.NO_SOURCE),this),s.add(a).connect(t(s,e,l)),r[e]=a,this.activate(a)),a},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&t[r]!=null;++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,a=this._keys,s=e.modified("key"),l=c=>this.subflow(c,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,c=>{const f=ke(c),d=a.get(f);d!==void 0&&(a.delete(f),l(d).rem(c))}),t.visit(t.ADD,c=>{const f=i(c);a.set(ke(c),f),l(f).add(c)}),s||t.modified(i.fields)?t.visit(t.MOD,c=>{const f=ke(c),d=a.get(f),g=i(c);d===g?l(g).mod(c):(a.set(f,g),l(d).rem(c),l(g).add(c))}):t.changed(t.MOD)&&t.visit(t.MOD,c=>{l(a.get(ke(c))).mod(c)}),s&&t.visit(t.REFLOW,c=>{const f=ke(c),d=a.get(f),g=i(c);d!==g&&(a.set(f,g),l(d).rem(c),l(g).add(c))}),t.clean()?n.runAfter(()=>{this.clean(),a.clean()}):a.empty>n.cleanThreshold&&n.runAfter(a.clean),t}});function N7(e){Tt.call(this,null,WK,e)}ye(N7,Tt);function WK(e){return this.value&&!e.modified()?this.value:ie(e.name)?Se(e.name).map(t=>zr(t)):zr(e.name,e.as)}function h3(e){J.call(this,$d(),e)}h3.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ye(h3,J,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),a=r.add,s=r.rem,l=r.mod,c=e.expr;let f=!0;t.visit(t.REM,g=>{const p=ke(g);i.has(p)?i.delete(p):s.push(g)}),t.visit(t.ADD,g=>{c(g,e)?a.push(g):i.set(ke(g),1)});function d(g){const p=ke(g),y=c(g,e),v=i.get(p);y&&v?(i.delete(p),a.push(g)):!y&&!v?(i.set(p,1),s.push(g)):f&&y&&!v&&l.push(g)}return t.visit(t.MOD,d),e.modified()&&(f=!1,t.visit(t.REFLOW,d)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function g3(e){J.call(this,[],e)}g3.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ye(g3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=k7(i,e.as||[]),a=e.index||null,s=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{const c=i.map(v=>v(l)),f=c.reduce((v,b)=>Math.max(v,b.length),0);let d=0,g,p,y;for(;d<f;++d){for(p=LC(l),g=0;g<s;++g)p[r[g]]=(y=c[g][d])==null?null:y;a&&(p[a]=d),n.add.push(p)}}),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(r)}});function p3(e){J.call(this,[],e)}p3.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ye(p3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(Vt),a=e.as||["key","value"],s=a[0],l=a[1],c=i.length;return n.rem=this.value,t.visit(t.SOURCE,f=>{for(let d=0,g;d<c;++d)g=LC(f),g[s]=r[d],g[l]=i[d](f),n.add.push(g)}),this.value=n.source=n.add,n.modifies(a)}});function m3(e){J.call(this,null,e)}m3.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ye(m3,J,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),a=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(a,s=>s[i]=n(s,e))}});function R7(e){J.call(this,[],e)}ye(R7,J,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let r=this.value,a=e.size-r.length,s,l,c;if(a>0){for(s=[];--a>=0;)s.push(c=ht(i(e))),r.push(c);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else l=r.slice(0,-a),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(l):l,r=r.slice(-a);return n.source=this.value=r,n}});const G0={value:"value",median:s9,mean:OW,min:J_,max:Du},QK=[];function y3(e){J.call(this,[],e)}y3.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function ZK(e){var t=e.method||G0.value,n;if(G0[t]==null)ee("Unrecognized imputation method: "+t);else return t===G0.value?(n=e.value!==void 0?e.value:0,()=>n):G0[t]}function KK(e){const t=e.field;return n=>n?t(n):NaN}ye(y3,J,{transform(e,t){var n=t.fork(t.ALL),i=ZK(e),r=KK(e),a=Vt(e.field),s=Vt(e.key),l=(e.groupby||[]).map(Vt),c=JK(t.source,e.groupby,e.key,e.keyvals),f=[],d=this.value,g=c.domain.length,p,y,v,b,S,_,w,A,T,$;for(S=0,A=c.length;S<A;++S)for(p=c[S],v=p.values,y=NaN,w=0;w<g;++w)if(p[w]==null){for(b=c.domain[w],$={_impute:!0},_=0,T=v.length;_<T;++_)$[l[_]]=v[_];$[s]=b,$[a]=Number.isNaN(y)?y=i(p,r):y,f.push(ht($))}return f.length&&(n.add=n.materialize(n.ADD).add.concat(f)),d.length&&(n.rem=n.materialize(n.REM).rem.concat(d)),this.value=f,n}});function JK(e,t,n,i){var r=_=>_(S),a=[],s=i?i.slice():[],l={},c={},f,d,g,p,y,v,b,S;for(s.forEach((_,w)=>l[_]=w+1),p=0,b=e.length;p<b;++p)S=e[p],v=n(S),y=l[v]||(l[v]=s.push(v)),d=(f=t?t.map(r):QK)+"",(g=c[d])||(g=c[d]=[],a.push(g),g.values=f),g[y-1]=S;return a.domain=s,a}function v3(e){ml.call(this,e)}v3.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Fp},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ye(v3,ml,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,a=>n.add(a))):(r=n.value=n.value||this.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),n.changes(),t.visit(t.SOURCE,a=>{Pe(a,r[n.cellkey(a)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function b3(e){J.call(this,null,e)}b3.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ye(b3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=u3(i,e.groupby,e.field),a=(e.groupby||[]).map(Vt),s=e.bandwidth,l=e.cumulative?"cdf":"pdf",c=e.as||["value","density"],f=[];let d=e.extent,g=e.steps||e.minsteps||25,p=e.steps||e.maxsteps||200;l!=="pdf"&&l!=="cdf"&&ee("Invalid density method: "+l),e.resolve==="shared"&&(d||(d=Xa(i,e.field)),g=p=e.steps||p),r.forEach(y=>{const v=GC(y,s)[l],b=e.counts?y.length:1,S=d||Xa(y);Zv(v,S,g,p).forEach(_=>{const w={};for(let A=0;A<a.length;++A)w[a[A]]=y.dims[A];w[c[0]]=_[0],w[c[1]]=_[1]*b,f.push(ht(w))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function z7(e){Tt.call(this,null,eJ,e)}ye(z7,Tt);function eJ(e){return this.value&&!e.modified()?this.value:SC(e.fields,e.flat)}function F7(e){J.call(this,[],e),this._pending=null}ye(F7,J,{transform(e,t){const n=t.dataflow;return this._pending?vE(this,t,this._pending):tJ(e)?t.StopPropagation:e.values?vE(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=Se(r.data),a=>a.touch(this)))}:n.request(e.url,e.format).then(i=>vE(this,t,Se(i.data)))}});function tJ(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function vE(e,t,n){n.forEach(ht);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function x3(e){J.call(this,{},e)}x3.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ye(x3,J,{transform(e,t){const n=e.fields,i=e.index,r=e.values,a=e.default==null?null:e.default,s=e.modified(),l=n.length;let c=s?t.SOURCE:t.ADD,f=t,d=e.as,g,p,y;return r?(p=r.length,l>1&&!d&&ee('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==l*p&&ee('The "as" parameter has too few output field names.'),d=d||r.map(Vt),g=function(v){for(var b=0,S=0,_,w;b<l;++b)if(w=i.get(n[b](v)),w==null)for(_=0;_<p;++_,++S)v[d[S]]=a;else for(_=0;_<p;++_,++S)v[d[S]]=r[_](w)}):(d||ee("Missing output field names."),g=function(v){for(var b=0,S;b<l;++b)S=i.get(n[b](v)),v[d[b]]=S??a}),s?f=t.reflow(!0):(y=n.some(v=>t.modified(v.fields)),c|=y?t.MOD:0),t.visit(c,g),f.modifies(d)}});function L7(e){Tt.call(this,null,nJ,e)}ye(L7,Tt);function nJ(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,r=-1/0,a,s;for(a=0;a<n;++a)s=t[a],s[0]<i&&(i=s[0]),s[1]>r&&(r=s[1]);return[i,r]}function U7(e){Tt.call(this,null,iJ,e)}ye(U7,Tt);function iJ(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function B7(e){J.call(this,null,e)}ye(B7,J,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function S3(e){ml.call(this,e)}S3.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Fp,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ye(S3,ml,{_transform:ml.prototype.transform,transform(e,t){return this._transform(rJ(e,t),t)}});function rJ(e,t){const n=e.field,i=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",a=Jn(n).concat(Jn(i)),s=sJ(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>r),fields:s.map(l=>aJ(l,n,i,a)),as:s.map(l=>l+""),modified:e.modified.bind(e)}}function aJ(e,t,n,i){return Ii(r=>t(r)===e?n(r):NaN,i,e+"")}function sJ(e,t,n){const i={},r=[];return n.visit(n.SOURCE,a=>{const s=e(a);i[s]||(i[s]=1,r.push(s))}),r.sort(Md),t?r.slice(0,t):r}function j7(e){Kv.call(this,e)}ye(j7,Kv,{transform(e,t){const n=e.subflow,i=e.field,r=a=>this.subflow(ke(a),n,t,a);return(e.modified("field")||i&&t.modified(Jn(i)))&&ee("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,a=>{const s=r(a);i(a).forEach(l=>s.mod(l))}),t.visit(t.ADD,a=>{const s=r(a);i(a).forEach(l=>s.add(ht(l)))}),t.visit(t.REM,a=>{const s=r(a);i(a).forEach(l=>s.rem(l))})):(t.visit(t.MOD,a=>r(a).mod(a)),t.visit(t.ADD,a=>r(a).add(a)),t.visit(t.REM,a=>r(a).rem(a))),t.clean()&&t.runAfter(()=>this.clean()),t}});function E3(e){J.call(this,null,e)}E3.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ye(E3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=k7(e.fields,e.as||[]),a=i?(l,c)=>oJ(l,c,i,r):Hv;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,l=>{const c=ke(l);n.rem.push(s[c]),s[c]=null}),t.visit(t.ADD,l=>{const c=a(l,ht({}));s[ke(l)]=c,n.add.push(c)}),t.visit(t.MOD,l=>{n.mod.push(a(l,s[ke(l)]))}),n}});function oJ(e,t,n,i){for(let r=0,a=n.length;r<a;++r)t[i[r]]=n[r](e);return t}function q7(e){J.call(this,null,e)}ye(q7,J,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function _3(e){J.call(this,null,e)}_3.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const lJ=1e-14;ye(_3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const r=t.materialize(t.SOURCE).source,a=u3(r,e.groupby,e.field),s=(e.groupby||[]).map(Vt),l=[],c=e.step||.01,f=e.probs||rr(c/2,1-lJ,c),d=f.length;return a.forEach(g=>{const p=jC(g,f);for(let y=0;y<d;++y){const v={};for(let b=0;b<s.length;++b)v[s[b]]=g.dims[b];v[i[0]]=f[y],v[i[1]]=p[y],l.push(ht(v))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l,n}});function I7(e){J.call(this,null,e)}ye(I7,J,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const a=ke(r);n.rem.push(i[a]),i[a]=null}),t.visit(t.ADD,r=>{const a=LC(r);i[ke(r)]=a,n.add.push(a)}),t.visit(t.MOD,r=>{const a=i[ke(r)];for(const s in r)a[s]=r[s],n.modifies(s);n.mod.push(a)})),n}});function w3(e){J.call(this,[],e),this.count=0}w3.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ye(w3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,a=this.value.reduce((d,g)=>(d[ke(g)]=1,d),{});let s=this.value,l=this.count,c=0;function f(d){let g,p;s.length<r?s.push(d):(p=~~((l+1)*Ur()),p<s.length&&p>=c&&(g=s[p],a[ke(g)]&&n.rem.push(g),s[p]=d)),++l}if(t.rem.length&&(t.visit(t.REM,d=>{const g=ke(d);a[g]&&(a[g]=-1,n.rem.push(d)),--l}),s=s.filter(d=>a[ke(d)]!==-1)),(t.rem.length||i)&&s.length<r&&t.source&&(c=l=s.length,t.visit(t.SOURCE,d=>{a[ke(d)]||f(d)}),c=-1),i&&s.length>r){const d=s.length-r;for(let g=0;g<d;++g)a[ke(s[g])]=-1,n.rem.push(s[g]);s=s.slice(d)}return t.mod.length&&t.visit(t.MOD,d=>{a[ke(d)]&&n.mod.push(d)}),t.add.length&&t.visit(t.ADD,f),(t.add.length||c<0)&&(n.add=s.filter(d=>!a[ke(d)])),this.count=l,this.value=n.source=s,n}});function A3(e){J.call(this,null,e)}A3.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ye(A3,J,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=rr(e.start,e.stop,e.step||1).map(r=>{const a={};return a[i]=r,ht(a)}),n.add=t.add.concat(this.value),n}});function P7(e){J.call(this,null,e),this.modified(!0)}ye(P7,J,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function C3(e){J.call(this,null,e)}const H7=["unit0","unit1"];C3.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:MC,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:H7}]};ye(C3,J,{transform(e,t){const n=e.field,i=e.interval!==!1,r=e.timezone==="utc",a=this._floor(e,t),s=(r?Rd:Nd)(a.unit).offset,l=e.as||H7,c=l[0],f=l[1],d=a.step;let g=a.start||1/0,p=a.stop||-1/0,y=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Jn(n)))&&(t=t.reflow(!0),y=t.SOURCE,g=1/0,p=-1/0),t.visit(y,v=>{const b=n(v);let S,_;b==null?(v[c]=null,i&&(v[f]=null)):(v[c]=S=_=a(b),i&&(v[f]=_=s(S,d)),S<g&&(g=S),_>p&&(p=_))}),a.start=g,a.stop=p,t.modifies(i?l:c)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:R9({extent:e.extent||Xa(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=$C(i),s=this.value||{},l=(n?A9:w9)(a,r);return l.unit=rt(a),l.units=a,l.step=r,l.start=s.start,l.stop=s.stop,this.value=l}});function G7(e){J.call(this,$d(),e)}ye(G7,J,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,a=l=>r.set(i(l),l);let s=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,l=>r.delete(i(l))),t.visit(t.ADD,a)):s=!1,this.modified(s),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}});function Y7(e){J.call(this,null,e)}ye(Y7,J,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(fc(e.sort)):t.source).map(e.field))}});function uJ(e,t,n,i){const r=ap[e](t,n);return{init:r.init||Ko,update:function(a,s){s[i]=r.next(a)}}}const ap={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=ap.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||ee("ntile num must be greater than zero.");const n=ap.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||ee("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=cJ(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}};function cJ(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const fJ=Object.keys(ap);function X7(e){const t=Se(e.ops),n=Se(e.fields),i=Se(e.params),r=Se(e.aggregate_params),a=Se(e.as),s=this.outputs=[],l=this.windows=[],c={},f={},d=[],g=[];let p=!0;function y(v){Se(Jn(v)).forEach(b=>c[b]=1)}y(e.sort),t.forEach((v,b)=>{const S=n[b],_=i[b],w=r[b]||null,A=Vt(S),T=E7(v,A,a[b]);if(y(S),s.push(T),Ee(ap,v))l.push(uJ(v,S,_,T));else{if(S==null&&v!=="count"&&ee("Null aggregate field specified."),v==="count"){d.push(T);return}p=!1;let $=f[A];$||($=f[A]=[],$.field=S,g.push($)),$.push(_7(v,w,T))}}),(d.length||g.length)&&(this.cell=dJ(g,d,p)),this.inputs=Object.keys(c)}const V7=X7.prototype;V7.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};V7.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,a=i&&i.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(r[s]);for(s=e.p1;s<e.i1;++s)n.add(r[s]);n.set(t)}for(s=0;s<a;++s)i[s].update(e,t)};function dJ(e,t,n){e=e.map(c=>A7(c,c.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,a=i.agg=Array(r),s=0;s<r;++s)a[s]=new e[s](i);if(i.store)var l=i.data=new i3;return i.add=function(c){if(i.num+=1,!n){l&&l.add(c);for(let f=0;f<r;++f)a[f].add(a[f].get(c),c)}},i.rem=function(c){if(i.num-=1,!n){l&&l.rem(c);for(let f=0;f<r;++f)a[f].rem(a[f].get(c),c)}},i.set=function(c){let f,d;for(l&&l.values(),f=0,d=t.length;f<d;++f)c[t[f]]=i.num;if(!n)for(f=0,d=a.length;f<d;++f)a[f].set(c)},i.init=function(){i.num=0,l&&l.reset();for(let c=0;c<r;++c)a[c].init()},i}function T3(e){J.call(this,{},e),this._mlen=0,this._mods=[]}T3.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:fJ.concat(Fp)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ye(T3,J,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=fc(e.sort),r=cw(e.groupby),a=l=>this.group(r(l));let s=this.state;(!s||n)&&(s=this.state=new X7(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,l=>a(l).add(l))):(t.visit(t.REM,l=>a(l).remove(l)),t.visit(t.ADD,l=>a(l).add(l)));for(let l=0,c=this._mlen;l<c;++l)hJ(this._mods[l],s,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=C7(ke),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function hJ(e,t,n,i){const r=i.sort,a=r&&!i.ignorePeers,s=i.frame||[null,0],l=e.data(n),c=l.length,f=a?kd(r):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:l,compare:r||ri(-1)};t.init();for(let g=0;g<c;++g)gJ(d,s,g,c),a&&pJ(d,f),t.update(d,l[g])}function gJ(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function pJ(e,t){const n=e.i0,i=e.i1-1,r=e.compare,a=e.data,s=a.length-1;n>0&&!r(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),i<s&&!r(a[i],a[i+1])&&(e.i1=t.right(a,a[i]))}const mJ=Object.freeze(Object.defineProperty({__proto__:null,aggregate:ml,bin:r3,collect:a3,compare:T7,countpattern:s3,cross:o3,density:l3,dotbin:c3,expression:O7,extent:f3,facet:Kv,field:N7,filter:h3,flatten:g3,fold:p3,formula:m3,generate:R7,impute:y3,joinaggregate:v3,kde:b3,key:z7,load:F7,lookup:x3,multiextent:L7,multivalues:U7,params:B7,pivot:S3,prefacet:j7,project:E3,proxy:q7,quantile:_3,relay:I7,sample:w3,sequence:A3,sieve:P7,subflow:d3,timeunit:C3,tupleindex:G7,values:Y7,window:T3},Symbol.toStringTag,{value:"Module"}));function gt(e){return function(){return e}}const MR=Math.abs,Gn=Math.atan2,lu=Math.cos,yJ=Math.max,bE=Math.min,$a=Math.sin,Tu=Math.sqrt,Xn=1e-12,Qf=Math.PI,ly=Qf/2,W7=2*Qf;function vJ(e){return e>1?0:e<-1?Qf:Math.acos(e)}function $R(e){return e>=1?ly:e<=-1?-ly:Math.asin(e)}const fw=Math.PI,dw=2*fw,bu=1e-6,bJ=dw-bu;function Q7(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function xJ(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Q7;const n=10**t;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let M3=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Q7:xJ(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,a,s){this._append`C${+t},${+n},${+i},${+r},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,i,r,a){if(t=+t,n=+n,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,l=this._y1,c=i-t,f=r-n,d=s-t,g=l-n,p=d*d+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>bu)if(!(Math.abs(g*c-f*d)>bu)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let y=i-s,v=r-l,b=c*c+f*f,S=y*y+v*v,_=Math.sqrt(b),w=Math.sqrt(p),A=a*Math.tan((fw-Math.acos((b+p-S)/(2*_*w)))/2),T=A/w,$=A/_;Math.abs(T-1)>bu&&this._append`L${t+T*d},${n+T*g}`,this._append`A${a},${a},0,0,${+(g*y>d*v)},${this._x1=t+$*c},${this._y1=n+$*f}`}}arc(t,n,i,r,a,s){if(t=+t,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),c=i*Math.sin(r),f=t+l,d=n+c,g=1^s,p=s?r-a:a-r;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>bu||Math.abs(this._y1-d)>bu)&&this._append`L${f},${d}`,i&&(p<0&&(p=p%dw+dw),p>bJ?this._append`A${i},${i},0,1,${g},${t-l},${n-c}A${i},${i},0,1,${g},${this._x1=f},${this._y1=d}`:p>bu&&this._append`A${i},${i},0,${+(p>=fw)},${g},${this._x1=t+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function Jv(){return new M3}Jv.prototype=M3.prototype;function eb(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new M3(t)}function SJ(e){return e.innerRadius}function EJ(e){return e.outerRadius}function _J(e){return e.startAngle}function wJ(e){return e.endAngle}function AJ(e){return e&&e.padAngle}function CJ(e,t,n,i,r,a,s,l){var c=n-e,f=i-t,d=s-r,g=l-a,p=g*c-d*f;if(!(p*p<Xn))return p=(d*(t-a)-g*(e-r))/p,[e+p*c,t+p*f]}function Y0(e,t,n,i,r,a,s){var l=e-n,c=t-i,f=(s?a:-a)/Tu(l*l+c*c),d=f*c,g=-f*l,p=e+d,y=t+g,v=n+d,b=i+g,S=(p+v)/2,_=(y+b)/2,w=v-p,A=b-y,T=w*w+A*A,$=r-a,k=p*b-v*y,M=(A<0?-1:1)*Tu(yJ(0,$*$*T-k*k)),N=(k*A-w*M)/T,z=(-k*w-A*M)/T,j=(k*A+w*M)/T,U=(-k*w+A*M)/T,X=N-S,H=z-_,q=j-S,R=U-_;return X*X+H*H>q*q+R*R&&(N=j,z=U),{cx:N,cy:z,x01:-d,y01:-g,x11:N*(r/$-1),y11:z*(r/$-1)}}function TJ(){var e=SJ,t=EJ,n=gt(0),i=null,r=_J,a=wJ,s=AJ,l=null,c=eb(f);function f(){var d,g,p=+e.apply(this,arguments),y=+t.apply(this,arguments),v=r.apply(this,arguments)-ly,b=a.apply(this,arguments)-ly,S=MR(b-v),_=b>v;if(l||(l=d=c()),y<p&&(g=y,y=p,p=g),!(y>Xn))l.moveTo(0,0);else if(S>W7-Xn)l.moveTo(y*lu(v),y*$a(v)),l.arc(0,0,y,v,b,!_),p>Xn&&(l.moveTo(p*lu(b),p*$a(b)),l.arc(0,0,p,b,v,_));else{var w=v,A=b,T=v,$=b,k=S,M=S,N=s.apply(this,arguments)/2,z=N>Xn&&(i?+i.apply(this,arguments):Tu(p*p+y*y)),j=bE(MR(y-p)/2,+n.apply(this,arguments)),U=j,X=j,H,q;if(z>Xn){var R=$R(z/p*$a(N)),O=$R(z/y*$a(N));(k-=R*2)>Xn?(R*=_?1:-1,T+=R,$-=R):(k=0,T=$=(v+b)/2),(M-=O*2)>Xn?(O*=_?1:-1,w+=O,A-=O):(M=0,w=A=(v+b)/2)}var B=y*lu(w),Y=y*$a(w),Z=p*lu($),oe=p*$a($);if(j>Xn){var F=y*lu(A),G=y*$a(A),ae=p*lu(T),he=p*$a(T),me;if(S<Qf)if(me=CJ(B,Y,ae,he,F,G,Z,oe)){var Me=B-me[0],Xe=Y-me[1],Rt=F-me[0],pe=G-me[1],Fe=1/$a(vJ((Me*Rt+Xe*pe)/(Tu(Me*Me+Xe*Xe)*Tu(Rt*Rt+pe*pe)))/2),je=Tu(me[0]*me[0]+me[1]*me[1]);U=bE(j,(p-je)/(Fe-1)),X=bE(j,(y-je)/(Fe+1))}else U=X=0}M>Xn?X>Xn?(H=Y0(ae,he,B,Y,y,X,_),q=Y0(F,G,Z,oe,y,X,_),l.moveTo(H.cx+H.x01,H.cy+H.y01),X<j?l.arc(H.cx,H.cy,X,Gn(H.y01,H.x01),Gn(q.y01,q.x01),!_):(l.arc(H.cx,H.cy,X,Gn(H.y01,H.x01),Gn(H.y11,H.x11),!_),l.arc(0,0,y,Gn(H.cy+H.y11,H.cx+H.x11),Gn(q.cy+q.y11,q.cx+q.x11),!_),l.arc(q.cx,q.cy,X,Gn(q.y11,q.x11),Gn(q.y01,q.x01),!_))):(l.moveTo(B,Y),l.arc(0,0,y,w,A,!_)):l.moveTo(B,Y),!(p>Xn)||!(k>Xn)?l.lineTo(Z,oe):U>Xn?(H=Y0(Z,oe,F,G,p,-U,_),q=Y0(B,Y,ae,he,p,-U,_),l.lineTo(H.cx+H.x01,H.cy+H.y01),U<j?l.arc(H.cx,H.cy,U,Gn(H.y01,H.x01),Gn(q.y01,q.x01),!_):(l.arc(H.cx,H.cy,U,Gn(H.y01,H.x01),Gn(H.y11,H.x11),!_),l.arc(0,0,p,Gn(H.cy+H.y11,H.cx+H.x11),Gn(q.cy+q.y11,q.cx+q.x11),_),l.arc(q.cx,q.cy,U,Gn(q.y11,q.x11),Gn(q.y01,q.x01),!_))):l.arc(0,0,p,$,T,_)}if(l.closePath(),d)return l=null,d+""||null}return f.centroid=function(){var d=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,g=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-Qf/2;return[lu(g)*d,$a(g)*d]},f.innerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:gt(+d),f):e},f.outerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:gt(+d),f):t},f.cornerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:gt(+d),f):n},f.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:gt(+d),f):i},f.startAngle=function(d){return arguments.length?(r=typeof d=="function"?d:gt(+d),f):r},f.endAngle=function(d){return arguments.length?(a=typeof d=="function"?d:gt(+d),f):a},f.padAngle=function(d){return arguments.length?(s=typeof d=="function"?d:gt(+d),f):s},f.context=function(d){return arguments.length?(l=d??null,f):l},f}function Z7(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function K7(e){this._context=e}K7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function $3(e){return new K7(e)}function J7(e){return e[0]}function eL(e){return e[1]}function tL(e,t){var n=gt(!0),i=null,r=$3,a=null,s=eb(l);e=typeof e=="function"?e:e===void 0?J7:gt(e),t=typeof t=="function"?t:t===void 0?eL:gt(t);function l(c){var f,d=(c=Z7(c)).length,g,p=!1,y;for(i==null&&(a=r(y=s())),f=0;f<=d;++f)!(f<d&&n(g=c[f],f,c))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(g,f,c),+t(g,f,c));if(y)return a=null,y+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:gt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:gt(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:gt(!!c),l):n},l.curve=function(c){return arguments.length?(r=c,i!=null&&(a=r(i)),l):r},l.context=function(c){return arguments.length?(c==null?i=a=null:a=r(i=c),l):i},l}function nL(e,t,n){var i=null,r=gt(!0),a=null,s=$3,l=null,c=eb(f);e=typeof e=="function"?e:e===void 0?J7:gt(+e),t=typeof t=="function"?t:gt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?eL:gt(+n);function f(g){var p,y,v,b=(g=Z7(g)).length,S,_=!1,w,A=new Array(b),T=new Array(b);for(a==null&&(l=s(w=c())),p=0;p<=b;++p){if(!(p<b&&r(S=g[p],p,g))===_)if(_=!_)y=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=p-1;v>=y;--v)l.point(A[v],T[v]);l.lineEnd(),l.areaEnd()}_&&(A[p]=+e(S,p,g),T[p]=+t(S,p,g),l.point(i?+i(S,p,g):A[p],n?+n(S,p,g):T[p]))}if(w)return l=null,w+""||null}function d(){return tL().defined(r).curve(s).context(a)}return f.x=function(g){return arguments.length?(e=typeof g=="function"?g:gt(+g),i=null,f):e},f.x0=function(g){return arguments.length?(e=typeof g=="function"?g:gt(+g),f):e},f.x1=function(g){return arguments.length?(i=g==null?null:typeof g=="function"?g:gt(+g),f):i},f.y=function(g){return arguments.length?(t=typeof g=="function"?g:gt(+g),n=null,f):t},f.y0=function(g){return arguments.length?(t=typeof g=="function"?g:gt(+g),f):t},f.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:gt(+g),f):n},f.lineX0=f.lineY0=function(){return d().x(e).y(t)},f.lineY1=function(){return d().x(e).y(n)},f.lineX1=function(){return d().x(i).y(t)},f.defined=function(g){return arguments.length?(r=typeof g=="function"?g:gt(!!g),f):r},f.curve=function(g){return arguments.length?(s=g,a!=null&&(l=s(a)),f):s},f.context=function(g){return arguments.length?(g==null?a=l=null:l=s(a=g),f):a},f}const MJ={draw(e,t){const n=Tu(t/Qf);e.moveTo(n,0),e.arc(0,0,n,0,W7)}};function $J(e,t){let n=null,i=eb(r);e=typeof e=="function"?e:gt(e||MJ),t=typeof t=="function"?t:gt(t===void 0?64:+t);function r(){let a;if(n||(n=a=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return r.type=function(a){return arguments.length?(e=typeof a=="function"?a:gt(a),r):e},r.size=function(a){return arguments.length?(t=typeof a=="function"?a:gt(+a),r):t},r.context=function(a){return arguments.length?(n=a??null,r):n},r}function yl(){}function uy(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function tb(e){this._context=e}tb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:uy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:uy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kJ(e){return new tb(e)}function iL(e){this._context=e}iL.prototype={areaStart:yl,areaEnd:yl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:uy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function DJ(e){return new iL(e)}function rL(e){this._context=e}rL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:uy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function OJ(e){return new rL(e)}function aL(e,t){this._basis=new tb(e),this._beta=t}aL.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],a=e[n]-i,s=t[n]-r,l=-1,c;++l<=n;)c=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(i+c*a),this._beta*t[l]+(1-this._beta)*(r+c*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const NJ=(function e(t){function n(i){return t===1?new tb(i):new aL(i,t)}return n.beta=function(i){return e(+i)},n})(.85);function cy(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function k3(e,t){this._context=e,this._k=(1-t)/6}k3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:cy(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:cy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const RJ=(function e(t){function n(i){return new k3(i,t)}return n.tension=function(i){return e(+i)},n})(0);function D3(e,t){this._context=e,this._k=(1-t)/6}D3.prototype={areaStart:yl,areaEnd:yl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:cy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const zJ=(function e(t){function n(i){return new D3(i,t)}return n.tension=function(i){return e(+i)},n})(0);function O3(e,t){this._context=e,this._k=(1-t)/6}O3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:cy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const FJ=(function e(t){function n(i){return new O3(i,t)}return n.tension=function(i){return e(+i)},n})(0);function N3(e,t,n){var i=e._x1,r=e._y1,a=e._x2,s=e._y2;if(e._l01_a>Xn){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,r=(r*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>Xn){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*f+e._x1*e._l23_2a-t*e._l12_2a)/d,s=(s*f+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(i,r,a,s,e._x2,e._y2)}function sL(e,t){this._context=e,this._alpha=t}sL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:N3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const LJ=(function e(t){function n(i){return t?new sL(i,t):new k3(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function oL(e,t){this._context=e,this._alpha=t}oL.prototype={areaStart:yl,areaEnd:yl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:N3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const UJ=(function e(t){function n(i){return t?new oL(i,t):new D3(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function lL(e,t){this._context=e,this._alpha=t}lL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:N3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const BJ=(function e(t){function n(i){return t?new lL(i,t):new O3(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function uL(e){this._context=e}uL.prototype={areaStart:yl,areaEnd:yl,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function jJ(e){return new uL(e)}function kR(e){return e<0?-1:1}function DR(e,t,n){var i=e._x1-e._x0,r=t-e._x1,a=(e._y1-e._y0)/(i||r<0&&-0),s=(n-e._y1)/(r||i<0&&-0),l=(a*r+s*i)/(i+r);return(kR(a)+kR(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(l))||0}function OR(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function xE(e,t,n){var i=e._x0,r=e._y0,a=e._x1,s=e._y1,l=(a-i)/3;e._context.bezierCurveTo(i+l,r+l*t,a-l,s-l*n,a,s)}function fy(e){this._context=e}fy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:xE(this,this._t0,OR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,xE(this,OR(this,n=DR(this,e,t)),n);break;default:xE(this,this._t0,n=DR(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function cL(e){this._context=new fL(e)}(cL.prototype=Object.create(fy.prototype)).point=function(e,t){fy.prototype.point.call(this,t,e)};function fL(e){this._context=e}fL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,a){this._context.bezierCurveTo(t,e,i,n,a,r)}};function qJ(e){return new fy(e)}function IJ(e){return new cL(e)}function dL(e){this._context=e}dL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=NR(e),r=NR(t),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function NR(e){var t,n=e.length-1,i,r=new Array(n),a=new Array(n),s=new Array(n);for(r[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,a[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/a[t-1],a[t]-=i,s[t]-=i*s[t-1];for(r[n-1]=s[n-1]/a[n-1],t=n-2;t>=0;--t)r[t]=(s[t]-r[t+1])/a[t];for(a[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-r[t+1];return[r,a]}function PJ(e){return new dL(e)}function nb(e,t){this._context=e,this._t=t}nb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function HJ(e){return new nb(e,.5)}function GJ(e){return new nb(e,0)}function YJ(e){return new nb(e,1)}function fl(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const XJ=()=>typeof Image<"u"?Image:null;function is(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function kl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const hw=Symbol("implicit");function R3(){var e=new QN,t=[],n=[],i=hw;function r(a){let s=e.get(a);if(s===void 0){if(i!==hw)return i;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return r.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new QN;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return R3(t,n).unknown(i)},is.apply(r,arguments),r}function Fd(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Lp(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Dl(){}var Iu=.7,Zf=1/Iu,zf="\\s*([+-]?\\d+)\\s*",sp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",VJ=/^#([0-9a-f]{3,8})$/,WJ=new RegExp(`^rgb\\(${zf},${zf},${zf}\\)$`),QJ=new RegExp(`^rgb\\(${qa},${qa},${qa}\\)$`),ZJ=new RegExp(`^rgba\\(${zf},${zf},${zf},${sp}\\)$`),KJ=new RegExp(`^rgba\\(${qa},${qa},${qa},${sp}\\)$`),JJ=new RegExp(`^hsl\\(${sp},${qa},${qa}\\)$`),eee=new RegExp(`^hsla\\(${sp},${qa},${qa},${sp}\\)$`),RR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fd(Dl,op,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:zR,formatHex:zR,formatHex8:tee,formatHsl:nee,formatRgb:FR,toString:FR});function zR(){return this.rgb().formatHex()}function tee(){return this.rgb().formatHex8()}function nee(){return hL(this).formatHsl()}function FR(){return this.rgb().formatRgb()}function op(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=VJ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?LR(t):n===3?new Sn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?X0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?X0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=WJ.exec(e))?new Sn(t[1],t[2],t[3],1):(t=QJ.exec(e))?new Sn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ZJ.exec(e))?X0(t[1],t[2],t[3],t[4]):(t=KJ.exec(e))?X0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=JJ.exec(e))?jR(t[1],t[2]/100,t[3]/100,1):(t=eee.exec(e))?jR(t[1],t[2]/100,t[3]/100,t[4]):RR.hasOwnProperty(e)?LR(RR[e]):e==="transparent"?new Sn(NaN,NaN,NaN,0):null}function LR(e){return new Sn(e>>16&255,e>>8&255,e&255,1)}function X0(e,t,n,i){return i<=0&&(e=t=n=NaN),new Sn(e,t,n,i)}function z3(e){return e instanceof Dl||(e=op(e)),e?(e=e.rgb(),new Sn(e.r,e.g,e.b,e.opacity)):new Sn}function vl(e,t,n,i){return arguments.length===1?z3(e):new Sn(e,t,n,i??1)}function Sn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Fd(Sn,vl,Lp(Dl,{brighter(e){return e=e==null?Zf:Math.pow(Zf,e),new Sn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Iu:Math.pow(Iu,e),new Sn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Sn(Ou(this.r),Ou(this.g),Ou(this.b),dy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:UR,formatHex:UR,formatHex8:iee,formatRgb:BR,toString:BR}));function UR(){return`#${Mu(this.r)}${Mu(this.g)}${Mu(this.b)}`}function iee(){return`#${Mu(this.r)}${Mu(this.g)}${Mu(this.b)}${Mu((isNaN(this.opacity)?1:this.opacity)*255)}`}function BR(){const e=dy(this.opacity);return`${e===1?"rgb(":"rgba("}${Ou(this.r)}, ${Ou(this.g)}, ${Ou(this.b)}${e===1?")":`, ${e})`}`}function dy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ou(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Mu(e){return e=Ou(e),(e<16?"0":"")+e.toString(16)}function jR(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new na(e,t,n,i)}function hL(e){if(e instanceof na)return new na(e.h,e.s,e.l,e.opacity);if(e instanceof Dl||(e=op(e)),!e)return new na;if(e instanceof na)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,l=a-r,c=(a+r)/2;return l?(t===a?s=(n-i)/l+(n<i)*6:n===a?s=(i-t)/l+2:s=(t-n)/l+4,l/=c<.5?a+r:2-a-r,s*=60):l=c>0&&c<1?0:s,new na(s,l,c,e.opacity)}function hy(e,t,n,i){return arguments.length===1?hL(e):new na(e,t,n,i??1)}function na(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Fd(na,hy,Lp(Dl,{brighter(e){return e=e==null?Zf:Math.pow(Zf,e),new na(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Iu:Math.pow(Iu,e),new na(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Sn(SE(e>=240?e-240:e+120,r,i),SE(e,r,i),SE(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new na(qR(this.h),V0(this.s),V0(this.l),dy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=dy(this.opacity);return`${e===1?"hsl(":"hsla("}${qR(this.h)}, ${V0(this.s)*100}%, ${V0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function qR(e){return e=(e||0)%360,e<0?e+360:e}function V0(e){return Math.max(0,Math.min(1,e||0))}function SE(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const gL=Math.PI/180,pL=180/Math.PI,gy=18,mL=.96422,yL=1,vL=.82521,bL=4/29,Ff=6/29,xL=3*Ff*Ff,ree=Ff*Ff*Ff;function SL(e){if(e instanceof Ia)return new Ia(e.l,e.a,e.b,e.opacity);if(e instanceof Gs)return EL(e);e instanceof Sn||(e=z3(e));var t=AE(e.r),n=AE(e.g),i=AE(e.b),r=EE((.2225045*t+.7168786*n+.0606169*i)/yL),a,s;return t===n&&n===i?a=s=r:(a=EE((.4360747*t+.3850649*n+.1430804*i)/mL),s=EE((.0139322*t+.0971045*n+.7141733*i)/vL)),new Ia(116*r-16,500*(a-r),200*(r-s),e.opacity)}function py(e,t,n,i){return arguments.length===1?SL(e):new Ia(e,t,n,i??1)}function Ia(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}Fd(Ia,py,Lp(Dl,{brighter(e){return new Ia(this.l+gy*(e??1),this.a,this.b,this.opacity)},darker(e){return new Ia(this.l-gy*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=mL*_E(t),e=yL*_E(e),n=vL*_E(n),new Sn(wE(3.1338561*t-1.6168667*e-.4906146*n),wE(-.9787684*t+1.9161415*e+.033454*n),wE(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function EE(e){return e>ree?Math.pow(e,1/3):e/xL+bL}function _E(e){return e>Ff?e*e*e:xL*(e-bL)}function wE(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function AE(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function aee(e){if(e instanceof Gs)return new Gs(e.h,e.c,e.l,e.opacity);if(e instanceof Ia||(e=SL(e)),e.a===0&&e.b===0)return new Gs(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*pL;return new Gs(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function my(e,t,n,i){return arguments.length===1?aee(e):new Gs(e,t,n,i??1)}function Gs(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function EL(e){if(isNaN(e.h))return new Ia(e.l,0,0,e.opacity);var t=e.h*gL;return new Ia(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Fd(Gs,my,Lp(Dl,{brighter(e){return new Gs(this.h,this.c,this.l+gy*(e??1),this.opacity)},darker(e){return new Gs(this.h,this.c,this.l-gy*(e??1),this.opacity)},rgb(){return EL(this).rgb()}}));var _L=-.14861,F3=1.78277,L3=-.29227,ib=-.90649,lp=1.97294,IR=lp*ib,PR=lp*F3,HR=F3*L3-ib*_L;function see(e){if(e instanceof Nu)return new Nu(e.h,e.s,e.l,e.opacity);e instanceof Sn||(e=z3(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(HR*i+IR*t-PR*n)/(HR+IR-PR),a=i-r,s=(lp*(n-r)-L3*a)/ib,l=Math.sqrt(s*s+a*a)/(lp*r*(1-r)),c=l?Math.atan2(s,a)*pL-120:NaN;return new Nu(c<0?c+360:c,l,r,e.opacity)}function gw(e,t,n,i){return arguments.length===1?see(e):new Nu(e,t,n,i??1)}function Nu(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Fd(Nu,gw,Lp(Dl,{brighter(e){return e=e==null?Zf:Math.pow(Zf,e),new Nu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Iu:Math.pow(Iu,e),new Nu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*gL,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Sn(255*(t+n*(_L*i+F3*r)),255*(t+n*(L3*i+ib*r)),255*(t+n*(lp*i)),this.opacity)}}));function wL(e,t,n,i,r){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*i+s*r)/6}function AL(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],a=e[i+1],s=i>0?e[i-1]:2*r-a,l=i<t-1?e[i+2]:2*a-r;return wL((n-i/t)*t,s,r,a,l)}}function CL(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],a=e[i%t],s=e[(i+1)%t],l=e[(i+2)%t];return wL((n-i/t)*t,r,a,s,l)}}const rb=e=>()=>e;function TL(e,t){return function(n){return e+n*t}}function oee(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function ab(e,t){var n=t-e;return n?TL(e,n>180||n<-180?n-360*Math.round(n/360):n):rb(isNaN(e)?t:e)}function lee(e){return(e=+e)==1?En:function(t,n){return n-t?oee(t,n,e):rb(isNaN(t)?n:t)}}function En(e,t){var n=t-e;return n?TL(e,n):rb(isNaN(e)?t:e)}const pw=(function e(t){var n=lee(t);function i(r,a){var s=n((r=vl(r)).r,(a=vl(a)).r),l=n(r.g,a.g),c=n(r.b,a.b),f=En(r.opacity,a.opacity);return function(d){return r.r=s(d),r.g=l(d),r.b=c(d),r.opacity=f(d),r+""}}return i.gamma=e,i})(1);function ML(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),a=new Array(n),s,l;for(s=0;s<n;++s)l=vl(t[s]),i[s]=l.r||0,r[s]=l.g||0,a[s]=l.b||0;return i=e(i),r=e(r),a=e(a),l.opacity=1,function(c){return l.r=i(c),l.g=r(c),l.b=a(c),l+""}}}var uee=ML(AL),cee=ML(CL);function U3(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function $L(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function fee(e,t){return($L(t)?U3:kL)(e,t)}function kL(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),a=new Array(n),s;for(s=0;s<i;++s)r[s]=Ol(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(l){for(s=0;s<i;++s)a[s]=r[s](l);return a}}function DL(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function ea(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function OL(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Ol(e[r],t[r]):i[r]=t[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var mw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,CE=new RegExp(mw.source,"g");function dee(e){return function(){return e}}function hee(e){return function(t){return e(t)+""}}function NL(e,t){var n=mw.lastIndex=CE.lastIndex=0,i,r,a,s=-1,l=[],c=[];for(e=e+"",t=t+"";(i=mw.exec(e))&&(r=CE.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),l[s]?l[s]+=a:l[++s]=a),(i=i[0])===(r=r[0])?l[s]?l[s]+=r:l[++s]=r:(l[++s]=null,c.push({i:s,x:ea(i,r)})),n=CE.lastIndex;return n<t.length&&(a=t.slice(n),l[s]?l[s]+=a:l[++s]=a),l.length<2?c[0]?hee(c[0].x):dee(t):(t=c.length,function(f){for(var d=0,g;d<t;++d)l[(g=c[d]).i]=g.x(f);return l.join("")})}function Ol(e,t){var n=typeof t,i;return t==null||n==="boolean"?rb(t):(n==="number"?ea:n==="string"?(i=op(t))?(t=i,pw):NL:t instanceof op?pw:t instanceof Date?DL:$L(t)?U3:Array.isArray(t)?kL:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?OL:ea)(e,t)}function gee(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function pee(e,t){var n=ab(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function Up(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var GR=180/Math.PI,yw={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function RL(e,t,n,i,r,a){var s,l,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*i)&&(n-=e*c,i-=t*c),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,c/=l),e*i<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*GR,skewX:Math.atan(c)*GR,scaleX:s,scaleY:l}}var W0;function mee(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?yw:RL(t.a,t.b,t.c,t.d,t.e,t.f)}function yee(e){return e==null||(W0||(W0=document.createElementNS("http://www.w3.org/2000/svg","g")),W0.setAttribute("transform",e),!(e=W0.transform.baseVal.consolidate()))?yw:(e=e.matrix,RL(e.a,e.b,e.c,e.d,e.e,e.f))}function zL(e,t,n,i){function r(f){return f.length?f.pop()+" ":""}function a(f,d,g,p,y,v){if(f!==g||d!==p){var b=y.push("translate(",null,t,null,n);v.push({i:b-4,x:ea(f,g)},{i:b-2,x:ea(d,p)})}else(g||p)&&y.push("translate("+g+t+p+n)}function s(f,d,g,p){f!==d?(f-d>180?d+=360:d-f>180&&(f+=360),p.push({i:g.push(r(g)+"rotate(",null,i)-2,x:ea(f,d)})):d&&g.push(r(g)+"rotate("+d+i)}function l(f,d,g,p){f!==d?p.push({i:g.push(r(g)+"skewX(",null,i)-2,x:ea(f,d)}):d&&g.push(r(g)+"skewX("+d+i)}function c(f,d,g,p,y,v){if(f!==g||d!==p){var b=y.push(r(y)+"scale(",null,",",null,")");v.push({i:b-4,x:ea(f,g)},{i:b-2,x:ea(d,p)})}else(g!==1||p!==1)&&y.push(r(y)+"scale("+g+","+p+")")}return function(f,d){var g=[],p=[];return f=e(f),d=e(d),a(f.translateX,f.translateY,d.translateX,d.translateY,g,p),s(f.rotate,d.rotate,g,p),l(f.skewX,d.skewX,g,p),c(f.scaleX,f.scaleY,d.scaleX,d.scaleY,g,p),f=d=null,function(y){for(var v=-1,b=p.length,S;++v<b;)g[(S=p[v]).i]=S.x(y);return g.join("")}}}var vee=zL(mee,"px, ","px)","deg)"),bee=zL(yee,", ",")",")"),xee=1e-12;function YR(e){return((e=Math.exp(e))+1/e)/2}function See(e){return((e=Math.exp(e))-1/e)/2}function Eee(e){return((e=Math.exp(2*e))-1)/(e+1)}const _ee=(function e(t,n,i){function r(a,s){var l=a[0],c=a[1],f=a[2],d=s[0],g=s[1],p=s[2],y=d-l,v=g-c,b=y*y+v*v,S,_;if(b<xee)_=Math.log(p/f)/t,S=function(M){return[l+M*y,c+M*v,f*Math.exp(t*M*_)]};else{var w=Math.sqrt(b),A=(p*p-f*f+i*b)/(2*f*n*w),T=(p*p-f*f-i*b)/(2*p*n*w),$=Math.log(Math.sqrt(A*A+1)-A),k=Math.log(Math.sqrt(T*T+1)-T);_=(k-$)/t,S=function(M){var N=M*_,z=YR($),j=f/(n*w)*(z*Eee(t*N+$)-See($));return[l+j*y,c+j*v,f*z/YR(t*N+$)]}}return S.duration=_*1e3*t/Math.SQRT2,S}return r.rho=function(a){var s=Math.max(.001,+a),l=s*s,c=l*l;return e(s,l,c)},r})(Math.SQRT2,2,4);function FL(e){return function(t,n){var i=e((t=hy(t)).h,(n=hy(n)).h),r=En(t.s,n.s),a=En(t.l,n.l),s=En(t.opacity,n.opacity);return function(l){return t.h=i(l),t.s=r(l),t.l=a(l),t.opacity=s(l),t+""}}}const wee=FL(ab);var Aee=FL(En);function Cee(e,t){var n=En((e=py(e)).l,(t=py(t)).l),i=En(e.a,t.a),r=En(e.b,t.b),a=En(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=i(s),e.b=r(s),e.opacity=a(s),e+""}}function LL(e){return function(t,n){var i=e((t=my(t)).h,(n=my(n)).h),r=En(t.c,n.c),a=En(t.l,n.l),s=En(t.opacity,n.opacity);return function(l){return t.h=i(l),t.c=r(l),t.l=a(l),t.opacity=s(l),t+""}}}const Tee=LL(ab);var Mee=LL(En);function UL(e){return(function t(n){n=+n;function i(r,a){var s=e((r=gw(r)).h,(a=gw(a)).h),l=En(r.s,a.s),c=En(r.l,a.l),f=En(r.opacity,a.opacity);return function(d){return r.h=s(d),r.s=l(d),r.l=c(Math.pow(d,n)),r.opacity=f(d),r+""}}return i.gamma=t,i})(1)}const $ee=UL(ab);var kee=UL(En);function B3(e,t){t===void 0&&(t=e,e=Ol);for(var n=0,i=t.length-1,r=t[0],a=new Array(i<0?0:i);n<i;)a[n]=e(r,r=t[++n]);return function(s){var l=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return a[l](s-l)}}function Dee(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const Oee=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Ol,interpolateArray:fee,interpolateBasis:AL,interpolateBasisClosed:CL,interpolateCubehelix:$ee,interpolateCubehelixLong:kee,interpolateDate:DL,interpolateDiscrete:gee,interpolateHcl:Tee,interpolateHclLong:Mee,interpolateHsl:wee,interpolateHslLong:Aee,interpolateHue:pee,interpolateLab:Cee,interpolateNumber:ea,interpolateNumberArray:U3,interpolateObject:OL,interpolateRgb:pw,interpolateRgbBasis:uee,interpolateRgbBasisClosed:cee,interpolateRound:Up,interpolateString:NL,interpolateTransformCss:vee,interpolateTransformSvg:bee,interpolateZoom:_ee,piecewise:B3,quantize:Dee},Symbol.toStringTag,{value:"Module"}));function Nee(e){return function(){return e}}function vw(e){return+e}var XR=[0,1];function Ri(e){return e}function bw(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Nee(isNaN(t)?NaN:.5)}function Ree(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function zee(e,t,n){var i=e[0],r=e[1],a=t[0],s=t[1];return r<i?(i=bw(r,i),a=n(s,a)):(i=bw(i,r),a=n(a,s)),function(l){return a(i(l))}}function Fee(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),a=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=bw(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(l){var c=gl(e,l,1,i)-1;return a[c](r[c](l))}}function Bp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function sb(){var e=XR,t=XR,n=Ol,i,r,a,s=Ri,l,c,f;function d(){var p=Math.min(e.length,t.length);return s!==Ri&&(s=Ree(e[0],e[p-1])),l=p>2?Fee:zee,c=f=null,g}function g(p){return p==null||isNaN(p=+p)?a:(c||(c=l(e.map(i),t,n)))(i(s(p)))}return g.invert=function(p){return s(r((f||(f=l(t,e.map(i),ea)))(p)))},g.domain=function(p){return arguments.length?(e=Array.from(p,vw),d()):e.slice()},g.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},g.rangeRound=function(p){return t=Array.from(p),n=Up,d()},g.clamp=function(p){return arguments.length?(s=p?!0:Ri,d()):s!==Ri},g.interpolate=function(p){return arguments.length?(n=p,d()):n},g.unknown=function(p){return arguments.length?(a=p,g):a},function(p,y){return i=p,r=y,d()}}function BL(){return sb()(Ri,Ri)}function jL(e,t,n,i){var r=pl(e,t,n),a;switch(i=qu(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(a=d9(r,s))&&(i.precision=a),CC(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=h9(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=f9(r))&&(i.precision=a-(i.type==="%")*2);break}}return zv(i)}function hc(e){var t=e.domain;return e.ticks=function(n){var i=t();return Z_(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return jL(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,a=i.length-1,s=i[r],l=i[a],c,f,d=10;for(l<s&&(f=s,s=l,l=f,f=r,r=a,a=f);d-- >0;){if(f=K_(s,l,n),f===c)return i[r]=s,i[a]=l,t(i);if(f>0)s=Math.floor(s/f)*f,l=Math.ceil(l/f)*f;else if(f<0)s=Math.ceil(s*f)/f,l=Math.floor(l*f)/f;else break;c=f}return e},e}function qL(){var e=BL();return e.copy=function(){return Bp(e,qL())},is.apply(e,arguments),hc(e)}function IL(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,vw),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return IL(e).unknown(t)},e=arguments.length?Array.from(e,vw):[0,1],hc(n)}function PL(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],a=e[i],s;return a<r&&(s=n,n=i,i=s,s=r,r=a,a=s),e[n]=t.floor(r),e[i]=t.ceil(a),e}function VR(e){return Math.log(e)}function WR(e){return Math.exp(e)}function Lee(e){return-Math.log(-e)}function Uee(e){return-Math.exp(-e)}function Bee(e){return isFinite(e)?+("1e"+e):e<0?0:e}function jee(e){return e===10?Bee:e===Math.E?Math.exp:t=>Math.pow(e,t)}function qee(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function QR(e){return(t,n)=>-e(-t,n)}function j3(e){const t=e(VR,WR),n=t.domain;let i=10,r,a;function s(){return r=qee(i),a=jee(i),n()[0]<0?(r=QR(r),a=QR(a),e(Lee,Uee)):e(VR,WR),t}return t.base=function(l){return arguments.length?(i=+l,s()):i},t.domain=function(l){return arguments.length?(n(l),s()):n()},t.ticks=l=>{const c=n();let f=c[0],d=c[c.length-1];const g=d<f;g&&([f,d]=[d,f]);let p=r(f),y=r(d),v,b;const S=l==null?10:+l;let _=[];if(!(i%1)&&y-p<S){if(p=Math.floor(p),y=Math.ceil(y),f>0){for(;p<=y;++p)for(v=1;v<i;++v)if(b=p<0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;_.push(b)}}else for(;p<=y;++p)for(v=i-1;v>=1;--v)if(b=p>0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;_.push(b)}_.length*2<S&&(_=Z_(f,d,S))}else _=Z_(p,y,Math.min(y-p,S)).map(a);return g?_.reverse():_},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=i===10?"s":","),typeof c!="function"&&(!(i%1)&&(c=qu(c)).precision==null&&(c.trim=!0),c=zv(c)),l===1/0)return c;const f=Math.max(1,i*l/t.ticks().length);return d=>{let g=d/a(Math.round(r(d)));return g*i<i-.5&&(g*=i),g<=f?c(d):""}},t.nice=()=>n(PL(n(),{floor:l=>a(Math.floor(r(l))),ceil:l=>a(Math.ceil(r(l)))})),t}function HL(){const e=j3(sb()).domain([1,10]);return e.copy=()=>Bp(e,HL()).base(e.base()),is.apply(e,arguments),e}function ZR(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function KR(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function q3(e){var t=1,n=e(ZR(t),KR(t));return n.constant=function(i){return arguments.length?e(ZR(t=+i),KR(t)):t},hc(n)}function GL(){var e=q3(sb());return e.copy=function(){return Bp(e,GL()).constant(e.constant())},is.apply(e,arguments)}function JR(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Iee(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Pee(e){return e<0?-e*e:e*e}function I3(e){var t=e(Ri,Ri),n=1;function i(){return n===1?e(Ri,Ri):n===.5?e(Iee,Pee):e(JR(n),JR(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},hc(t)}function P3(){var e=I3(sb());return e.copy=function(){return Bp(e,P3()).exponent(e.exponent())},is.apply(e,arguments),e}function Hee(){return P3.apply(null,arguments).exponent(.5)}function YL(){var e=[],t=[],n=[],i;function r(){var s=0,l=Math.max(1,t.length);for(n=new Array(l-1);++s<l;)n[s-1]=a9(e,s/l);return a}function a(s){return s==null||isNaN(s=+s)?i:t[gl(n,s)]}return a.invertExtent=function(s){var l=t.indexOf(s);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let l of s)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Vs),r()},a.range=function(s){return arguments.length?(t=Array.from(s),r()):t.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return YL().domain(e).range(t).unknown(i)},is.apply(a,arguments)}function XL(){var e=0,t=1,n=1,i=[.5],r=[0,1],a;function s(c){return c!=null&&c<=c?r[gl(i,c,0,n)]:a}function l(){var c=-1;for(i=new Array(n);++c<n;)i[c]=((c+1)*t-(c-n)*e)/(n+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},s.range=function(c){return arguments.length?(n=(r=Array.from(c)).length-1,l()):r.slice()},s.invertExtent=function(c){var f=r.indexOf(c);return f<0?[NaN,NaN]:f<1?[e,i[0]]:f>=n?[i[n-1],t]:[i[f-1],i[f]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return i.slice()},s.copy=function(){return XL().domain([e,t]).range(r).unknown(a)},is.apply(hc(s),arguments)}function VL(){var e=[.5],t=[0,1],n,i=1;function r(a){return a!=null&&a<=a?t[gl(e,a,0,i)]:n}return r.domain=function(a){return arguments.length?(e=Array.from(a),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(a){return arguments.length?(t=Array.from(a),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},r.unknown=function(a){return arguments.length?(n=a,r):n},r.copy=function(){return VL().domain(e).range(t).unknown(n)},is.apply(r,arguments)}function Gee(e){return new Date(e)}function Yee(e){return e instanceof Date?+e:+new Date(+e)}function H3(e,t,n,i,r,a,s,l,c,f){var d=BL(),g=d.invert,p=d.domain,y=f(".%L"),v=f(":%S"),b=f("%I:%M"),S=f("%I %p"),_=f("%a %d"),w=f("%b %d"),A=f("%B"),T=f("%Y");function $(k){return(c(k)<k?y:l(k)<k?v:s(k)<k?b:a(k)<k?S:i(k)<k?r(k)<k?_:w:n(k)<k?A:T)(k)}return d.invert=function(k){return new Date(g(k))},d.domain=function(k){return arguments.length?p(Array.from(k,Yee)):p().map(Gee)},d.ticks=function(k){var M=p();return e(M[0],M[M.length-1],k??10)},d.tickFormat=function(k,M){return M==null?$:f(M)},d.nice=function(k){var M=p();return(!k||typeof k.range!="function")&&(k=t(M[0],M[M.length-1],k??10)),k?p(PL(M,k)):d},d.copy=function(){return Bp(d,H3(e,t,n,i,r,a,s,l,c,f))},d}function Xee(){return is.apply(H3(eQ,tQ,Va,tp,Dd,Ws,Uv,Fv,Hs,DC).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Vee(){return is.apply(H3(KW,JW,Wa,np,Od,ul,Bv,Lv,Hs,OC).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ob(){var e=0,t=1,n,i,r,a,s=Ri,l=!1,c;function f(g){return g==null||isNaN(g=+g)?c:s(r===0?.5:(g=(a(g)-n)*r,l?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([e,t]=g,n=a(e=+e),i=a(t=+t),r=n===i?0:1/(i-n),f):[e,t]},f.clamp=function(g){return arguments.length?(l=!!g,f):l},f.interpolator=function(g){return arguments.length?(s=g,f):s};function d(g){return function(p){var y,v;return arguments.length?([y,v]=p,s=g(y,v),f):[s(0),s(1)]}}return f.range=d(Ol),f.rangeRound=d(Up),f.unknown=function(g){return arguments.length?(c=g,f):c},function(g){return a=g,n=g(e),i=g(t),r=n===i?0:1/(i-n),f}}function Nl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function G3(){var e=hc(ob()(Ri));return e.copy=function(){return Nl(e,G3())},kl.apply(e,arguments)}function WL(){var e=j3(ob()).domain([1,10]);return e.copy=function(){return Nl(e,WL()).base(e.base())},kl.apply(e,arguments)}function QL(){var e=q3(ob());return e.copy=function(){return Nl(e,QL()).constant(e.constant())},kl.apply(e,arguments)}function Y3(){var e=I3(ob());return e.copy=function(){return Nl(e,Y3()).exponent(e.exponent())},kl.apply(e,arguments)}function Wee(){return Y3.apply(null,arguments).exponent(.5)}function lb(){var e=0,t=.5,n=1,i=1,r,a,s,l,c,f=Ri,d,g=!1,p;function y(b){return isNaN(b=+b)?p:(b=.5+((b=+d(b))-a)*(i*b<i*a?l:c),f(g?Math.max(0,Math.min(1,b)):b))}y.domain=function(b){return arguments.length?([e,t,n]=b,r=d(e=+e),a=d(t=+t),s=d(n=+n),l=r===a?0:.5/(a-r),c=a===s?0:.5/(s-a),i=a<r?-1:1,y):[e,t,n]},y.clamp=function(b){return arguments.length?(g=!!b,y):g},y.interpolator=function(b){return arguments.length?(f=b,y):f};function v(b){return function(S){var _,w,A;return arguments.length?([_,w,A]=S,f=B3(b,[_,w,A]),y):[f(0),f(.5),f(1)]}}return y.range=v(Ol),y.rangeRound=v(Up),y.unknown=function(b){return arguments.length?(p=b,y):p},function(b){return d=b,r=b(e),a=b(t),s=b(n),l=r===a?0:.5/(a-r),c=a===s?0:.5/(s-a),i=a<r?-1:1,y}}function ZL(){var e=hc(lb()(Ri));return e.copy=function(){return Nl(e,ZL())},kl.apply(e,arguments)}function KL(){var e=j3(lb()).domain([.1,1,10]);return e.copy=function(){return Nl(e,KL()).base(e.base())},kl.apply(e,arguments)}function JL(){var e=q3(lb());return e.copy=function(){return Nl(e,JL()).constant(e.constant())},kl.apply(e,arguments)}function X3(){var e=I3(lb());return e.copy=function(){return Nl(e,X3()).exponent(e.exponent())},kl.apply(e,arguments)}function Qee(){return X3.apply(null,arguments).exponent(.5)}function rs(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const Zee=rs("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Kee=rs("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Jee=rs("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),ete=rs("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),tte=rs("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),nte=rs("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),ite=rs("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),rte=rs("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),ate=rs("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),ste=rs("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function V3(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const ote="identity",Kf="linear",io="log",jp="pow",qp="sqrt",ub="symlog",Pu="time",Hu="utc",Pa="sequential",Ld="diverging",Jf="quantile",cb="quantize",fb="threshold",W3="ordinal",xw="point",eU="band",Q3="bin-ordinal",yn="continuous",Ip="discrete",Pp="discretizing",Ir="interpolating",Z3="temporal";function lte(e){return function(t){let n=t[0],i=t[1],r;return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}function ute(e){return function(t){const n=e.range();let i=t[0],r=t[1],a=-1,s,l,c,f;for(r<i&&(l=i,i=r,r=l),c=0,f=n.length;c<f;++c)n[c]>=i&&n[c]<=r&&(a<0&&(a=c),s=c);if(!(a<0))return i=e.invertExtent(n[a]),r=e.invertExtent(n[s]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function K3(){const e=R3().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],r,a,s=!1,l=0,c=0,f=.5;delete e.unknown;function d(){const g=t().length,p=i[1]<i[0],y=i[1-p],v=V3(g,l,c);let b=i[p-0];r=(y-b)/(v||1),s&&(r=Math.floor(r)),b+=(y-b-r*(g-l))*f,a=r*(1-l),s&&(b=Math.round(b),a=Math.round(a));const S=rr(g).map(_=>b+r*_);return n(p?S.reverse():S)}return e.domain=function(g){return arguments.length?(t(g),d()):t()},e.range=function(g){return arguments.length?(i=[+g[0],+g[1]],d()):i.slice()},e.rangeRound=function(g){return i=[+g[0],+g[1]],s=!0,d()},e.bandwidth=function(){return a},e.step=function(){return r},e.round=function(g){return arguments.length?(s=!!g,d()):s},e.padding=function(g){return arguments.length?(c=Math.max(0,Math.min(1,g)),l=c,d()):l},e.paddingInner=function(g){return arguments.length?(l=Math.max(0,Math.min(1,g)),d()):l},e.paddingOuter=function(g){return arguments.length?(c=Math.max(0,Math.min(1,g)),d()):c},e.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),d()):f},e.invertRange=function(g){if(g[0]==null||g[1]==null)return;const p=i[1]<i[0],y=p?n().reverse():n(),v=y.length-1;let b=+g[0],S=+g[1],_,w,A;if(!(b!==b||S!==S)&&(S<b&&(A=b,b=S,S=A),!(S<y[0]||b>i[1-p])))return _=Math.max(0,gl(y,b)-1),w=b===S?_:gl(y,S)-1,b-y[_]>a+1e-10&&++_,p&&(A=_,_=v-w,w=v-A),_>w?void 0:t().slice(_,w+1)},e.invert=function(g){const p=e.invertRange([g,g]);return p&&p[0]},e.copy=function(){return K3().domain(t()).range(i).round(s).paddingInner(l).paddingOuter(c).align(f)},d()}function tU(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return tU(t())},e}function cte(){return tU(K3().paddingInner(1))}var fte=Array.prototype.map;function dte(e){return fte.call(e,Zn)}const hte=Array.prototype.slice;function nU(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(gl(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=dte(i),n):e.slice()},n.range=function(i){return arguments.length?(t=hte.call(i),n):t.slice()},n.tickFormat=function(i,r){return jL(e[0],rt(e),i??10,r)},n.copy=function(){return nU().domain(n.domain()).range(n.range())},n}const yy=new Map,iU=Symbol("vega_scale");function rU(e){return e[iU]=!0,e}function e6(e){return e&&e[iU]===!0}function gte(e,t,n){const i=function(){const a=t();return a.invertRange||(a.invertRange=a.invert?lte(a):a.invertExtent?ute(a):void 0),a.type=e,rU(a)};return i.metadata=ca(Se(n)),i}function ft(e,t,n){return arguments.length>1?(yy.set(e,gte(e,t,n)),this):aU(e)?yy.get(e):void 0}ft(ote,IL);ft(Kf,qL,yn);ft(io,HL,[yn,io]);ft(jp,P3,yn);ft(qp,Hee,yn);ft(ub,GL,yn);ft(Pu,Xee,[yn,Z3]);ft(Hu,Vee,[yn,Z3]);ft(Pa,G3,[yn,Ir]);ft(`${Pa}-${Kf}`,G3,[yn,Ir]);ft(`${Pa}-${io}`,WL,[yn,Ir,io]);ft(`${Pa}-${jp}`,Y3,[yn,Ir]);ft(`${Pa}-${qp}`,Wee,[yn,Ir]);ft(`${Pa}-${ub}`,QL,[yn,Ir]);ft(`${Ld}-${Kf}`,ZL,[yn,Ir]);ft(`${Ld}-${io}`,KL,[yn,Ir,io]);ft(`${Ld}-${jp}`,X3,[yn,Ir]);ft(`${Ld}-${qp}`,Qee,[yn,Ir]);ft(`${Ld}-${ub}`,JL,[yn,Ir]);ft(Jf,YL,[Pp,Jf]);ft(cb,XL,Pp);ft(fb,VL,Pp);ft(Q3,nU,[Ip,Pp]);ft(W3,R3,Ip);ft(eU,K3,Ip);ft(xw,cte,Ip);function aU(e){return yy.has(e)}function gc(e,t){const n=yy.get(e);return n&&n.metadata[t]}function J3(e){return gc(e,yn)}function ed(e){return gc(e,Ip)}function Sw(e){return gc(e,Pp)}function sU(e){return gc(e,io)}function pte(e){return gc(e,Z3)}function oU(e){return gc(e,Ir)}function lU(e){return gc(e,Jf)}const mte=["clamp","base","constant","exponent"];function uU(e,t){const n=t[0],i=rt(t)-n;return function(r){return e(n+r*i)}}function db(e,t,n){return B3(eT(t||"rgb",n),e)}function cU(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function fU(e,t,n){const i=n-t;let r,a,s;return!i||!Number.isFinite(i)?ri(.5):(r=(a=e.type).indexOf("-"),a=r<0?a:a.slice(r+1),s=ft(a)().domain([t,n]).range([0,1]),mte.forEach(l=>e[l]?s[l](e[l]()):0),s)}function eT(e,t){const n=Oee[yte(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function yte(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const vte={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},bte={accent:Kee,category10:Zee,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Jee,observable10:ete,paired:tte,pastel1:nte,pastel2:ite,set1:rte,set2:ate,set3:ste,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function dU(e){if(ie(e))return e;const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function hU(e,t){for(const n in e)tT(n,t(e[n]))}const t6={};hU(bte,dU);hU(vte,e=>db(dU(e)));function tT(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(t6[e]=t,this):t6[e]}const k1="symbol",xte="discrete",Ste="gradient",Ete=e=>ie(e)?e.map(t=>String(t)):String(e),_te=(e,t)=>e[1]-t[1],wte=(e,t)=>t[1]-e[1];function nT(e,t,n){let i;return ut(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Np(e.domain())/n||1)+1))),be(t)&&(i=t.step,t=t.interval),xe(t)&&(t=e.type===Pu?Nd(t):e.type==Hu?Rd(t):ee("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function gU(e,t,n){let i=e.range(),r=i[0],a=rt(i),s=_te;if(r>a&&(i=a,a=r,r=i,s=wte),r=Math.floor(r),a=Math.ceil(a),t=t.map(l=>[l,e(l)]).filter(l=>r<=l[1]&&l[1]<=a).sort(s).map(l=>l[0]),n>0&&t.length>1){const l=[t[0],rt(t)];for(;t.length>n&&t.length>=3;)t=t.filter((c,f)=>!(f%2));t.length<3&&(t=l)}return t}function iT(e,t){return e.bins?gU(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function pU(e,t,n,i,r,a){const s=t.type;let l=Ete;if(s===Pu||r===Pu)l=e.timeFormat(i);else if(s===Hu||r===Hu)l=e.utcFormat(i);else if(sU(s)){const c=e.formatFloat(i);if(a||t.bins)l=c;else{const f=mU(t,n,!1);l=d=>f(d)?c(d):""}}else if(t.tickFormat){const c=t.domain();l=e.formatSpan(c[0],c[c.length-1],n,i)}else i&&(l=e.format(i));return l}function mU(e,t,n){const i=iT(e,t),r=e.base(),a=Math.log(r),s=Math.max(1,r*t/i.length),l=c=>{let f=c/Math.pow(r,Math.round(Math.log(c)/a));return f*r<r-.5&&(f*=r),f<=s};return n?i.filter(l):l}const Ew={[Jf]:"quantiles",[cb]:"thresholds",[fb]:"domain"},yU={[Jf]:"quantiles",[cb]:"domain"};function vU(e,t){return e.bins?Tte(e.bins):e.type===io?mU(e,t,!0):Ew[e.type]?Cte(e[Ew[e.type]]()):iT(e,t)}function Ate(e,t,n){const i=t[yU[t.type]](),r=i.length;let a=r>1?i[1]-i[0]:i[0],s;for(s=1;s<r;++s)a=Math.min(a,i[s]-i[s-1]);return e.formatSpan(0,a,30,n)}function Cte(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Tte(e){const t=e.slice(0,-1);return t.max=rt(e),t}const Mte=e=>Ew[e.type]||e.bins;function bU(e,t,n,i,r,a,s){const l=yU[t.type]&&a!==Pu&&a!==Hu?Ate(e,t,r):pU(e,t,n,r,a,s);return i===k1&&Mte(t)?$te(l):i===xte?kte(l):Dte(l)}const $te=e=>(t,n,i)=>{const r=n6(i[n+1],n6(i.max,1/0)),a=i6(t,e),s=i6(r,e);return a&&s?a+"  "+s:s?"< "+s:" "+a},n6=(e,t)=>e??t,kte=e=>(t,n)=>n?e(t):null,Dte=e=>t=>e(t),i6=(e,t)=>Number.isFinite(e)?t(e):null;function Ote(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+rt(t),a=r-i;if(e.type===fb){const s=n?a/n:.1;i-=s,r+=s,a=r-i}return s=>(s-i)/a}function Nte(e,t,n,i){const r=i||t.type;return xe(n)&&pte(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===Pu?e.timeFormat("%A, %d %B %Y, %X"):!n&&r===Hu?e.utcFormat("%A, %d %B %Y, %X UTC"):bU(e,t,5,null,n,i,!0)}function xU(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=Nte(e,t,n.format,n.formatType);if(Sw(t.type)){const a=vU(t).slice(1).map(r),s=a.length;return`${s} boundar${s===1?"y":"ies"}: ${a.join(", ")}`}else if(ed(t.type)){const a=t.domain(),s=a.length,l=s>i?a.slice(0,i-2).map(r).join(", ")+", ending with "+a.slice(-1).map(r):a.map(r).join(", ");return`${s} value${s===1?"":"s"}: ${l}`}else{const a=t.domain();return`values from ${r(a[0])} to ${r(rt(a))}`}}let SU=0;function Rte(){SU=0}const vy="p_";function rT(e){return e&&e.gradient}function EU(e,t,n){const i=e.gradient;let r=e.id,a=i==="radial"?vy:"";return r||(r=e.id="gradient_"+SU++,i==="radial"?(e.x1=ka(e.x1,.5),e.y1=ka(e.y1,.5),e.r1=ka(e.r1,0),e.x2=ka(e.x2,.5),e.y2=ka(e.y2,.5),e.r2=ka(e.r2,.5),a=vy):(e.x1=ka(e.x1,0),e.y1=ka(e.y1,0),e.x2=ka(e.x2,1),e.y2=ka(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+a+r+")"}function ka(e,t){return e??t}function _U(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,a){return n.push({offset:r,color:a}),i}}}const r6={basis:{curve:kJ},"basis-closed":{curve:DJ},"basis-open":{curve:OJ},bundle:{curve:NJ,tension:"beta",value:.85},cardinal:{curve:RJ,tension:"tension",value:0},"cardinal-open":{curve:FJ,tension:"tension",value:0},"cardinal-closed":{curve:zJ,tension:"tension",value:0},"catmull-rom":{curve:LJ,tension:"alpha",value:.5},"catmull-rom-closed":{curve:UJ,tension:"alpha",value:.5},"catmull-rom-open":{curve:BJ,tension:"alpha",value:.5},linear:{curve:$3},"linear-closed":{curve:jJ},monotone:{horizontal:IJ,vertical:qJ},natural:{curve:PJ},step:{curve:HJ},"step-after":{curve:YJ},"step-before":{curve:GJ}};function aT(e,t,n){var i=Ee(r6,e)&&r6[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const zte={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Fte=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Lte=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Ute=/^((\s+,?\s*)|(,\s*))/,Bte=/^[01]/;function td(e){const t=[];return(e.match(Fte)||[]).forEach(i=>{let r=i[0];const a=r.toLowerCase(),s=zte[a],l=jte(a,s,i.slice(1).trim()),c=l.length;if(c<s||c&&c%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...l.slice(0,s)]),c!==s){a==="m"&&(r=r==="M"?"L":"l");for(let f=s;f<c;f+=s)t.push([r,...l.slice(f,f+s)])}}),t}function jte(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let a=0;a<t;++a){const s=e==="a"&&(a===3||a===4)?Bte:Lte,l=n.slice(r).match(s);if(l===null)throw Error("Invalid SVG path, incorrect parameter type");r+=l[0].length,i.push(+l[0]);const c=n.slice(r).match(Ute);c!==null&&(r+=c[0].length)}return i}const bl=Math.PI/180,qte=1e-14,_u=Math.PI/2,Fa=Math.PI*2,gf=Math.sqrt(3)/2;var TE={},ME={},wU=[].join;function Ite(e,t,n,i,r,a,s,l,c){const f=wU.call(arguments);if(TE[f])return TE[f];const d=s*bl,g=Math.sin(d),p=Math.cos(d);n=Math.abs(n),i=Math.abs(i);const y=p*(l-e)*.5+g*(c-t)*.5,v=p*(c-t)*.5-g*(l-e)*.5;let b=y*y/(n*n)+v*v/(i*i);b>1&&(b=Math.sqrt(b),n*=b,i*=b);const S=p/n,_=g/n,w=-g/i,A=p/i,T=S*l+_*c,$=w*l+A*c,k=S*e+_*t,M=w*e+A*t;let z=1/((k-T)*(k-T)+(M-$)*(M-$))-.25;z<0&&(z=0);let j=Math.sqrt(z);a==r&&(j=-j);const U=.5*(T+k)-j*(M-$),X=.5*($+M)+j*(k-T),H=Math.atan2($-X,T-U);let R=Math.atan2(M-X,k-U)-H;R<0&&a===1?R+=Fa:R>0&&a===0&&(R-=Fa);const O=Math.ceil(Math.abs(R/(_u+.001))),B=[];for(let Y=0;Y<O;++Y){const Z=H+Y*R/O,oe=H+(Y+1)*R/O;B[Y]=[U,X,Z,oe,n,i,g,p]}return TE[f]=B}function Pte(e){const t=wU.call(e);if(ME[t])return ME[t];var n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=e[6],f=e[7];const d=f*s,g=-c*l,p=c*s,y=f*l,v=Math.cos(r),b=Math.sin(r),S=Math.cos(a),_=Math.sin(a),w=.5*(a-r),A=Math.sin(w*.5),T=8/3*A*A/Math.sin(w),$=n+v-T*b,k=i+b+T*v,M=n+S,N=i+_,z=M+T*_,j=N-T*S;return ME[t]=[d*$+g*k,p*$+y*k,d*z+g*j,p*z+y*j,d*M+g*N,p*M+y*N]}const Ar=["l",0,0,0,0,0,0,0];function Hte(e,t,n){const i=Ar[0]=e[0];if(i==="a"||i==="A")Ar[1]=t*e[1],Ar[2]=n*e[2],Ar[3]=e[3],Ar[4]=e[4],Ar[5]=e[5],Ar[6]=t*e[6],Ar[7]=n*e[7];else if(i==="h"||i==="H")Ar[1]=t*e[1];else if(i==="v"||i==="V")Ar[1]=n*e[1];else for(var r=1,a=e.length;r<a;++r)Ar[r]=(r%2==1?t:n)*e[r];return Ar}function up(e,t,n,i,r,a){var s,l=null,c=0,f=0,d=0,g=0,p,y,v,b,S=0,_=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),a==null&&(a=r),e.beginPath&&e.beginPath();for(var w=0,A=t.length;w<A;++w){switch(s=t[w],(r!==1||a!==1)&&(s=Hte(s,r,a)),s[0]){case"l":c+=s[1],f+=s[2],e.lineTo(c+n,f+i);break;case"L":c=s[1],f=s[2],e.lineTo(c+n,f+i);break;case"h":c+=s[1],e.lineTo(c+n,f+i);break;case"H":c=s[1],e.lineTo(c+n,f+i);break;case"v":f+=s[1],e.lineTo(c+n,f+i);break;case"V":f=s[1],e.lineTo(c+n,f+i);break;case"m":c+=s[1],f+=s[2],S=c,_=f,e.moveTo(c+n,f+i);break;case"M":c=s[1],f=s[2],S=c,_=f,e.moveTo(c+n,f+i);break;case"c":p=c+s[5],y=f+s[6],d=c+s[3],g=f+s[4],e.bezierCurveTo(c+s[1]+n,f+s[2]+i,d+n,g+i,p+n,y+i),c=p,f=y;break;case"C":c=s[5],f=s[6],d=s[3],g=s[4],e.bezierCurveTo(s[1]+n,s[2]+i,d+n,g+i,c+n,f+i);break;case"s":p=c+s[3],y=f+s[4],d=2*c-d,g=2*f-g,e.bezierCurveTo(d+n,g+i,c+s[1]+n,f+s[2]+i,p+n,y+i),d=c+s[1],g=f+s[2],c=p,f=y;break;case"S":p=s[3],y=s[4],d=2*c-d,g=2*f-g,e.bezierCurveTo(d+n,g+i,s[1]+n,s[2]+i,p+n,y+i),c=p,f=y,d=s[1],g=s[2];break;case"q":p=c+s[3],y=f+s[4],d=c+s[1],g=f+s[2],e.quadraticCurveTo(d+n,g+i,p+n,y+i),c=p,f=y;break;case"Q":p=s[3],y=s[4],e.quadraticCurveTo(s[1]+n,s[2]+i,p+n,y+i),c=p,f=y,d=s[1],g=s[2];break;case"t":p=c+s[1],y=f+s[2],l[0].match(/[QqTt]/)===null?(d=c,g=f):l[0]==="t"?(d=2*c-v,g=2*f-b):l[0]==="q"&&(d=2*c-d,g=2*f-g),v=d,b=g,e.quadraticCurveTo(d+n,g+i,p+n,y+i),c=p,f=y,d=c+s[1],g=f+s[2];break;case"T":p=s[1],y=s[2],d=2*c-d,g=2*f-g,e.quadraticCurveTo(d+n,g+i,p+n,y+i),c=p,f=y;break;case"a":a6(e,c+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+c+n,s[7]+f+i]),c+=s[6],f+=s[7];break;case"A":a6(e,c+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+i]),c=s[6],f=s[7];break;case"z":case"Z":c=S,f=_,e.closePath();break}l=s}}function a6(e,t,n,i){const r=Ite(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let a=0;a<r.length;++a){const s=Pte(r[a]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const s6=.5773502691896257,o6={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Fa)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,a=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-a),e.lineTo(r,-a),e.lineTo(0,-n),e.lineTo(-r,-a),e.lineTo(-i,-a),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=gf*n,r=i-n*s6,a=n/4;e.moveTo(0,-i-r),e.lineTo(-a,i-r),e.lineTo(a,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=gf*n,r=i-n*s6;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=gf*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=gf*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=gf*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=gf*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function AU(e){return Ee(o6,e)?o6[e]:Gte(e)}var $E={};function Gte(e){if(!Ee($E,e)){const t=td(e);$E[e]={draw:function(n,i){up(n,t,0,0,Math.sqrt(i)/2)}}}return $E[e]}const Po=.448084975506;function Yte(e){return e.x}function Xte(e){return e.y}function Vte(e){return e.width}function Wte(e){return e.height}function Ns(e){return typeof e=="function"?e:()=>+e}function Q0(e,t,n){return Math.max(t,Math.min(e,n))}function CU(){var e=Yte,t=Xte,n=Vte,i=Wte,r=Ns(0),a=r,s=r,l=r,c=null;function f(d,g,p){var y,v=g??+e.call(this,d),b=p??+t.call(this,d),S=+n.call(this,d),_=+i.call(this,d),w=Math.min(S,_)/2,A=Q0(+r.call(this,d),0,w),T=Q0(+a.call(this,d),0,w),$=Q0(+s.call(this,d),0,w),k=Q0(+l.call(this,d),0,w);if(c||(c=y=Jv()),A<=0&&T<=0&&$<=0&&k<=0)c.rect(v,b,S,_);else{var M=v+S,N=b+_;c.moveTo(v+A,b),c.lineTo(M-T,b),c.bezierCurveTo(M-Po*T,b,M,b+Po*T,M,b+T),c.lineTo(M,N-k),c.bezierCurveTo(M,N-Po*k,M-Po*k,N,M-k,N),c.lineTo(v+$,N),c.bezierCurveTo(v+Po*$,N,v,N-Po*$,v,N-$),c.lineTo(v,b+A),c.bezierCurveTo(v,b+Po*A,v+Po*A,b,v+A,b),c.closePath()}if(y)return c=null,y+""||null}return f.x=function(d){return arguments.length?(e=Ns(d),f):e},f.y=function(d){return arguments.length?(t=Ns(d),f):t},f.width=function(d){return arguments.length?(n=Ns(d),f):n},f.height=function(d){return arguments.length?(i=Ns(d),f):i},f.cornerRadius=function(d,g,p,y){return arguments.length?(r=Ns(d),a=g!=null?Ns(g):r,l=p!=null?Ns(p):r,s=y!=null?Ns(y):a,f):r},f.context=function(d){return arguments.length?(c=d??null,f):c},f}function TU(){var e,t,n,i,r=null,a,s,l,c;function f(g,p,y){const v=y/2;if(a){var b=l-p,S=g-s;if(b||S){var _=Math.hypot(b,S),w=(b/=_)*c,A=(S/=_)*c,T=Math.atan2(S,b);r.moveTo(s-w,l-A),r.lineTo(g-b*v,p-S*v),r.arc(g,p,v,T-Math.PI,T),r.lineTo(s+w,l+A),r.arc(s,l,c,T,T+Math.PI)}else r.arc(g,p,v,0,Fa);r.closePath()}else a=1;s=g,l=p,c=v}function d(g){var p,y=g.length,v,b=!1,S;for(r==null&&(r=S=Jv()),p=0;p<=y;++p)!(p<y&&i(v=g[p],p,g))===b&&(b=!b)&&(a=0),b&&f(+e(v,p,g),+t(v,p,g),+n(v,p,g));if(S)return r=null,S+""||null}return d.x=function(g){return arguments.length?(e=g,d):e},d.y=function(g){return arguments.length?(t=g,d):t},d.size=function(g){return arguments.length?(n=g,d):n},d.defined=function(g){return arguments.length?(i=g,d):i},d.context=function(g){return arguments.length?(g==null?r=null:r=g,d):r},d}function Hp(e,t){return e??t}const Gp=e=>e.x||0,Yp=e=>e.y||0,Qte=e=>e.width||0,Zte=e=>e.height||0,Kte=e=>(e.x||0)+(e.width||0),Jte=e=>(e.y||0)+(e.height||0),ene=e=>e.startAngle||0,tne=e=>e.endAngle||0,nne=e=>e.padAngle||0,ine=e=>e.innerRadius||0,rne=e=>e.outerRadius||0,ane=e=>e.cornerRadius||0,sne=e=>Hp(e.cornerRadiusTopLeft,e.cornerRadius)||0,one=e=>Hp(e.cornerRadiusTopRight,e.cornerRadius)||0,lne=e=>Hp(e.cornerRadiusBottomRight,e.cornerRadius)||0,une=e=>Hp(e.cornerRadiusBottomLeft,e.cornerRadius)||0,cne=e=>Hp(e.size,64),fne=e=>e.size||1,hb=e=>e.defined!==!1,dne=e=>AU(e.shape||"circle"),hne=TJ().startAngle(ene).endAngle(tne).padAngle(nne).innerRadius(ine).outerRadius(rne).cornerRadius(ane),gne=nL().x(Gp).y1(Yp).y0(Jte).defined(hb),pne=nL().y(Yp).x1(Gp).x0(Kte).defined(hb),mne=tL().x(Gp).y(Yp).defined(hb),yne=CU().x(Gp).y(Yp).width(Qte).height(Zte).cornerRadius(sne,one,lne,une),vne=$J().type(dne).size(cne),bne=TU().x(Gp).y(Yp).defined(hb).size(fne);function sT(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function xne(e,t){return hne.context(e)(t)}function Sne(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?pne:gne).curve(aT(i,n.orient,n.tension)).context(e)(t)}function Ene(e,t){const n=t[0],i=n.interpolate||"linear";return mne.curve(aT(i,n.orient,n.tension)).context(e)(t)}function Ud(e,t,n,i){return yne.context(e)(t,n,i)}function _ne(e,t){return(t.mark.shape||t.shape).context(e)(t)}function wne(e,t){return vne.context(e)(t)}function Ane(e,t){return bne.context(e)(t)}var MU=1;function Cne(){MU=1}function oT(e,t,n){var i=t.clip,r=e._defs,a=t.clip_id||(t.clip_id="clip"+MU++),s=r.clipping[a]||(r.clipping[a]={id:a});return He(i)?s.path=i(null):sT(n)?s.path=Ud(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+a+")"}function un(e){this.clear(),e&&this.union(e)}un.prototype={clone(){return new un(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:a,y2:s}=this,l=Math.cos(e),c=Math.sin(e),f=t-t*l+n*c,d=n-t*c-n*l;return[l*i-c*r+f,c*i+l*r+d,l*i-c*s+f,c*i+l*s+d,l*a-c*r+f,c*a+l*r+d,l*a-c*s+f,c*a+l*s+d]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function gb(e){this.mark=e,this.bounds=this.bounds||new un}function pb(e){gb.call(this,e),this.items=this.items||[]}ye(pb,gb);class $U{constructor(t){this._pending=0,this._loader=t||qv()}pending(){return this._pending}sanitizeURL(t){const n=this;return l6(n),n._loader.sanitize(t,{context:"href"}).then(i=>(ng(n),i)).catch(()=>(ng(n),null))}loadImage(t){const n=this,i=XJ();return l6(n),n._loader.sanitize(t,{context:"image"}).then(r=>{const a=r.href;if(!a||!i)throw{url:a};const s=new i,l=Ee(r,"crossOrigin")?r.crossOrigin:"anonymous";return l!=null&&(s.crossOrigin=l),s.onload=()=>ng(n),s.onerror=()=>ng(n),s.src=a,s}).catch(r=>(ng(n),{complete:!1,width:0,height:0,src:r&&r.url||""}))}ready(){const t=this;return new Promise(n=>{function i(r){t.pending()?setTimeout(()=>{i(!0)},10):n(r)}i(!1)})}}function l6(e){e._pending+=1}function ng(e){e._pending-=1}function lo(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?Tne(t,i):0))}return e}function Tne(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Mne=Fa-1e-8;let mb,D1,O1,$u,_w,N1,ww,Aw;const Jo=(e,t)=>mb.add(e,t),R1=(e,t)=>Jo(D1=e,O1=t),u6=e=>Jo(e,mb.y1),c6=e=>Jo(mb.x1,e),wu=(e,t)=>_w*e+ww*t,Au=(e,t)=>N1*e+Aw*t,kE=(e,t)=>Jo(wu(e,t),Au(e,t)),DE=(e,t)=>R1(wu(e,t),Au(e,t));function Xp(e,t){return mb=e,t?($u=t*bl,_w=Aw=Math.cos($u),N1=Math.sin($u),ww=-N1):(_w=Aw=1,$u=N1=ww=0),$ne}const $ne={beginPath(){},closePath(){},moveTo:DE,lineTo:DE,rect(e,t,n,i){$u?(kE(e+n,t),kE(e+n,t+i),kE(e,t+i),DE(e,t)):(Jo(e+n,t+i),R1(e,t))},quadraticCurveTo(e,t,n,i){const r=wu(e,t),a=Au(e,t),s=wu(n,i),l=Au(n,i);f6(D1,r,s,u6),f6(O1,a,l,c6),R1(s,l)},bezierCurveTo(e,t,n,i,r,a){const s=wu(e,t),l=Au(e,t),c=wu(n,i),f=Au(n,i),d=wu(r,a),g=Au(r,a);d6(D1,s,c,d,u6),d6(O1,l,f,g,c6),R1(d,g)},arc(e,t,n,i,r,a){if(i+=$u,r+=$u,D1=n*Math.cos(r)+e,O1=n*Math.sin(r)+t,Math.abs(r-i)>Mne)Jo(e-n,t-n),Jo(e+n,t+n);else{const s=f=>Jo(n*Math.cos(f)+e,n*Math.sin(f)+t);let l,c;if(s(i),s(r),r!==i)if(i=i%Fa,i<0&&(i+=Fa),r=r%Fa,r<0&&(r+=Fa),r<i&&(a=!a,l=i,i=r,r=l),a)for(r-=Fa,l=i-i%_u,c=0;c<4&&l>r;++c,l-=_u)s(l);else for(l=i-i%_u+_u,c=0;c<4&&l<r;++c,l=l+_u)s(l)}}};function f6(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function d6(e,t,n,i,r){const a=i-e+3*t-3*n,s=e+n-2*t,l=e-t;let c=0,f=0,d;Math.abs(a)>qte?(d=s*s+l*a,d>=0&&(d=Math.sqrt(d),c=(-s+d)/a,f=(-s-d)/a)):c=.5*l/s,0<c&&c<1&&r(h6(c,e,t,n,i)),0<f&&f<1&&r(h6(f,e,t,n,i))}function h6(e,t,n,i,r){const a=1-e,s=a*a,l=e*e;return s*a*t+3*s*e*n+3*a*l*i+l*e*r}var dl=(dl=fl(1,1))?dl.getContext("2d"):null;const Cw=new un;function lT(e){return function(t,n){if(!dl)return!0;e(dl,t),Cw.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:a,y2:s}=Cw;for(let l=r;l<=s;++l)for(let c=i;c<=a;++c)if(dl.isPointInPath(c,l))return!0;return!1}}function uT(e,t){return t.contains(e.x||0,e.y||0)}function kU(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,a=e.height||0;return t.intersects(Cw.set(n,i,n+r,i+a))}function DU(e,t){const n=e.x||0,i=e.y||0,r=e.x2!=null?e.x2:n,a=e.y2!=null?e.y2:i;return Mf(t,n,i,r,a)}function Mf(e,t,n,i,r){const{x1:a,y1:s,x2:l,y2:c}=e,f=i-t,d=r-n;let g=0,p=1,y,v,b,S;for(S=0;S<4;++S){if(S===0&&(y=-f,v=-(a-t)),S===1&&(y=f,v=l-t),S===2&&(y=-d,v=-(s-n)),S===3&&(y=d,v=c-n),Math.abs(y)<1e-10&&v<0)return!1;if(b=v/y,y<0){if(b>p)return!1;b>g&&(g=b)}else if(y>0){if(b<g)return!1;b<p&&(p=b)}}return!0}function nd(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Qr(e,t){return e??t}function g6(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function kne(e,t,n){const i=n.width(),r=n.height();let a;if(t.gradient==="radial")a=e.createRadialGradient(n.x1+Qr(t.x1,.5)*i,n.y1+Qr(t.y1,.5)*r,Math.max(i,r)*Qr(t.r1,0),n.x1+Qr(t.x2,.5)*i,n.y1+Qr(t.y2,.5)*r,Math.max(i,r)*Qr(t.r2,.5));else{const s=Qr(t.x1,0),l=Qr(t.y1,0),c=Qr(t.x2,1),f=Qr(t.y2,0);if(s===c||l===f||i===r)a=e.createLinearGradient(n.x1+s*i,n.y1+l*r,n.x1+c*i,n.y1+f*r);else{const d=fl(Math.ceil(i),Math.ceil(r)),g=d.getContext("2d");return g.scale(i,r),g.fillStyle=g6(g.createLinearGradient(s,l,c,f),t.stops),g.fillRect(0,0,i,r),e.createPattern(d,"no-repeat")}}return g6(a,t.stops)}function OU(e,t,n){return rT(n)?kne(e,n,t.bounds):n}function by(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=OU(e,t,t.fill),!0):!1}var Dne=[];function id(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=OU(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Dne),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function One(e,t){return e.zindex-t.zindex||e.index-t.index}function cT(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,r,a;for(r=0,a=t.length;r<a;++r)i=t[r],i.index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(One)}function da(e,t){var n=e.items,i,r;if(!n||!n.length)return;const a=cT(e);if(a&&a.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=a}for(i=0,r=n.length;i<r;++i)t(n[i])}function xy(e,t){var n=e.items,i,r;if(!n||!n.length)return null;const a=cT(e);for(a&&a.length&&(n=a),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===a){for(n=e.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i}return null}function fT(e){return function(t,n,i){da(n,r=>{(!i||i.intersects(r.bounds))&&NU(e,t,r,r)})}}function Nne(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&NU(e,t,n.items[0],n.items)}}function NU(e,t,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(e(t,i)||(nd(t,n),n.fill&&by(t,n,r)&&t.fill(),n.stroke&&id(t,n,r)&&t.stroke()))}function yb(e){return e=e||Fr,function(t,n,i,r,a,s){return i*=t.pixelRatio,r*=t.pixelRatio,xy(n,l=>{const c=l.bounds;if(!(c&&!c.contains(a,s)||!c)&&e(t,l,i,r,a,s))return l})}}function Vp(e,t){return function(n,i,r,a){var s=Array.isArray(i)?i[0]:i,l=t??s.fill,c=s.stroke&&n.isPointInStroke,f,d;return c&&(f=s.strokeWidth,d=s.strokeCap,n.lineWidth=f??1,n.lineCap=d??"butt"),e(n,i)?!1:l&&n.isPointInPath(r,a)||c&&n.isPointInStroke(r,a)}}function dT(e){return yb(Vp(e))}function Ru(e,t){return"translate("+e+","+t+")"}function hT(e){return"rotate("+e+")"}function Rne(e,t){return"scale("+e+","+t+")"}function RU(e){return Ru(e.x||0,e.y||0)}function zne(e){return Ru(e.x||0,e.y||0)+(e.angle?" "+hT(e.angle):"")}function Fne(e){return Ru(e.x||0,e.y||0)+(e.angle?" "+hT(e.angle):"")+(e.scaleX||e.scaleY?" "+Rne(e.scaleX||1,e.scaleY||1):"")}function gT(e,t,n){function i(s,l){s("transform",zne(l)),s("d",t(null,l))}function r(s,l){return t(Xp(s,l.angle),l),lo(s,l).translate(l.x||0,l.y||0)}function a(s,l){var c=l.x||0,f=l.y||0,d=l.angle||0;s.translate(c,f),d&&s.rotate(d*=bl),s.beginPath(),t(s,l),d&&s.rotate(-d),s.translate(-c,-f)}return{type:e,tag:"path",nested:!1,attr:i,bound:r,draw:fT(a),pick:dT(a),isect:n||lT(a)}}var Lne=gT("arc",xne);function Une(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",r=e.length,a=1/0,s,l;--r>=0;)e[r].defined!==!1&&(l=Math.abs(e[r][i]-n),l<a&&(a=l,s=e[r]));return s}function Bne(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,r,a,s;--i>=0;)if(e[i].defined!==!1&&(r=e[i].x-t[0],a=e[i].y-t[1],s=r*r+a*a,s<n))return e[i];return null}function jne(e,t){for(var n=e.length,i,r,a;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],r=e[n].y-t[1],a=i*i+r*r,i=e[n].size||1,a<i*i))return e[n];return null}function pT(e,t,n){function i(c,f){var d=f.mark.items;d.length&&c("d",t(null,d))}function r(c,f){var d=f.items;return d.length===0?c:(t(Xp(c),d),lo(c,d[0]))}function a(c,f){c.beginPath(),t(c,f)}const s=Vp(a);function l(c,f,d,g,p,y){var v=f.items,b=f.bounds;return!v||!v.length||b&&!b.contains(p,y)?null:(d*=c.pixelRatio,g*=c.pixelRatio,s(c,v,d,g)?v[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:r,draw:Nne(a),pick:l,isect:uT,tip:n}}var qne=pT("area",Sne,Une);function Ine(e,t){var n=t.clip;e.save(),He(n)?(e.beginPath(),n(e),e.clip()):zU(e,t.group)}function zU(e,t){e.beginPath(),sT(t)?Ud(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function FU(e){const t=Qr(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Pne(e,t){e("transform",RU(t))}function LU(e,t){const n=FU(t);e("d",Ud(null,t,n,n))}function Hne(e,t){e("class","background"),e("aria-hidden",!0),LU(e,t)}function Gne(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?LU(e,t):e("d","")}function Yne(e,t,n){const i=t.clip?oT(n,t,t):null;e("clip-path",i)}function Xne(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),lo(e,t),e.translate(t.x||0,t.y||0)}function cp(e,t,n,i){const r=FU(t);e.beginPath(),Ud(e,t,(n||0)+r,(i||0)+r)}const Vne=Vp(cp),Wne=Vp(cp,!1),Qne=Vp(cp,!0);function Zne(e,t,n,i){da(t,r=>{const a=r.x||0,s=r.y||0,l=r.strokeForeground,c=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&c&&(cp(e,r,a,s),nd(e,r),r.fill&&by(e,r,c)&&e.fill(),r.stroke&&!l&&id(e,r,c)&&e.stroke()),e.save(),e.translate(a,s),r.clip&&zU(e,r),n&&n.translate(-a,-s),da(r,f=>{(f.marktype==="group"||i==null||i.includes(f.marktype))&&this.draw(e,f,n,i)}),n&&n.translate(a,s),e.restore(),l&&r.stroke&&c&&(cp(e,r,a,s),nd(e,r),id(e,r,c)&&e.stroke())})}function Kne(e,t,n,i,r,a){if(t.bounds&&!t.bounds.contains(r,a)||!t.items)return null;const s=n*e.pixelRatio,l=i*e.pixelRatio;return xy(t,c=>{let f,d,g;const p=c.bounds;if(p&&!p.contains(r,a))return;d=c.x||0,g=c.y||0;const y=d+(c.width||0),v=g+(c.height||0),b=c.clip;if(b&&(r<d||r>y||a<g||a>v))return;if(e.save(),e.translate(d,g),d=r-d,g=a-g,b&&sT(c)&&!Qne(e,c,s,l))return e.restore(),null;const S=c.strokeForeground,_=t.interactive!==!1;return _&&S&&c.stroke&&Wne(e,c,s,l)?(e.restore(),c):(f=xy(c,w=>Jne(w,d,g)?this.pick(w,n,i,d,g):null),!f&&_&&(c.fill||!S&&c.stroke)&&Vne(e,c,s,l)&&(f=c),e.restore(),f||null)})}function Jne(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var eie={type:"group",tag:"g",nested:!1,attr:Pne,bound:Xne,draw:Zne,pick:Kne,isect:kU,content:Yne,background:Hne,foreground:Gne},fp={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function mT(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function yT(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function vT(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function vb(e,t){return e==="center"?t/2:e==="right"?t:0}function bb(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function tie(e,t,n){const i=mT(t,n),r=yT(t,i),a=vT(t,i),s=(t.x||0)-vb(t.align,r),l=(t.y||0)-bb(t.baseline,a),c=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",c,fp["xmlns:xlink"],"xlink:href"),e("transform",Ru(s,l)),e("width",r),e("height",a),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function nie(e,t){const n=t.image,i=yT(t,n),r=vT(t,n),a=(t.x||0)-vb(t.align,i),s=(t.y||0)-bb(t.baseline,r);return e.set(a,s,a+i,s+r)}function iie(e,t,n){da(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=mT(i,this);let a=yT(i,r),s=vT(i,r);if(a===0||s===0)return;let l=(i.x||0)-vb(i.align,a),c=(i.y||0)-bb(i.baseline,s),f,d,g,p;i.aspect!==!1&&(d=r.width/r.height,g=i.width/i.height,d===d&&g===g&&d!==g&&(g<d?(p=a/d,c+=(s-p)/2,s=p):(p=s*d,l+=(a-p)/2,a=p))),(r.complete||r.toDataURL)&&(nd(e,i),e.globalAlpha=(f=i.opacity)!=null?f:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(r,l,c,a,s))})}var rie={type:"image",tag:"image",nested:!1,attr:tie,bound:nie,draw:iie,pick:yb(),isect:Fr,get:mT,xOffset:vb,yOffset:bb},aie=pT("line",Ene,Bne);function sie(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Fne(t)),e("d",t.path)}function z1(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,r=t.y||0,a=t.scaleX||1,s=t.scaleY||1,l=(t.angle||0)*bl,c=t.pathCache;(!c||c.path!==n)&&((t.pathCache=c=td(n)).path=n),l&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(l),up(e,c,0,0,a,s),e.rotate(-l),e.translate(-i,-r)):up(e,c,i,r,a,s)}function oie(e,t){return z1(Xp(e,t.angle),t)?e.set(0,0,0,0):lo(e,t,!0)}var lie={type:"path",tag:"path",nested:!1,attr:sie,bound:oie,draw:fT(z1),pick:dT(z1),isect:lT(z1)};function uie(e,t){e("d",Ud(null,t))}function cie(e,t){var n,i;return lo(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function p6(e,t){e.beginPath(),Ud(e,t)}var fie={type:"rect",tag:"path",nested:!1,attr:uie,bound:cie,draw:fT(p6),pick:dT(p6),isect:kU};function die(e,t){e("transform",RU(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function hie(e,t){var n,i;return lo(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function UU(e,t,n){var i,r,a,s;return t.stroke&&id(e,t,n)?(i=t.x||0,r=t.y||0,a=t.x2!=null?t.x2:i,s=t.y2!=null?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(a,s),!0):!1}function gie(e,t,n){da(t,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&UU(e,i,r)&&(nd(e,i),e.stroke())}})}function pie(e,t,n,i){return e.isPointInStroke?UU(e,t,1)&&e.isPointInStroke(n,i):!1}var mie={type:"rule",tag:"line",nested:!1,attr:die,bound:hie,draw:gie,pick:yb(pie),isect:DU},yie=gT("shape",_ne),vie=gT("symbol",wne,uT);const m6=Y8();var or={height:as,measureWidth:bT,estimateWidth:Sy,width:Sy,canvas:BU};BU(!0);function BU(e){or.width=e&&dl?bT:Sy}function Sy(e,t){return jU(Sl(e,t),as(e))}function jU(e,t){return~~(.8*e.length*t)}function bT(e,t){return as(e)<=0||!(t=Sl(e,t))?0:qU(t,xb(e))}function qU(e,t){const n=`(${t}) ${e}`;let i=m6.get(n);return i===void 0&&(dl.font=t,i=dl.measureText(e).width,m6.set(n,i)),i}function as(e){return e.fontSize!=null?+e.fontSize||0:11}function xl(e){return e.lineHeight!=null?e.lineHeight:as(e)+2}function bie(e){return ie(e)?e.length>1?e:e[0]:e}function Wp(e){return bie(e.lineBreak&&e.text&&!ie(e.text)?e.text.split(e.lineBreak):e.text)}function xT(e){const t=Wp(e);return(ie(t)?t.length-1:0)*xl(e)}function Sl(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Sie(e,n):n}function xie(e){if(or.width===bT){const t=xb(e);return n=>qU(n,t)}else if(or.width===Sy){const t=as(e);return n=>jU(n,t)}else return t=>or.width(e,t)}function Sie(e,t){var n=+e.limit,i=xie(e);if(i(t)<n)return t;var r=e.ellipsis||"",a=e.dir==="rtl",s=0,l=t.length,c;if(n-=i(r),a){for(;s<l;)c=s+l>>>1,i(t.slice(c))>n?s=c+1:l=c;return r+t.slice(s)}else{for(;s<l;)c=1+(s+l>>>1),i(t.slice(0,c))<n?s=c:l=c-1;return t.slice(0,s)+r}}function Qp(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function xb(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+as(e)+"px "+Qp(e,t)}function ST(e){var t=e.baseline,n=as(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*xl(e):t==="line-bottom"?.29*n-.5*xl(e):0)}const Eie={left:"start",center:"middle",right:"end"},qg=new un;function Sb(e){var t=e.x||0,n=e.y||0,i=e.radius||0,r;return i&&(r=(e.theta||0)-_u,t+=i*Math.cos(r),n+=i*Math.sin(r)),qg.x1=t,qg.y1=n,qg}function _ie(e,t){var n=t.dx||0,i=(t.dy||0)+ST(t),r=Sb(t),a=r.x1,s=r.y1,l=t.angle||0,c;e("text-anchor",Eie[t.align]||"start"),l?(c=Ru(a,s)+" "+hT(l),(n||i)&&(c+=" "+Ru(n,i))):c=Ru(a+n,s+i),e("transform",c)}function ET(e,t,n){var i=or.height(t),r=t.align,a=Sb(t),s=a.x1,l=a.y1,c=t.dx||0,f=(t.dy||0)+ST(t)-Math.round(.8*i),d=Wp(t),g;if(ie(d)?(i+=xl(t)*(d.length-1),g=d.reduce((p,y)=>Math.max(p,or.width(t,y)),0)):g=or.width(t,d),r==="center"?c-=g/2:r==="right"&&(c-=g),e.set(c+=s,f+=l,c+g,f+i),t.angle&&!n)e.rotate(t.angle*bl,s,l);else if(n===2)return e.rotatedPoints(t.angle*bl,s,l);return e}function wie(e,t,n){da(t,i=>{var r=i.opacity==null?1:i.opacity,a,s,l,c,f,d,g;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=xb(i),e.textAlign=i.align||"left",a=Sb(i),s=a.x1,l=a.y1,i.angle&&(e.save(),e.translate(s,l),e.rotate(i.angle*bl),s=l=0),s+=i.dx||0,l+=(i.dy||0)+ST(i),d=Wp(i),nd(e,i),ie(d))for(f=xl(i),c=0;c<d.length;++c)g=Sl(i,d[c]),i.fill&&by(e,i,r)&&e.fillText(g,s,l),i.stroke&&id(e,i,r)&&e.strokeText(g,s,l),l+=f;else g=Sl(i,d),i.fill&&by(e,i,r)&&e.fillText(g,s,l),i.stroke&&id(e,i,r)&&e.strokeText(g,s,l);i.angle&&e.restore()}})}function Aie(e,t,n,i,r,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=Sb(t),l=s.x1,c=s.y1,f=ET(qg,t,1),d=-t.angle*bl,g=Math.cos(d),p=Math.sin(d),y=g*r-p*a+(l-g*l+p*c),v=p*r+g*a+(c-p*l-g*c);return f.contains(y,v)}function Cie(e,t){const n=ET(qg,e,2);return Mf(t,n[0],n[1],n[2],n[3])||Mf(t,n[0],n[1],n[4],n[5])||Mf(t,n[4],n[5],n[6],n[7])||Mf(t,n[2],n[3],n[6],n[7])}var Tie={type:"text",tag:"text",nested:!1,attr:_ie,bound:ET,draw:wie,pick:yb(Aie),isect:Cie},Mie=pT("trail",Ane,jne),hr={arc:Lne,area:qne,group:eie,image:rie,line:aie,path:lie,rect:fie,rule:mie,shape:yie,symbol:vie,text:Tie,trail:Mie};function Tw(e,t,n){var i=hr[e.mark.marktype],r=t||i.bound;return i.nested&&(e=e.mark),r(e.bounds||(e.bounds=new un),e,n)}var y6={mark:null};function IU(e,t,n){var i=hr[e.marktype],r=i.bound,a=e.items,s=a&&a.length,l,c,f,d;if(i.nested)return s?f=a[0]:(y6.mark=e,f=y6),d=Tw(f,r,n),t=t&&t.union(d)||d,t;if(t=t||e.bounds&&e.bounds.clear()||new un,s)for(l=0,c=a.length;l<c;++l)t.union(Tw(a[l],r,n));return e.bounds=t}const $ie=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function PU(e,t){return JSON.stringify(e,$ie,t)}function HU(e){const t=typeof e=="string"?JSON.parse(e):e;return GU(t)}function GU(e){var t=e.marktype,n=e.items,i,r,a;if(n)for(r=0,a=n.length;r<a;++r)i=t?"mark":"group",n[r][i]=e,n[r].zindex&&(n[r][i].zdirty=!0),(t||i)==="group"&&GU(n[r]);return t&&IU(e),e}class YU{constructor(t){arguments.length?this.root=HU(t):(this.root=v6({marktype:"group",name:"root",role:"frame"}),this.root.items=[new pb(this.root)])}toJSON(t){return PU(this.root,t||0)}mark(t,n,i){n=n||this.root.items[0];const r=v6(t,n);return n.items[i]=r,r.zindex&&(r.group.zdirty=!0),r}}function v6(e,t){const n={bounds:new un,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function el(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function _T(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function dn(e,t,n,i){var r=e.childNodes[t],a;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(a=r||null,r=el(e.ownerDocument,n,i),e.insertBefore(r,a)),r}function Tr(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function XU(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Eb(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function kie(e,t,n,i){var r=e&&e.mark,a,s;if(r&&(a=hr[r.marktype]).tip){for(s=Eb(t,n),s[0]-=i[0],s[1]-=i[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=a.tip(r.items,s)}return e}let wT=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||qv(),this._tooltip=n||Die}initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,i){for(let r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!i||t[r].handler===i))return r;return-1}handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const r in n)i.push(...n[r]);return i}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(r=>{const a=new MouseEvent(t.type,t),s=el(null,"a");for(const l in r)s.setAttribute(l,r[l]);s.dispatchEvent(a)}).catch(()=>{})}handleTooltip(t,n,i){if(n&&n.tooltip!=null){n=kie(n,t,this.canvas(),this._origin);const r=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,r)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),r=this._origin,a=t.bounds,s=a.width(),l=a.height();let c=a.x1+r[0]+i.left,f=a.y1+r[1]+i.top;for(;t.mark&&(t=t.mark.group);)c+=t.x||0,f+=t.y||0;return{x:c,y:f,width:s,height:l,left:c,top:f,right:c+s,bottom:f+l}}};function Die(e,t,n,i){e.element().setAttribute("title",i||"")}class Zp{constructor(t){this._el=null,this._bgcolor=null,this._loader=new $U(t)}initialize(t,n,i,r,a){return this._el=t,this.resize(n,i,r,a)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,i,r){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=r||1,this}dirty(){}render(t,n){const i=this;return i._call=function(){i._render(t,n)},i._call(),i._call=null,i}_render(){}renderAsync(t,n){const i=this.render(t,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,n){var i=this,r=i._loader[t](n);if(!i._ready){const a=i._call;i._ready=i._loader.ready().then(s=>{s&&a(),i._ready=null})}return r}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Oie="keydown",Nie="keypress",Rie="keyup",VU="dragenter",F1="dragleave",WU="dragover",Mw="pointerdown",zie="pointerup",Ey="pointermove",L1="pointerout",QU="pointerover",$w="mousedown",Fie="mouseup",ZU="mousemove",_y="mouseout",KU="mouseover",wy="click",Lie="dblclick",Uie="wheel",JU="mousewheel",Ay="touchstart",Cy="touchmove",Ty="touchend",Bie=[Oie,Nie,Rie,VU,F1,WU,Mw,zie,Ey,L1,QU,$w,Fie,ZU,_y,KU,wy,Lie,Uie,JU,Ay,Cy,Ty],kw=Ey,Ig=_y,Dw=wy;class Kp extends wT{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Bie,this.pointermove=x6([Ey,ZU],[QU,KU],[L1,_y]),this.dragover=x6([WU],[VU],[F1]),this.pointerout=S6([L1,_y]),this.dragleave=S6([F1])}initialize(t,n,i){return this._canvas=t&&_T(t,"canvas"),[wy,$w,Mw,Ey,L1,F1].forEach(r=>b6(this,r)),super.initialize(t,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(JU,t)}pointerdown(t){this._down=this._active,this.fire(Mw,t)}mousedown(t){this._down=this._active,this.fire($w,t)}click(t){this._down===this._active&&(this.fire(wy,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Ay,t,!0)}touchmove(t){this.fire(Cy,t,!0)}touchend(t){this.fire(Ty,t,!0),this._touch=null}fire(t,n,i){const r=i?this._touch:this._active,a=this._handlers[t];if(n.vegaType=t,t===Dw&&r&&r.href?this.handleHref(n,r,r.href):(t===kw||t===Ig)&&this.handleTooltip(n,r,t!==Ig),a)for(let s=0,l=a.length;s<l;++s)a[s].handler.call(this._obj,n,r)}on(t,n){const i=this.eventName(t),r=this._handlers;return this._handlerIndex(r[i],t,n)<0&&(b6(this,t),(r[i]||(r[i]=[])).push({type:t,handler:n})),this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&r.splice(a,1),this}pickEvent(t){const n=Eb(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(t,n,i,r,a){const s=this.context();return hr[t.marktype].pick.call(this,s,t,n,i,r,a)}}const jie=e=>e===Ay||e===Cy||e===Ty?[Ay,Cy,Ty]:[e];function b6(e,t){jie(t).forEach(n=>qie(e,n))}function qie(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function Cg(e,t,n){t.forEach(i=>e.fire(i,n))}function x6(e,t,n){return function(i){const r=this._active,a=this.pickEvent(i);a===r?Cg(this,e,i):((!r||!r.exit)&&Cg(this,n,i),this._active=a,Cg(this,t,i),Cg(this,e,i))}}function S6(e){return function(t){Cg(this,e,t),this._active=null}}function Iie(){return typeof window<"u"&&window.devicePixelRatio||1}function Pie(e,t,n,i,r,a){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,l=e.getContext("2d"),c=s?Iie():r;e.width=t*c,e.height=n*c;for(const f in a)l[f]=a[f];return s&&c!==1&&(e.style.width=t+"px",e.style.height=n+"px"),l.pixelRatio=c,l.setTransform(c,0,0,c,c*i[0],c*i[1]),e}class My extends Zp{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new un,this._tempb=new un}initialize(t,n,i,r,a,s){return this._options=s||{},this._canvas=this._options.externalContext?null:fl(1,1,this._options.type),t&&this._canvas&&(Tr(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,i,r,a)}resize(t,n,i,r){if(super.resize(t,n,i,r),this._canvas)Pie(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const a=this._options.externalContext;a||ee("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(t,n){const i=this.context(),r=this._origin,a=this._width,s=this._height,l=this._dirty,c=Hie(r,a,s);i.save();const f=this._redraw||l.empty()?(this._redraw=!1,c.expand(1)):Gie(i,c.intersect(l),r);return this.clear(-r[0],-r[1],a,s),this.draw(i,t,f,n),i.restore(),l.clear(),this}draw(t,n,i,r){if(n.marktype!=="group"&&r!=null&&!r.includes(n.marktype))return;const a=hr[n.marktype];n.clip&&Ine(t,n),a.draw.call(this,t,n,i,r),n.clip&&t.restore()}clear(t,n,i,r){const a=this._options,s=this.context();a.type!=="pdf"&&!a.externalContext&&s.clearRect(t,n,i,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,i,r))}}const Hie=(e,t,n)=>new un().set(0,0,t,n).translate(-e[0],-e[1]);function Gie(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class eB extends wT{constructor(t,n){super(t,n);const i=this;i._hrefHandler=OE(i,(r,a)=>{a&&a.href&&i.handleHref(r,a,a.href)}),i._tooltipHandler=OE(i,(r,a)=>{i.handleTooltip(r,a,r.type!==Ig)})}initialize(t,n,i){let r=this._svg;return r&&(r.removeEventListener(Dw,this._hrefHandler),r.removeEventListener(kw,this._tooltipHandler),r.removeEventListener(Ig,this._tooltipHandler)),this._svg=r=t&&_T(t,"svg"),r&&(r.addEventListener(Dw,this._hrefHandler),r.addEventListener(kw,this._tooltipHandler),r.addEventListener(Ig,this._tooltipHandler)),super.initialize(t,n,i)}canvas(){return this._svg}on(t,n){const i=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[i],t,n)<0){const s={type:t,handler:n,listener:OE(this,n)};(r[i]||(r[i]=[])).push(s),this._svg&&this._svg.addEventListener(i,s.listener)}return this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&(this._svg&&this._svg.removeEventListener(i,r[a].listener),r.splice(a,1)),this}}const OE=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)},tB="aria-hidden",AT="aria-label",CT="role",TT="aria-roledescription",nB="graphics-object",MT="graphics-symbol",iB=(e,t,n)=>({[CT]:e,[TT]:t,[AT]:n||void 0}),Yie=ca(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),E6={axis:{desc:"axis",caption:Wie},legend:{desc:"legend",caption:Qie},"title-text":{desc:"title",caption:e=>`Title text '${w6(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${w6(e)}'`}},_6={ariaRole:CT,ariaRoleDescription:TT,description:AT};function rB(e,t){const n=t.aria===!1;if(e(tB,n||void 0),n||t.description==null)for(const i in _6)e(_6[i],void 0);else{const i=t.mark.marktype;e(AT,t.description),e(CT,t.ariaRole||(i==="group"?nB:MT)),e(TT,t.ariaRoleDescription||`${i} mark`)}}function aB(e){return e.aria===!1?{[tB]:!0}:Yie[e.role]?null:E6[e.role]?Vie(e,E6[e.role]):Xie(e)}function Xie(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return iB(n?nB:MT,`${t} mark container`,e.description)}function Vie(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return iB(t.role||MT,t.desc,n.description||i(n))}catch{return null}}function w6(e){return Se(e.text).join(" ")}function Wie(e){const t=e.datum,n=e.orient,i=t.title?sB(e):null,r=e.context,a=r.scales[t.scale].value,s=r.dataflow.locale(),l=a.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${ed(l)?"discrete":l} scale with ${xU(s,a,e)}`}function Qie(e){const t=e.datum,n=t.title?sB(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,a=Object.keys(r),s=e.context,l=s.scales[r[a[0]]].value,c=s.dataflow.locale();return Kie(i)+(n?` titled '${n}'`:"")+` for ${Zie(a)} with ${xU(c,l,e)}`}function sB(e){try{return Se(rt(e.items).items[0].text).join(" ")}catch{return null}}function Zie(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+rt(e)}function Kie(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const oB=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Jie=e=>oB(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function $T(){let e="",t="",n="";const i=[],r=()=>t=n="",a=c=>{t&&(e+=`${t}>${n}`,r()),i.push(c)},s=(c,f)=>(f!=null&&(t+=` ${c}="${Jie(f)}"`),l),l={open(c,...f){a(c),t="<"+c;for(const d of f)for(const g in d)s(g,d[g]);return l},close(){const c=i.pop();return t?e+=t+(n?`>${n}</${c}>`:"/>"):e+=`</${c}>`,r(),l},attr:s,text:c=>(n+=oB(c),l),toString:()=>e};return l}const lB=e=>uB($T(),e)+"";function uB(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):uB(e,i)}return e.close()}const $y={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},ky={blend:"mix-blend-mode"},cB={fill:"none","stroke-miterlimit":10},ig=0,A6="http://www.w3.org/2000/xmlns/",fn=fp.xmlns;class kT extends Zp{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,i,r,a){return this._defs={},this._clearDefs(),t&&(this._svg=dn(t,0,"svg",fn),this._svg.setAttributeNS(A6,"xmlns",fn),this._svg.setAttributeNS(A6,"xmlns:xlink",fp["xmlns:xlink"]),this._svg.setAttribute("version",fp.version),this._svg.setAttribute("class","marks"),Tr(t,1),this._root=dn(this._svg,ig,"g",fn),tl(this._root,cB),Tr(this._svg,ig+1)),this.background(this._bgcolor),super.initialize(t,n,i,r,a)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svg&&(tl(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=dn(t,ig,"rect",fn),tl(i,{width:this._width,height:this._height,fill:n}));const r=lB(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),r}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Tr(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,r,a,s,l,c,f;for(l=0,c=t.length;l<c;++l)if(i=t[l],r=i.mark,r.marktype!==a&&(a=r.marktype,s=hr[a]),r.zdirty&&r.dirty!==n&&(this._dirtyAll=!1,C6(i,n),r.items.forEach(d=>{d.dirty=n})),!r.zdirty){if(i.exit){s.nested&&r.items.length?(f=r.items[0],f._svg&&this._update(s,f._svg,f)):i._svg&&(f=i._svg.parentNode,f&&f.removeChild(i._svg)),i._svg=null;continue}i=s.nested?r.items[0]:i,i._update!==n&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,C6(i,n)):this._update(s,i._svg,i),i._update=n)}return!this._dirtyAll}mark(t,n,i,r){if(!this.isDirty(n))return n._svg;const a=this._svg,s=n.marktype,l=hr[s],c=n.interactive===!1?"none":null,f=l.tag==="g",d=T6(n,t,i,"g",a);if(s!=="group"&&r!=null&&!r.includes(s))return Tr(d,0),n._svg;d.setAttribute("class",XU(n));const g=aB(n);for(const b in g)li(d,b,g[b]);f||li(d,"pointer-events",c),li(d,"clip-path",n.clip?oT(this,n,n.group):null);let p=null,y=0;const v=b=>{const S=this.isDirty(b),_=T6(b,d,p,l.tag,a);S&&(this._update(l,_,b),f&&nre(this,_,b,r)),p=_,++y};return l.nested?n.items.length&&v(n.items[0]):da(n,v),Tr(d,y),d}_update(t,n,i){Ys=n,Wn=n.__values__,rB(Pg,i),t.attr(Pg,i,this);const r=rre[t.type];r&&r.call(this,t,n,i),Ys&&this.style(Ys,i)}style(t,n){if(n!=null){for(const i in $y){let r=i==="font"?Qp(n):n[i];if(r===Wn[i])continue;const a=$y[i];r==null?t.removeAttribute(a):(rT(r)&&(r=EU(r,this._defs.gradient,fB())),t.setAttribute(a,r+"")),Wn[i]=r}for(const i in ky)U1(t,ky[i],n[i])}}defs(){const t=this._svg,n=this._defs;let i=n.el,r=0;for(const a in n.gradient)i||(n.el=i=dn(t,ig+1,"defs",fn)),r=ere(i,n.gradient[a],r);for(const a in n.clipping)i||(n.el=i=dn(t,ig+1,"defs",fn)),r=tre(i,n.clipping[a],r);i&&(r===0?(t.removeChild(i),n.el=null):Tr(i,r))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function C6(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function ere(e,t,n){let i,r,a;if(t.gradient==="radial"){let s=dn(e,n++,"pattern",fn);tl(s,{id:vy+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=dn(s,0,"rect",fn),tl(s,{width:1,height:1,fill:`url(${fB()}#${t.id})`}),e=dn(e,n++,"radialGradient",fn),tl(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=dn(e,n++,"linearGradient",fn),tl(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)a=dn(e,i,"stop",fn),a.setAttribute("offset",t.stops[i].offset),a.setAttribute("stop-color",t.stops[i].color);return Tr(e,i),n}function tre(e,t,n){let i;return e=dn(e,n,"clipPath",fn),e.setAttribute("id",t.id),t.path?(i=dn(e,0,"path",fn),i.setAttribute("d",t.path)):(i=dn(e,0,"rect",fn),tl(i,{x:0,y:0,width:t.width,height:t.height})),Tr(e,1),n+1}function nre(e,t,n,i){t=t.lastChild.previousSibling;let r,a=0;da(n,s=>{r=e.mark(t,s,r,i),++a}),Tr(t,1+a)}function T6(e,t,n,i,r){let a=e._svg,s;if(!a&&(s=t.ownerDocument,a=el(s,i,fn),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},i==="g"))){const l=el(s,"path",fn);a.appendChild(l),l.__data__=e;const c=el(s,"g",fn);a.appendChild(c),c.__data__=e;const f=el(s,"path",fn);a.appendChild(f),f.__data__=e,f.__values__={fill:"default"}}return(a.ownerSVGElement!==r||ire(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}function ire(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Ys=null,Wn=null;const rre={group(e,t,n){const i=Ys=t.childNodes[2];Wn=i.__values__,e.foreground(Pg,n,this),Wn=t.__values__,Ys=t.childNodes[1],e.content(Pg,n,this);const r=Ys=t.childNodes[0];e.background(Pg,n,this);const a=n.mark.interactive===!1?"none":null;if(a!==Wn.events&&(li(i,"pointer-events",a),li(r,"pointer-events",a),Wn.events=a),n.strokeForeground&&n.stroke){const s=n.fill;li(i,"display",null),this.style(r,n),li(r,"stroke",null),s&&(n.fill=null),Wn=i.__values__,this.style(i,n),s&&(n.fill=s),Ys=null}else li(i,"display","none")},image(e,t,n){n.smooth===!1?(U1(t,"image-rendering","optimizeSpeed"),U1(t,"image-rendering","pixelated")):U1(t,"image-rendering",null)},text(e,t,n){const i=Wp(n);let r,a,s,l;ie(i)?(a=i.map(c=>Sl(n,c)),r=a.join(`
`),r!==Wn.text&&(Tr(t,0),s=t.ownerDocument,l=xl(n),a.forEach((c,f)=>{const d=el(s,"tspan",fn);d.__data__=n,d.textContent=c,f&&(d.setAttribute("x",0),d.setAttribute("dy",l)),t.appendChild(d)}),Wn.text=r)):(a=Sl(n,i),a!==Wn.text&&(t.textContent=a,Wn.text=a)),li(t,"font-family",Qp(n)),li(t,"font-size",as(n)+"px"),li(t,"font-style",n.fontStyle),li(t,"font-variant",n.fontVariant),li(t,"font-weight",n.fontWeight)}};function Pg(e,t,n){t!==Wn[e]&&(n?are(Ys,e,t,n):li(Ys,e,t),Wn[e]=t)}function U1(e,t,n){n!==Wn[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Wn[t]=n)}function tl(e,t){for(const n in t)li(e,n,t[n])}function li(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function are(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function fB(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class dB extends Zp{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=$T();n.open("svg",Pe({},fp,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",cB,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const i=hr[n.marktype],r=i.tag,a=[rB,i.attr];t.open("g",{class:XU(n),"clip-path":n.clip?oT(this,n,n.group):null},aB(n),{"pointer-events":r!=="g"&&n.interactive===!1?"none":null});const s=l=>{const c=this.href(l);if(c&&t.open("a",c),t.open(r,this.attr(n,l,a,r!=="g"?r:null)),r==="text"){const f=Wp(l);if(ie(f)){const d={x:0,dy:xl(l)};for(let g=0;g<f.length;++g)t.open("tspan",g?d:null).text(Sl(l,f[g])).close()}else t.text(Sl(l,f))}else if(r==="g"){const f=l.strokeForeground,d=l.fill,g=l.stroke;f&&g&&(l.stroke=null),t.open("path",this.attr(n,l,i.background,"bgrect")).close(),t.open("g",this.attr(n,l,i.content)),da(l,p=>this.mark(t,p)),t.close(),f&&g?(d&&(l.fill=null),l.stroke=g,t.open("path",this.attr(n,l,i.foreground,"bgrect")).close(),d&&(l.fill=d)):t.open("path",this.attr(n,l,i.foreground,"bgfore")).close()}t.close(),c&&t.close()};return i.nested?n.items&&n.items.length&&s(n.items[0]):da(n,s),t.close()}href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[n]=r})}return null}attr(t,n,i,r){const a={},s=(l,c,f,d)=>{a[d||l]=c};return Array.isArray(i)?i.forEach(l=>l(s,n,this)):i(s,n,this),r&&sre(a,n,t,r,this._defs),a}defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){t.open("defs");for(const a in n){const s=n[a],l=s.stops;s.gradient==="radial"?(t.open("pattern",{id:vy+a,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+a+")"}).close(),t.close(),t.open("radialGradient",{id:a,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:a,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let c=0;c<l.length;++c)t.open("stop",{offset:l[c].offset,"stop-color":l[c].color}).close();t.close()}for(const a in i){const s=i[a];t.open("clipPath",{id:a}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function sre(e,t,n,i,r){let a;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=Qp(t),e["font-size"]=as(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in $y){let l=t[s];const c=$y[s];l==="transparent"&&(c==="fill"||c==="stroke")||l!=null&&(rT(l)&&(l=EU(l,r.gradient,"")),e[c]=l)}for(const s in ky){const l=t[s];l!=null&&(a=a||[],a.push(`${ky[s]}: ${l};`))}return a&&(e.style=a.join(" ")),e}const Kr={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function ore(e){Kr.svgMarkTypes=e.svgMarkTypes??["text"],Kr.svgOnTop=e.svgOnTop??!0,Kr.debug=e.debug??!1}class Ow extends Zp{constructor(t){super(t),this._svgRenderer=new kT(t),this._canvasRenderer=new My(t)}initialize(t,n,i,r,a){this._root_el=dn(t,0,"div");const s=dn(this._root_el,0,"div"),l=dn(this._root_el,1,"div");return this._root_el.style.position="relative",Kr.debug||(s.style.height="100%",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.height="100%",l.style.width="100%"),this._svgEl=Kr.svgOnTop?l:s,this._canvasEl=Kr.svgOnTop?s:l,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,r,a),this._svgRenderer.initialize(this._svgEl,n,i,r,a),super.initialize(t,n,i,r,a)}dirty(t){return Kr.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const r=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(a=>!Kr.svgMarkTypes.includes(a));this._svgRenderer.render(t,Kr.svgMarkTypes),this._canvasRenderer.render(t,r)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svgRenderer.resize(t,n,i,r),this._canvasRenderer.resize(t,n,i,r),this}background(t){return Kr.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class hB extends Kp{constructor(t,n){super(t,n)}initialize(t,n,i){const r=dn(dn(t,0,"div"),Kr.svgOnTop?0:1,"div");return super.initialize(r,n,i)}}const gB="canvas",pB="hybrid",mB="png",yB="svg",vB="none",nl={Canvas:gB,PNG:mB,SVG:yB,Hybrid:pB,None:vB},Gu={};Gu[gB]=Gu[mB]={renderer:My,headless:My,handler:Kp};Gu[yB]={renderer:kT,headless:dB,handler:eB};Gu[pB]={renderer:Ow,headless:Ow,handler:hB};Gu[vB]={};function _b(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Gu[e]=t,this):Gu[e]}function bB(e,t,n){const i=[],r=new un().union(t),a=e.marktype;return a?xB(e,r,n,i):a==="group"?SB(e,r,n,i):ee("Intersect scene must be mark node or group item.")}function xB(e,t,n,i){if(lre(e,t,n)){const r=e.items,a=e.marktype,s=r.length;let l=0;if(a==="group")for(;l<s;++l)SB(r[l],t,n,i);else for(const c=hr[a].isect;l<s;++l){const f=r[l];EB(f,t,c)&&i.push(f)}}return i}function lre(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function SB(e,t,n,i){n&&n(e.mark)&&EB(e,t,hr.group.isect)&&i.push(e);const r=e.items,a=r&&r.length;if(a){const s=e.x||0,l=e.y||0;t.translate(-s,-l);for(let c=0;c<a;++c)xB(r[c],t,n,i);t.translate(s,l)}return i}function EB(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const NE=new un;function _B(e){const t=e.clip;if(He(t))t(Xp(NE.clear()));else if(t)NE.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(NE)}const ure=1e-9;function DT(e,t,n){return e===t?!0:n==="path"?wB(e,t):e instanceof Date&&t instanceof Date?+e==+t:ut(e)&&ut(t)?Math.abs(e-t)<=ure:!e||!t||!be(e)&&!be(t)?e==t:cre(e,t)}function wB(e,t){return DT(td(e),td(t))}function cre(e,t){var n=Object.keys(e),i=Object.keys(t),r,a;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),a=n.length-1;a>=0;a--)if(n[a]!=i[a])return!1;for(a=n.length-1;a>=0;a--)if(r=n[a],!DT(e[r],t[r],r))return!1;return typeof e==typeof t}function fre(){Cne(),Rte()}const rd="top",ia="left",ra="right",El="bottom",dre="top-left",hre="top-right",gre="bottom-left",pre="bottom-right",OT="start",Nw="middle",ui="end",mre="x",yre="y",wb="group",NT="axis",RT="title",vre="frame",bre="scope",zT="legend",AB="row-header",CB="row-footer",TB="row-title",MB="column-header",$B="column-footer",kB="column-title",xre="padding",Sre="symbol",DB="fit",OB="fit-x",NB="fit-y",Ere="pad",FT="none",Z0="all",Rw="each",LT="flush",il="column",rl="row";function RB(e){J.call(this,null,e)}ye(RB,J,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,a=hr[r],s=a.bound;let l=i.bounds,c;if(a.nested)i.items.length&&n.dirty(i.items[0]),l=K0(i,s),i.items.forEach(f=>{f.bounds.clear().union(l)});else if(r===wb||e.modified())switch(t.visit(t.MOD,f=>n.dirty(f)),l.clear(),i.items.forEach(f=>l.union(K0(f,s))),i.role){case NT:case zT:case RT:t.reflow()}else c=t.changed(t.REM),t.visit(t.ADD,f=>{l.union(K0(f,s))}),t.visit(t.MOD,f=>{c=c||l.alignsWith(f.bounds),n.dirty(f),l.union(K0(f,s))}),c&&(l.clear(),i.items.forEach(f=>l.union(f.bounds)));return _B(i),t.modifies("bounds")}});function K0(e,t,n){return t(e.bounds.clear(),e,n)}const M6=":vega_identifier:";function UT(e){J.call(this,0,e)}UT.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ye(UT,J,{transform(e,t){const n=_re(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,a=>a[i]=a[i]||++r),n.set(this.value=r),t}});function _re(e){return e._signals[M6]||(e._signals[M6]=e.add(0))}function zB(e){J.call(this,null,e)}ye(zB,J,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,wre(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===wb?pb:gb;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function wre(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function FB(e){J.call(this,null,e)}const $6={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>!r||!LB(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},LB=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),k6=(e,t)=>{for(var n=1,i=e.length,r=e[0].bounds,a;n<i;r=a,++n)if(LB(r,a=e[n].bounds,t))return!0},Are=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Cre=(e,t,n)=>{var i=e.range(),r=new un;return t===rd||t===El?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),a=>r.encloses(a.bounds)},D6=e=>(e.forEach(t=>t.opacity=1),e),O6=(e,t)=>e.reflow(t.modified()).modifies("opacity");ye(FB,J,{transform(e,t){const n=$6[e.method]||$6.parity,i=e.separation||0;let r=t.materialize(t.SOURCE).source,a,s;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(D6(r),t=O6(t,e)),t;if(r=r.filter(Are),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),a=D6(r),t=O6(t,e),a.length>=3&&k6(a,i)){do a=n(a,i);while(a.length>=3&&k6(a,i));a.length<3&&!rt(r).opacity&&(a.length>1&&(rt(a).opacity=0),rt(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=Cre(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(c=>{s(c)||(c.opacity=0)}));const l=a[0].mark.bounds.clear();return r.forEach(c=>{c.opacity&&l.union(c.bounds)}),t}});function UB(e){J.call(this,null,e)}ye(UB,J,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const Vn=new un;function $f(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Tre(e){var t=e.items[0].orient;return t===ia||t===ra}function Mre(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function $re(e,t,n,i){var r=t.items[0],a=r.datum,s=r.translate!=null?r.translate:.5,l=r.orient,c=Mre(a),f=r.range,d=r.offset,g=r.position,p=r.minExtent,y=r.maxExtent,v=a.title&&r.items[c[2]].items[0],b=r.titlePadding,S=r.bounds,_=v&&xT(v),w=0,A=0,T,$;switch(Vn.clear().union(S),S.clear(),(T=c[0])>-1&&S.union(r.items[T].bounds),(T=c[1])>-1&&S.union(r.items[T].bounds),l){case rd:w=g||0,A=-d,$=Math.max(p,Math.min(y,-S.y1)),S.add(0,-$).add(f,0),v&&J0(e,v,$,b,_,0,-1,S);break;case ia:w=-d,A=g||0,$=Math.max(p,Math.min(y,-S.x1)),S.add(-$,0).add(0,f),v&&J0(e,v,$,b,_,1,-1,S);break;case ra:w=n+d,A=g||0,$=Math.max(p,Math.min(y,S.x2)),S.add(0,0).add($,f),v&&J0(e,v,$,b,_,1,1,S);break;case El:w=g||0,A=i+d,$=Math.max(p,Math.min(y,S.y2)),S.add(0,0).add(f,$),v&&J0(e,v,$,b,0,0,1,S);break;default:w=r.x,A=r.y}return lo(S.translate(w,A),r),$f(r,"x",w+s)|$f(r,"y",A+s)&&(r.bounds=Vn,e.dirty(r),r.bounds=S,e.dirty(r)),r.mark.bounds.clear().union(S)}function J0(e,t,n,i,r,a,s,l){const c=t.bounds;if(t.auto){const f=s*(n+r+i);let d=0,g=0;e.dirty(t),a?d=(t.x||0)-(t.x=f):g=(t.y||0)-(t.y=f),t.mark.bounds.clear().union(c.translate(-d,-g)),e.dirty(t)}l.union(c)}const N6=(e,t)=>Math.floor(Math.min(e,t)),R6=(e,t)=>Math.ceil(Math.max(e,t));function kre(e){var t=e.items,n=t.length,i=0,r,a;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=t[i],a=r.items,r.marktype===wb)switch(r.role){case NT:case zT:case RT:break;case AB:s.rowheaders.push(...a);break;case CB:s.rowfooters.push(...a);break;case MB:s.colheaders.push(...a);break;case $B:s.colfooters.push(...a);break;case TB:s.rowtitle=a[0];break;case kB:s.coltitle=a[0];break;default:s.marks.push(...a)}return s}function Dre(e){return new un().set(0,0,e.width||0,e.height||0)}function Ore(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Ft(e,t,n){const i=be(e)?e[t]:e;return i??(n!==void 0?n:0)}function z6(e){return e<0?Math.ceil(-e):0}function BB(e,t,n){var i=!n.nodirty,r=n.bounds===LT?Dre:Ore,a=Vn.set(0,0,0,0),s=Ft(n.align,il),l=Ft(n.align,rl),c=Ft(n.padding,il),f=Ft(n.padding,rl),d=n.columns||t.length,g=d<=0?1:Math.ceil(t.length/d),p=t.length,y=Array(p),v=Array(d),b=0,S=Array(p),_=Array(g),w=0,A=Array(p),T=Array(p),$=Array(p),k,M,N,z,j,U,X,H,q,R,O;for(M=0;M<d;++M)v[M]=0;for(M=0;M<g;++M)_[M]=0;for(M=0;M<p;++M)U=t[M],j=$[M]=r(U),U.x=U.x||0,A[M]=0,U.y=U.y||0,T[M]=0,N=M%d,z=~~(M/d),b=Math.max(b,X=Math.ceil(j.x2)),w=Math.max(w,H=Math.ceil(j.y2)),v[N]=Math.max(v[N],X),_[z]=Math.max(_[z],H),y[M]=c+z6(j.x1),S[M]=f+z6(j.y1),i&&e.dirty(t[M]);for(M=0;M<p;++M)M%d===0&&(y[M]=0),M<d&&(S[M]=0);if(s===Rw)for(N=1;N<d;++N){for(O=0,M=N;M<p;M+=d)O<y[M]&&(O=y[M]);for(M=N;M<p;M+=d)y[M]=O+v[N-1]}else if(s===Z0){for(O=0,M=0;M<p;++M)M%d&&O<y[M]&&(O=y[M]);for(M=0;M<p;++M)M%d&&(y[M]=O+b)}else for(s=!1,N=1;N<d;++N)for(M=N;M<p;M+=d)y[M]+=v[N-1];if(l===Rw)for(z=1;z<g;++z){for(O=0,M=z*d,k=M+d;M<k;++M)O<S[M]&&(O=S[M]);for(M=z*d;M<k;++M)S[M]=O+_[z-1]}else if(l===Z0){for(O=0,M=d;M<p;++M)O<S[M]&&(O=S[M]);for(M=d;M<p;++M)S[M]=O+w}else for(l=!1,z=1;z<g;++z)for(M=z*d,k=M+d;M<k;++M)S[M]+=_[z-1];for(q=0,M=0;M<p;++M)q=y[M]+(M%d?q:0),A[M]+=q-t[M].x;for(N=0;N<d;++N)for(R=0,M=N;M<p;M+=d)R+=S[M],T[M]+=R-t[M].y;if(s&&Ft(n.center,il)&&g>1)for(M=0;M<p;++M)j=s===Z0?b:v[M%d],q=j-$[M].x2-t[M].x-A[M],q>0&&(A[M]+=q/2);if(l&&Ft(n.center,rl)&&d!==1)for(M=0;M<p;++M)j=l===Z0?w:_[~~(M/d)],R=j-$[M].y2-t[M].y-T[M],R>0&&(T[M]+=R/2);for(M=0;M<p;++M)a.union($[M].translate(A[M],T[M]));switch(q=Ft(n.anchor,mre),R=Ft(n.anchor,yre),Ft(n.anchor,il)){case ui:q-=a.width();break;case Nw:q-=a.width()/2}switch(Ft(n.anchor,rl)){case ui:R-=a.height();break;case Nw:R-=a.height()/2}for(q=Math.round(q),R=Math.round(R),a.clear(),M=0;M<p;++M)t[M].mark.bounds.clear();for(M=0;M<p;++M)U=t[M],U.x+=A[M]+=q,U.y+=T[M]+=R,a.union(U.mark.bounds.union(U.bounds.translate(A[M],T[M]))),i&&e.dirty(U);return a}function Nre(e,t,n){var i=kre(t),r=i.marks,a=n.bounds===LT?Rre:zre,s=n.offset,l=n.columns||r.length,c=l<=0?1:Math.ceil(r.length/l),f=c*l,d,g,p,y,v,b,S;const _=BB(e,r,n);_.empty()&&_.set(0,0,0,0),i.rowheaders&&(b=Ft(n.headerBand,rl,null),d=e1(e,i.rowheaders,r,l,c,-Ft(s,"rowHeader"),N6,0,a,"x1",0,l,1,b)),i.colheaders&&(b=Ft(n.headerBand,il,null),g=e1(e,i.colheaders,r,l,l,-Ft(s,"columnHeader"),N6,1,a,"y1",0,1,l,b)),i.rowfooters&&(b=Ft(n.footerBand,rl,null),p=e1(e,i.rowfooters,r,l,c,Ft(s,"rowFooter"),R6,0,a,"x2",l-1,l,1,b)),i.colfooters&&(b=Ft(n.footerBand,il,null),y=e1(e,i.colfooters,r,l,l,Ft(s,"columnFooter"),R6,1,a,"y2",f-l,1,l,b)),i.rowtitle&&(v=Ft(n.titleAnchor,rl),S=Ft(s,"rowTitle"),S=v===ui?p+S:d-S,b=Ft(n.titleBand,rl,.5),F6(e,i.rowtitle,S,0,_,b)),i.coltitle&&(v=Ft(n.titleAnchor,il),S=Ft(s,"columnTitle"),S=v===ui?y+S:g-S,b=Ft(n.titleBand,il,.5),F6(e,i.coltitle,S,1,_,b))}function Rre(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function zre(e,t){return e.bounds[t]}function e1(e,t,n,i,r,a,s,l,c,f,d,g,p,y){var v=n.length,b=0,S=0,_,w,A,T,$,k,M,N,z;if(!v)return b;for(_=d;_<v;_+=g)n[_]&&(b=s(b,c(n[_],f)));if(!t.length)return b;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),b+=a,w=0,T=t.length;w<T;++w)e.dirty(t[w]),t[w].mark.bounds.clear();for(_=d,w=0,T=t.length;w<T;++w,_+=g){for(k=t[w],$=k.mark.bounds,A=_;A>=0&&(M=n[A])==null;A-=p);l?(N=y==null?M.x:Math.round(M.bounds.x1+y*M.bounds.width()),z=b):(N=b,z=y==null?M.y:Math.round(M.bounds.y1+y*M.bounds.height())),$.union(k.bounds.translate(N-(k.x||0),z-(k.y||0))),k.x=N,k.y=z,e.dirty(k),S=s(S,$[f])}return S}function F6(e,t,n,i,r,a){if(t){e.dirty(t);var s=n,l=n;i?s=Math.round(r.x1+a*r.width()):l=Math.round(r.y1+a*r.height()),t.bounds.translate(s-(t.x||0),l-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=l,e.dirty(t)}}function Fre(e,t){const n=e[t]||{};return(i,r)=>n[i]!=null?n[i]:e[i]!=null?e[i]:r}function Lre(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function Ure(e,t,n,i,r,a,s){const l=Fre(n,t),c=Lre(e,l("offset",0)),f=l("anchor",OT),d=f===ui?1:f===Nw?.5:0,g={align:Rw,bounds:l("bounds",LT),columns:l("direction")==="vertical"?1:e.length,padding:l("margin",8),center:l("center"),nodirty:!0};switch(t){case ia:g.anchor={x:Math.floor(i.x1)-c,column:ui,y:d*(s||i.height()+2*i.y1),row:f};break;case ra:g.anchor={x:Math.ceil(i.x2)+c,y:d*(s||i.height()+2*i.y1),row:f};break;case rd:g.anchor={y:Math.floor(r.y1)-c,row:ui,x:d*(a||r.width()+2*r.x1),column:f};break;case El:g.anchor={y:Math.ceil(r.y2)+c,x:d*(a||r.width()+2*r.x1),column:f};break;case dre:g.anchor={x:c,y:c};break;case hre:g.anchor={x:a-c,y:c,column:ui};break;case gre:g.anchor={x:c,y:s-c,row:ui};break;case pre:g.anchor={x:a-c,y:s-c,column:ui,row:ui};break}return g}function Bre(e,t){var n=t.items[0],i=n.datum,r=n.orient,a=n.bounds,s=n.x,l=n.y,c,f;return n._bounds?n._bounds.clear().union(a):n._bounds=a.clone(),a.clear(),qre(e,n,n.items[0].items[0]),a=jre(n,a),c=2*n.padding,f=2*n.padding,a.empty()||(c=Math.ceil(a.width()+c),f=Math.ceil(a.height()+f)),i.type===Sre&&Ire(n.items[0].items[0].items[0].items),r!==FT&&(n.x=s=0,n.y=l=0),n.width=c,n.height=f,lo(a.set(s,l,s+c,l+f),n),n.mark.bounds.clear().union(a),n}function jre(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function qre(e,t,n){var i=t.padding,r=i-n.x,a=i-n.y;if(!t.datum.title)(r||a)&&rg(e,n,r,a);else{var s=t.items[1].items[0],l=s.anchor,c=t.titlePadding||0,f=i-s.x,d=i-s.y;switch(s.orient){case ia:r+=Math.ceil(s.bounds.width())+c;break;case ra:case El:break;default:a+=s.bounds.height()+c}switch((r||a)&&rg(e,n,r,a),s.orient){case ia:d+=pf(t,n,s,l,1,1);break;case ra:f+=pf(t,n,s,ui,0,0)+c,d+=pf(t,n,s,l,1,1);break;case El:f+=pf(t,n,s,l,0,0),d+=pf(t,n,s,ui,-1,0,1)+c;break;default:f+=pf(t,n,s,l,0,0)}(f||d)&&rg(e,s,f,d),(f=Math.round(s.bounds.x1-i))<0&&(rg(e,n,-f,0),rg(e,s,-f,0))}}function pf(e,t,n,i,r,a,s){const l=e.datum.type!=="symbol",c=n.datum.vgrad,f=l&&(a||!c)&&!s?t.items[0]:t,d=f.bounds[r?"y2":"x2"]-e.padding,g=c&&a?d:0,p=c&&a?0:d,y=r<=0?0:xT(n);return Math.round(i===OT?g:i===ui?p-y:.5*(d-y))}function rg(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function Ire(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Pre(e,t,n,i,r){var a=t.items[0],s=a.frame,l=a.orient,c=a.anchor,f=a.offset,d=a.padding,g=a.items[0].items[0],p=a.items[1]&&a.items[1].items[0],y=l===ia||l===ra?i:n,v=0,b=0,S=0,_=0,w=0,A;if(s!==wb?l===ia?(v=r.y2,y=r.y1):l===ra?(v=r.y1,y=r.y2):(v=r.x1,y=r.x2):l===ia&&(v=i,y=0),A=c===OT?v:c===ui?y:(v+y)/2,p&&p.text){switch(l){case rd:case El:w=g.bounds.height()+d;break;case ia:_=g.bounds.width()+d;break;case ra:_=-g.bounds.width()-d;break}Vn.clear().union(p.bounds),Vn.translate(_-(p.x||0),w-(p.y||0)),$f(p,"x",_)|$f(p,"y",w)&&(e.dirty(p),p.bounds.clear().union(Vn),p.mark.bounds.clear().union(Vn),e.dirty(p)),Vn.clear().union(p.bounds)}else Vn.clear();switch(Vn.union(g.bounds),l){case rd:b=A,S=r.y1-Vn.height()-f;break;case ia:b=r.x1-Vn.width()-f,S=A;break;case ra:b=r.x2+Vn.width()+f,S=A;break;case El:b=A,S=r.y2+f;break;default:b=a.x,S=a.y}return $f(a,"x",b)|$f(a,"y",S)&&(Vn.translate(b,S),e.dirty(a),a.bounds.clear().union(Vn),t.bounds.clear().union(Vn),e.dirty(a)),a.bounds}function jB(e){J.call(this,null,e)}ye(jB,J,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&Nre(n,i,e.layout),Gre(n,i,e)}),Hre(e.mark.group)?t.reflow():t}});function Hre(e){return e&&e.mark.role!=="legend-entry"}function Gre(e,t,n){var i=t.items,r=Math.max(0,t.width||0),a=Math.max(0,t.height||0),s=new un().set(0,0,r,a),l=s.clone(),c=s.clone(),f=[],d,g,p,y,v,b;for(v=0,b=i.length;v<b;++v)switch(g=i[v],g.role){case NT:y=Tre(g)?l:c,y.union($re(e,g,r,a));break;case RT:d=g;break;case zT:f.push(Bre(e,g));break;case vre:case bre:case AB:case CB:case TB:case MB:case $B:case kB:l.union(g.bounds),c.union(g.bounds);break;default:s.union(g.bounds)}if(f.length){const S={};f.forEach(_=>{p=_.orient||ra,p!==FT&&(S[p]||(S[p]=[])).push(_)});for(const _ in S){const w=S[_];BB(e,w,Ure(w,_,n.legends,l,c,r,a))}f.forEach(_=>{const w=_.bounds;if(w.equals(_._bounds)||(_.bounds=_._bounds,e.dirty(_),_.bounds=w,e.dirty(_)),n.autosize&&(n.autosize.type===DB||n.autosize.type===OB||n.autosize.type===NB))switch(_.orient){case ia:case ra:s.add(w.x1,0).add(w.x2,0);break;case rd:case El:s.add(0,w.y1).add(0,w.y2)}else s.union(w)})}s.union(l).union(c),d&&s.union(Pre(e,d,r,a,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),Yre(e,t,s,n)}function Yre(e,t,n,i){const r=i.autosize||{},a=r.type;if(e._autosize<1||!a)return;let s=e._width,l=e._height,c=Math.max(0,t.width||0),f=Math.max(0,Math.ceil(-n.x1)),d=Math.max(0,t.height||0),g=Math.max(0,Math.ceil(-n.y1));const p=Math.max(0,Math.ceil(n.x2-c)),y=Math.max(0,Math.ceil(n.y2-d));if(r.contains===xre){const v=e.padding();s-=v.left+v.right,l-=v.top+v.bottom}a===FT?(f=0,g=0,c=s,d=l):a===DB?(c=Math.max(0,s-f-p),d=Math.max(0,l-g-y)):a===OB?(c=Math.max(0,s-f-p),l=d+g+y):a===NB?(s=c+f+p,d=Math.max(0,l-g-y)):a===Ere&&(s=c+f+p,l=d+g+y),e._resizeView(s,l,c,d,[f,g],r.resize)}const Xre=Object.freeze(Object.defineProperty({__proto__:null,bound:RB,identifier:UT,mark:zB,overlap:FB,render:UB,viewlayout:jB},Symbol.toStringTag,{value:"Module"}));function qB(e){J.call(this,null,e)}ye(qB,J,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,l=nT(a,s,e.minstep),c=e.format||pU(n,a,l,e.formatSpecifier,e.formatType,!!e.values),f=e.values?gU(a,e.values,l):iT(a,l);return r&&(i.rem=r),r=f.map((d,g)=>ht({index:g/(f.length-1||1),value:d,label:c(d)})),e.extra&&r.length&&r.push(ht({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function IB(e){J.call(this,null,e)}function Vre(){return ht({})}function Wre(e){const t=$d().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ye(IB,J,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||Vre,a=e.key||ke,s=this.value;return ie(i.encode)&&(i.encode=null),s&&(e.modified("key")||t.modified(a))&&ee("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=Wre(a)),t.visit(t.ADD,l=>{const c=a(l);let f=s.get(c);f?f.exit?(s.empty--,i.add.push(f)):i.mod.push(f):(f=r(l),s.set(c,f),i.add.push(f)),f.datum=l,f.exit=!1}),t.visit(t.MOD,l=>{const c=a(l),f=s.get(c);f&&(f.datum=l,i.mod.push(f))}),t.visit(t.REM,l=>{const c=a(l),f=s.get(c);l===f.datum&&!f.exit&&(i.rem.push(f),f.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),i}});function PB(e){J.call(this,null,e)}ye(PB,J,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,a=t.encode;if(ie(a))if(n.changed()||a.every(g=>r[g]))a=a[0],n.encode=null;else return t.StopPropagation;var s=a==="enter",l=r.update||Ho,c=r.enter||Ho,f=r.exit||Ho,d=(a&&!s?r[a]:l)||Ho;if(t.changed(t.ADD)&&(t.visit(t.ADD,g=>{c(g,e),l(g,e)}),n.modifies(c.output),n.modifies(l.output),d!==Ho&&d!==l&&(t.visit(t.ADD,g=>{d(g,e)}),n.modifies(d.output))),t.changed(t.REM)&&f!==Ho&&(t.visit(t.REM,g=>{f(g,e)}),n.modifies(f.output)),s||d!==Ho){const g=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(g,p=>{const y=c(p,e)||i;(d(p,e)||y)&&n.mod.push(p)}),n.mod.length&&n.modifies(c.output)):t.visit(g,p=>{(d(p,e)||i)&&n.mod.push(p)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:t.StopPropagation}});function HB(e){J.call(this,[],e)}ye(HB,J,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.type||k1,s=e.scale,l=+e.limit,c=nT(s,e.count==null?5:e.count,e.minstep),f=!!e.values||a===k1,d=e.format||bU(n,s,c,a,e.formatSpecifier,e.formatType,f),g=e.values||vU(s,c),p,y,v,b,S;return r&&(i.rem=r),a===k1?(l&&g.length>l?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=g.slice(0,l-1),S=!0):r=g,He(v=e.size)?(!e.values&&s(r[0])===0&&(r=r.slice(1)),b=r.reduce((_,w)=>Math.max(_,v(w,e)),0)):v=ri(b=v||8),r=r.map((_,w)=>ht({index:w,label:d(_,w,r),value:_,offset:b,size:v(_,e)})),S&&(S=g[r.length],r.push(ht({index:r.length,label:`${g.length-r.length} entries`,value:S,offset:b,size:v(S,e)})))):a===Ste?(p=s.domain(),y=fU(s,p[0],rt(p)),g.length<3&&!e.values&&p[0]!==rt(p)&&(g=[p[0],rt(p)]),r=g.map((_,w)=>ht({index:w,label:d(_,w,g),value:_,perc:y(_)}))):(v=g.length-1,y=Ote(s),r=g.map((_,w)=>ht({index:w,label:d(_,w,g),value:_,perc:w?y(_):0,perc2:w===v?1:y(g[w+1])}))),i.source=r,i.add=r,this.value=r,i}});const Qre=e=>e.source.x,Zre=e=>e.source.y,Kre=e=>e.target.x,Jre=e=>e.target.y;function BT(e){J.call(this,{},e)}BT.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ye(BT,J,{transform(e,t){var n=e.sourceX||Qre,i=e.sourceY||Zre,r=e.targetX||Kre,a=e.targetY||Jre,s=e.as||"path",l=e.orient||"vertical",c=e.shape||"line",f=L6.get(c+"-"+l)||L6.get(c);return f||ee("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,d=>{d[s]=f(n(d),i(d),r(d),a(d))}),t.reflow(e.modified()).modifies(s)}});const GB=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,eae=(e,t,n,i)=>GB(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),YB=(e,t,n,i)=>{var r=n-e,a=i-t,s=Math.hypot(r,a)/2,l=180*Math.atan2(a,r)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+l+" 0 1 "+n+","+i},tae=(e,t,n,i)=>YB(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),XB=(e,t,n,i)=>{const r=n-e,a=i-t,s=.2*(r+a),l=.2*(a-r);return"M"+e+","+t+"C"+(e+s)+","+(t+l)+" "+(n+l)+","+(i-s)+" "+n+","+i},nae=(e,t,n,i)=>XB(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),iae=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,rae=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,aae=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),l=Math.sin(n),c=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*r+","+t*a+"A"+t+","+t+" 0 0,"+(c?1:0)+" "+t*s+","+t*l+"L"+i*s+","+i*l},sae=(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},oae=(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},lae=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),l=Math.sin(n),c=(t+i)/2;return"M"+t*r+","+t*a+"C"+c*r+","+c*a+" "+c*s+","+c*l+" "+i*s+","+i*l},L6=$d({line:GB,"line-radial":eae,arc:YB,"arc-radial":tae,curve:XB,"curve-radial":nae,"orthogonal-horizontal":iae,"orthogonal-vertical":rae,"orthogonal-radial":aae,"diagonal-horizontal":sae,"diagonal-vertical":oae,"diagonal-radial":lae});function jT(e){J.call(this,null,e)}jT.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ye(jT,J,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],a=e.field||Ad,s=e.startAngle||0,l=e.endAngle!=null?e.endAngle:2*Math.PI,c=t.source,f=c.map(a),d=f.length,g=s,p=(l-s)/l9(f),y=rr(d),v,b,S;for(e.sort&&y.sort((_,w)=>f[_]-f[w]),v=0;v<d;++v)S=f[y[v]],b=c[y[v]],b[i]=g,b[r]=g+=S*p;return this.value=f,t.reflow(e.modified()).modifies(n)}});const uae=5;function cae(e){const t=e.type;return!e.bins&&(t===Kf||t===jp||t===qp)}function VB(e){return J3(e)&&e!==Pa}const fae=ca(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function WB(e){J.call(this,null,e),this.modified(!0)}ye(WB,J,{transform(e,t){var n=t.dataflow,i=this.value,r=dae(e);(!i||r!==i.type)&&(this.value=i=ft(r)());for(r in e)if(!fae[r]){if(r==="padding"&&VB(i.type))continue;He(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return vae(i,e,yae(i,e,gae(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function dae(e){var t=e.type,n="",i;return t===Pa?Pa+"-"+Kf:(hae(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?Pa+"-":i===3?Ld+"-":""),(n+t||Kf).toLowerCase())}function hae(e){const t=e.type;return J3(t)&&t!==Pu&&t!==Hu&&(e.scheme||e.range&&e.range.length&&e.range.every(xe))}function gae(e,t,n){const i=pae(e,t.domainRaw,n);if(i>-1)return i;var r=t.domain,a=e.type,s=t.zero||t.zero===void 0&&cae(e),l,c;if(!r)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(l=(r=r.slice()).length-1||1,s&&(r[0]>0&&(r[0]=0),r[l]<0&&(r[l]=0)),t.domainMin!=null&&(r[0]=t.domainMin),t.domainMax!=null&&(r[l]=t.domainMax),t.domainMid!=null)){c=t.domainMid;const f=c>r[l]?l+1:c<r[0]?0:l;f!==l&&n.warn("Scale domainMid exceeds domain min or max.",c),r.splice(f,0,c)}return VB(a)&&t.padding&&r[0]!==rt(r)&&(r=mae(a,r,t.range,t.padding,t.exponent,t.constant)),e.domain(QB(a,r,n)),a===W3&&e.unknown(t.domainImplicit?hw:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&nT(e,t.nice)||null),r.length}function pae(e,t,n){return t?(e.domain(QB(e.type,t,n)),t.length):-1}function mae(e,t,n,i,r,a){var s=Math.abs(rt(n)-n[0]),l=s/(s-2*i),c=e===io?mC(t,null,l):e===qp?ey(t,null,l,.5):e===jp?ey(t,null,l,r||1):e===ub?yC(t,null,l,a||1):pC(t,null,l);return t=t.slice(),t[0]=c[0],t[t.length-1]=c[1],t}function QB(e,t,n){if(sU(e)){var i=Math.abs(t.reduce((r,a)=>r+(a<0?-1:a>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+ge(t))}return t}function yae(e,t,n){let i=t.bins;if(i&&!ie(i)){const r=e.domain(),a=r[0],s=rt(r),l=i.step;let c=i.start==null?a:i.start,f=i.stop==null?s:i.stop;l||ee("Scale bins parameter missing step property."),c<a&&(c=l*Math.ceil(a/l)),f>s&&(f=l*Math.floor(s/l)),i=rr(c,f+l/2,l)}return i?e.bins=i:e.bins&&delete e.bins,e.type===Q3&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function vae(e,t,n){var i=e.type,r=t.round||!1,a=t.range;if(t.rangeStep!=null)a=bae(i,t,n);else if(t.scheme&&(a=xae(i,t,n),He(a))){if(e.interpolator)return e.interpolator(a);ee(`Scale type ${i} does not support interpolating color schemes.`)}if(a&&oU(i))return e.interpolator(db(zw(a,t.reverse),t.interpolate,t.interpolateGamma));a&&t.interpolate&&e.interpolate?e.interpolate(eT(t.interpolate,t.interpolateGamma)):He(e.round)?e.round(r):He(e.rangeRound)&&e.interpolate(r?Up:Ol),a&&e.range(zw(a,t.reverse))}function bae(e,t,n){e!==eU&&e!==xw&&ee("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,r=e===xw?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*V3(n,r,i)]}function xae(e,t,n){var i=t.schemeExtent,r,a;return ie(t.scheme)?a=db(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),a=tT(r),a||ee(`Unrecognized scheme name: ${t.scheme}`)),n=e===fb?n+1:e===Q3?n-1:e===Jf||e===cb?+t.schemeCount||uae:n,oU(e)?U6(a,i,t.reverse):He(a)?cU(U6(a,i),n):e===W3?a:a.slice(0,n)}function U6(e,t,n){return He(e)&&(t||n)?uU(e,zw(t||[0,1],n)):e}function zw(e,t){return t?e.slice().reverse():e}function ZB(e){J.call(this,null,e)}ye(ZB,J,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(fc(e.sort)),this.modified(n),t}});const B6="zero",KB="center",JB="normalize",ej=["y0","y1"];function qT(e){J.call(this,null,e)}qT.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:B6,values:[B6,KB,JB]},{name:"as",type:"string",array:!0,length:2,default:ej}]};ye(qT,J,{transform(e,t){var n=e.as||ej,i=n[0],r=n[1],a=fc(e.sort),s=e.field||Ad,l=e.offset===KB?Sae:e.offset===JB?Eae:_ae,c,f,d,g;for(c=wae(t.source,e.groupby,a,s),f=0,d=c.length,g=c.max;f<d;++f)l(c[f],g,s,i,r);return t.reflow(e.modified()).modifies(n)}});function Sae(e,t,n,i,r){for(var a=(t-e.sum)/2,s=e.length,l=0,c;l<s;++l)c=e[l],c[i]=a,c[r]=a+=Math.abs(n(c))}function Eae(e,t,n,i,r){for(var a=1/e.sum,s=0,l=e.length,c=0,f=0,d;c<l;++c)d=e[c],d[i]=s,d[r]=s=a*(f+=Math.abs(n(d)))}function _ae(e,t,n,i,r){for(var a=0,s=0,l=e.length,c=0,f,d;c<l;++c)d=e[c],f=+n(d),f<0?(d[i]=s,d[r]=s+=f):(d[i]=a,d[r]=a+=f)}function wae(e,t,n,i){var r=[],a=b=>b(d),s,l,c,f,d,g,p,y,v;if(t==null)r.push(e.slice());else for(s={},l=0,c=e.length;l<c;++l)d=e[l],g=t.map(a),p=s[g],p||(s[g]=p=[],r.push(p)),p.push(d);for(g=0,v=0,f=r.length;g<f;++g){for(p=r[g],l=0,y=0,c=p.length;l<c;++l)y+=Math.abs(i(p[l]));p.sum=y,y>v&&(v=y),n&&p.sort(n)}return r.max=v,r}const Aae=Object.freeze(Object.defineProperty({__proto__:null,axisticks:qB,datajoin:IB,encode:PB,legendentries:HB,linkpath:BT,pie:jT,scale:WB,sortitems:ZB,stack:qT},Symbol.toStringTag,{value:"Module"}));var Ne=1e-6,Dy=1e-12,Ve=Math.PI,Xt=Ve/2,Oy=Ve/4,vi=Ve*2,Zt=180/Ve,Ye=Ve/180,it=Math.abs,Bd=Math.atan,Br=Math.atan2,Re=Math.cos,t1=Math.ceil,tj=Math.exp,Fw=Math.hypot,Ny=Math.log,RE=Math.pow,De=Math.sin,kr=Math.sign||function(e){return e>0?1:e<0?-1:0},bi=Math.sqrt,IT=Math.tan;function nj(e){return e>1?0:e<-1?Ve:Math.acos(e)}function Ui(e){return e>1?Xt:e<-1?-Xt:Math.asin(e)}function Bn(){}function Ry(e,t){e&&q6.hasOwnProperty(e.type)&&q6[e.type](e,t)}var j6={Feature:function(e,t){Ry(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)Ry(n[i].geometry,t)}},q6={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){Lw(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)Lw(n[i],t,0)},Polygon:function(e,t){I6(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)I6(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)Ry(n[i],t)}};function Lw(e,t,n){var i=-1,r=e.length-n,a;for(t.lineStart();++i<r;)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function I6(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)Lw(e[n],t,1);t.polygonEnd()}function js(e,t){e&&j6.hasOwnProperty(e.type)?j6[e.type](e,t):Ry(e,t)}var zy=new mi,Fy=new mi,ij,rj,Uw,Bw,jw,Za={point:Bn,lineStart:Bn,lineEnd:Bn,polygonStart:function(){zy=new mi,Za.lineStart=Cae,Za.lineEnd=Tae},polygonEnd:function(){var e=+zy;Fy.add(e<0?vi+e:e),this.lineStart=this.lineEnd=this.point=Bn},sphere:function(){Fy.add(vi)}};function Cae(){Za.point=Mae}function Tae(){aj(ij,rj)}function Mae(e,t){Za.point=aj,ij=e,rj=t,e*=Ye,t*=Ye,Uw=e,Bw=Re(t=t/2+Oy),jw=De(t)}function aj(e,t){e*=Ye,t*=Ye,t=t/2+Oy;var n=e-Uw,i=n>=0?1:-1,r=i*n,a=Re(t),s=De(t),l=jw*s,c=Bw*a+l*Re(r),f=l*i*De(r);zy.add(Br(f,c)),Uw=e,Bw=a,jw=s}function $ae(e){return Fy=new mi,js(e,Za),Fy*2}function Ly(e){return[Br(e[1],e[0]),Ui(e[2])]}function Yu(e){var t=e[0],n=e[1],i=Re(n);return[i*Re(t),i*De(t),De(n)]}function n1(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ad(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function zE(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function i1(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Uy(e){var t=bi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Bt,Oi,Gt,nr,xu,sj,oj,Lf,Hg,Wo,ro,Us={point:qw,lineStart:P6,lineEnd:H6,polygonStart:function(){Us.point=uj,Us.lineStart=kae,Us.lineEnd=Dae,Hg=new mi,Za.polygonStart()},polygonEnd:function(){Za.polygonEnd(),Us.point=qw,Us.lineStart=P6,Us.lineEnd=H6,zy<0?(Bt=-(Gt=180),Oi=-(nr=90)):Hg>Ne?nr=90:Hg<-Ne&&(Oi=-90),ro[0]=Bt,ro[1]=Gt},sphere:function(){Bt=-(Gt=180),Oi=-(nr=90)}};function qw(e,t){Wo.push(ro=[Bt=e,Gt=e]),t<Oi&&(Oi=t),t>nr&&(nr=t)}function lj(e,t){var n=Yu([e*Ye,t*Ye]);if(Lf){var i=ad(Lf,n),r=[i[1],-i[0],0],a=ad(r,i);Uy(a),a=Ly(a);var s=e-xu,l=s>0?1:-1,c=a[0]*Zt*l,f,d=it(s)>180;d^(l*xu<c&&c<l*e)?(f=a[1]*Zt,f>nr&&(nr=f)):(c=(c+360)%360-180,d^(l*xu<c&&c<l*e)?(f=-a[1]*Zt,f<Oi&&(Oi=f)):(t<Oi&&(Oi=t),t>nr&&(nr=t))),d?e<xu?tr(Bt,e)>tr(Bt,Gt)&&(Gt=e):tr(e,Gt)>tr(Bt,Gt)&&(Bt=e):Gt>=Bt?(e<Bt&&(Bt=e),e>Gt&&(Gt=e)):e>xu?tr(Bt,e)>tr(Bt,Gt)&&(Gt=e):tr(e,Gt)>tr(Bt,Gt)&&(Bt=e)}else Wo.push(ro=[Bt=e,Gt=e]);t<Oi&&(Oi=t),t>nr&&(nr=t),Lf=n,xu=e}function P6(){Us.point=lj}function H6(){ro[0]=Bt,ro[1]=Gt,Us.point=qw,Lf=null}function uj(e,t){if(Lf){var n=e-xu;Hg.add(it(n)>180?n+(n>0?360:-360):n)}else sj=e,oj=t;Za.point(e,t),lj(e,t)}function kae(){Za.lineStart()}function Dae(){uj(sj,oj),Za.lineEnd(),it(Hg)>Ne&&(Bt=-(Gt=180)),ro[0]=Bt,ro[1]=Gt,Lf=null}function tr(e,t){return(t-=e)<0?t+360:t}function Oae(e,t){return e[0]-t[0]}function G6(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Nae(e){var t,n,i,r,a,s,l;if(nr=Gt=-(Bt=Oi=1/0),Wo=[],js(e,Us),n=Wo.length){for(Wo.sort(Oae),t=1,i=Wo[0],a=[i];t<n;++t)r=Wo[t],G6(i,r[0])||G6(i,r[1])?(tr(i[0],r[1])>tr(i[0],i[1])&&(i[1]=r[1]),tr(r[0],i[1])>tr(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(s=-1/0,n=a.length-1,t=0,i=a[n];t<=n;i=r,++t)r=a[t],(l=tr(i[1],r[0]))>s&&(s=l,Bt=r[0],Gt=i[1])}return Wo=ro=null,Bt===1/0||Oi===1/0?[[NaN,NaN],[NaN,NaN]]:[[Bt,Oi],[Gt,nr]]}var Tg,By,jy,qy,Iy,Py,Hy,Gy,Iw,Pw,Hw,cj,fj,ci,fi,di,aa={sphere:Bn,point:PT,lineStart:Y6,lineEnd:X6,polygonStart:function(){aa.lineStart=Fae,aa.lineEnd=Lae},polygonEnd:function(){aa.lineStart=Y6,aa.lineEnd=X6}};function PT(e,t){e*=Ye,t*=Ye;var n=Re(t);Jp(n*Re(e),n*De(e),De(t))}function Jp(e,t,n){++Tg,jy+=(e-jy)/Tg,qy+=(t-qy)/Tg,Iy+=(n-Iy)/Tg}function Y6(){aa.point=Rae}function Rae(e,t){e*=Ye,t*=Ye;var n=Re(t);ci=n*Re(e),fi=n*De(e),di=De(t),aa.point=zae,Jp(ci,fi,di)}function zae(e,t){e*=Ye,t*=Ye;var n=Re(t),i=n*Re(e),r=n*De(e),a=De(t),s=Br(bi((s=fi*a-di*r)*s+(s=di*i-ci*a)*s+(s=ci*r-fi*i)*s),ci*i+fi*r+di*a);By+=s,Py+=s*(ci+(ci=i)),Hy+=s*(fi+(fi=r)),Gy+=s*(di+(di=a)),Jp(ci,fi,di)}function X6(){aa.point=PT}function Fae(){aa.point=Uae}function Lae(){dj(cj,fj),aa.point=PT}function Uae(e,t){cj=e,fj=t,e*=Ye,t*=Ye,aa.point=dj;var n=Re(t);ci=n*Re(e),fi=n*De(e),di=De(t),Jp(ci,fi,di)}function dj(e,t){e*=Ye,t*=Ye;var n=Re(t),i=n*Re(e),r=n*De(e),a=De(t),s=fi*a-di*r,l=di*i-ci*a,c=ci*r-fi*i,f=Fw(s,l,c),d=Ui(f),g=f&&-d/f;Iw.add(g*s),Pw.add(g*l),Hw.add(g*c),By+=d,Py+=d*(ci+(ci=i)),Hy+=d*(fi+(fi=r)),Gy+=d*(di+(di=a)),Jp(ci,fi,di)}function Bae(e){Tg=By=jy=qy=Iy=Py=Hy=Gy=0,Iw=new mi,Pw=new mi,Hw=new mi,js(e,aa);var t=+Iw,n=+Pw,i=+Hw,r=Fw(t,n,i);return r<Dy&&(t=Py,n=Hy,i=Gy,By<Ne&&(t=jy,n=qy,i=Iy),r=Fw(t,n,i),r<Dy)?[NaN,NaN]:[Br(n,t)*Zt,Ui(i/r)*Zt]}function Gw(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function Yw(e,t){return it(e)>Ve&&(e-=Math.round(e/vi)*vi),[e,t]}Yw.invert=Yw;function hj(e,t,n){return(e%=vi)?t||n?Gw(W6(e),Q6(t,n)):W6(e):t||n?Q6(t,n):Yw}function V6(e){return function(t,n){return t+=e,it(t)>Ve&&(t-=Math.round(t/vi)*vi),[t,n]}}function W6(e){var t=V6(e);return t.invert=V6(-e),t}function Q6(e,t){var n=Re(e),i=De(e),r=Re(t),a=De(t);function s(l,c){var f=Re(c),d=Re(l)*f,g=De(l)*f,p=De(c),y=p*n+d*i;return[Br(g*r-y*a,d*n-p*i),Ui(y*r+g*a)]}return s.invert=function(l,c){var f=Re(c),d=Re(l)*f,g=De(l)*f,p=De(c),y=p*r-g*a;return[Br(g*r+p*a,d*n+y*i),Ui(y*n-d*i)]},s}function jae(e){e=hj(e[0]*Ye,e[1]*Ye,e.length>2?e[2]*Ye:0);function t(n){return n=e(n[0]*Ye,n[1]*Ye),n[0]*=Zt,n[1]*=Zt,n}return t.invert=function(n){return n=e.invert(n[0]*Ye,n[1]*Ye),n[0]*=Zt,n[1]*=Zt,n},t}function qae(e,t,n,i,r,a){if(n){var s=Re(t),l=De(t),c=i*n;r==null?(r=t+i*vi,a=t-c/2):(r=Z6(s,r),a=Z6(s,a),(i>0?r<a:r>a)&&(r+=i*vi));for(var f,d=r;i>0?d>a:d<a;d-=c)f=Ly([s,-l*Re(d),-l*De(d)]),e.point(f[0],f[1])}}function Z6(e,t){t=Yu(t),t[0]-=e,Uy(t);var n=nj(-t[1]);return((-t[2]<0?-n:n)+vi-Ne)%vi}function gj(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Bn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function B1(e,t){return it(e[0]-t[0])<Ne&&it(e[1]-t[1])<Ne}function r1(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function pj(e,t,n,i,r){var a=[],s=[],l,c;if(e.forEach(function(v){if(!((b=v.length-1)<=0)){var b,S=v[0],_=v[b],w;if(B1(S,_)){if(!S[2]&&!_[2]){for(r.lineStart(),l=0;l<b;++l)r.point((S=v[l])[0],S[1]);r.lineEnd();return}_[0]+=2*Ne}a.push(w=new r1(S,v,null,!0)),s.push(w.o=new r1(S,null,w,!1)),a.push(w=new r1(_,v,null,!1)),s.push(w.o=new r1(_,null,w,!0))}}),!!a.length){for(s.sort(t),K6(a),K6(s),l=0,c=s.length;l<c;++l)s[l].e=n=!n;for(var f=a[0],d,g;;){for(var p=f,y=!0;p.v;)if((p=p.n)===f)return;d=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(y)for(l=0,c=d.length;l<c;++l)r.point((g=d[l])[0],g[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(y)for(d=p.p.z,l=d.length-1;l>=0;--l)r.point((g=d[l])[0],g[1]);else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,d=p.z,y=!y}while(!p.v);r.lineEnd()}}}function K6(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function FE(e){return it(e[0])<=Ve?e[0]:kr(e[0])*((it(e[0])+Ve)%vi-Ve)}function Iae(e,t){var n=FE(t),i=t[1],r=De(i),a=[De(n),-Re(n),0],s=0,l=0,c=new mi;r===1?i=Xt+Ne:r===-1&&(i=-Xt-Ne);for(var f=0,d=e.length;f<d;++f)if(p=(g=e[f]).length)for(var g,p,y=g[p-1],v=FE(y),b=y[1]/2+Oy,S=De(b),_=Re(b),w=0;w<p;++w,v=T,S=k,_=M,y=A){var A=g[w],T=FE(A),$=A[1]/2+Oy,k=De($),M=Re($),N=T-v,z=N>=0?1:-1,j=z*N,U=j>Ve,X=S*k;if(c.add(Br(X*z*De(j),_*M+X*Re(j))),s+=U?N+z*vi:N,U^v>=n^T>=n){var H=ad(Yu(y),Yu(A));Uy(H);var q=ad(a,H);Uy(q);var R=(U^N>=0?-1:1)*Ui(q[2]);(i>R||i===R&&(H[0]||H[1]))&&(l+=U^N>=0?1:-1)}}return(s<-Ne||s<Ne&&c<-Dy)^l&1}function mj(e,t,n,i){return function(r){var a=t(r),s=gj(),l=t(s),c=!1,f,d,g,p={point:y,lineStart:b,lineEnd:S,polygonStart:function(){p.point=_,p.lineStart=w,p.lineEnd=A,d=[],f=[]},polygonEnd:function(){p.point=y,p.lineStart=b,p.lineEnd=S,d=o9(d);var T=Iae(f,i);d.length?(c||(r.polygonStart(),c=!0),pj(d,Hae,T,n,r)):T&&(c||(r.polygonStart(),c=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),c&&(r.polygonEnd(),c=!1),d=f=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function y(T,$){e(T,$)&&r.point(T,$)}function v(T,$){a.point(T,$)}function b(){p.point=v,a.lineStart()}function S(){p.point=y,a.lineEnd()}function _(T,$){g.push([T,$]),l.point(T,$)}function w(){l.lineStart(),g=[]}function A(){_(g[0][0],g[0][1]),l.lineEnd();var T=l.clean(),$=s.result(),k,M=$.length,N,z,j;if(g.pop(),f.push(g),g=null,!!M){if(T&1){if(z=$[0],(N=z.length-1)>0){for(c||(r.polygonStart(),c=!0),r.lineStart(),k=0;k<N;++k)r.point((j=z[k])[0],j[1]);r.lineEnd()}return}M>1&&T&2&&$.push($.pop().concat($.shift())),d.push($.filter(Pae))}}return p}}function Pae(e){return e.length>1}function Hae(e,t){return((e=e.x)[0]<0?e[1]-Xt-Ne:Xt-e[1])-((t=t.x)[0]<0?t[1]-Xt-Ne:Xt-t[1])}const J6=mj(function(){return!0},Gae,Xae,[-Ve,-Xt]);function Gae(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(a,s){var l=a>0?Ve:-Ve,c=it(a-t);it(c-Ve)<Ne?(e.point(t,n=(n+s)/2>0?Xt:-Xt),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(l,n),e.point(a,n),r=0):i!==l&&c>=Ve&&(it(t-i)<Ne&&(t-=i*Ne),it(a-l)<Ne&&(a-=l*Ne),n=Yae(t,n,a,s),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(l,n),r=0),e.point(t=a,n=s),i=l},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function Yae(e,t,n,i){var r,a,s=De(e-n);return it(s)>Ne?Bd((De(t)*(a=Re(i))*De(n)-De(i)*(r=Re(t))*De(e))/(r*a*s)):(t+i)/2}function Xae(e,t,n,i){var r;if(e==null)r=n*Xt,i.point(-Ve,r),i.point(0,r),i.point(Ve,r),i.point(Ve,0),i.point(Ve,-r),i.point(0,-r),i.point(-Ve,-r),i.point(-Ve,0),i.point(-Ve,r);else if(it(e[0]-t[0])>Ne){var a=e[0]<t[0]?Ve:-Ve;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function Vae(e){var t=Re(e),n=2*Ye,i=t>0,r=it(t)>Ne;function a(d,g,p,y){qae(y,e,n,p,d,g)}function s(d,g){return Re(d)*Re(g)>t}function l(d){var g,p,y,v,b;return{lineStart:function(){v=y=!1,b=1},point:function(S,_){var w=[S,_],A,T=s(S,_),$=i?T?0:f(S,_):T?f(S+(S<0?Ve:-Ve),_):0;if(!g&&(v=y=T)&&d.lineStart(),T!==y&&(A=c(g,w),(!A||B1(g,A)||B1(w,A))&&(w[2]=1)),T!==y)b=0,T?(d.lineStart(),A=c(w,g),d.point(A[0],A[1])):(A=c(g,w),d.point(A[0],A[1],2),d.lineEnd()),g=A;else if(r&&g&&i^T){var k;!($&p)&&(k=c(w,g,!0))&&(b=0,i?(d.lineStart(),d.point(k[0][0],k[0][1]),d.point(k[1][0],k[1][1]),d.lineEnd()):(d.point(k[1][0],k[1][1]),d.lineEnd(),d.lineStart(),d.point(k[0][0],k[0][1],3)))}T&&(!g||!B1(g,w))&&d.point(w[0],w[1]),g=w,y=T,p=$},lineEnd:function(){y&&d.lineEnd(),g=null},clean:function(){return b|(v&&y)<<1}}}function c(d,g,p){var y=Yu(d),v=Yu(g),b=[1,0,0],S=ad(y,v),_=n1(S,S),w=S[0],A=_-w*w;if(!A)return!p&&d;var T=t*_/A,$=-t*w/A,k=ad(b,S),M=i1(b,T),N=i1(S,$);zE(M,N);var z=k,j=n1(M,z),U=n1(z,z),X=j*j-U*(n1(M,M)-1);if(!(X<0)){var H=bi(X),q=i1(z,(-j-H)/U);if(zE(q,M),q=Ly(q),!p)return q;var R=d[0],O=g[0],B=d[1],Y=g[1],Z;O<R&&(Z=R,R=O,O=Z);var oe=O-R,F=it(oe-Ve)<Ne,G=F||oe<Ne;if(!F&&Y<B&&(Z=B,B=Y,Y=Z),G?F?B+Y>0^q[1]<(it(q[0]-R)<Ne?B:Y):B<=q[1]&&q[1]<=Y:oe>Ve^(R<=q[0]&&q[0]<=O)){var ae=i1(z,(-j+H)/U);return zE(ae,M),[q,Ly(ae)]}}}function f(d,g){var p=i?e:Ve-e,y=0;return d<-p?y|=1:d>p&&(y|=2),g<-p?y|=4:g>p&&(y|=8),y}return mj(s,l,a,i?[0,-e]:[-Ve,e-Ve])}function Wae(e,t,n,i,r,a){var s=e[0],l=e[1],c=t[0],f=t[1],d=0,g=1,p=c-s,y=f-l,v;if(v=n-s,!(!p&&v>0)){if(v/=p,p<0){if(v<d)return;v<g&&(g=v)}else if(p>0){if(v>g)return;v>d&&(d=v)}if(v=r-s,!(!p&&v<0)){if(v/=p,p<0){if(v>g)return;v>d&&(d=v)}else if(p>0){if(v<d)return;v<g&&(g=v)}if(v=i-l,!(!y&&v>0)){if(v/=y,y<0){if(v<d)return;v<g&&(g=v)}else if(y>0){if(v>g)return;v>d&&(d=v)}if(v=a-l,!(!y&&v<0)){if(v/=y,y<0){if(v>g)return;v>d&&(d=v)}else if(y>0){if(v<d)return;v<g&&(g=v)}return d>0&&(e[0]=s+d*p,e[1]=l+d*y),g<1&&(t[0]=s+g*p,t[1]=l+g*y),!0}}}}}var Mg=1e9,a1=-Mg;function yj(e,t,n,i){function r(f,d){return e<=f&&f<=n&&t<=d&&d<=i}function a(f,d,g,p){var y=0,v=0;if(f==null||(y=s(f,g))!==(v=s(d,g))||c(f,d)<0^g>0)do p.point(y===0||y===3?e:n,y>1?i:t);while((y=(y+g+4)%4)!==v);else p.point(d[0],d[1])}function s(f,d){return it(f[0]-e)<Ne?d>0?0:3:it(f[0]-n)<Ne?d>0?2:1:it(f[1]-t)<Ne?d>0?1:0:d>0?3:2}function l(f,d){return c(f.x,d.x)}function c(f,d){var g=s(f,1),p=s(d,1);return g!==p?g-p:g===0?d[1]-f[1]:g===1?f[0]-d[0]:g===2?f[1]-d[1]:d[0]-f[0]}return function(f){var d=f,g=gj(),p,y,v,b,S,_,w,A,T,$,k,M={point:N,lineStart:X,lineEnd:H,polygonStart:j,polygonEnd:U};function N(R,O){r(R,O)&&d.point(R,O)}function z(){for(var R=0,O=0,B=y.length;O<B;++O)for(var Y=y[O],Z=1,oe=Y.length,F=Y[0],G,ae,he=F[0],me=F[1];Z<oe;++Z)G=he,ae=me,F=Y[Z],he=F[0],me=F[1],ae<=i?me>i&&(he-G)*(i-ae)>(me-ae)*(e-G)&&++R:me<=i&&(he-G)*(i-ae)<(me-ae)*(e-G)&&--R;return R}function j(){d=g,p=[],y=[],k=!0}function U(){var R=z(),O=k&&R,B=(p=o9(p)).length;(O||B)&&(f.polygonStart(),O&&(f.lineStart(),a(null,null,1,f),f.lineEnd()),B&&pj(p,l,R,a,f),f.polygonEnd()),d=f,p=y=v=null}function X(){M.point=q,y&&y.push(v=[]),$=!0,T=!1,w=A=NaN}function H(){p&&(q(b,S),_&&T&&g.rejoin(),p.push(g.result())),M.point=N,T&&d.lineEnd()}function q(R,O){var B=r(R,O);if(y&&v.push([R,O]),$)b=R,S=O,_=B,$=!1,B&&(d.lineStart(),d.point(R,O));else if(B&&T)d.point(R,O);else{var Y=[w=Math.max(a1,Math.min(Mg,w)),A=Math.max(a1,Math.min(Mg,A))],Z=[R=Math.max(a1,Math.min(Mg,R)),O=Math.max(a1,Math.min(Mg,O))];Wae(Y,Z,e,t,n,i)?(T||(d.lineStart(),d.point(Y[0],Y[1])),d.point(Z[0],Z[1]),B||d.lineEnd(),k=!1):B&&(d.lineStart(),d.point(R,O),k=!1)}w=R,A=O,T=B}return M}}function e4(e,t,n){var i=rr(e,t-Ne,n).concat(t);return function(r){return i.map(function(a){return[r,a]})}}function t4(e,t,n){var i=rr(e,t-Ne,n).concat(t);return function(r){return i.map(function(a){return[a,r]})}}function Qae(){var e,t,n,i,r,a,s,l,c=10,f=c,d=90,g=360,p,y,v,b,S=2.5;function _(){return{type:"MultiLineString",coordinates:w()}}function w(){return rr(t1(i/d)*d,n,d).map(v).concat(rr(t1(l/g)*g,s,g).map(b)).concat(rr(t1(t/c)*c,e,c).filter(function(A){return it(A%d)>Ne}).map(p)).concat(rr(t1(a/f)*f,r,f).filter(function(A){return it(A%g)>Ne}).map(y))}return _.lines=function(){return w().map(function(A){return{type:"LineString",coordinates:A}})},_.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(b(s).slice(1),v(n).reverse().slice(1),b(l).reverse().slice(1))]}},_.extent=function(A){return arguments.length?_.extentMajor(A).extentMinor(A):_.extentMinor()},_.extentMajor=function(A){return arguments.length?(i=+A[0][0],n=+A[1][0],l=+A[0][1],s=+A[1][1],i>n&&(A=i,i=n,n=A),l>s&&(A=l,l=s,s=A),_.precision(S)):[[i,l],[n,s]]},_.extentMinor=function(A){return arguments.length?(t=+A[0][0],e=+A[1][0],a=+A[0][1],r=+A[1][1],t>e&&(A=t,t=e,e=A),a>r&&(A=a,a=r,r=A),_.precision(S)):[[t,a],[e,r]]},_.step=function(A){return arguments.length?_.stepMajor(A).stepMinor(A):_.stepMinor()},_.stepMajor=function(A){return arguments.length?(d=+A[0],g=+A[1],_):[d,g]},_.stepMinor=function(A){return arguments.length?(c=+A[0],f=+A[1],_):[c,f]},_.precision=function(A){return arguments.length?(S=+A,p=e4(a,r,90),y=t4(t,e,S),v=e4(l,s,90),b=t4(i,n,S),_):S},_.extentMajor([[-180,-90+Ne],[180,90-Ne]]).extentMinor([[-180,-80-Ne],[180,80+Ne]])}const dp=e=>e;var LE=new mi,Xw=new mi,vj,bj,Vw,Ww,qs={point:Bn,lineStart:Bn,lineEnd:Bn,polygonStart:function(){qs.lineStart=Zae,qs.lineEnd=Jae},polygonEnd:function(){qs.lineStart=qs.lineEnd=qs.point=Bn,LE.add(it(Xw)),Xw=new mi},result:function(){var e=LE/2;return LE=new mi,e}};function Zae(){qs.point=Kae}function Kae(e,t){qs.point=xj,vj=Vw=e,bj=Ww=t}function xj(e,t){Xw.add(Ww*e-Vw*t),Vw=e,Ww=t}function Jae(){xj(vj,bj)}var sd=1/0,Yy=sd,hp=-sd,Xy=hp,Vy={point:ese,lineStart:Bn,lineEnd:Bn,polygonStart:Bn,polygonEnd:Bn,result:function(){var e=[[sd,Yy],[hp,Xy]];return hp=Xy=-(Yy=sd=1/0),e}};function ese(e,t){e<sd&&(sd=e),e>hp&&(hp=e),t<Yy&&(Yy=t),t>Xy&&(Xy=t)}var Qw=0,Zw=0,$g=0,Wy=0,Qy=0,kf=0,Kw=0,Jw=0,kg=0,Sj,Ej,La,Ua,Mr={point:Xu,lineStart:n4,lineEnd:i4,polygonStart:function(){Mr.lineStart=ise,Mr.lineEnd=rse},polygonEnd:function(){Mr.point=Xu,Mr.lineStart=n4,Mr.lineEnd=i4},result:function(){var e=kg?[Kw/kg,Jw/kg]:kf?[Wy/kf,Qy/kf]:$g?[Qw/$g,Zw/$g]:[NaN,NaN];return Qw=Zw=$g=Wy=Qy=kf=Kw=Jw=kg=0,e}};function Xu(e,t){Qw+=e,Zw+=t,++$g}function n4(){Mr.point=tse}function tse(e,t){Mr.point=nse,Xu(La=e,Ua=t)}function nse(e,t){var n=e-La,i=t-Ua,r=bi(n*n+i*i);Wy+=r*(La+e)/2,Qy+=r*(Ua+t)/2,kf+=r,Xu(La=e,Ua=t)}function i4(){Mr.point=Xu}function ise(){Mr.point=ase}function rse(){_j(Sj,Ej)}function ase(e,t){Mr.point=_j,Xu(Sj=La=e,Ej=Ua=t)}function _j(e,t){var n=e-La,i=t-Ua,r=bi(n*n+i*i);Wy+=r*(La+e)/2,Qy+=r*(Ua+t)/2,kf+=r,r=Ua*e-La*t,Kw+=r*(La+e),Jw+=r*(Ua+t),kg+=r*3,Xu(La=e,Ua=t)}function wj(e){this._context=e}wj.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,vi);break}}},result:Bn};var eA=new mi,UE,Aj,Cj,Dg,Og,gp={point:Bn,lineStart:function(){gp.point=sse},lineEnd:function(){UE&&Tj(Aj,Cj),gp.point=Bn},polygonStart:function(){UE=!0},polygonEnd:function(){UE=null},result:function(){var e=+eA;return eA=new mi,e}};function sse(e,t){gp.point=Tj,Aj=Dg=e,Cj=Og=t}function Tj(e,t){Dg-=e,Og-=t,eA.add(bi(Dg*Dg+Og*Og)),Dg=e,Og=t}let r4,Zy,a4,s4;class o4{constructor(t){this._append=t==null?Mj:ose(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==a4||this._append!==Zy){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,a4=i,Zy=this._append,s4=this._,this._=r}this._+=s4;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Mj(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ose(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Mj;if(t!==r4){const n=10**t;r4=t,Zy=function(r){let a=1;this._+=r[0];for(const s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}return Zy}function $j(e,t){let n=3,i=4.5,r,a;function s(l){return l&&(typeof i=="function"&&a.pointRadius(+i.apply(this,arguments)),js(l,r(a))),a.result()}return s.area=function(l){return js(l,r(qs)),qs.result()},s.measure=function(l){return js(l,r(gp)),gp.result()},s.bounds=function(l){return js(l,r(Vy)),Vy.result()},s.centroid=function(l){return js(l,r(Mr)),Mr.result()},s.projection=function(l){return arguments.length?(r=l==null?(e=null,dp):(e=l).stream,s):e},s.context=function(l){return arguments.length?(a=l==null?(t=null,new o4(n)):new wj(t=l),typeof i!="function"&&a.pointRadius(i),s):t},s.pointRadius=function(l){return arguments.length?(i=typeof l=="function"?l:(a.pointRadius(+l),+l),s):i},s.digits=function(l){if(!arguments.length)return n;if(l==null)n=null;else{const c=Math.floor(l);if(!(c>=0))throw new RangeError(`invalid digits: ${l}`);n=c}return t===null&&(a=new o4(n)),s},s.projection(e).digits(n).context(t)}function Ab(e){return function(t){var n=new tA;for(var i in e)n[i]=e[i];return n.stream=t,n}}function tA(){}tA.prototype={constructor:tA,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function HT(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),js(n,e.stream(Vy)),t(Vy.result()),i!=null&&e.clipExtent(i),e}function Cb(e,t,n){return HT(e,function(i){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],s=Math.min(r/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),l=+t[0][0]+(r-s*(i[1][0]+i[0][0]))/2,c=+t[0][1]+(a-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([l,c])},n)}function GT(e,t,n){return Cb(e,[[0,0],t],n)}function YT(e,t,n){return HT(e,function(i){var r=+t,a=r/(i[1][0]-i[0][0]),s=(r-a*(i[1][0]+i[0][0]))/2,l=-a*i[0][1];e.scale(150*a).translate([s,l])},n)}function XT(e,t,n){return HT(e,function(i){var r=+t,a=r/(i[1][1]-i[0][1]),s=-a*i[0][0],l=(r-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([s,l])},n)}var l4=16,lse=Re(30*Ye);function u4(e,t){return+t?cse(e,t):use(e)}function use(e){return Ab({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function cse(e,t){function n(i,r,a,s,l,c,f,d,g,p,y,v,b,S){var _=f-i,w=d-r,A=_*_+w*w;if(A>4*t&&b--){var T=s+p,$=l+y,k=c+v,M=bi(T*T+$*$+k*k),N=Ui(k/=M),z=it(it(k)-1)<Ne||it(a-g)<Ne?(a+g)/2:Br($,T),j=e(z,N),U=j[0],X=j[1],H=U-i,q=X-r,R=w*H-_*q;(R*R/A>t||it((_*H+w*q)/A-.5)>.3||s*p+l*y+c*v<lse)&&(n(i,r,a,s,l,c,U,X,z,T/=M,$/=M,k,b,S),S.point(U,X),n(U,X,z,T,$,k,f,d,g,p,y,v,b,S))}}return function(i){var r,a,s,l,c,f,d,g,p,y,v,b,S={point:_,lineStart:w,lineEnd:T,polygonStart:function(){i.polygonStart(),S.lineStart=$},polygonEnd:function(){i.polygonEnd(),S.lineStart=w}};function _(N,z){N=e(N,z),i.point(N[0],N[1])}function w(){g=NaN,S.point=A,i.lineStart()}function A(N,z){var j=Yu([N,z]),U=e(N,z);n(g,p,d,y,v,b,g=U[0],p=U[1],d=N,y=j[0],v=j[1],b=j[2],l4,i),i.point(g,p)}function T(){S.point=_,i.lineEnd()}function $(){w(),S.point=k,S.lineEnd=M}function k(N,z){A(r=N,z),a=g,s=p,l=y,c=v,f=b,S.point=A}function M(){n(g,p,d,y,v,b,a,s,r,l,c,f,l4,i),S.lineEnd=T,T()}return S}}var fse=Ab({point:function(e,t){this.stream.point(e*Ye,t*Ye)}});function dse(e){return Ab({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function hse(e,t,n,i,r){function a(s,l){return s*=i,l*=r,[t+e*s,n-e*l]}return a.invert=function(s,l){return[(s-t)/e*i,(n-l)/e*r]},a}function c4(e,t,n,i,r,a){if(!a)return hse(e,t,n,i,r);var s=Re(a),l=De(a),c=s*e,f=l*e,d=s/e,g=l/e,p=(l*n-s*t)/e,y=(l*t+s*n)/e;function v(b,S){return b*=i,S*=r,[c*b-f*S+t,n-f*b-c*S]}return v.invert=function(b,S){return[i*(d*b-g*S+p),r*(y-g*b-d*S)]},v}function ss(e){return kj(function(){return e})()}function kj(e){var t,n=150,i=480,r=250,a=0,s=0,l=0,c=0,f=0,d,g=0,p=1,y=1,v=null,b=J6,S=null,_,w,A,T=dp,$=.5,k,M,N,z,j;function U(R){return N(R[0]*Ye,R[1]*Ye)}function X(R){return R=N.invert(R[0],R[1]),R&&[R[0]*Zt,R[1]*Zt]}U.stream=function(R){return z&&j===R?z:z=fse(dse(d)(b(k(T(j=R)))))},U.preclip=function(R){return arguments.length?(b=R,v=void 0,q()):b},U.postclip=function(R){return arguments.length?(T=R,S=_=w=A=null,q()):T},U.clipAngle=function(R){return arguments.length?(b=+R?Vae(v=R*Ye):(v=null,J6),q()):v*Zt},U.clipExtent=function(R){return arguments.length?(T=R==null?(S=_=w=A=null,dp):yj(S=+R[0][0],_=+R[0][1],w=+R[1][0],A=+R[1][1]),q()):S==null?null:[[S,_],[w,A]]},U.scale=function(R){return arguments.length?(n=+R,H()):n},U.translate=function(R){return arguments.length?(i=+R[0],r=+R[1],H()):[i,r]},U.center=function(R){return arguments.length?(a=R[0]%360*Ye,s=R[1]%360*Ye,H()):[a*Zt,s*Zt]},U.rotate=function(R){return arguments.length?(l=R[0]%360*Ye,c=R[1]%360*Ye,f=R.length>2?R[2]%360*Ye:0,H()):[l*Zt,c*Zt,f*Zt]},U.angle=function(R){return arguments.length?(g=R%360*Ye,H()):g*Zt},U.reflectX=function(R){return arguments.length?(p=R?-1:1,H()):p<0},U.reflectY=function(R){return arguments.length?(y=R?-1:1,H()):y<0},U.precision=function(R){return arguments.length?(k=u4(M,$=R*R),q()):bi($)},U.fitExtent=function(R,O){return Cb(U,R,O)},U.fitSize=function(R,O){return GT(U,R,O)},U.fitWidth=function(R,O){return YT(U,R,O)},U.fitHeight=function(R,O){return XT(U,R,O)};function H(){var R=c4(n,0,0,p,y,g).apply(null,t(a,s)),O=c4(n,i-R[0],r-R[1],p,y,g);return d=hj(l,c,f),M=Gw(t,O),N=Gw(d,M),k=u4(M,$),q()}function q(){return z=j=null,U}return function(){return t=e.apply(this,arguments),U.invert=t.invert&&X,H()}}function VT(e){var t=0,n=Ve/3,i=kj(e),r=i(t,n);return r.parallels=function(a){return arguments.length?i(t=a[0]*Ye,n=a[1]*Ye):[t*Zt,n*Zt]},r}function gse(e){var t=Re(e);function n(i,r){return[i*t,De(r)/t]}return n.invert=function(i,r){return[i/t,Ui(r*t)]},n}function pse(e,t){var n=De(e),i=(n+De(t))/2;if(it(i)<Ne)return gse(e);var r=1+n*(2*i-n),a=bi(r)/i;function s(l,c){var f=bi(r-2*i*De(c))/i;return[f*De(l*=i),a-f*Re(l)]}return s.invert=function(l,c){var f=a-c,d=Br(l,it(f))*kr(f);return f*i<0&&(d-=Ve*kr(l)*kr(f)),[d/i,Ui((r-(l*l+f*f)*i*i)/(2*i))]},s}function Ky(){return VT(pse).scale(155.424).center([0,33.6442])}function Dj(){return Ky().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function mse(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function yse(){var e,t,n=Dj(),i,r=Ky().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,s=Ky().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,c,f={point:function(p,y){c=[p,y]}};function d(p){var y=p[0],v=p[1];return c=null,i.point(y,v),c||(a.point(y,v),c)||(l.point(y,v),c)}d.invert=function(p){var y=n.scale(),v=n.translate(),b=(p[0]-v[0])/y,S=(p[1]-v[1])/y;return(S>=.12&&S<.234&&b>=-.425&&b<-.214?r:S>=.166&&S<.234&&b>=-.214&&b<-.115?s:n).invert(p)},d.stream=function(p){return e&&t===p?e:e=mse([n.stream(t=p),r.stream(p),s.stream(p)])},d.precision=function(p){return arguments.length?(n.precision(p),r.precision(p),s.precision(p),g()):n.precision()},d.scale=function(p){return arguments.length?(n.scale(p),r.scale(p*.35),s.scale(p),d.translate(n.translate())):n.scale()},d.translate=function(p){if(!arguments.length)return n.translate();var y=n.scale(),v=+p[0],b=+p[1];return i=n.translate(p).clipExtent([[v-.455*y,b-.238*y],[v+.455*y,b+.238*y]]).stream(f),a=r.translate([v-.307*y,b+.201*y]).clipExtent([[v-.425*y+Ne,b+.12*y+Ne],[v-.214*y-Ne,b+.234*y-Ne]]).stream(f),l=s.translate([v-.205*y,b+.212*y]).clipExtent([[v-.214*y+Ne,b+.166*y+Ne],[v-.115*y-Ne,b+.234*y-Ne]]).stream(f),g()},d.fitExtent=function(p,y){return Cb(d,p,y)},d.fitSize=function(p,y){return GT(d,p,y)},d.fitWidth=function(p,y){return YT(d,p,y)},d.fitHeight=function(p,y){return XT(d,p,y)};function g(){return e=t=null,d}return d.scale(1070)}function Oj(e){return function(t,n){var i=Re(t),r=Re(n),a=e(i*r);return a===1/0?[2,0]:[a*r*De(t),a*De(n)]}}function em(e){return function(t,n){var i=bi(t*t+n*n),r=e(i),a=De(r),s=Re(r);return[Br(t*a,i*s),Ui(i&&n*a/i)]}}var Nj=Oj(function(e){return bi(2/(1+e))});Nj.invert=em(function(e){return 2*Ui(e/2)});function vse(){return ss(Nj).scale(124.75).clipAngle(180-.001)}var Rj=Oj(function(e){return(e=nj(e))&&e/De(e)});Rj.invert=em(function(e){return e});function bse(){return ss(Rj).scale(79.4188).clipAngle(180-.001)}function Tb(e,t){return[e,Ny(IT((Xt+t)/2))]}Tb.invert=function(e,t){return[e,2*Bd(tj(t))-Xt]};function xse(){return zj(Tb).scale(961/vi)}function zj(e){var t=ss(e),n=t.center,i=t.scale,r=t.translate,a=t.clipExtent,s=null,l,c,f;t.scale=function(g){return arguments.length?(i(g),d()):i()},t.translate=function(g){return arguments.length?(r(g),d()):r()},t.center=function(g){return arguments.length?(n(g),d()):n()},t.clipExtent=function(g){return arguments.length?(g==null?s=l=c=f=null:(s=+g[0][0],l=+g[0][1],c=+g[1][0],f=+g[1][1]),d()):s==null?null:[[s,l],[c,f]]};function d(){var g=Ve*i(),p=t(jae(t.rotate()).invert([0,0]));return a(s==null?[[p[0]-g,p[1]-g],[p[0]+g,p[1]+g]]:e===Tb?[[Math.max(p[0]-g,s),l],[Math.min(p[0]+g,c),f]]:[[s,Math.max(p[1]-g,l)],[c,Math.min(p[1]+g,f)]])}return d()}function s1(e){return IT((Xt+e)/2)}function Sse(e,t){var n=Re(e),i=e===t?De(e):Ny(n/Re(t))/Ny(s1(t)/s1(e)),r=n*RE(s1(e),i)/i;if(!i)return Tb;function a(s,l){r>0?l<-Xt+Ne&&(l=-Xt+Ne):l>Xt-Ne&&(l=Xt-Ne);var c=r/RE(s1(l),i);return[c*De(i*s),r-c*Re(i*s)]}return a.invert=function(s,l){var c=r-l,f=kr(i)*bi(s*s+c*c),d=Br(s,it(c))*kr(c);return c*i<0&&(d-=Ve*kr(s)*kr(c)),[d/i,2*Bd(RE(r/f,1/i))-Xt]},a}function Ese(){return VT(Sse).scale(109.5).parallels([30,30])}function Jy(e,t){return[e,t]}Jy.invert=Jy;function _se(){return ss(Jy).scale(152.63)}function wse(e,t){var n=Re(e),i=e===t?De(e):(n-Re(t))/(t-e),r=n/i+e;if(it(i)<Ne)return Jy;function a(s,l){var c=r-l,f=i*s;return[c*De(f),r-c*Re(f)]}return a.invert=function(s,l){var c=r-l,f=Br(s,it(c))*kr(c);return c*i<0&&(f-=Ve*kr(s)*kr(c)),[f/i,r-kr(i)*bi(s*s+c*c)]},a}function Ase(){return VT(wse).scale(131.154).center([0,13.9389])}var Gg=1.340264,Yg=-.081106,Xg=893e-6,Vg=.003796,ev=bi(3)/2,Cse=12;function Fj(e,t){var n=Ui(ev*De(t)),i=n*n,r=i*i*i;return[e*Re(n)/(ev*(Gg+3*Yg*i+r*(7*Xg+9*Vg*i))),n*(Gg+Yg*i+r*(Xg+Vg*i))]}Fj.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,a=0,s,l,c;a<Cse&&(l=n*(Gg+Yg*i+r*(Xg+Vg*i))-t,c=Gg+3*Yg*i+r*(7*Xg+9*Vg*i),n-=s=l/c,i=n*n,r=i*i*i,!(it(s)<Dy));++a);return[ev*e*(Gg+3*Yg*i+r*(7*Xg+9*Vg*i))/Re(n),Ui(De(n)/ev)]};function Tse(){return ss(Fj).scale(177.158)}function Lj(e,t){var n=Re(t),i=Re(e)*n;return[n*De(e)/i,De(t)/i]}Lj.invert=em(Bd);function Mse(){return ss(Lj).scale(144.049).clipAngle(60)}function $se(){var e=1,t=0,n=0,i=1,r=1,a=0,s,l,c=null,f,d,g,p=1,y=1,v=Ab({point:function(T,$){var k=A([T,$]);this.stream.point(k[0],k[1])}}),b=dp,S,_;function w(){return p=e*i,y=e*r,S=_=null,A}function A(T){var $=T[0]*p,k=T[1]*y;if(a){var M=k*s-$*l;$=$*s+k*l,k=M}return[$+t,k+n]}return A.invert=function(T){var $=T[0]-t,k=T[1]-n;if(a){var M=k*s+$*l;$=$*s-k*l,k=M}return[$/p,k/y]},A.stream=function(T){return S&&_===T?S:S=v(b(_=T))},A.postclip=function(T){return arguments.length?(b=T,c=f=d=g=null,w()):b},A.clipExtent=function(T){return arguments.length?(b=T==null?(c=f=d=g=null,dp):yj(c=+T[0][0],f=+T[0][1],d=+T[1][0],g=+T[1][1]),w()):c==null?null:[[c,f],[d,g]]},A.scale=function(T){return arguments.length?(e=+T,w()):e},A.translate=function(T){return arguments.length?(t=+T[0],n=+T[1],w()):[t,n]},A.angle=function(T){return arguments.length?(a=T%360*Ye,l=De(a),s=Re(a),w()):a*Zt},A.reflectX=function(T){return arguments.length?(i=T?-1:1,w()):i<0},A.reflectY=function(T){return arguments.length?(r=T?-1:1,w()):r<0},A.fitExtent=function(T,$){return Cb(A,T,$)},A.fitSize=function(T,$){return GT(A,T,$)},A.fitWidth=function(T,$){return YT(A,T,$)},A.fitHeight=function(T,$){return XT(A,T,$)},A}function Uj(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}Uj.invert=function(e,t){var n=t,i=25,r;do{var a=n*n,s=a*a;n-=r=(n*(1.007226+a*(.015085+s*(-.044475+.028874*a-.005916*s)))-t)/(1.007226+a*(.015085*3+s*(-.044475*7+.028874*9*a-.005916*11*s)))}while(it(r)>Ne&&--i>0);return[e/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function kse(){return ss(Uj).scale(175.295)}function Bj(e,t){return[Re(t)*De(e),De(t)]}Bj.invert=em(Ui);function Dse(){return ss(Bj).scale(249.5).clipAngle(90+Ne)}function jj(e,t){var n=Re(t),i=1+Re(e)*n;return[n*De(e)/i,De(t)/i]}jj.invert=em(function(e){return 2*Bd(e)});function Ose(){return ss(jj).scale(250).clipAngle(142)}function qj(e,t){return[Ny(IT((Xt+t)/2)),-e]}qj.invert=function(e,t){return[-t,2*Bd(tj(e))-Xt]};function Nse(){var e=zj(qj),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var Rse=Math.abs,nA=Math.cos,tv=Math.sin,zse=1e-6,Ij=Math.PI,iA=Ij/2,f4=Fse(2);function d4(e){return e>1?iA:e<-1?-iA:Math.asin(e)}function Fse(e){return e>0?Math.sqrt(e):0}function Lse(e,t){var n=e*tv(t),i=30,r;do t-=r=(t+tv(t)-n)/(1+nA(t));while(Rse(r)>zse&&--i>0);return t/2}function Use(e,t,n){function i(r,a){return[e*r*nA(a=Lse(n,a)),t*tv(a)]}return i.invert=function(r,a){return a=d4(a/t),[r/(e*nA(a)),d4((2*a+tv(2*a))/n)]},i}var Bse=Use(f4/iA,f4,Ij);function jse(){return ss(Bse).scale(169.529)}const qse=$j(),rA=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Ise(e,t){return function n(){const i=t();return i.type=e,i.path=$j().projection(i),i.copy=i.copy||function(){const r=n();return rA.forEach(a=>{i[a]&&r[a](i[a]())}),r.path.pointRadius(i.path.pointRadius()),r},rU(i)}}function WT(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(nv[e]=Ise(e,t),this):nv[e]||null}function Pj(e){return e&&e.path||qse}const nv={albers:Dj,albersusa:yse,azimuthalequalarea:vse,azimuthalequidistant:bse,conicconformal:Ese,conicequalarea:Ky,conicequidistant:Ase,equalEarth:Tse,equirectangular:_se,gnomonic:Mse,identity:$se,mercator:xse,mollweide:jse,naturalEarth1:kse,orthographic:Dse,stereographic:Ose,transversemercator:Nse};for(const e in nv)WT(e,nv[e]);function Pse(){}const Rs=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Hj(){var e=1,t=1,n=l;function i(c,f){return f.map(d=>r(c,d))}function r(c,f){var d=[],g=[];return a(c,f,p=>{n(p,c,f),Hse(p)>0?d.push([p]):g.push(p)}),g.forEach(p=>{for(var y=0,v=d.length,b;y<v;++y)if(Gse((b=d[y])[0],p)!==-1){b.push(p);return}}),{type:"MultiPolygon",value:f,coordinates:d}}function a(c,f,d){var g=[],p=[],y,v,b,S,_,w;for(y=v=-1,S=c[0]>=f,Rs[S<<1].forEach(A);++y<e-1;)b=S,S=c[y+1]>=f,Rs[b|S<<1].forEach(A);for(Rs[S<<0].forEach(A);++v<t-1;){for(y=-1,S=c[v*e+e]>=f,_=c[v*e]>=f,Rs[S<<1|_<<2].forEach(A);++y<e-1;)b=S,S=c[v*e+e+y+1]>=f,w=_,_=c[v*e+y+1]>=f,Rs[b|S<<1|_<<2|w<<3].forEach(A);Rs[S|_<<3].forEach(A)}for(y=-1,_=c[v*e]>=f,Rs[_<<2].forEach(A);++y<e-1;)w=_,_=c[v*e+y+1]>=f,Rs[_<<2|w<<3].forEach(A);Rs[_<<3].forEach(A);function A(T){var $=[T[0][0]+y,T[0][1]+v],k=[T[1][0]+y,T[1][1]+v],M=s($),N=s(k),z,j;(z=p[M])?(j=g[N])?(delete p[z.end],delete g[j.start],z===j?(z.ring.push(k),d(z.ring)):g[z.start]=p[j.end]={start:z.start,end:j.end,ring:z.ring.concat(j.ring)}):(delete p[z.end],z.ring.push(k),p[z.end=N]=z):(z=g[N])?(j=p[M])?(delete g[z.start],delete p[j.end],z===j?(z.ring.push(k),d(z.ring)):g[j.start]=p[z.end]={start:j.start,end:z.end,ring:j.ring.concat(z.ring)}):(delete g[z.start],z.ring.unshift($),g[z.start=M]=z):g[M]=p[N]={start:M,end:N,ring:[$,k]}}}function s(c){return c[0]*2+c[1]*(e+1)*4}function l(c,f,d){c.forEach(g=>{var p=g[0],y=g[1],v=p|0,b=y|0,S,_=f[b*e+v];p>0&&p<e&&v===p&&(S=f[b*e+v-1],g[0]=p+(d-S)/(_-S)-.5),y>0&&y<t&&b===y&&(S=f[(b-1)*e+v],g[1]=y+(d-S)/(_-S)-.5)})}return i.contour=r,i.size=function(c){if(!arguments.length)return[e,t];var f=Math.floor(c[0]),d=Math.floor(c[1]);return f>=0&&d>=0||ee("invalid size"),e=f,t=d,i},i.smooth=function(c){return arguments.length?(n=c?l:Pse,i):n===l},i}function Hse(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function Gse(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=Yse(e,t[n]))return r;return 0}function Yse(e,t){for(var n=t[0],i=t[1],r=-1,a=0,s=e.length,l=s-1;a<s;l=a++){var c=e[a],f=c[0],d=c[1],g=e[l],p=g[0],y=g[1];if(Xse(c,g,t))return 0;d>i!=y>i&&n<(p-f)*(i-d)/(y-d)+f&&(r=-r)}return r}function Xse(e,t,n){var i;return Vse(e,t,n)&&Wse(e[i=+(e[0]===t[0])],n[i],t[i])}function Vse(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Wse(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function Gj(e,t,n){return function(i){var r=Xa(i),a=n?Math.min(r[0],0):r[0],s=r[1],l=s-a,c=t?pl(a,s,e):l/(e+1);return rr(a+c,s,c)}}function QT(e){J.call(this,null,e)}QT.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ye(QT,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||ii,a=Hj().smooth(e.smooth!==!1),s=e.thresholds||Qse(i,r,e),l=e.as===null?null:e.as||"contour",c=[];return i.forEach(f=>{const d=r(f),g=a.size([d.width,d.height])(d.values,ie(s)?s:s(d.values));Zse(g,d,f,e),g.forEach(p=>{c.push(Hv(f,ht(l!=null?{[l]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function Qse(e,t,n){const i=Gj(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(r=>Du(t(r).values)))}function Zse(e,t,n,i){let r=i.scale||t.scale,a=i.translate||t.translate;if(He(r)&&(r=r(n,i)),He(a)&&(a=a(n,i)),(r===1||r==null)&&!a)return;const s=(ut(r)?r:r[0])||1,l=(ut(r)?r:r[1])||1,c=a&&a[0]||0,f=a&&a[1]||0;e.forEach(Yj(t,s,l,c,f))}function Yj(e,t,n,i,r){const a=e.x1||0,s=e.y1||0,l=t*n<0;function c(g){g.forEach(f)}function f(g){l&&g.reverse(),g.forEach(d)}function d(g){g[0]=(g[0]-a)*t+i,g[1]=(g[1]-s)*n+r}return function(g){return g.coordinates.forEach(c),g}}function h4(e,t,n){const i=e>=0?e:IC(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function BE(e){return He(e)?e:ri(+e)}function Xj(){var e=c=>c[0],t=c=>c[1],n=Ad,i=[-1,-1],r=960,a=500,s=2;function l(c,f){const d=h4(i[0],c,e)>>s,g=h4(i[1],c,t)>>s,p=d?d+2:0,y=g?g+2:0,v=2*p+(r>>s),b=2*y+(a>>s),S=new Float32Array(v*b),_=new Float32Array(v*b);let w=S;c.forEach(T=>{const $=p+(+e(T)>>s),k=y+(+t(T)>>s);$>=0&&$<v&&k>=0&&k<b&&(S[$+k*v]+=+n(T))}),d>0&&g>0?(mf(v,b,S,_,d),yf(v,b,_,S,g),mf(v,b,S,_,d),yf(v,b,_,S,g),mf(v,b,S,_,d),yf(v,b,_,S,g)):d>0?(mf(v,b,S,_,d),mf(v,b,_,S,d),mf(v,b,S,_,d),w=_):g>0&&(yf(v,b,S,_,g),yf(v,b,_,S,g),yf(v,b,S,_,g),w=_);const A=f?Math.pow(2,-2*s):1/l9(w);for(let T=0,$=v*b;T<$;++T)w[T]*=A;return{values:w,scale:1<<s,width:v,height:b,x1:p,y1:y,x2:p+(r>>s),y2:y+(a>>s)}}return l.x=function(c){return arguments.length?(e=BE(c),l):e},l.y=function(c){return arguments.length?(t=BE(c),l):t},l.weight=function(c){return arguments.length?(n=BE(c),l):n},l.size=function(c){if(!arguments.length)return[r,a];var f=+c[0],d=+c[1];return f>=0&&d>=0||ee("invalid size"),r=f,a=d,l},l.cellSize=function(c){return arguments.length?((c=+c)>=1||ee("invalid cell size"),s=Math.floor(Math.log(c)/Math.LN2),l):1<<s},l.bandwidth=function(c){return arguments.length?(c=Se(c),c.length===1&&(c=[+c[0],+c[0]]),c.length!==2&&ee("invalid bandwidth"),i=c,l):i},l}function mf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<t;++s)for(let l=0,c=0;l<e+r;++l)l<e&&(c+=n[l+s*e]),l>=r&&(l>=a&&(c-=n[l-a+s*e]),i[l-r+s*e]=c/Math.min(l+1,e-1+a-l,a))}function yf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<e;++s)for(let l=0,c=0;l<t+r;++l)l<t&&(c+=n[s+l*e]),l>=r&&(l>=a&&(c-=n[s+(l-a)*e]),i[s+(l-r)*e]=c/Math.min(l+1,t-1+a-l,a))}function ZT(e){J.call(this,null,e)}ZT.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Kse=["x","y","weight","size","cellSize","bandwidth"];function Vj(e,t){return Kse.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ye(ZT,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=Jse(i,e.groupby),a=(e.groupby||[]).map(Vt),s=Vj(Xj(),e),l=e.as||"grid",c=[];function f(d,g){for(let p=0;p<a.length;++p)d[a[p]]=g[p];return d}return c=r.map(d=>ht(f({[l]:s(d,e.counts)},d.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function Jse(e,t){var n=[],i=d=>d(l),r,a,s,l,c,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)l=e[a],c=t.map(i),f=r[c],f||(r[c]=f=[],f.dims=c,n.push(f)),f.push(l);return n}function KT(e){J.call(this,null,e)}KT.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ye(KT,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=Hj().smooth(e.smooth!==!1),r=e.values,a=e.thresholds||Gj(e.count||10,e.nice,!!r),s=e.size,l,c;return r||(r=t.materialize(t.SOURCE).source,l=Vj(Xj(),e)(r,!0),c=Yj(l,l.scale||1,l.scale||1,0,0),s=[l.width,l.height],r=l.values),a=ie(a)?a:a(r),r=i.size(s)(r,a),c&&r.forEach(c),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(ht),n}});const aA="Feature",JT="FeatureCollection",eoe="MultiPoint";function eM(e){J.call(this,null,e)}eM.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ye(eM,J,{transform(e,t){var n=this._features,i=this._points,r=e.fields,a=r&&r[0],s=r&&r[1],l=e.geojson||!r&&ii,c=t.ADD,f;f=e.modified()||t.changed(t.REM)||t.modified(Jn(l))||a&&t.modified(Jn(a))||s&&t.modified(Jn(s)),(!this.value||f)&&(c=t.SOURCE,this._features=n=[],this._points=i=[]),l&&t.visit(c,d=>n.push(l(d))),a&&s&&(t.visit(c,d=>{var g=a(d),p=s(d);g!=null&&p!=null&&(g=+g)===g&&(p=+p)===p&&i.push([g,p])}),n=n.concat({type:aA,geometry:{type:eoe,coordinates:i}})),this.value={type:JT,features:n}}});function tM(e){J.call(this,null,e)}tM.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ye(tM,J,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||ii,a=e.as||"path",s=n.SOURCE;!i||e.modified()?(this.value=i=Pj(e.projection),n.materialize().reflow()):s=r===ii||t.modified(r.fields)?n.ADD_MOD:n.ADD;const l=toe(i,e.pointRadius);return n.visit(s,c=>c[a]=i(r(c))),i.pointRadius(l),n.modifies(a)}});function toe(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function nM(e){J.call(this,null,e)}nM.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ye(nM,J,{transform(e,t){var n=e.projection,i=e.fields[0],r=e.fields[1],a=e.as||["x","y"],s=a[0],l=a[1],c;function f(d){const g=n([i(d),r(d)]);g?(d[s]=g[0],d[l]=g[1]):(d[s]=void 0,d[l]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,f):(c=t.modified(i.fields)||t.modified(r.fields),t.visit(c?t.ADD_MOD:t.ADD,f)),t.modifies(a)}});function iM(e){J.call(this,null,e)}iM.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ye(iM,J,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",a=n.ADD;return(!i||e.modified())&&(this.value=i=noe(Pj(e.projection),e.field||zr("datum"),e.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,s=>s[r]=i),n.modifies(r)}});function noe(e,t,n){const i=n==null?r=>e(t(r)):r=>{var a=e.pointRadius(),s=e.pointRadius(n)(t(r));return e.pointRadius(a),s};return i.context=r=>(e.context(r),i),i}function rM(e){J.call(this,[],e),this.generator=Qae()}rM.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ye(rM,J,{transform(e,t){var n=this.value,i=this.generator,r;if(!n.length||e.modified())for(const a in e)He(i[a])&&i[a](e[a]);return r=i(),n.length?t.mod.push(i7(n[0],r)):t.add.push(ht(r)),n[0]=r,t}});function aM(e){J.call(this,null,e)}aM.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ye(aM,J,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",r=e.field||ii,a=roe(e.opacity,e),s=ioe(e.color,e),l=e.as||"image",c={$x:0,$y:0,$value:0,$max:i?Du(n.map(f=>Du(r(f).values))):0};return n.forEach(f=>{const d=r(f),g=Pe({},f,c);i||(g.$max=Du(d.values||[])),f[l]=aoe(d,g,s.dep?s:ri(s(g)),a.dep?a:ri(a(g)))}),t.reflow(!0).modifies(l)}});function ioe(e,t){let n;return He(e)?(n=i=>vl(e(i,t)),n.dep=Wj(e)):n=ri(vl(e||"#888")),n}function roe(e,t){let n;return He(e)?(n=i=>e(i,t),n.dep=Wj(e)):e?n=ri(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function Wj(e){if(!He(e))return!1;const t=ca(Jn(e));return t.$x||t.$y||t.$value||t.$max}function aoe(e,t,n,i){const r=e.width,a=e.height,s=e.x1||0,l=e.y1||0,c=e.x2||r,f=e.y2||a,d=e.values,g=d?S=>d[S]:Ko,p=fl(c-s,f-l),y=p.getContext("2d"),v=y.getImageData(0,0,c-s,f-l),b=v.data;for(let S=l,_=0;S<f;++S){t.$y=S-l;for(let w=s,A=S*r;w<c;++w,_+=4){t.$x=w-s,t.$value=g(w+A);const T=n(t);b[_+0]=T.r,b[_+1]=T.g,b[_+2]=T.b,b[_+3]=~~(255*i(t))}}return y.putImageData(v,0,0),p}function Qj(e){J.call(this,null,e),this.modified(!0)}ye(Qj,J,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=ooe(e.type),rA.forEach(i=>{e[i]!=null&&g4(n,i,e[i])})):rA.forEach(i=>{e.modified(i)&&g4(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&soe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function soe(e,t){const n=loe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function ooe(e){const t=WT((e||"mercator").toLowerCase());return t||ee("Unrecognized projection type: "+e),t()}function g4(e,t,n){He(e[t])&&e[t](n)}function loe(e){return e=Se(e),e.length===1?e[0]:{type:JT,features:e.reduce((t,n)=>t.concat(uoe(n)),[])}}function uoe(e){return e.type===JT?e.features:Se(e).filter(t=>t!=null).map(t=>t.type===aA?t:{type:aA,geometry:t})}const coe=Object.freeze(Object.defineProperty({__proto__:null,contour:KT,geojson:eM,geopath:tM,geopoint:nM,geoshape:iM,graticule:rM,heatmap:aM,isocontour:QT,kde2d:ZT,projection:Qj},Symbol.toStringTag,{value:"Module"}));function foe(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var a,s=n.length,l,c=0,f=0;for(a=0;a<s;++a)l=n[a],c+=l.x,f+=l.y;for(c=(c/s-e)*i,f=(f/s-t)*i,a=0;a<s;++a)l=n[a],l.x-=c,l.y-=f}return r.initialize=function(a){n=a},r.x=function(a){return arguments.length?(e=+a,r):e},r.y=function(a){return arguments.length?(t=+a,r):t},r.strength=function(a){return arguments.length?(i=+a,r):i},r}function doe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Zj(this.cover(t,n),t,n,e)}function Zj(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,a=e._root,s={data:i},l=e._x0,c=e._y0,f=e._x1,d=e._y1,g,p,y,v,b,S,_,w;if(!a)return e._root=s,e;for(;a.length;)if((b=t>=(g=(l+f)/2))?l=g:f=g,(S=n>=(p=(c+d)/2))?c=p:d=p,r=a,!(a=a[_=S<<1|b]))return r[_]=s,e;if(y=+e._x.call(null,a.data),v=+e._y.call(null,a.data),t===y&&n===v)return s.next=a,r?r[_]=s:e._root=s,e;do r=r?r[_]=new Array(4):e._root=new Array(4),(b=t>=(g=(l+f)/2))?l=g:f=g,(S=n>=(p=(c+d)/2))?c=p:d=p;while((_=S<<1|b)===(w=(v>=p)<<1|y>=g));return r[w]=a,r[_]=s,e}function hoe(e){var t,n,i=e.length,r,a,s=new Array(i),l=new Array(i),c=1/0,f=1/0,d=-1/0,g=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(s[n]=r,l[n]=a,r<c&&(c=r),r>d&&(d=r),a<f&&(f=a),a>g&&(g=a));if(c>d||f>g)return this;for(this.cover(c,f).cover(d,g),n=0;n<i;++n)Zj(this,s[n],l[n],e[n]);return this}function goe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,a=(i=Math.floor(t))+1;else{for(var s=r-n||1,l=this._root,c,f;n>e||e>=r||i>t||t>=a;)switch(f=(t<i)<<1|e<n,c=new Array(4),c[f]=l,l=c,s*=2,f){case 0:r=n+s,a=i+s;break;case 1:n=r-s,a=i+s;break;case 2:r=n+s,i=a-s;break;case 3:n=r-s,i=a-s;break}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this}function poe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function moe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function hi(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function yoe(e,t,n){var i,r=this._x0,a=this._y0,s,l,c,f,d=this._x1,g=this._y1,p=[],y=this._root,v,b;for(y&&p.push(new hi(y,r,a,d,g)),n==null?n=1/0:(r=e-n,a=t-n,d=e+n,g=t+n,n*=n);v=p.pop();)if(!(!(y=v.node)||(s=v.x0)>d||(l=v.y0)>g||(c=v.x1)<r||(f=v.y1)<a))if(y.length){var S=(s+c)/2,_=(l+f)/2;p.push(new hi(y[3],S,_,c,f),new hi(y[2],s,_,S,f),new hi(y[1],S,l,c,_),new hi(y[0],s,l,S,_)),(b=(t>=_)<<1|e>=S)&&(v=p[p.length-1],p[p.length-1]=p[p.length-1-b],p[p.length-1-b]=v)}else{var w=e-+this._x.call(null,y.data),A=t-+this._y.call(null,y.data),T=w*w+A*A;if(T<n){var $=Math.sqrt(n=T);r=e-$,a=t-$,d=e+$,g=t+$,i=y.data}}return i}function voe(e){if(isNaN(d=+this._x.call(null,e))||isNaN(g=+this._y.call(null,e)))return this;var t,n=this._root,i,r,a,s=this._x0,l=this._y0,c=this._x1,f=this._y1,d,g,p,y,v,b,S,_;if(!n)return this;if(n.length)for(;;){if((v=d>=(p=(s+c)/2))?s=p:c=p,(b=g>=(y=(l+f)/2))?l=y:f=y,t=n,!(n=n[S=b<<1|v]))return this;if(!n.length)break;(t[S+1&3]||t[S+2&3]||t[S+3&3])&&(i=t,_=S)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,r?(a?r.next=a:delete r.next,this):t?(a?t[S]=a:delete t[S],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[_]=n:this._root=n),this):(this._root=a,this)}function boe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function xoe(){return this._root}function Soe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Eoe(e){var t=[],n,i=this._root,r,a,s,l,c;for(i&&t.push(new hi(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,a=n.x0,s=n.y0,l=n.x1,c=n.y1)&&i.length){var f=(a+l)/2,d=(s+c)/2;(r=i[3])&&t.push(new hi(r,f,d,l,c)),(r=i[2])&&t.push(new hi(r,a,d,f,c)),(r=i[1])&&t.push(new hi(r,f,s,l,d)),(r=i[0])&&t.push(new hi(r,a,s,f,d))}return this}function _oe(e){var t=[],n=[],i;for(this._root&&t.push(new hi(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var a,s=i.x0,l=i.y0,c=i.x1,f=i.y1,d=(s+c)/2,g=(l+f)/2;(a=r[0])&&t.push(new hi(a,s,l,d,g)),(a=r[1])&&t.push(new hi(a,d,l,c,g)),(a=r[2])&&t.push(new hi(a,s,g,d,f)),(a=r[3])&&t.push(new hi(a,d,g,c,f))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function woe(e){return e[0]}function Aoe(e){return arguments.length?(this._x=e,this):this._x}function Coe(e){return e[1]}function Toe(e){return arguments.length?(this._y=e,this):this._y}function sM(e,t,n){var i=new oM(t??woe,n??Coe,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function oM(e,t,n,i,r,a){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function p4(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Si=sM.prototype=oM.prototype;Si.copy=function(){var e=new oM(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=p4(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=p4(i));return e};Si.add=doe;Si.addAll=hoe;Si.cover=goe;Si.data=poe;Si.extent=moe;Si.find=yoe;Si.remove=voe;Si.removeAll=boe;Si.root=xoe;Si.size=Soe;Si.visit=Eoe;Si.visitAfter=_oe;Si.x=Aoe;Si.y=Toe;function gi(e){return function(){return e}}function al(e){return(e()-.5)*1e-6}function Moe(e){return e.x+e.vx}function $oe(e){return e.y+e.vy}function koe(e){var t,n,i,r=1,a=1;typeof e!="function"&&(e=gi(e==null?1:+e));function s(){for(var f,d=t.length,g,p,y,v,b,S,_=0;_<a;++_)for(g=sM(t,Moe,$oe).visitAfter(l),f=0;f<d;++f)p=t[f],b=n[p.index],S=b*b,y=p.x+p.vx,v=p.y+p.vy,g.visit(w);function w(A,T,$,k,M){var N=A.data,z=A.r,j=b+z;if(N){if(N.index>p.index){var U=y-N.x-N.vx,X=v-N.y-N.vy,H=U*U+X*X;H<j*j&&(U===0&&(U=al(i),H+=U*U),X===0&&(X=al(i),H+=X*X),H=(j-(H=Math.sqrt(H)))/H*r,p.vx+=(U*=H)*(j=(z*=z)/(S+z)),p.vy+=(X*=H)*j,N.vx-=U*(j=1-j),N.vy-=X*j)}return}return T>y+j||k<y-j||$>v+j||M<v-j}}function l(f){if(f.data)return f.r=n[f.data.index];for(var d=f.r=0;d<4;++d)f[d]&&f[d].r>f.r&&(f.r=f[d].r)}function c(){if(t){var f,d=t.length,g;for(n=new Array(d),f=0;f<d;++f)g=t[f],n[g.index]=+e(g,f,t)}}return s.initialize=function(f,d){t=f,i=d,c()},s.iterations=function(f){return arguments.length?(a=+f,s):a},s.strength=function(f){return arguments.length?(r=+f,s):r},s.radius=function(f){return arguments.length?(e=typeof f=="function"?f:gi(+f),c(),s):e},s}function Doe(e){return e.index}function m4(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Ooe(e){var t=Doe,n=g,i,r=gi(30),a,s,l,c,f,d=1;e==null&&(e=[]);function g(S){return 1/Math.min(l[S.source.index],l[S.target.index])}function p(S){for(var _=0,w=e.length;_<d;++_)for(var A=0,T,$,k,M,N,z,j;A<w;++A)T=e[A],$=T.source,k=T.target,M=k.x+k.vx-$.x-$.vx||al(f),N=k.y+k.vy-$.y-$.vy||al(f),z=Math.sqrt(M*M+N*N),z=(z-a[A])/z*S*i[A],M*=z,N*=z,k.vx-=M*(j=c[A]),k.vy-=N*j,$.vx+=M*(j=1-j),$.vy+=N*j}function y(){if(s){var S,_=s.length,w=e.length,A=new Map(s.map(($,k)=>[t($,k,s),$])),T;for(S=0,l=new Array(_);S<w;++S)T=e[S],T.index=S,typeof T.source!="object"&&(T.source=m4(A,T.source)),typeof T.target!="object"&&(T.target=m4(A,T.target)),l[T.source.index]=(l[T.source.index]||0)+1,l[T.target.index]=(l[T.target.index]||0)+1;for(S=0,c=new Array(w);S<w;++S)T=e[S],c[S]=l[T.source.index]/(l[T.source.index]+l[T.target.index]);i=new Array(w),v(),a=new Array(w),b()}}function v(){if(s)for(var S=0,_=e.length;S<_;++S)i[S]=+n(e[S],S,e)}function b(){if(s)for(var S=0,_=e.length;S<_;++S)a[S]=+r(e[S],S,e)}return p.initialize=function(S,_){s=S,f=_,y()},p.links=function(S){return arguments.length?(e=S,y(),p):e},p.id=function(S){return arguments.length?(t=S,p):t},p.iterations=function(S){return arguments.length?(d=+S,p):d},p.strength=function(S){return arguments.length?(n=typeof S=="function"?S:gi(+S),v(),p):n},p.distance=function(S){return arguments.length?(r=typeof S=="function"?S:gi(+S),b(),p):r},p}var Noe={value:()=>{}};function Kj(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new j1(n)}function j1(e){this._=e}function Roe(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}j1.prototype=Kj.prototype={constructor:j1,on:function(e,t){var n=this._,i=Roe(e+"",n),r,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((r=(e=i[a]).type)&&(r=zoe(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(r=(e=i[a]).type)n[r]=y4(n[r],e.name,t);else if(t==null)for(r in n)n[r]=y4(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new j1(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,r=a.length;i<r;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};function zoe(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function y4(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Noe,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var od=0,Ng=0,ag=0,Jj=1e3,iv,Rg,rv=0,Vu=0,Mb=0,pp=typeof performance=="object"&&performance.now?performance:Date,eq=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function lM(){return Vu||(eq(Foe),Vu=pp.now()+Mb)}function Foe(){Vu=0}function av(){this._call=this._time=this._next=null}av.prototype=tq.prototype={constructor:av,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?lM():+n)+(t==null?0:+t),!this._next&&Rg!==this&&(Rg?Rg._next=this:iv=this,Rg=this),this._call=e,this._time=n,sA()},stop:function(){this._call&&(this._call=null,this._time=1/0,sA())}};function tq(e,t,n){var i=new av;return i.restart(e,t,n),i}function Loe(){lM(),++od;for(var e=iv,t;e;)(t=Vu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--od}function v4(){Vu=(rv=pp.now())+Mb,od=Ng=0;try{Loe()}finally{od=0,Boe(),Vu=0}}function Uoe(){var e=pp.now(),t=e-rv;t>Jj&&(Mb-=t,rv=e)}function Boe(){for(var e,t=iv,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:iv=n);Rg=e,sA(i)}function sA(e){if(!od){Ng&&(Ng=clearTimeout(Ng));var t=e-Vu;t>24?(e<1/0&&(Ng=setTimeout(v4,e-pp.now()-Mb)),ag&&(ag=clearInterval(ag))):(ag||(rv=pp.now(),ag=setInterval(Uoe,Jj)),od=1,eq(v4))}}function joe(e,t,n){var i=new av,r=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(a,s,l){s=+s,l=l==null?lM():+l,i._restart(function c(f){f+=r,i._restart(c,r+=s,l),a(f)},s,l)},i.restart(e,t,n),i)}const qoe=1664525,Ioe=1013904223,b4=4294967296;function Poe(){let e=1;return()=>(e=(qoe*e+Ioe)%b4)/b4}function Hoe(e){return e.x}function Goe(e){return e.y}var Yoe=10,Xoe=Math.PI*(3-Math.sqrt(5));function Voe(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),a=0,s=.6,l=new Map,c=tq(g),f=Kj("tick","end"),d=Poe();e==null&&(e=[]);function g(){p(),f.call("tick",t),n<i&&(c.stop(),f.call("end",t))}function p(b){var S,_=e.length,w;b===void 0&&(b=1);for(var A=0;A<b;++A)for(n+=(a-n)*r,l.forEach(function(T){T(n)}),S=0;S<_;++S)w=e[S],w.fx==null?w.x+=w.vx*=s:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=s:(w.y=w.fy,w.vy=0);return t}function y(){for(var b=0,S=e.length,_;b<S;++b){if(_=e[b],_.index=b,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var w=Yoe*Math.sqrt(.5+b),A=b*Xoe;_.x=w*Math.cos(A),_.y=w*Math.sin(A)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function v(b){return b.initialize&&b.initialize(e,d),b}return y(),t={tick:p,restart:function(){return c.restart(g),t},stop:function(){return c.stop(),t},nodes:function(b){return arguments.length?(e=b,y(),l.forEach(v),t):e},alpha:function(b){return arguments.length?(n=+b,t):n},alphaMin:function(b){return arguments.length?(i=+b,t):i},alphaDecay:function(b){return arguments.length?(r=+b,t):+r},alphaTarget:function(b){return arguments.length?(a=+b,t):a},velocityDecay:function(b){return arguments.length?(s=1-b,t):1-s},randomSource:function(b){return arguments.length?(d=b,l.forEach(v),t):d},force:function(b,S){return arguments.length>1?(S==null?l.delete(b):l.set(b,v(S)),t):l.get(b)},find:function(b,S,_){var w=0,A=e.length,T,$,k,M,N;for(_==null?_=1/0:_*=_,w=0;w<A;++w)M=e[w],T=b-M.x,$=S-M.y,k=T*T+$*$,k<_&&(N=M,_=k);return N},on:function(b,S){return arguments.length>1?(f.on(b,S),t):f.on(b)}}}function Woe(){var e,t,n,i,r=gi(-30),a,s=1,l=1/0,c=.81;function f(y){var v,b=e.length,S=sM(e,Hoe,Goe).visitAfter(g);for(i=y,v=0;v<b;++v)t=e[v],S.visit(p)}function d(){if(e){var y,v=e.length,b;for(a=new Array(v),y=0;y<v;++y)b=e[y],a[b.index]=+r(b,y,e)}}function g(y){var v=0,b,S,_=0,w,A,T;if(y.length){for(w=A=T=0;T<4;++T)(b=y[T])&&(S=Math.abs(b.value))&&(v+=b.value,_+=S,w+=S*b.x,A+=S*b.y);y.x=w/_,y.y=A/_}else{b=y,b.x=b.data.x,b.y=b.data.y;do v+=a[b.data.index];while(b=b.next)}y.value=v}function p(y,v,b,S){if(!y.value)return!0;var _=y.x-t.x,w=y.y-t.y,A=S-v,T=_*_+w*w;if(A*A/c<T)return T<l&&(_===0&&(_=al(n),T+=_*_),w===0&&(w=al(n),T+=w*w),T<s&&(T=Math.sqrt(s*T)),t.vx+=_*y.value*i/T,t.vy+=w*y.value*i/T),!0;if(y.length||T>=l)return;(y.data!==t||y.next)&&(_===0&&(_=al(n),T+=_*_),w===0&&(w=al(n),T+=w*w),T<s&&(T=Math.sqrt(s*T)));do y.data!==t&&(A=a[y.data.index]*i/T,t.vx+=_*A,t.vy+=w*A);while(y=y.next)}return f.initialize=function(y,v){e=y,n=v,d()},f.strength=function(y){return arguments.length?(r=typeof y=="function"?y:gi(+y),d(),f):r},f.distanceMin=function(y){return arguments.length?(s=y*y,f):Math.sqrt(s)},f.distanceMax=function(y){return arguments.length?(l=y*y,f):Math.sqrt(l)},f.theta=function(y){return arguments.length?(c=y*y,f):Math.sqrt(c)},f}function Qoe(e){var t=gi(.1),n,i,r;typeof e!="function"&&(e=gi(e==null?0:+e));function a(l){for(var c=0,f=n.length,d;c<f;++c)d=n[c],d.vx+=(r[c]-d.x)*i[c]*l}function s(){if(n){var l,c=n.length;for(i=new Array(c),r=new Array(c),l=0;l<c;++l)i[l]=isNaN(r[l]=+e(n[l],l,n))?0:+t(n[l],l,n)}}return a.initialize=function(l){n=l,s()},a.strength=function(l){return arguments.length?(t=typeof l=="function"?l:gi(+l),s(),a):t},a.x=function(l){return arguments.length?(e=typeof l=="function"?l:gi(+l),s(),a):e},a}function Zoe(e){var t=gi(.1),n,i,r;typeof e!="function"&&(e=gi(e==null?0:+e));function a(l){for(var c=0,f=n.length,d;c<f;++c)d=n[c],d.vy+=(r[c]-d.y)*i[c]*l}function s(){if(n){var l,c=n.length;for(i=new Array(c),r=new Array(c),l=0;l<c;++l)i[l]=isNaN(r[l]=+e(n[l],l,n))?0:+t(n[l],l,n)}}return a.initialize=function(l){n=l,s()},a.strength=function(l){return arguments.length?(t=typeof l=="function"?l:gi(+l),s(),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:gi(+l),s(),a):e},a}const x4={center:foe,collide:koe,nbody:Woe,link:Ooe,x:Qoe,y:Zoe},zg="forces",oA=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Koe=["static","iterations"],nq=["x","y","vx","vy"];function uM(e){J.call(this,null,e)}uM.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:nq}]};ye(uM,J,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(oA),a=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&iq(n,e,0,t)):(this.value=n=ele(t.source,e),n.on("tick",Joe(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(Koe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let l=this._argops,c=0,f=l.length,d;c<f;++c)if(d=l[c],!(d.name!==zg||d.op._argval.force!=="link")){for(var i=d.op._argops,r=0,a=i.length,s;r<a;++r)if(i[r].name==="links"&&(s=i[r].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(nq)}});function Joe(e,t){return()=>e.touch(t).run()}function ele(e,t){const n=Voe(e),i=n.stop,r=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,r()),n.stop=()=>(a=!0,i()),iq(n,t,!0).on("end",()=>a=!0)}function iq(e,t,n,i){var r=Se(t.forces),a,s,l,c;for(a=0,s=oA.length;a<s;++a)l=oA[a],l!==zg&&t.modified(l)&&e[l](t[l]);for(a=0,s=r.length;a<s;++a)c=zg+a,l=n||t.modified(zg,a)?nle(r[a]):i&&tle(r[a],i)?e.force(c):null,l&&e.force(c,l);for(s=e.numForces||0;a<s;++a)e.force(zg+a,null);return e.numForces=r.length,e}function tle(e,t){var n,i;for(n in e)if(He(i=e[n])&&t.modified(Jn(i)))return 1;return 0}function nle(e){var t,n;Ee(x4,e.force)||ee("Unrecognized force: "+e.force),t=x4[e.force]();for(n in e)He(t[n])&&ile(t[n],e[n],e);return t}function ile(e,t,n){e(He(t)?i=>t(i,n):t)}const rle=Object.freeze(Object.defineProperty({__proto__:null,force:uM},Symbol.toStringTag,{value:"Module"}));function ale(e,t){return e.parent===t.parent?1:2}function sle(e){return e.reduce(ole,0)/e.length}function ole(e,t){return e+t.x}function lle(e){return 1+e.reduce(ule,0)}function ule(e,t){return Math.max(e,t.y)}function cle(e){for(var t;t=e.children;)e=t[0];return e}function fle(e){for(var t;t=e.children;)e=t[t.length-1];return e}function dle(){var e=ale,t=1,n=1,i=!1;function r(a){var s,l=0;a.eachAfter(function(p){var y=p.children;y?(p.x=sle(y),p.y=lle(y)):(p.x=s?l+=e(p,s):0,p.y=0,s=p)});var c=cle(a),f=fle(a),d=c.x-e(c,f)/2,g=f.x+e(f,c)/2;return a.eachAfter(i?function(p){p.x=(p.x-a.x)*t,p.y=(a.y-p.y)*n}:function(p){p.x=(p.x-d)/(g-d)*t,p.y=(1-(a.y?p.y/a.y:1))*n})}return r.separation=function(a){return arguments.length?(e=a,r):e},r.size=function(a){return arguments.length?(i=!1,t=+a[0],n=+a[1],r):i?null:[t,n]},r.nodeSize=function(a){return arguments.length?(i=!0,t=+a[0],n=+a[1],r):i?[t,n]:null},r}function hle(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function gle(){return this.eachAfter(hle)}function ple(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function mle(e,t){for(var n=this,i=[n],r,a,s=-1;n=i.pop();)if(e.call(t,n,++s,this),r=n.children)for(a=r.length-1;a>=0;--a)i.push(r[a]);return this}function yle(e,t){for(var n=this,i=[n],r=[],a,s,l,c=-1;n=i.pop();)if(r.push(n),a=n.children)for(s=0,l=a.length;s<l;++s)i.push(a[s]);for(;n=r.pop();)e.call(t,n,++c,this);return this}function vle(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function ble(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function xle(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Sle(e){for(var t=this,n=Ele(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function Ele(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function _le(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function wle(){return Array.from(this)}function Ale(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Cle(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Tle(){var e=this,t,n=[e],i,r,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,a=i.length;r<a;++r)n.push(i[r]);while(n.length)}function cM(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=kle)):t===void 0&&(t=$le);for(var n=new ld(e),i,r=[n],a,s,l,c;i=r.pop();)if((s=t(i.data))&&(c=(s=Array.from(s)).length))for(i.children=s,l=c-1;l>=0;--l)r.push(a=s[l]=new ld(s[l])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(rq)}function Mle(){return cM(this).eachBefore(Dle)}function $le(e){return e.children}function kle(e){return Array.isArray(e)?e[1]:null}function Dle(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function rq(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function ld(e){this.data=e,this.depth=this.height=0,this.parent=null}ld.prototype=cM.prototype={constructor:ld,count:gle,each:ple,eachAfter:yle,eachBefore:mle,find:vle,sum:ble,sort:xle,path:Sle,ancestors:_le,descendants:wle,leaves:Ale,links:Cle,copy:Mle,[Symbol.iterator]:Tle};function q1(e){return e==null?null:aq(e)}function aq(e){if(typeof e!="function")throw new Error;return e}function Cu(){return 0}function wf(e){return function(){return e}}const Ole=1664525,Nle=1013904223,S4=4294967296;function Rle(){let e=1;return()=>(e=(Ole*e+Nle)%S4)/S4}function zle(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Fle(e,t){let n=e.length,i,r;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}function Lle(e,t){for(var n=0,i=(e=Fle(Array.from(e),t)).length,r=[],a,s;n<i;)a=e[n],s&&sq(s,a)?++n:(s=Ble(r=Ule(r,a)),n=0);return s}function Ule(e,t){var n,i;if(jE(t,e))return[t];for(n=0;n<e.length;++n)if(o1(t,e[n])&&jE(Fg(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(o1(Fg(e[n],e[i]),t)&&o1(Fg(e[n],t),e[i])&&o1(Fg(e[i],t),e[n])&&jE(oq(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function o1(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function sq(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function jE(e,t){for(var n=0;n<t.length;++n)if(!sq(e,t[n]))return!1;return!0}function Ble(e){switch(e.length){case 1:return jle(e[0]);case 2:return Fg(e[0],e[1]);case 3:return oq(e[0],e[1],e[2])}}function jle(e){return{x:e.x,y:e.y,r:e.r}}function Fg(e,t){var n=e.x,i=e.y,r=e.r,a=t.x,s=t.y,l=t.r,c=a-n,f=s-i,d=l-r,g=Math.sqrt(c*c+f*f);return{x:(n+a+c/g*d)/2,y:(i+s+f/g*d)/2,r:(g+r+l)/2}}function oq(e,t,n){var i=e.x,r=e.y,a=e.r,s=t.x,l=t.y,c=t.r,f=n.x,d=n.y,g=n.r,p=i-s,y=i-f,v=r-l,b=r-d,S=c-a,_=g-a,w=i*i+r*r-a*a,A=w-s*s-l*l+c*c,T=w-f*f-d*d+g*g,$=y*v-p*b,k=(v*T-b*A)/($*2)-i,M=(b*S-v*_)/$,N=(y*A-p*T)/($*2)-r,z=(p*_-y*S)/$,j=M*M+z*z-1,U=2*(a+k*M+N*z),X=k*k+N*N-a*a,H=-(Math.abs(j)>1e-6?(U+Math.sqrt(U*U-4*j*X))/(2*j):X/U);return{x:i+k+M*H,y:r+N+z*H,r:H}}function E4(e,t,n){var i=e.x-t.x,r,a,s=e.y-t.y,l,c,f=i*i+s*s;f?(a=t.r+n.r,a*=a,c=e.r+n.r,c*=c,a>c?(r=(f+c-a)/(2*f),l=Math.sqrt(Math.max(0,c/f-r*r)),n.x=e.x-r*i-l*s,n.y=e.y-r*s+l*i):(r=(f+a-c)/(2*f),l=Math.sqrt(Math.max(0,a/f-r*r)),n.x=t.x+r*i-l*s,n.y=t.y+r*s+l*i)):(n.x=t.x+n.r,n.y=t.y)}function _4(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function w4(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,a=(t.y*n.r+n.y*t.r)/i;return r*r+a*a}function l1(e){this._=e,this.next=null,this.previous=null}function qle(e,t){if(!(a=(e=zle(e)).length))return 0;var n,i,r,a,s,l,c,f,d,g,p;if(n=e[0],n.x=0,n.y=0,!(a>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(a>2))return n.r+i.r;E4(i,n,r=e[2]),n=new l1(n),i=new l1(i),r=new l1(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(c=3;c<a;++c){E4(n._,i._,r=e[c]),r=new l1(r),f=i.next,d=n.previous,g=i._.r,p=n._.r;do if(g<=p){if(_4(f._,r._)){i=f,n.next=i,i.previous=n,--c;continue e}g+=f._.r,f=f.next}else{if(_4(d._,r._)){n=d,n.next=i,i.previous=n,--c;continue e}p+=d._.r,d=d.previous}while(f!==d.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,s=w4(n);(r=r.next)!==i;)(l=w4(r))<s&&(n=r,s=l);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=Lle(n,t),c=0;c<a;++c)n=e[c],n.x-=r.x,n.y-=r.y;return r.r}function Ile(e){return Math.sqrt(e.value)}function Ple(){var e=null,t=1,n=1,i=Cu;function r(a){const s=Rle();return a.x=t/2,a.y=n/2,e?a.eachBefore(A4(e)).eachAfter(qE(i,.5,s)).eachBefore(C4(1)):a.eachBefore(A4(Ile)).eachAfter(qE(Cu,1,s)).eachAfter(qE(i,a.r/Math.min(t,n),s)).eachBefore(C4(Math.min(t,n)/(2*a.r))),a}return r.radius=function(a){return arguments.length?(e=q1(a),r):e},r.size=function(a){return arguments.length?(t=+a[0],n=+a[1],r):[t,n]},r.padding=function(a){return arguments.length?(i=typeof a=="function"?a:wf(+a),r):i},r}function A4(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function qE(e,t,n){return function(i){if(r=i.children){var r,a,s=r.length,l=e(i)*t||0,c;if(l)for(a=0;a<s;++a)r[a].r+=l;if(c=qle(r,n),l)for(a=0;a<s;++a)r[a].r-=l;i.r=c+l}}}function C4(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function lq(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function tm(e,t,n,i,r){for(var a=e.children,s,l=-1,c=a.length,f=e.value&&(i-t)/e.value;++l<c;)s=a[l],s.y0=n,s.y1=r,s.x0=t,s.x1=t+=s.value*f}function Hle(){var e=1,t=1,n=0,i=!1;function r(s){var l=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/l,s.eachBefore(a(t,l)),i&&s.eachBefore(lq),s}function a(s,l){return function(c){c.children&&tm(c,c.x0,s*(c.depth+1)/l,c.x1,s*(c.depth+2)/l);var f=c.x0,d=c.y0,g=c.x1-n,p=c.y1-n;g<f&&(f=g=(f+g)/2),p<d&&(d=p=(d+p)/2),c.x0=f,c.y0=d,c.x1=g,c.y1=p}}return r.round=function(s){return arguments.length?(i=!!s,r):i},r.size=function(s){return arguments.length?(e=+s[0],t=+s[1],r):[e,t]},r.padding=function(s){return arguments.length?(n=+s,r):n},r}var Gle={depth:-1},T4={},IE={};function Yle(e){return e.id}function Xle(e){return e.parentId}function M4(){var e=Yle,t=Xle,n;function i(r){var a=Array.from(r),s=e,l=t,c,f,d,g,p,y,v,b,S=new Map;if(n!=null){const _=a.map((T,$)=>Vle(n(T,$,r))),w=_.map($4),A=new Set(_).add("");for(const T of w)A.has(T)||(A.add(T),_.push(T),w.push($4(T)),a.push(IE));s=(T,$)=>_[$],l=(T,$)=>w[$]}for(d=0,c=a.length;d<c;++d)f=a[d],y=a[d]=new ld(f),(v=s(f,d,r))!=null&&(v+="")&&(b=y.id=v,S.set(b,S.has(b)?T4:y)),(v=l(f,d,r))!=null&&(v+="")&&(y.parent=v);for(d=0;d<c;++d)if(y=a[d],v=y.parent){if(p=S.get(v),!p)throw new Error("missing: "+v);if(p===T4)throw new Error("ambiguous: "+v);p.children?p.children.push(y):p.children=[y],y.parent=p}else{if(g)throw new Error("multiple roots");g=y}if(!g)throw new Error("no root");if(n!=null){for(;g.data===IE&&g.children.length===1;)g=g.children[0],--c;for(let _=a.length-1;_>=0&&(y=a[_],y.data===IE);--_)y.data=null}if(g.parent=Gle,g.eachBefore(function(_){_.depth=_.parent.depth+1,--c}).eachBefore(rq),g.parent=null,c>0)throw new Error("cycle");return g}return i.id=function(r){return arguments.length?(e=q1(r),i):e},i.parentId=function(r){return arguments.length?(t=q1(r),i):t},i.path=function(r){return arguments.length?(n=q1(r),i):n},i}function Vle(e){e=`${e}`;let t=e.length;return lA(e,t-1)&&!lA(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function $4(e){let t=e.length;if(t<2)return"";for(;--t>1&&!lA(e,t););return e.slice(0,t)}function lA(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function Wle(e,t){return e.parent===t.parent?1:2}function PE(e){var t=e.children;return t?t[0]:e.t}function HE(e){var t=e.children;return t?t[t.length-1]:e.t}function Qle(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Zle(e){for(var t=0,n=0,i=e.children,r=i.length,a;--r>=0;)a=i[r],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function Kle(e,t,n){return e.a.parent===t.parent?e.a:n}function I1(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}I1.prototype=Object.create(ld.prototype);function Jle(e){for(var t=new I1(e,0),n,i=[t],r,a,s,l;n=i.pop();)if(a=n._.children)for(n.children=new Array(l=a.length),s=l-1;s>=0;--s)i.push(r=n.children[s]=new I1(a[s],s)),r.parent=n;return(t.parent=new I1(null,0)).children=[t],t}function eue(){var e=Wle,t=1,n=1,i=null;function r(f){var d=Jle(f);if(d.eachAfter(a),d.parent.m=-d.z,d.eachBefore(s),i)f.eachBefore(c);else{var g=f,p=f,y=f;f.eachBefore(function(w){w.x<g.x&&(g=w),w.x>p.x&&(p=w),w.depth>y.depth&&(y=w)});var v=g===p?1:e(g,p)/2,b=v-g.x,S=t/(p.x+v+b),_=n/(y.depth||1);f.eachBefore(function(w){w.x=(w.x+b)*S,w.y=w.depth*_})}return f}function a(f){var d=f.children,g=f.parent.children,p=f.i?g[f.i-1]:null;if(d){Zle(f);var y=(d[0].z+d[d.length-1].z)/2;p?(f.z=p.z+e(f._,p._),f.m=f.z-y):f.z=y}else p&&(f.z=p.z+e(f._,p._));f.parent.A=l(f,p,f.parent.A||g[0])}function s(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m}function l(f,d,g){if(d){for(var p=f,y=f,v=d,b=p.parent.children[0],S=p.m,_=y.m,w=v.m,A=b.m,T;v=HE(v),p=PE(p),v&&p;)b=PE(b),y=HE(y),y.a=f,T=v.z+w-p.z-S+e(v._,p._),T>0&&(Qle(Kle(v,f,g),f,T),S+=T,_+=T),w+=v.m,S+=p.m,A+=b.m,_+=y.m;v&&!HE(y)&&(y.t=v,y.m+=w-_),p&&!PE(b)&&(b.t=p,b.m+=S-A,g=f)}return g}function c(f){f.x*=t,f.y=f.depth*n}return r.separation=function(f){return arguments.length?(e=f,r):e},r.size=function(f){return arguments.length?(i=!1,t=+f[0],n=+f[1],r):i?null:[t,n]},r.nodeSize=function(f){return arguments.length?(i=!0,t=+f[0],n=+f[1],r):i?[t,n]:null},r}function $b(e,t,n,i,r){for(var a=e.children,s,l=-1,c=a.length,f=e.value&&(r-n)/e.value;++l<c;)s=a[l],s.x0=t,s.x1=i,s.y0=n,s.y1=n+=s.value*f}var uq=(1+Math.sqrt(5))/2;function cq(e,t,n,i,r,a){for(var s=[],l=t.children,c,f,d=0,g=0,p=l.length,y,v,b=t.value,S,_,w,A,T,$,k;d<p;){y=r-n,v=a-i;do S=l[g++].value;while(!S&&g<p);for(_=w=S,$=Math.max(v/y,y/v)/(b*e),k=S*S*$,T=Math.max(w/k,k/_);g<p;++g){if(S+=f=l[g].value,f<_&&(_=f),f>w&&(w=f),k=S*S*$,A=Math.max(w/k,k/_),A>T){S-=f;break}T=A}s.push(c={value:S,dice:y<v,children:l.slice(d,g)}),c.dice?tm(c,n,i,r,b?i+=v*S/b:a):$b(c,n,i,b?n+=y*S/b:r,a),b-=S,d=g}return s}const fq=(function e(t){function n(i,r,a,s,l){cq(t,i,r,a,s,l)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n})(uq);function tue(){var e=fq,t=!1,n=1,i=1,r=[0],a=Cu,s=Cu,l=Cu,c=Cu,f=Cu;function d(p){return p.x0=p.y0=0,p.x1=n,p.y1=i,p.eachBefore(g),r=[0],t&&p.eachBefore(lq),p}function g(p){var y=r[p.depth],v=p.x0+y,b=p.y0+y,S=p.x1-y,_=p.y1-y;S<v&&(v=S=(v+S)/2),_<b&&(b=_=(b+_)/2),p.x0=v,p.y0=b,p.x1=S,p.y1=_,p.children&&(y=r[p.depth+1]=a(p)/2,v+=f(p)-y,b+=s(p)-y,S-=l(p)-y,_-=c(p)-y,S<v&&(v=S=(v+S)/2),_<b&&(b=_=(b+_)/2),e(p,v,b,S,_))}return d.round=function(p){return arguments.length?(t=!!p,d):t},d.size=function(p){return arguments.length?(n=+p[0],i=+p[1],d):[n,i]},d.tile=function(p){return arguments.length?(e=aq(p),d):e},d.padding=function(p){return arguments.length?d.paddingInner(p).paddingOuter(p):d.paddingInner()},d.paddingInner=function(p){return arguments.length?(a=typeof p=="function"?p:wf(+p),d):a},d.paddingOuter=function(p){return arguments.length?d.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):d.paddingTop()},d.paddingTop=function(p){return arguments.length?(s=typeof p=="function"?p:wf(+p),d):s},d.paddingRight=function(p){return arguments.length?(l=typeof p=="function"?p:wf(+p),d):l},d.paddingBottom=function(p){return arguments.length?(c=typeof p=="function"?p:wf(+p),d):c},d.paddingLeft=function(p){return arguments.length?(f=typeof p=="function"?p:wf(+p),d):f},d}function nue(e,t,n,i,r){var a=e.children,s,l=a.length,c,f=new Array(l+1);for(f[0]=c=s=0;s<l;++s)f[s+1]=c+=a[s].value;d(0,l,e.value,t,n,i,r);function d(g,p,y,v,b,S,_){if(g>=p-1){var w=a[g];w.x0=v,w.y0=b,w.x1=S,w.y1=_;return}for(var A=f[g],T=y/2+A,$=g+1,k=p-1;$<k;){var M=$+k>>>1;f[M]<T?$=M+1:k=M}T-f[$-1]<f[$]-T&&g+1<$&&--$;var N=f[$]-A,z=y-N;if(S-v>_-b){var j=y?(v*z+S*N)/y:S;d(g,$,N,v,b,j,_),d($,p,z,j,b,S,_)}else{var U=y?(b*z+_*N)/y:_;d(g,$,N,v,b,S,U),d($,p,z,v,U,S,_)}}}function iue(e,t,n,i,r){(e.depth&1?$b:tm)(e,t,n,i,r)}const rue=(function e(t){function n(i,r,a,s,l){if((c=i._squarify)&&c.ratio===t)for(var c,f,d,g,p=-1,y,v=c.length,b=i.value;++p<v;){for(f=c[p],d=f.children,g=f.value=0,y=d.length;g<y;++g)f.value+=d[g].value;f.dice?tm(f,r,a,s,b?a+=(l-a)*f.value/b:l):$b(f,r,a,b?r+=(s-r)*f.value/b:s,l),b-=f.value}else i._squarify=c=cq(t,i,r,a,s,l),c.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n})(uq);function uA(e,t,n){const i={};return e.each(r=>{const a=r.data;n(a)&&(i[t(a)]=r)}),e.lookup=i,e}function fM(e){J.call(this,null,e)}fM.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const aue=e=>e.values;ye(fM,J,{transform(e,t){t.source||ee("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),a=this.value;return(!a||i||t.changed())&&(a&&a.each(s=>{s.children&&Pv(s.data)&&r.rem.push(s.data)}),this.value=a=cM({values:Se(e.keys).reduce((s,l)=>(s.key(l),s),sue()).entries(r.source)},aue),n&&a.each(s=>{s.children&&(s=ht(s.data),r.add.push(s),r.source.push(s))}),uA(a,ke,ke)),r.source.root=a,r}});function sue(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,a){if(a>=e.length)return r;const s=r.length,l=e[a++],c={},f={};let d=-1,g,p,y;for(;++d<s;)g=l(p=r[d])+"",(y=c[g])?y.push(p):c[g]=[p];for(g in c)f[g]=n(c[g],a);return f}function i(r,a){if(++a>e.length)return r;const s=[];for(const l in r)s.push({key:l,values:i(r[l],a)});return s}return t}function uo(e){J.call(this,null,e)}const oue=(e,t)=>e.parent===t.parent?1:2;ye(uo,J,{transform(e,t){(!t.source||!t.source.root)&&ee(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,a=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(fc(e.sort,s=>s.data)),lue(n,this.params,e),n.separation&&n.separation(e.separation!==!1?oue:Ad);try{this.value=n(r)}catch(s){ee(s)}return r.each(s=>uue(s,i,a)),t.reflow(e.modified()).modifies(a).modifies("leaf")}});function lue(e,t,n){for(let i,r=0,a=t.length;r<a;++r)i=t[r],i in n&&e[i](n[i])}function uue(e,t,n){const i=e.data,r=t.length-1;for(let a=0;a<r;++a)i[n[a]]=e[t[a]];i[n[r]]=e.children?e.children.length:0}const cA=["x","y","r","depth","children"];function dM(e){uo.call(this,e)}dM.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:cA.length,default:cA}]};ye(dM,uo,{layout:Ple,params:["radius","size","padding"],fields:cA});const fA=["x0","y0","x1","y1","depth","children"];function hM(e){uo.call(this,e)}hM.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:fA.length,default:fA}]};ye(hM,uo,{layout:Hle,params:["size","round","padding"],fields:fA});function gM(e){J.call(this,null,e)}gM.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ye(gM,J,{transform(e,t){t.source||ee("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),a=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),a&&(n=r.source.length?uA(M4().id(e.key).parentId(e.parentKey)(r.source),e.key,Fr):uA(M4()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const k4={tidy:eue,cluster:dle},dA=["x","y","depth","children"];function pM(e){uo.call(this,e)}pM.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:dA.length,default:dA}]};ye(pM,uo,{layout(e){const t=e||"tidy";if(Ee(k4,t))return k4[t]();ee("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:dA});function mM(e){J.call(this,[],e)}mM.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ye(mM,J,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),a={};return i||ee("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,s=>a[ke(s)]=1),i.each(s=>{const l=s.data,c=s.parent&&s.parent.data;c&&a[ke(l)]&&a[ke(c)]&&r.add.push(ht({source:c,target:l}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>a[ke(s)]=1),n.forEach(s=>{(a[ke(s.source)]||a[ke(s.target)])&&r.mod.push(s)})),r}});const D4={binary:nue,dice:tm,slice:$b,slicedice:iue,squarify:fq,resquarify:rue},hA=["x0","y0","x1","y1","depth","children"];function yM(e){uo.call(this,e)}yM.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:hA.length,default:hA}]};ye(yM,uo,{layout(){const e=tue();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ee(D4,t)?e.tile(D4[t]):ee("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:hA});const cue=Object.freeze(Object.defineProperty({__proto__:null,nest:fM,pack:dM,partition:hM,stratify:gM,tree:pM,treelinks:mM,treemap:yM},Symbol.toStringTag,{value:"Module"})),GE=4278190080;function fue(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function due(e,t,n,i,r){const a=e.width,s=e.height,l=i||r,c=fl(a,s).getContext("2d"),f=fl(a,s).getContext("2d"),d=l&&fl(a,s).getContext("2d");n.forEach(N=>P1(c,N,!1)),P1(f,t,!1),l&&P1(d,t,!0);const g=YE(c,a,s),p=YE(f,a,s),y=l&&YE(d,a,s),v=e.bitmap(),b=l&&e.bitmap();let S,_,w,A,T,$,k,M;for(_=0;_<s;++_)for(S=0;S<a;++S)T=_*a+S,$=g[T]&GE,M=p[T]&GE,k=l&&y[T]&GE,($||k||M)&&(w=e(S),A=e(_),!r&&($||M)&&v.set(w,A),l&&($||k)&&b.set(w,A));return[v,b]}function YE(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function P1(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(r=>{r.items.forEach(a=>P1(e,a.items,n))}):hr[i].draw(e,{items:n?t.map(hue):t})}function hue(e){const t=Hv(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const zs=5,si=31,mp=32,Qo=new Uint32Array(mp+1),ta=new Uint32Array(mp+1);ta[0]=0;Qo[0]=~ta[0];for(let e=1;e<=mp;++e)ta[e]=ta[e-1]<<1|1,Qo[e]=~ta[e];function gue(e,t){const n=new Uint32Array(~~((e*t+mp)/mp));function i(a,s){n[a]|=s}function r(a,s){n[a]&=s}return{array:n,get:(a,s)=>{const l=s*e+a;return n[l>>>zs]&1<<(l&si)},set:(a,s)=>{const l=s*e+a;i(l>>>zs,1<<(l&si))},clear:(a,s)=>{const l=s*e+a;r(l>>>zs,~(1<<(l&si)))},getRange:(a,s,l,c)=>{let f=c,d,g,p,y;for(;f>=s;--f)if(d=f*e+a,g=f*e+l,p=d>>>zs,y=g>>>zs,p===y){if(n[p]&Qo[d&si]&ta[(g&si)+1])return!0}else{if(n[p]&Qo[d&si]||n[y]&ta[(g&si)+1])return!0;for(let v=p+1;v<y;++v)if(n[v])return!0}return!1},setRange:(a,s,l,c)=>{let f,d,g,p,y;for(;s<=c;++s)if(f=s*e+a,d=s*e+l,g=f>>>zs,p=d>>>zs,g===p)i(g,Qo[f&si]&ta[(d&si)+1]);else for(i(g,Qo[f&si]),i(p,ta[(d&si)+1]),y=g+1;y<p;++y)i(y,4294967295)},clearRange:(a,s,l,c)=>{let f,d,g,p,y;for(;s<=c;++s)if(f=s*e+a,d=s*e+l,g=f>>>zs,p=d>>>zs,g===p)r(g,ta[f&si]|Qo[(d&si)+1]);else for(r(g,ta[f&si]),r(p,Qo[(d&si)+1]),y=g+1;y<p;++y)r(y,0)},outOfBounds:(a,s,l,c)=>a<0||s<0||c>=t||l>=e}}function pue(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),a=~~((t+2*n+i)/i),s=l=>~~((l+n)/i);return s.invert=l=>l*i-n,s.bitmap=()=>gue(r,a),s.ratio=i,s.padding=n,s.width=e,s.height=t,s}function mue(e,t,n,i){const r=e.width,a=e.height;return function(s){const l=s.datum.datum.items[i].items,c=l.length,f=s.datum.fontSize,d=or.width(s.datum,s.datum.text);let g=0,p,y,v,b,S,_,w;for(let A=0;A<c;++A)p=l[A].x,v=l[A].y,y=l[A].x2===void 0?p:l[A].x2,b=l[A].y2===void 0?v:l[A].y2,S=(p+y)/2,_=(v+b)/2,w=Math.abs(y-p+b-v),w>=g&&(g=w,s.x=S,s.y=_);return S=d/2,_=f/2,p=s.x-S,y=s.x+S,v=s.y-_,b=s.y+_,s.align="center",p<0&&y<=r?s.align="left":0<=p&&r<y&&(s.align="right"),s.baseline="middle",v<0&&b<=a?s.baseline="top":0<=v&&a<b&&(s.baseline="bottom"),!0}}function sv(e,t,n,i,r,a){let s=n/2;return e-s<0||e+s>r||t-(s=i/2)<0||t+s>a}function sl(e,t,n,i,r,a,s,l){const c=r*a/(i*2),f=e(t-c),d=e(t+c),g=e(n-(a=a/2)),p=e(n+a);return s.outOfBounds(f,g,d,p)||s.getRange(f,g,d,p)||l&&l.getRange(f,g,d,p)}function yue(e,t,n,i){const r=e.width,a=e.height,s=t[0],l=t[1];function c(f,d,g,p,y){const v=e.invert(f),b=e.invert(d);let S=g,_=a,w;if(!sv(v,b,p,y,r,a)&&!sl(e,v,b,y,p,S,s,l)&&!sl(e,v,b,y,p,y,s,null)){for(;_-S>=1;)w=(S+_)/2,sl(e,v,b,y,p,w,s,l)?_=w:S=w;if(S>g)return[v,b,S,!0]}}return function(f){const d=f.datum.datum.items[i].items,g=d.length,p=f.datum.fontSize,y=or.width(f.datum,f.datum.text);let v=n?p:0,b=!1,S=!1,_=0,w,A,T,$,k,M,N,z,j,U,X,H,q,R,O,B,Y;for(let Z=0;Z<g;++Z){for(w=d[Z].x,T=d[Z].y,A=d[Z].x2===void 0?w:d[Z].x2,$=d[Z].y2===void 0?T:d[Z].y2,w>A&&(Y=w,w=A,A=Y),T>$&&(Y=T,T=$,$=Y),j=e(w),X=e(A),U=~~((j+X)/2),H=e(T),R=e($),q=~~((H+R)/2),N=U;N>=j;--N)for(z=q;z>=H;--z)B=c(N,z,v,y,p),B&&([f.x,f.y,v,b]=B);for(N=U;N<=X;++N)for(z=q;z<=R;++z)B=c(N,z,v,y,p),B&&([f.x,f.y,v,b]=B);!b&&!n&&(O=Math.abs(A-w+$-T),k=(w+A)/2,M=(T+$)/2,O>=_&&!sv(k,M,y,p,r,a)&&!sl(e,k,M,p,y,p,s,null)&&(_=O,f.x=k,f.y=M,S=!0))}return b||S?(k=y/2,M=p/2,s.setRange(e(f.x-k),e(f.y-M),e(f.x+k),e(f.y+M)),f.align="center",f.baseline="middle",!0):!1}}const vue=[-1,-1,1,1],bue=[-1,1,-1,1];function xue(e,t,n,i){const r=e.width,a=e.height,s=t[0],l=t[1],c=e.bitmap();return function(f){const d=f.datum.datum.items[i].items,g=d.length,p=f.datum.fontSize,y=or.width(f.datum,f.datum.text),v=[];let b=n?p:0,S=!1,_=!1,w=0,A,T,$,k,M,N,z,j,U,X,H,q;for(let R=0;R<g;++R){for(A=d[R].x,$=d[R].y,T=d[R].x2===void 0?A:d[R].x2,k=d[R].y2===void 0?$:d[R].y2,v.push([e((A+T)/2),e(($+k)/2)]);v.length;)if([z,j]=v.pop(),!(s.get(z,j)||l.get(z,j)||c.get(z,j))){c.set(z,j);for(let O=0;O<4;++O)M=z+vue[O],N=j+bue[O],c.outOfBounds(M,N,M,N)||v.push([M,N]);if(M=e.invert(z),N=e.invert(j),U=b,X=a,!sv(M,N,y,p,r,a)&&!sl(e,M,N,p,y,U,s,l)&&!sl(e,M,N,p,y,p,s,null)){for(;X-U>=1;)H=(U+X)/2,sl(e,M,N,p,y,H,s,l)?X=H:U=H;U>b&&(f.x=M,f.y=N,b=U,S=!0)}}!S&&!n&&(q=Math.abs(T-A+k-$),M=(A+T)/2,N=($+k)/2,q>=w&&!sv(M,N,y,p,r,a)&&!sl(e,M,N,p,y,p,s,null)&&(w=q,f.x=M,f.y=N,_=!0))}return S||_?(M=y/2,N=p/2,s.setRange(e(f.x-M),e(f.y-N),e(f.x+M),e(f.y+N)),f.align="center",f.baseline="middle",!0):!1}}const Sue=["right","center","left"],Eue=["bottom","middle","top"];function _ue(e,t,n,i){const r=e.width,a=e.height,s=t[0],l=t[1],c=i.length;return function(f){const d=f.boundary,g=f.datum.fontSize;if(d[2]<0||d[5]<0||d[0]>r||d[3]>a)return!1;let p=f.textWidth??0,y,v,b,S,_,w,A,T,$,k,M,N,z,j,U;for(let X=0;X<c;++X){if(y=(n[X]&3)-1,v=(n[X]>>>2&3)-1,b=y===0&&v===0||i[X]<0,S=y&&v?Math.SQRT1_2:1,_=i[X]<0?-1:1,w=d[1+y]+i[X]*y*S,M=d[4+v]+_*g*v/2+i[X]*v*S,T=M-g/2,$=M+g/2,N=e(w),j=e(T),U=e($),!p)if(O4(N,N,j,U,s,l,w,w,T,$,d,b))p=or.width(f.datum,f.datum.text);else continue;if(k=w+_*p*y/2,w=k-p/2,A=k+p/2,N=e(w),z=e(A),O4(N,z,j,U,s,l,w,A,T,$,d,b))return f.x=y?y*_<0?A:w:k,f.y=v?v*_<0?$:T:M,f.align=Sue[y*_+1],f.baseline=Eue[v*_+1],s.setRange(N,j,z,U),!0}return!1}}function O4(e,t,n,i,r,a,s,l,c,f,d,g){return!(r.outOfBounds(e,n,t,i)||(g&&a||r).getRange(e,n,t,i))}const XE=0,VE=4,WE=8,QE=0,ZE=1,KE=2,wue={"top-left":XE+QE,top:XE+ZE,"top-right":XE+KE,left:VE+QE,middle:VE+ZE,right:VE+KE,"bottom-left":WE+QE,bottom:WE+ZE,"bottom-right":WE+KE},Aue={naive:mue,"reduced-search":yue,floodfill:xue};function Cue(e,t,n,i,r,a,s,l,c,f,d){if(!e.length)return e;const g=Math.max(i.length,r.length),p=Tue(i,g),y=Mue(r,g),v=$ue(e[0].datum),b=v==="group"&&e[0].datum.items[c].marktype,S=b==="area",_=kue(v,b,l,c),w=f===null||f===1/0,A=S&&d==="naive";let T=-1,$=-1;const k=e.map(j=>{const U=w?or.width(j,j.text):void 0;return T=Math.max(T,U),$=Math.max($,j.fontSize),{datum:j,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:_(j),textWidth:U}});f=f===null||f===1/0?Math.max(T,$)+Math.max(...i):f;const M=pue(t[0],t[1],f);let N;if(!A){n&&k.sort((X,H)=>n(X.datum,H.datum));let j=!1;for(let X=0;X<y.length&&!j;++X)j=y[X]===5||p[X]<0;const U=(v&&s||S)&&e.map(X=>X.datum);N=a.length||U?due(M,U||[],a,j,S):fue(M,s&&k)}const z=S?Aue[d](M,N,s,c):_ue(M,N,y,p);return k.forEach(j=>j.opacity=+z(j)),k}function Tue(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}function Mue(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=wue[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}function $ue(e){return e&&e.mark&&e.mark.marktype}function kue(e,t,n,i){const r=a=>[a.x,a.x,a.x,a.y,a.y,a.y];return e?e==="line"||e==="area"?a=>r(a.datum):t==="line"?a=>{const s=a.datum.items[i].items;return r(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:a=>{const s=a.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:r}const gA=["x","y","opacity","align","baseline"],dq=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function vM(e){J.call(this,null,e)}vM.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:dq},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:gA.length,default:gA}]};ye(vM,J,{transform(e,t){function n(a){const s=e[a];return He(s)&&t.modified(s.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&ee("Size parameter should be specified as a [width, height] array.");const r=e.as||gA;return Cue(t.materialize(t.SOURCE).source||[],e.size,e.sort,Se(e.offset==null?1:e.offset),Se(e.anchor||dq),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(a=>{const s=a.datum;s[r[0]]=a.x,s[r[1]]=a.y,s[r[2]]=a.opacity,s[r[3]]=a.align,s[r[4]]=a.baseline}),t.reflow(i).modifies(r)}});const Due=Object.freeze(Object.defineProperty({__proto__:null,label:vM},Symbol.toStringTag,{value:"Module"}));function hq(e,t){var n=[],i=function(d){return d(l)},r,a,s,l,c,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)l=e[a],c=t.map(i),f=r[c],f||(r[c]=f=[],f.dims=c,n.push(f)),f.push(l);return n}function bM(e){J.call(this,null,e)}bM.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ye(bM,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=hq(i,e.groupby),a=(e.groupby||[]).map(Vt),s=a.length,l=e.as||[Vt(e.x),Vt(e.y)],c=[];r.forEach(f=>{S7(f,e.x,e.y,e.bandwidth||.3).forEach(d=>{const g={};for(let p=0;p<s;++p)g[a[p]]=f.dims[p];g[l[0]]=d[0],g[l[1]]=d[1],c.push(ht(g))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});const pA={constant:e3,linear:t3,log:y7,exp:v7,pow:b7,quad:n3,poly:x7},Oue=(e,t)=>e==="poly"?t:e==="quad"?2:1;function xM(e){J.call(this,null,e)}xM.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(pA)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ye(xM,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=hq(i,e.groupby),a=(e.groupby||[]).map(Vt),s=e.method||"linear",l=e.order==null?3:e.order,c=Oue(s,l),f=e.as||[Vt(e.x),Vt(e.y)],d=pA[s],g=[];let p=e.extent;Ee(pA,s)||ee("Invalid regression method: "+s),p!=null&&s==="log"&&p[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),r.forEach(y=>{if(y.length<=c){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const b=d(y,e.x,e.y,l);if(e.params){g.push(ht({keys:y.dims,coef:b.coef,rSquared:b.rSquared}));return}const S=p||Xa(y,e.x),_=w=>{const A={};for(let T=0;T<a.length;++T)A[a[T]]=y.dims[T];A[f[0]]=w[0],A[f[1]]=w[1],g.push(ht(A))};s==="linear"||s==="constant"?S.forEach(w=>_([w,b.predict(w)])):Zv(b.predict,S,25,200).forEach(_)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=g}return n}});const Nue=Object.freeze(Object.defineProperty({__proto__:null,loess:bM,regression:xM},Symbol.toStringTag,{value:"Module"})),Qs=11102230246251565e-32,Yn=134217729,Rue=(3+8*Qs)*Qs;function JE(e,t,n,i,r){let a,s,l,c,f=t[0],d=i[0],g=0,p=0;d>f==d>-f?(a=f,f=t[++g]):(a=d,d=i[++p]);let y=0;if(g<e&&p<n)for(d>f==d>-f?(s=f+a,l=a-(s-f),f=t[++g]):(s=d+a,l=a-(s-d),d=i[++p]),a=s,l!==0&&(r[y++]=l);g<e&&p<n;)d>f==d>-f?(s=a+f,c=s-a,l=a-(s-c)+(f-c),f=t[++g]):(s=a+d,c=s-a,l=a-(s-c)+(d-c),d=i[++p]),a=s,l!==0&&(r[y++]=l);for(;g<e;)s=a+f,c=s-a,l=a-(s-c)+(f-c),f=t[++g],a=s,l!==0&&(r[y++]=l);for(;p<n;)s=a+d,c=s-a,l=a-(s-c)+(d-c),d=i[++p],a=s,l!==0&&(r[y++]=l);return(a!==0||y===0)&&(r[y++]=a),y}function zue(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function nm(e){return new Float64Array(e)}const Fue=(3+16*Qs)*Qs,Lue=(2+12*Qs)*Qs,Uue=(9+64*Qs)*Qs*Qs,vf=nm(4),N4=nm(8),R4=nm(12),z4=nm(16),oi=nm(4);function Bue(e,t,n,i,r,a,s){let l,c,f,d,g,p,y,v,b,S,_,w,A,T,$,k,M,N;const z=e-r,j=n-r,U=t-a,X=i-a;T=z*X,p=Yn*z,y=p-(p-z),v=z-y,p=Yn*X,b=p-(p-X),S=X-b,$=v*S-(T-y*b-v*b-y*S),k=U*j,p=Yn*U,y=p-(p-U),v=U-y,p=Yn*j,b=p-(p-j),S=j-b,M=v*S-(k-y*b-v*b-y*S),_=$-M,g=$-_,vf[0]=$-(_+g)+(g-M),w=T+_,g=w-T,A=T-(w-g)+(_-g),_=A-k,g=A-_,vf[1]=A-(_+g)+(g-k),N=w+_,g=N-w,vf[2]=w-(N-g)+(_-g),vf[3]=N;let H=zue(4,vf),q=Lue*s;if(H>=q||-H>=q||(g=e-z,l=e-(z+g)+(g-r),g=n-j,f=n-(j+g)+(g-r),g=t-U,c=t-(U+g)+(g-a),g=i-X,d=i-(X+g)+(g-a),l===0&&c===0&&f===0&&d===0)||(q=Uue*s+Rue*Math.abs(H),H+=z*d+X*l-(U*f+j*c),H>=q||-H>=q))return H;T=l*X,p=Yn*l,y=p-(p-l),v=l-y,p=Yn*X,b=p-(p-X),S=X-b,$=v*S-(T-y*b-v*b-y*S),k=c*j,p=Yn*c,y=p-(p-c),v=c-y,p=Yn*j,b=p-(p-j),S=j-b,M=v*S-(k-y*b-v*b-y*S),_=$-M,g=$-_,oi[0]=$-(_+g)+(g-M),w=T+_,g=w-T,A=T-(w-g)+(_-g),_=A-k,g=A-_,oi[1]=A-(_+g)+(g-k),N=w+_,g=N-w,oi[2]=w-(N-g)+(_-g),oi[3]=N;const R=JE(4,vf,4,oi,N4);T=z*d,p=Yn*z,y=p-(p-z),v=z-y,p=Yn*d,b=p-(p-d),S=d-b,$=v*S-(T-y*b-v*b-y*S),k=U*f,p=Yn*U,y=p-(p-U),v=U-y,p=Yn*f,b=p-(p-f),S=f-b,M=v*S-(k-y*b-v*b-y*S),_=$-M,g=$-_,oi[0]=$-(_+g)+(g-M),w=T+_,g=w-T,A=T-(w-g)+(_-g),_=A-k,g=A-_,oi[1]=A-(_+g)+(g-k),N=w+_,g=N-w,oi[2]=w-(N-g)+(_-g),oi[3]=N;const O=JE(R,N4,4,oi,R4);T=l*d,p=Yn*l,y=p-(p-l),v=l-y,p=Yn*d,b=p-(p-d),S=d-b,$=v*S-(T-y*b-v*b-y*S),k=c*f,p=Yn*c,y=p-(p-c),v=c-y,p=Yn*f,b=p-(p-f),S=f-b,M=v*S-(k-y*b-v*b-y*S),_=$-M,g=$-_,oi[0]=$-(_+g)+(g-M),w=T+_,g=w-T,A=T-(w-g)+(_-g),_=A-k,g=A-_,oi[1]=A-(_+g)+(g-k),N=w+_,g=N-w,oi[2]=w-(N-g)+(_-g),oi[3]=N;const B=JE(O,R4,4,oi,z4);return z4[B-1]}function u1(e,t,n,i,r,a){const s=(t-a)*(n-r),l=(e-r)*(i-a),c=s-l,f=Math.abs(s+l);return Math.abs(c)>=Fue*f?c:-Bue(e,t,n,i,r,a,f)}const F4=Math.pow(2,-52),c1=new Uint32Array(512);class ov{static from(t,n=Hue,i=Gue){const r=t.length,a=new Float64Array(r*2);for(let s=0;s<r;s++){const l=t[s];a[2*s]=n(l),a[2*s+1]=i(l)}return new ov(a)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:a}=this,s=t.length>>1;let l=1/0,c=1/0,f=-1/0,d=-1/0;for(let z=0;z<s;z++){const j=t[2*z],U=t[2*z+1];j<l&&(l=j),U<c&&(c=U),j>f&&(f=j),U>d&&(d=U),this._ids[z]=z}const g=(l+f)/2,p=(c+d)/2;let y,v,b;for(let z=0,j=1/0;z<s;z++){const U=e_(g,p,t[2*z],t[2*z+1]);U<j&&(y=z,j=U)}const S=t[2*y],_=t[2*y+1];for(let z=0,j=1/0;z<s;z++){if(z===y)continue;const U=e_(S,_,t[2*z],t[2*z+1]);U<j&&U>0&&(v=z,j=U)}let w=t[2*v],A=t[2*v+1],T=1/0;for(let z=0;z<s;z++){if(z===y||z===v)continue;const j=Iue(S,_,w,A,t[2*z],t[2*z+1]);j<T&&(b=z,T=j)}let $=t[2*b],k=t[2*b+1];if(T===1/0){for(let U=0;U<s;U++)this._dists[U]=t[2*U]-t[0]||t[2*U+1]-t[1];Df(this._ids,this._dists,0,s-1);const z=new Uint32Array(s);let j=0;for(let U=0,X=-1/0;U<s;U++){const H=this._ids[U],q=this._dists[H];q>X&&(z[j++]=H,X=q)}this.hull=z.subarray(0,j),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(u1(S,_,w,A,$,k)<0){const z=v,j=w,U=A;v=b,w=$,A=k,b=z,$=j,k=U}const M=Pue(S,_,w,A,$,k);this._cx=M.x,this._cy=M.y;for(let z=0;z<s;z++)this._dists[z]=e_(t[2*z],t[2*z+1],M.x,M.y);Df(this._ids,this._dists,0,s-1),this._hullStart=y;let N=3;i[y]=n[b]=v,i[v]=n[y]=b,i[b]=n[v]=y,r[y]=0,r[v]=1,r[b]=2,a.fill(-1),a[this._hashKey(S,_)]=y,a[this._hashKey(w,A)]=v,a[this._hashKey($,k)]=b,this.trianglesLen=0,this._addTriangle(y,v,b,-1,-1,-1);for(let z=0,j,U;z<this._ids.length;z++){const X=this._ids[z],H=t[2*X],q=t[2*X+1];if(z>0&&Math.abs(H-j)<=F4&&Math.abs(q-U)<=F4||(j=H,U=q,X===y||X===v||X===b))continue;let R=0;for(let oe=0,F=this._hashKey(H,q);oe<this._hashSize&&(R=a[(F+oe)%this._hashSize],!(R!==-1&&R!==i[R]));oe++);R=n[R];let O=R,B;for(;B=i[O],u1(H,q,t[2*O],t[2*O+1],t[2*B],t[2*B+1])>=0;)if(O=B,O===R){O=-1;break}if(O===-1)continue;let Y=this._addTriangle(O,X,i[O],-1,-1,r[O]);r[X]=this._legalize(Y+2),r[O]=Y,N++;let Z=i[O];for(;B=i[Z],u1(H,q,t[2*Z],t[2*Z+1],t[2*B],t[2*B+1])<0;)Y=this._addTriangle(Z,X,B,r[X],-1,r[Z]),r[X]=this._legalize(Y+2),i[Z]=Z,N--,Z=B;if(O===R)for(;B=n[O],u1(H,q,t[2*B],t[2*B+1],t[2*O],t[2*O+1])<0;)Y=this._addTriangle(B,X,O,-1,r[O],r[B]),this._legalize(Y+2),r[B]=Y,i[O]=O,N--,O=B;this._hullStart=n[X]=O,i[O]=n[Z]=X,i[X]=Z,a[this._hashKey(H,q)]=X,a[this._hashKey(t[2*O],t[2*O+1])]=O}this.hull=new Uint32Array(N);for(let z=0,j=this._hullStart;z<N;z++)this.hull[z]=j,j=i[j];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(jue(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let a=0,s=0;for(;;){const l=i[t],c=t-t%3;if(s=c+(t+2)%3,l===-1){if(a===0)break;t=c1[--a];continue}const f=l-l%3,d=c+(t+1)%3,g=f+(l+2)%3,p=n[s],y=n[t],v=n[d],b=n[g];if(que(r[2*p],r[2*p+1],r[2*y],r[2*y+1],r[2*v],r[2*v+1],r[2*b],r[2*b+1])){n[t]=b,n[l]=p;const _=i[g];if(_===-1){let A=this._hullStart;do{if(this._hullTri[A]===g){this._hullTri[A]=t;break}A=this._hullPrev[A]}while(A!==this._hullStart)}this._link(t,_),this._link(l,i[s]),this._link(s,g);const w=f+(l+1)%3;a<c1.length&&(c1[a++]=w)}else{if(a===0)break;t=c1[--a]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,a,s){const l=this.trianglesLen;return this._triangles[l]=t,this._triangles[l+1]=n,this._triangles[l+2]=i,this._link(l,r),this._link(l+1,a),this._link(l+2,s),this.trianglesLen+=3,l}}function jue(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function e_(e,t,n,i){const r=e-n,a=t-i;return r*r+a*a}function que(e,t,n,i,r,a,s,l){const c=e-s,f=t-l,d=n-s,g=i-l,p=r-s,y=a-l,v=c*c+f*f,b=d*d+g*g,S=p*p+y*y;return c*(g*S-b*y)-f*(d*S-b*p)+v*(d*y-g*p)<0}function Iue(e,t,n,i,r,a){const s=n-e,l=i-t,c=r-e,f=a-t,d=s*s+l*l,g=c*c+f*f,p=.5/(s*f-l*c),y=(f*d-l*g)*p,v=(s*g-c*d)*p;return y*y+v*v}function Pue(e,t,n,i,r,a){const s=n-e,l=i-t,c=r-e,f=a-t,d=s*s+l*l,g=c*c+f*f,p=.5/(s*f-l*c),y=e+(f*d-l*g)*p,v=t+(s*g-c*d)*p;return{x:y,y:v}}function Df(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const a=e[r],s=t[a];let l=r-1;for(;l>=n&&t[e[l]]>s;)e[l+1]=e[l--];e[l+1]=a}else{const r=n+i>>1;let a=n+1,s=i;sg(e,r,a),t[e[n]]>t[e[i]]&&sg(e,n,i),t[e[a]]>t[e[i]]&&sg(e,a,i),t[e[n]]>t[e[a]]&&sg(e,n,a);const l=e[a],c=t[l];for(;;){do a++;while(t[e[a]]<c);do s--;while(t[e[s]]>c);if(s<a)break;sg(e,a,s)}e[n+1]=e[s],e[s]=l,i-a+1>=s-n?(Df(e,t,a,i),Df(e,t,n,s-1)):(Df(e,t,n,s-1),Df(e,t,a,i))}}function sg(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Hue(e){return e[0]}function Gue(e){return e[1]}const L4=1e-6;class ku{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,a=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${a}`:(Math.abs(this._x1-r)>L4||Math.abs(this._y1-a)>L4)&&(this._+="L"+r+","+a),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=a}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class mA{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Yue=class{constructor(t,[n,i,r,a]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((a=+a)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=a,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let a,s;const l=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let b=0,S=0,_=i.length,w,A;b<_;b+=3,S+=2){const T=i[b]*2,$=i[b+1]*2,k=i[b+2]*2,M=t[T],N=t[T+1],z=t[$],j=t[$+1],U=t[k],X=t[k+1],H=z-M,q=j-N,R=U-M,O=X-N,B=(H*O-q*R)*2;if(Math.abs(B)<1e-9){if(a===void 0){a=s=0;for(const Z of n)a+=t[Z*2],s+=t[Z*2+1];a/=n.length,s/=n.length}const Y=1e9*Math.sign((a-M)*O-(s-N)*R);w=(M+U)/2-Y*O,A=(N+X)/2+Y*R}else{const Y=1/B,Z=H*H+q*q,oe=R*R+O*O;w=M+(O*Z-q*oe)*Y,A=N+(H*oe-R*Z)*Y}l[S]=w,l[S+1]=A}let c=n[n.length-1],f,d=c*4,g,p=t[2*c],y,v=t[2*c+1];r.fill(0);for(let b=0;b<n.length;++b)c=n[b],f=d,g=p,y=v,d=c*4,p=t[2*c],v=t[2*c+1],r[f+2]=r[d]=y-v,r[f+3]=r[d+1]=p-g}render(t){const n=t==null?t=new ku:void 0,{delaunay:{halfedges:i,inedges:r,hull:a},circumcenters:s,vectors:l}=this;if(a.length<=1)return null;for(let d=0,g=i.length;d<g;++d){const p=i[d];if(p<d)continue;const y=Math.floor(d/3)*2,v=Math.floor(p/3)*2,b=s[y],S=s[y+1],_=s[v],w=s[v+1];this._renderSegment(b,S,_,w,t)}let c,f=a[a.length-1];for(let d=0;d<a.length;++d){c=f,f=a[d];const g=Math.floor(r[f]/3)*2,p=s[g],y=s[g+1],v=c*4,b=this._project(p,y,l[v+2],l[v+3]);b&&this._renderSegment(p,y,b[0],b[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new ku:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new ku:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let a=r.length;for(;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(r[s]!==r[s-2]||r[s+1]!==r[s-1])&&n.lineTo(r[s],r[s+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new mA;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,a){let s;const l=this._regioncode(t,n),c=this._regioncode(i,r);l===0&&c===0?(a.moveTo(t,n),a.lineTo(i,r)):(s=this._clipSegment(t,n,i,r,l,c))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){e:for(let a=0,s=n.length;a<s;a+=2)for(let l=0,c=r.length;l<c;l+=2)if(n[a]===r[l]&&n[a+1]===r[l+1]&&n[(a+2)%s]===r[(l+c-2)%c]&&n[(a+3)%s]===r[(l+c-1)%c]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:a}}=this,s=i[t];if(s===-1)return null;const l=[];let c=s;do{const f=Math.floor(c/3);if(l.push(n[f*2],n[f*2+1]),c=c%3===2?c-2:c+1,a[c]!==t)break;c=r[c]}while(c!==s&&c!==-1);return l}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,a,s,l=n[i-2],c=n[i-1],f,d=this._regioncode(l,c),g,p=0;for(let y=0;y<i;y+=2)if(a=l,s=c,l=n[y],c=n[y+1],f=d,d=this._regioncode(l,c),f===0&&d===0)g=p,p=0,r?r.push(l,c):r=[l,c];else{let v,b,S,_,w;if(f===0){if((v=this._clipSegment(a,s,l,c,f,d))===null)continue;[b,S,_,w]=v}else{if((v=this._clipSegment(l,c,a,s,d,f))===null)continue;[_,w,b,S]=v,g=p,p=this._edgecode(b,S),g&&p&&this._edge(t,g,p,r,r.length),r?r.push(b,S):r=[b,S]}g=p,p=this._edgecode(_,w),g&&p&&this._edge(t,g,p,r,r.length),r?r.push(_,w):r=[_,w]}if(r)g=p,p=this._edgecode(r[0],r[1]),g&&p&&this._edge(t,g,p,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,a,s){const l=a<s;for(l&&([t,n,i,r,a,s]=[i,r,t,n,s,a]);;){if(a===0&&s===0)return l?[i,r,t,n]:[t,n,i,r];if(a&s)return null;let c,f,d=a||s;d&8?(c=t+(i-t)*(this.ymax-n)/(r-n),f=this.ymax):d&4?(c=t+(i-t)*(this.ymin-n)/(r-n),f=this.ymin):d&2?(f=n+(r-n)*(this.xmax-t)/(i-t),c=this.xmax):(f=n+(r-n)*(this.xmin-t)/(i-t),c=this.xmin),a?(t=c,n=f,a=this._regioncode(t,n)):(i=c,r=f,s=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,a,s){let l=Array.from(n),c;if((c=this._project(l[0],l[1],i,r))&&l.unshift(c[0],c[1]),(c=this._project(l[l.length-2],l[l.length-1],a,s))&&l.push(c[0],c[1]),l=this._clipFinite(t,l))for(let f=0,d=l.length,g,p=this._edgecode(l[d-2],l[d-1]);f<d;f+=2)g=p,p=this._edgecode(l[f],l[f+1]),g&&p&&(f=this._edge(t,g,p,l,f),d=l.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(l=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return l}_edge(t,n,i,r,a){for(;n!==i;){let s,l;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,l=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,l=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,l=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,l=this.ymin;break}(r[a]!==s||r[a+1]!==l)&&this.contains(t,s,l)&&(r.splice(a,0,s,l),a+=2)}return a}_project(t,n,i,r){let a=1/0,s,l,c;if(r<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/r)<a&&(c=this.ymin,l=t+(a=s)*i)}else if(r>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/r)<a&&(c=this.ymax,l=t+(a=s)*i)}if(i>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/i)<a&&(l=this.xmax,c=n+(a=s)*r)}else if(i<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/i)<a&&(l=this.xmin,c=n+(a=s)*r)}return[l,c]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const Xue=2*Math.PI,bf=Math.pow;function Vue(e){return e[0]}function Wue(e){return e[1]}function Que(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],a=2*t[i+1],s=2*t[i+2];if((n[s]-n[r])*(n[a+1]-n[r+1])-(n[a]-n[r])*(n[s+1]-n[r+1])>1e-10)return!1}return!0}function Zue(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class SM{static from(t,n=Vue,i=Wue,r){return new SM("length"in t?Kue(t,n,i,r):Float64Array.from(Jue(t,n,i,r)))}constructor(t){this._delaunator=new ov(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Que(t)){this.collinear=Int32Array.from({length:n.length/2},(p,y)=>y).sort((p,y)=>n[2*p]-n[2*y]||n[2*p+1]-n[2*y+1]);const c=this.collinear[0],f=this.collinear[this.collinear.length-1],d=[n[2*c],n[2*c+1],n[2*f],n[2*f+1]],g=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let p=0,y=n.length/2;p<y;++p){const v=Zue(n[2*p],n[2*p+1],g);n[2*p]=v[0],n[2*p+1]=v[1]}this._delaunator=new ov(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),l=this._hullIndex.fill(-1);for(let c=0,f=i.length;c<f;++c){const d=a[c%3===2?c-2:c+1];(i[c]===-1||s[d]===-1)&&(s[d]=c)}for(let c=0,f=r.length;c<f;++c)l[r[c]]=c;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],s[r[0]]=1,r.length===2&&(s[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new Yue(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:a,triangles:s,collinear:l}=this;if(l){const g=l.indexOf(t);g>0&&(yield l[g-1]),g<l.length-1&&(yield l[g+1]);return}const c=n[t];if(c===-1)return;let f=c,d=-1;do{if(yield d=s[f],f=f%3===2?f-2:f+1,s[f]!==t)return;if(f=a[f],f===-1){const g=i[(r[t]+1)%i.length];g!==d&&(yield g);return}}while(f!==c)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let a;for(;(a=this._step(i,t,n))>=0&&a!==i&&a!==r;)i=a;return a}_step(t,n,i){const{inedges:r,hull:a,_hullIndex:s,halfedges:l,triangles:c,points:f}=this;if(r[t]===-1||!f.length)return(t+1)%(f.length>>1);let d=t,g=bf(n-f[t*2],2)+bf(i-f[t*2+1],2);const p=r[t];let y=p;do{let v=c[y];const b=bf(n-f[v*2],2)+bf(i-f[v*2+1],2);if(b<g&&(g=b,d=v),y=y%3===2?y-2:y+1,c[y]!==t)break;if(y=l[y],y===-1){if(y=a[(s[t]+1)%a.length],y!==v&&bf(n-f[y*2],2)+bf(i-f[y*2+1],2)<g)return y;break}}while(y!==p);return d}render(t){const n=t==null?t=new ku:void 0,{points:i,halfedges:r,triangles:a}=this;for(let s=0,l=r.length;s<l;++s){const c=r[s];if(c<s)continue;const f=a[s]*2,d=a[c]*2;t.moveTo(i[f],i[f+1]),t.lineTo(i[d],i[d+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new ku:void 0,{points:r}=this;for(let a=0,s=r.length;a<s;a+=2){const l=r[a],c=r[a+1];t.moveTo(l+n,c),t.arc(l,c,n,0,Xue)}return i&&i.value()}renderHull(t){const n=t==null?t=new ku:void 0,{hull:i,points:r}=this,a=i[0]*2,s=i.length;t.moveTo(r[a],r[a+1]);for(let l=1;l<s;++l){const c=2*i[l];t.lineTo(r[c],r[c+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new mA;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new ku:void 0,{points:r,triangles:a}=this,s=a[t*=3]*2,l=a[t+1]*2,c=a[t+2]*2;return n.moveTo(r[s],r[s+1]),n.lineTo(r[l],r[l+1]),n.lineTo(r[c],r[c+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new mA;return this.renderTriangle(t,n),n.value()}}function Kue(e,t,n,i){const r=e.length,a=new Float64Array(r*2);for(let s=0;s<r;++s){const l=e[s];a[s*2]=t.call(i,l,s,e),a[s*2+1]=n.call(i,l,s,e)}return a}function*Jue(e,t,n,i){let r=0;for(const a of e)yield t.call(i,a,r,e),yield n.call(i,a,r,e),++r}function EM(e){J.call(this,null,e)}EM.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const ece=[-1e5,-1e5,1e5,1e5];ye(EM,J,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:ece;const a=this.value=SM.from(i,e.x,e.y).voronoi(r);for(let s=0,l=i.length;s<l;++s){const c=a.cellPolygon(s);i[s][n]=c&&!nce(c)?tce(c):null}return t.reflow(e.modified()).modifies(n)}});function tce(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function nce(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const ice=Object.freeze(Object.defineProperty({__proto__:null,voronoi:EM},Symbol.toStringTag,{value:"Module"}));var t_=Math.PI/180,Lg=64,H1=2048;function rce(){var e=[256,256],t,n,i,r,a,s,l,c=gq,f=[],d=Math.random,g={};g.layout=function(){for(var v=p(fl()),b=cce((e[0]>>5)*e[1]),S=null,_=f.length,w=-1,A=[],T=f.map(k=>({text:t(k),font:n(k),style:r(k),weight:a(k),rotate:s(k),size:~~(i(k)+1e-14),padding:l(k),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:k})).sort((k,M)=>M.size-k.size);++w<_;){var $=T[w];$.x=e[0]*(d()+.5)>>1,$.y=e[1]*(d()+.5)>>1,ace(v,$,T,w),$.hasText&&y(b,$,S)&&(A.push($),S?oce(S,$):S=[{x:$.x+$.x0,y:$.y+$.y0},{x:$.x+$.x1,y:$.y+$.y1}],$.x-=e[0]>>1,$.y-=e[1]>>1)}return A};function p(v){v.width=v.height=1;var b=Math.sqrt(v.getContext("2d").getImageData(0,0,1,1).data.length>>2);v.width=(Lg<<5)/b,v.height=H1/b;var S=v.getContext("2d");return S.fillStyle=S.strokeStyle="red",S.textAlign="center",{context:S,ratio:b}}function y(v,b,S){for(var _=b.x,w=b.y,A=Math.hypot(e[0],e[1]),T=c(e),$=d()<.5?1:-1,k=-$,M,N,z;(M=T(k+=$))&&(N=~~M[0],z=~~M[1],!(Math.min(Math.abs(N),Math.abs(z))>=A));)if(b.x=_+N,b.y=w+z,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>e[0]||b.y+b.y1>e[1])&&(!S||!sce(b,v,e[0]))&&(!S||lce(b,S))){for(var j=b.sprite,U=b.width>>5,X=e[0]>>5,H=b.x-(U<<4),q=H&127,R=32-q,O=b.y1-b.y0,B=(b.y+b.y0)*X+(H>>5),Y,Z=0;Z<O;Z++){Y=0;for(var oe=0;oe<=U;oe++)v[B+oe]|=Y<<R|(oe<U?(Y=j[Z*U+oe])>>>q:0);B+=X}return b.sprite=null,!0}return!1}return g.words=function(v){return arguments.length?(f=v,g):f},g.size=function(v){return arguments.length?(e=[+v[0],+v[1]],g):e},g.font=function(v){return arguments.length?(n=uu(v),g):n},g.fontStyle=function(v){return arguments.length?(r=uu(v),g):r},g.fontWeight=function(v){return arguments.length?(a=uu(v),g):a},g.rotate=function(v){return arguments.length?(s=uu(v),g):s},g.text=function(v){return arguments.length?(t=uu(v),g):t},g.spiral=function(v){return arguments.length?(c=fce[v]||v,g):c},g.fontSize=function(v){return arguments.length?(i=uu(v),g):i},g.padding=function(v){return arguments.length?(l=uu(v),g):l},g.random=function(v){return arguments.length?(d=v,g):d},g}function ace(e,t,n,i){if(!t.sprite){var r=e.context,a=e.ratio;r.clearRect(0,0,(Lg<<5)/a,H1/a);var s=0,l=0,c=0,f=n.length,d,g,p,y,v;for(--i;++i<f;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,d=r.measureText(t.text+"m").width*a,p=t.size<<1,t.rotate){var b=Math.sin(t.rotate*t_),S=Math.cos(t.rotate*t_),_=d*S,w=d*b,A=p*S,T=p*b;d=Math.max(Math.abs(_+T),Math.abs(_-T))+31>>5<<5,p=~~Math.max(Math.abs(w+A),Math.abs(w-A))}else d=d+31>>5<<5;if(p>c&&(c=p),s+d>=Lg<<5&&(s=0,l+=c,c=0),l+p>=H1)break;r.translate((s+(d>>1))/a,(l+(p>>1))/a),t.rotate&&r.rotate(t.rotate*t_),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=d,t.height=p,t.xoff=s,t.yoff=l,t.x1=d>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=d}for(var $=r.getImageData(0,0,(Lg<<5)/a,H1/a).data,k=[];--i>=0;)if(t=n[i],!!t.hasText){for(d=t.width,g=d>>5,p=t.y1-t.y0,y=0;y<p*g;y++)k[y]=0;if(s=t.xoff,s==null)return;l=t.yoff;var M=0,N=-1;for(v=0;v<p;v++){for(y=0;y<d;y++){var z=g*v+(y>>5),j=$[(l+v)*(Lg<<5)+(s+y)<<2]?1<<31-y%32:0;k[z]|=j,M|=j}M?N=v:(t.y0++,p--,v--,l++)}t.y1=t.y0+N,t.sprite=k.slice(0,(t.y1-t.y0)*g)}}}function sce(e,t,n){n>>=5;for(var i=e.sprite,r=e.width>>5,a=e.x-(r<<4),s=a&127,l=32-s,c=e.y1-e.y0,f=(e.y+e.y0)*n+(a>>5),d,g=0;g<c;g++){d=0;for(var p=0;p<=r;p++)if((d<<l|(p<r?(d=i[g*r+p])>>>s:0))&t[f+p])return!0;f+=n}return!1}function oce(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function lce(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function gq(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function uce(e){var t=4,n=t*e[0]/e[1],i=0,r=0;return function(a){var s=a<0?-1:1;switch(Math.sqrt(1+4*s*a)-s&3){case 0:i+=n;break;case 1:r+=t;break;case 2:i-=n;break;default:r-=t;break}return[i,r]}}function cce(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function uu(e){return typeof e=="function"?e:function(){return e}}var fce={archimedean:gq,rectangular:uce};const pq=["x","y","font","fontSize","fontStyle","fontWeight","angle"],dce=["text","font","rotate","fontSize","fontStyle","fontWeight"];function _M(e){J.call(this,rce(),e)}_M.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:pq}]};ye(_M,J,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&ee("Wordcloud size dimensions must be non-zero.");function n(v){const b=e[v];return He(b)&&t.modified(b.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||dce.some(n)))return;const r=t.materialize(t.SOURCE).source,a=this.value,s=e.as||pq;let l=e.fontSize||14,c;if(He(l)?c=e.fontSizeRange:l=ri(l),c){const v=l,b=ft("sqrt")().domain(Xa(r,v)).range(c);l=S=>b(v(S))}r.forEach(v=>{v[s[0]]=NaN,v[s[1]]=NaN,v[s[3]]=0});const f=a.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(l).random(Ur).layout(),d=a.size(),g=d[0]>>1,p=d[1]>>1,y=f.length;for(let v=0,b,S;v<y;++v)b=f[v],S=b.datum,S[s[0]]=b.x+g,S[s[1]]=b.y+p,S[s[2]]=b.font,S[s[3]]=b.size,S[s[4]]=b.style,S[s[5]]=b.weight,S[s[6]]=b.rotate;return t.reflow(i).modifies(s)}});const hce=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:_M},Symbol.toStringTag,{value:"Module"})),gce=e=>new Uint8Array(e),pce=e=>new Uint16Array(e),Wg=e=>new Uint32Array(e);function mce(){let e=8,t=[],n=Wg(0),i=f1(0,e),r=f1(0,e);return{data:()=>t,seen:()=>n=yce(n,t.length),add(a){for(let s=0,l=t.length,c=a.length,f;s<c;++s)f=a[s],f._index=l++,t.push(f)},remove(a,s){const l=t.length,c=Array(l-a),f=t;let d,g,p;for(g=0;!s[g]&&g<l;++g)c[g]=t[g],f[g]=g;for(p=g;g<l;++g)d=t[g],s[g]?f[g]=-1:(f[g]=p,i[p]=i[g],r[p]=r[g],c[p]=d,d._index=p++),i[g]=0;return t=c,f},size:()=>t.length,curr:()=>i,prev:()=>r,reset:a=>r[a]=i[a],all:()=>e<257?255:e<65537?65535:4294967295,set(a,s){i[a]|=s},clear(a,s){i[a]&=~s},resize(a,s){const l=i.length;(a>l||s>e)&&(e=Math.max(s,e),i=f1(a,e,i),r=f1(a,e))}}}function yce(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function f1(e,t,n){const i=(t<257?gce:t<65537?pce:Wg)(e);return n&&i.set(n),i}function U4(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,a){const s=this,l=s.bisect(s.range,r.value),c=r.index,f=l[0],d=l[1],g=c.length;let p;for(p=0;p<f;++p)a[c[p]]|=i;for(p=d;p<g;++p)a[c[p]]|=i;return s}}}function B4(){let e=Wg(0),t=[],n=0;function i(l,c,f){if(!c.length)return[];const d=n,g=c.length,p=Wg(g);let y=Array(g),v,b,S;for(S=0;S<g;++S)y[S]=l(c[S]),p[S]=S;if(y=vce(y,p),d)v=t,b=e,t=Array(d+g),e=Wg(d+g),bce(f,v,b,d,y,p,g,t,e);else{if(f>0)for(S=0;S<g;++S)p[S]+=f;t=y,e=p}return n=d+g,{index:p,value:y}}function r(l,c){const f=n;let d,g,p;for(g=0;!c[e[g]]&&g<f;++g);for(p=g;g<f;++g)c[d=e[g]]||(e[p]=d,t[p]=t[g],++p);n=f-l}function a(l){for(let c=0,f=n;c<f;++c)e[c]=l[e[c]]}function s(l,c){let f;return c?f=c.length:(c=t,f=n),[wW(c,l[0],0,f),gl(c,l[1],0,f)]}return{insert:i,remove:r,bisect:s,reindex:a,index:()=>e,size:()=>n}}function vce(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],a=e[i];return r<a?-1:r>a?1:0}),TW(e,t)}function bce(e,t,n,i,r,a,s,l,c){let f=0,d=0,g;for(g=0;f<i&&d<s;++g)t[f]<r[d]?(l[g]=t[f],c[g]=n[f++]):(l[g]=r[d],c[g]=a[d++]+e);for(;f<i;++f,++g)l[g]=t[f],c[g]=n[f];for(;d<s;++d,++g)l[g]=r[d],c[g]=a[d]+e}function wM(e){J.call(this,mce(),e),this._indices=null,this._dims=null}wM.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ye(wM,J,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},a=this._dims=[],s=i.length;let l=0,c,f;for(;l<s;++l)c=n[l].fname,f=r[c]||(r[c]=B4()),a.push(U4(f,l,i[l]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,a=this._indices,s=this._dims,l=this.value,c=l.curr(),f=l.prev(),d=l.all(),g=n.rem=n.add,p=n.mod,y=r.length,v={};let b,S,_,w,A,T,$,k,M;if(f.set(c),t.rem.length&&(A=this.remove(e,t,n)),t.add.length&&l.add(t.add),t.mod.length)for(T={},w=t.mod,$=0,k=w.length;$<k;++$)T[w[$]._index]=1;for($=0;$<y;++$)M=i[$],(!s[$]||e.modified("fields",$)||t.modified(M.fields))&&(_=M.fname,(b=v[_])||(a[_]=S=B4(),v[_]=b=S.insert(M,t.source,0)),s[$]=U4(S,$,r[$]).onAdd(b,c));for($=0,k=l.data().length;$<k;++$)A[$]||(f[$]!==c[$]?g.push($):T[$]&&c[$]!==d&&p.push($));return l.mask=(1<<y)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,a=this._dims,s=this._indices,l=e.fields,c={},f=n.add,d=r.size()+i.length,g=a.length;let p=r.size(),y,v,b;r.resize(d,g),r.add(i);const S=r.curr(),_=r.prev(),w=r.all();for(y=0;y<g;++y)v=l[y].fname,b=c[v]||(c[v]=s[v].insert(l[y],i,p)),a[y].onAdd(b,S);for(;p<d;++p)_[p]=w,S[p]!==w&&f.push(p)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),a=i.all(),s=e.mod;let l,c,f;for(l=0,c=s.length;l<c;++l)f=s[l]._index,r[f]!==a&&n.push(f)},remove(e,t,n){const i=this._indices,r=this.value,a=r.curr(),s=r.prev(),l=r.all(),c={},f=n.rem,d=t.rem;let g,p,y,v;for(g=0,p=d.length;g<p;++g)y=d[g]._index,c[y]=1,s[y]=v=a[y],a[y]=l,v!==l&&f.push(y);for(y in i)i[y].remove(p,c);return this.reindex(t,p,c),c},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const a=r.remove(t,n);for(const s in i)i[s].reindex(a)})},update(e,t,n){const i=this._dims,r=e.query,a=t.stamp,s=i.length;let l=0,c,f;for(n.filters=0,f=0;f<s;++f)e.modified("query",f)&&(c=f,++l);if(l===1)l=i[c].one,this.incrementOne(i[c],r[c],n.add,n.rem);else for(f=0,l=0;f<s;++f)e.modified("query",f)&&(l|=i[f].one,this.incrementAll(i[f],r[f],a,n.add),n.rem=n.add);return l},incrementAll(e,t,n,i){const r=this.value,a=r.seen(),s=r.curr(),l=r.prev(),c=e.index(),f=e.bisect(e.range),d=e.bisect(t),g=d[0],p=d[1],y=f[0],v=f[1],b=e.one;let S,_,w;if(g<y)for(S=g,_=Math.min(y,p);S<_;++S)w=c[S],a[w]!==n&&(l[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;else if(g>y)for(S=y,_=Math.min(g,v);S<_;++S)w=c[S],a[w]!==n&&(l[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;if(p>v)for(S=Math.max(g,v),_=p;S<_;++S)w=c[S],a[w]!==n&&(l[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;else if(p<v)for(S=Math.max(y,p),_=v;S<_;++S)w=c[S],a[w]!==n&&(l[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;e.range=t.slice()},incrementOne(e,t,n,i){const r=this.value,a=r.curr(),s=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],g=l[0],p=l[1],y=e.one;let v,b,S;if(f<g)for(v=f,b=Math.min(g,d);v<b;++v)S=s[v],a[S]^=y,n.push(S);else if(f>g)for(v=g,b=Math.min(f,p);v<b;++v)S=s[v],a[S]^=y,i.push(S);if(d>p)for(v=Math.max(f,p),b=d;v<b;++v)S=s[v],a[S]^=y,n.push(S);else if(d<p)for(v=Math.max(g,d),b=p;v<b;++v)S=s[v],a[S]^=y,i.push(S);e.range=t.slice()}});function AM(e){J.call(this,null,e)}AM.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ye(AM,J,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if((r&n)===0)return t.StopPropagation;const a=t.fork(t.ALL),s=i.data(),l=i.curr(),c=i.prev(),f=d=>l[d]&n?null:s[d];return a.filter(a.MOD,f),r&r-1?(a.filter(a.ADD,d=>{const g=l[d]&n;return!g&&g^c[d]&n?s[d]:null}),a.filter(a.REM,d=>{const g=l[d]&n;return g&&!(g^(g^c[d]&n))?s[d]:null})):(a.filter(a.ADD,f),a.filter(a.REM,d=>(l[d]&n)===r?s[d]:null)),a.filter(a.SOURCE,d=>f(d._index))}});const xce=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:wM,resolvefilter:AM},Symbol.toStringTag,{value:"Module"})),Sce="RawCode",Wu="Literal",Ece="Property",_ce="Identifier",wce="ArrayExpression",Ace="BinaryExpression",mq="CallExpression",Cce="ConditionalExpression",Tce="LogicalExpression",Mce="MemberExpression",$ce="ObjectExpression",kce="UnaryExpression";function ya(e){this.type=e}ya.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=Dce(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function Dce(e){switch(e.type){case wce:return e.elements;case Ace:case Tce:return[e.left,e.right];case mq:return[e.callee].concat(e.arguments);case Cce:return[e.test,e.consequent,e.alternate];case Mce:return[e.object,e.property];case $ce:return e.properties;case Ece:return[e.key,e.value];case kce:return[e.argument];case _ce:case Wu:case Sce:default:return[]}}var os,we,ne,ti,xt,kb=1,im=2,Qu=3,Rl=4,Db=5,pc=6,Di=7,rm=8,Oce=9;os={};os[kb]="Boolean";os[im]="<end>";os[Qu]="Identifier";os[Rl]="Keyword";os[Db]="Null";os[pc]="Numeric";os[Di]="Punctuator";os[rm]="String";os[Oce]="RegularExpression";var Nce="ArrayExpression",Rce="BinaryExpression",zce="CallExpression",Fce="ConditionalExpression",yq="Identifier",Lce="Literal",Uce="LogicalExpression",Bce="MemberExpression",jce="ObjectExpression",qce="Property",Ice="UnaryExpression",_n="Unexpected token %0",Pce="Unexpected number",Hce="Unexpected string",Gce="Unexpected identifier",Yce="Unexpected reserved word",Xce="Unexpected end of input",yA="Invalid regular expression",n_="Invalid regular expression: missing /",vq="Octal literals are not allowed in strict mode.",Vce="Duplicate data property in object literal not allowed in strict mode",jn="ILLEGAL",yp="Disabled.",Wce=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Qce=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Ob(e,t){if(!e)throw new Error("ASSERT: "+t)}function Bs(e){return e>=48&&e<=57}function CM(e){return"0123456789abcdefABCDEF".includes(e)}function Qg(e){return"01234567".includes(e)}function Zce(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function vp(e){return e===10||e===13||e===8232||e===8233}function am(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Wce.test(String.fromCharCode(e))}function lv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Qce.test(String.fromCharCode(e))}const Kce={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function bq(){for(;ne<ti;){const e=we.charCodeAt(ne);if(Zce(e)||vp(e))++ne;else break}}function vA(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)ne<ti&&CM(we[ne])?(i=we[ne++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):lt({},_n,jn);return String.fromCharCode(r)}function Jce(){var e,t,n,i;for(e=we[ne],t=0,e==="}"&&lt({},_n,jn);ne<ti&&(e=we[ne++],!!CM(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&lt({},_n,jn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function xq(){var e,t;for(e=we.charCodeAt(ne++),t=String.fromCharCode(e),e===92&&(we.charCodeAt(ne)!==117&&lt({},_n,jn),++ne,e=vA("u"),(!e||e==="\\"||!am(e.charCodeAt(0)))&&lt({},_n,jn),t=e);ne<ti&&(e=we.charCodeAt(ne),!!lv(e));)++ne,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),we.charCodeAt(ne)!==117&&lt({},_n,jn),++ne,e=vA("u"),(!e||e==="\\"||!lv(e.charCodeAt(0)))&&lt({},_n,jn),t+=e);return t}function efe(){var e,t;for(e=ne++;ne<ti;){if(t=we.charCodeAt(ne),t===92)return ne=e,xq();if(lv(t))++ne;else break}return we.slice(e,ne)}function tfe(){var e,t,n;return e=ne,t=we.charCodeAt(ne)===92?xq():efe(),t.length===1?n=Qu:Kce.hasOwnProperty(t)?n=Rl:t==="null"?n=Db:t==="true"||t==="false"?n=kb:n=Qu,{type:n,value:t,start:e,end:ne}}function i_(){var e=ne,t=we.charCodeAt(ne),n,i=we[ne],r,a,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ne,{type:Di,value:String.fromCharCode(t),start:e,end:ne};default:if(n=we.charCodeAt(ne+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ne+=2,{type:Di,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ne};case 33:case 61:return ne+=2,we.charCodeAt(ne)===61&&++ne,{type:Di,value:we.slice(e,ne),start:e,end:ne}}}if(s=we.substr(ne,4),s===">>>=")return ne+=4,{type:Di,value:s,start:e,end:ne};if(a=s.substr(0,3),a===">>>"||a==="<<="||a===">>=")return ne+=3,{type:Di,value:a,start:e,end:ne};if(r=a.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return ne+=2,{type:Di,value:r,start:e,end:ne};if(r==="//"&&lt({},_n,jn),"<>=!+-*%&|^/".includes(i))return++ne,{type:Di,value:i,start:e,end:ne};lt({},_n,jn)}function nfe(e){let t="";for(;ne<ti&&CM(we[ne]);)t+=we[ne++];return t.length===0&&lt({},_n,jn),am(we.charCodeAt(ne))&&lt({},_n,jn),{type:pc,value:parseInt("0x"+t,16),start:e,end:ne}}function ife(e){let t="0"+we[ne++];for(;ne<ti&&Qg(we[ne]);)t+=we[ne++];return(am(we.charCodeAt(ne))||Bs(we.charCodeAt(ne)))&&lt({},_n,jn),{type:pc,value:parseInt(t,8),octal:!0,start:e,end:ne}}function j4(){var e,t,n;if(n=we[ne],Ob(Bs(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ne,e="",n!=="."){if(e=we[ne++],n=we[ne],e==="0"){if(n==="x"||n==="X")return++ne,nfe(t);if(Qg(n))return ife(t);n&&Bs(n.charCodeAt(0))&&lt({},_n,jn)}for(;Bs(we.charCodeAt(ne));)e+=we[ne++];n=we[ne]}if(n==="."){for(e+=we[ne++];Bs(we.charCodeAt(ne));)e+=we[ne++];n=we[ne]}if(n==="e"||n==="E")if(e+=we[ne++],n=we[ne],(n==="+"||n==="-")&&(e+=we[ne++]),Bs(we.charCodeAt(ne)))for(;Bs(we.charCodeAt(ne));)e+=we[ne++];else lt({},_n,jn);return am(we.charCodeAt(ne))&&lt({},_n,jn),{type:pc,value:parseFloat(e),start:t,end:ne}}function rfe(){var e="",t,n,i,r,a=!1;for(t=we[ne],Ob(t==="'"||t==='"',"String literal must starts with a quote"),n=ne,++ne;ne<ti;)if(i=we[ne++],i===t){t="";break}else if(i==="\\")if(i=we[ne++],!i||!vp(i.charCodeAt(0)))switch(i){case"u":case"x":we[ne]==="{"?(++ne,e+=Jce()):e+=vA(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Qg(i)?(r="01234567".indexOf(i),r!==0&&(a=!0),ne<ti&&Qg(we[ne])&&(a=!0,r=r*8+"01234567".indexOf(we[ne++]),"0123".includes(i)&&ne<ti&&Qg(we[ne])&&(r=r*8+"01234567".indexOf(we[ne++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&we[ne]===`
`&&++ne;else{if(vp(i.charCodeAt(0)))break;e+=i}return t!==""&&lt({},_n,jn),{type:rm,value:e,octal:a,start:n,end:ne}}function afe(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";lt({},yA)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{lt({},yA)}try{return new RegExp(e,t)}catch{return null}}function sfe(){var e,t,n,i,r;for(e=we[ne],Ob(e==="/","Regular expression literal must start with a slash"),t=we[ne++],n=!1,i=!1;ne<ti;)if(e=we[ne++],t+=e,e==="\\")e=we[ne++],vp(e.charCodeAt(0))&&lt({},n_),t+=e;else if(vp(e.charCodeAt(0)))lt({},n_);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||lt({},n_),r=t.substr(1,t.length-2),{value:r,literal:t}}function ofe(){var e,t,n;for(t="",n="";ne<ti&&(e=we[ne],!!lv(e.charCodeAt(0)));)++ne,e==="\\"&&ne<ti?lt({},_n,jn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&lt({},yA,n),{value:n,literal:t}}function lfe(){var e,t,n,i;return xt=null,bq(),e=ne,t=sfe(),n=ofe(),i=afe(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:ne}}function ufe(e){return e.type===Qu||e.type===Rl||e.type===kb||e.type===Db}function Sq(){if(bq(),ne>=ti)return{type:im,start:ne,end:ne};const e=we.charCodeAt(ne);return am(e)?tfe():e===40||e===41||e===59?i_():e===39||e===34?rfe():e===46?Bs(we.charCodeAt(ne+1))?j4():i_():Bs(e)?j4():i_()}function Ni(){const e=xt;return ne=e.end,xt=Sq(),ne=e.end,e}function Eq(){const e=ne;xt=Sq(),ne=e}function cfe(e){const t=new ya(Nce);return t.elements=e,t}function q4(e,t,n){const i=new ya(e==="||"||e==="&&"?Uce:Rce);return i.operator=e,i.left=t,i.right=n,i}function ffe(e,t){const n=new ya(zce);return n.callee=e,n.arguments=t,n}function dfe(e,t,n){const i=new ya(Fce);return i.test=e,i.consequent=t,i.alternate=n,i}function TM(e){const t=new ya(yq);return t.name=e,t}function Ug(e){const t=new ya(Lce);return t.value=e.value,t.raw=we.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function I4(e,t,n){const i=new ya(Bce);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function hfe(e){const t=new ya(jce);return t.properties=e,t}function P4(e,t,n){const i=new ya(qce);return i.key=t,i.value=n,i.kind=e,i}function gfe(e,t){const n=new ya(Ice);return n.operator=e,n.argument=t,n.prefix=!0,n}function lt(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(a,s)=>(Ob(s<i.length,"Message reference must be in range"),i[s]));throw n=new Error(r),n.index=ne,n.description=r,n}function Nb(e){e.type===im&&lt(e,Xce),e.type===pc&&lt(e,Pce),e.type===rm&&lt(e,Hce),e.type===Qu&&lt(e,Gce),e.type===Rl&&lt(e,Yce),lt(e,_n,e.value)}function ni(e){const t=Ni();(t.type!==Di||t.value!==e)&&Nb(t)}function Ot(e){return xt.type===Di&&xt.value===e}function r_(e){return xt.type===Rl&&xt.value===e}function pfe(){const e=[];for(ne=xt.start,ni("[");!Ot("]");)Ot(",")?(Ni(),e.push(null)):(e.push(Zu()),Ot("]")||ni(","));return Ni(),cfe(e)}function H4(){ne=xt.start;const e=Ni();return e.type===rm||e.type===pc?(e.octal&&lt(e,vq),Ug(e)):TM(e.value)}function mfe(){var e,t,n,i;if(ne=xt.start,e=xt,e.type===Qu)return n=H4(),ni(":"),i=Zu(),P4("init",n,i);if(e.type===im||e.type===Di)Nb(e);else return t=H4(),ni(":"),i=Zu(),P4("init",t,i)}function yfe(){var e=[],t,n,i,r={},a=String;for(ne=xt.start,ni("{");!Ot("}");)t=mfe(),t.key.type===yq?n=t.key.name:n=a(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?lt({},Vce):r[i]=!0,e.push(t),Ot("}")||ni(",");return ni("}"),hfe(e)}function vfe(){ni("(");const e=MM();return ni(")"),e}const bfe={if:1};function xfe(){var e,t,n;if(Ot("("))return vfe();if(Ot("["))return pfe();if(Ot("{"))return yfe();if(e=xt.type,ne=xt.start,e===Qu||bfe[xt.value])n=TM(Ni().value);else if(e===rm||e===pc)xt.octal&&lt(xt,vq),n=Ug(Ni());else{if(e===Rl)throw new Error(yp);e===kb?(t=Ni(),t.value=t.value==="true",n=Ug(t)):e===Db?(t=Ni(),t.value=null,n=Ug(t)):Ot("/")||Ot("/=")?(n=Ug(lfe()),Eq()):Nb(Ni())}return n}function Sfe(){const e=[];if(ni("("),!Ot(")"))for(;ne<ti&&(e.push(Zu()),!Ot(")"));)ni(",");return ni(")"),e}function Efe(){ne=xt.start;const e=Ni();return ufe(e)||Nb(e),TM(e.value)}function _fe(){return ni("."),Efe()}function wfe(){ni("[");const e=MM();return ni("]"),e}function Afe(){var e,t,n;for(e=xfe();;)if(Ot("."))n=_fe(),e=I4(".",e,n);else if(Ot("("))t=Sfe(),e=ffe(e,t);else if(Ot("["))n=wfe(),e=I4("[",e,n);else break;return e}function G4(){const e=Afe();if(xt.type===Di&&(Ot("++")||Ot("--")))throw new Error(yp);return e}function G1(){var e,t;if(xt.type!==Di&&xt.type!==Rl)t=G4();else{if(Ot("++")||Ot("--"))throw new Error(yp);if(Ot("+")||Ot("-")||Ot("~")||Ot("!"))e=Ni(),t=G1(),t=gfe(e.value,t);else{if(r_("delete")||r_("void")||r_("typeof"))throw new Error(yp);t=G4()}}return t}function Y4(e){let t=0;if(e.type!==Di&&e.type!==Rl)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Cfe(){var e,t,n,i,r,a,s,l,c,f;if(e=xt,c=G1(),i=xt,r=Y4(i),r===0)return c;for(i.prec=r,Ni(),t=[e,xt],s=G1(),a=[c,i,s];(r=Y4(xt))>0;){for(;a.length>2&&r<=a[a.length-2].prec;)s=a.pop(),l=a.pop().value,c=a.pop(),t.pop(),n=q4(l,c,s),a.push(n);i=Ni(),i.prec=r,a.push(i),t.push(xt),n=G1(),a.push(n)}for(f=a.length-1,n=a[f],t.pop();f>1;)t.pop(),n=q4(a[f-1].value,a[f-2],n),f-=2;return n}function Zu(){var e,t,n;return e=Cfe(),Ot("?")&&(Ni(),t=Zu(),ni(":"),n=Zu(),e=dfe(e,t,n)),e}function MM(){const e=Zu();if(Ot(","))throw new Error(yp);return e}function $M(e){we=e,ne=0,ti=we.length,xt=null,Eq();const t=MM();if(xt.type!==im)throw new Error("Unexpect token after expression.");return t}var _q={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function wq(e){function t(s,l,c,f){let d=e(l[0]);return c&&(d=c+"("+d+")",c.lastIndexOf("new ",0)===0&&(d="("+d+")")),d+"."+s+(f<0?"":f===0?"()":"("+l.slice(1).map(e).join(",")+")")}function n(s,l,c){return f=>t(s,f,l,c)}const i="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&ee("Missing arguments to clamp function."),s.length>3&&ee("Too many arguments to clamp function.");const l=s.map(e);return"Math.max("+l[1]+", Math.min("+l[2]+","+l[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),btoa:"btoa",atob:"atob",regexp:a,test:n("test",a),if:function(s){s.length<3&&ee("Missing arguments to if function."),s.length>3&&ee("Too many arguments to if function.");const l=s.map(e);return"("+l[0]+"?"+l[1]+":"+l[2]+")"}}}function Tfe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function Aq(e){e=e||{};const t=e.allowed?ca(e.allowed):{},n=e.forbidden?ca(e.forbidden):{},i=e.constants||_q,r=(e.functions||wq)(g),a=e.globalvar,s=e.fieldvar,l=He(a)?a:v=>`${a}["${v}"]`;[...Object.getOwnPropertyNames(Object.prototype).filter(v=>typeof Object.prototype[v]=="function")];let c={},f={},d=0;function g(v){if(xe(v))return v;const b=p[v.type];return b==null&&ee("Unsupported type: "+v.type),b(v)}const p={Literal:v=>v.raw,Identifier:v=>{const b=v.name;return d>0?b:Ee(n,b)?ee("Illegal identifier: "+b):Ee(i,b)?i[b]:Ee(t,b)?b:(c[b]=1,l(b))},MemberExpression:v=>{const b=!v.computed,S=g(v.object);b&&(d+=1);const _=g(v.property);return S===s&&(f[Tfe(_)]=1),b&&(d-=1),S+(b?"."+_:"["+_+"]")},CallExpression:v=>{v.callee.type!=="Identifier"&&ee("Illegal callee type: "+v.callee.type);const b=v.callee.name,S=v.arguments,_=Ee(r,b)&&r[b];return _||ee("Unrecognized function: "+b),He(_)?_(S):_+"("+S.map(g).join(",")+")"},ArrayExpression:v=>"["+v.elements.map(g).join(",")+"]",BinaryExpression:v=>"("+g(v.left)+" "+v.operator+" "+g(v.right)+")",UnaryExpression:v=>"("+v.operator+g(v.argument)+")",ConditionalExpression:v=>"("+g(v.test)+"?"+g(v.consequent)+":"+g(v.alternate)+")",LogicalExpression:v=>"("+g(v.left)+v.operator+g(v.right)+")",ObjectExpression:v=>{for(const b of v.properties){const S=b.key.name;dC.has(S)&&ee("Illegal property: "+S)}return"{"+v.properties.map(g).join(",")+"}"},Property:v=>{d+=1;const b=g(v.key);return d-=1,b+":"+g(v.value)}};function y(v){const b={code:g(v),globals:Object.keys(c),fields:Object.keys(f)};return c={},f={},b}return y.functions=r,y.constants=i,y}const X4=Symbol("vega_selection_getter");function Cq(e){return(!e.getter||!e.getter[X4])&&(e.getter=zr(e.field),e.getter[X4]=!0),e.getter}const kM="intersect",V4="union",Mfe="vlMulti",$fe="vlPoint",W4="or",kfe="and",za="_vgsid_",bp=zr(za),Dfe="E",Ofe="R",Nfe="R-E",Rfe="R-LE",zfe="R-RE",Ffe="E-LT",Lfe="E-LTE",Ufe="E-GT",Bfe="E-GTE",jfe="E-VALID",qfe="E-ONE",uv="index:unit";function Q4(e,t){for(var n=t.fields,i=t.values,r=n.length,a=0,s,l;a<r;++a)if(l=n[a],s=Cq(l)(e),ll(s)&&(s=Zn(s)),ll(i[a])&&(i[a]=Zn(i[a])),ie(i[a])&&ll(i[a][0])&&(i[a]=i[a].map(Zn)),l.type===Dfe){if(ie(i[a])?!i[a].includes(s):s!==i[a])return!1}else if(l.type===Ofe){if(!Tf(s,i[a]))return!1}else if(l.type===zfe){if(!Tf(s,i[a],!0,!1))return!1}else if(l.type===Nfe){if(!Tf(s,i[a],!1,!1))return!1}else if(l.type===Rfe){if(!Tf(s,i[a],!1,!0))return!1}else if(l.type===Ffe){if(s>=i[a])return!1}else if(l.type===Lfe){if(s>i[a])return!1}else if(l.type===Ufe){if(s<=i[a])return!1}else if(l.type===Bfe){if(s<i[a])return!1}else if(l.type===jfe){if(s===null||isNaN(s))return!1}else if(l.type===qfe&&i[a].indexOf(s)===-1)return!1;return!0}function Ife(e,t,n){for(var i=this.context.data[e],r=i?i.values.value:[],a=i?i[uv]&&i[uv].value:void 0,s=n===kM,l=r.length,c=0,f,d,g,p,y;c<l;++c)if(f=r[c],a&&s){if(d=d||{},g=d[p=f.unit]||0,g===-1)continue;if(y=Q4(t,f),d[p]=y?-1:++g,y&&a.size===1)return!0;if(!y&&g===a.get(p).count)return!1}else if(y=Q4(t,f),s^y)return y;return l&&s}const Tq=kd(bp),Pfe=Tq.left,Hfe=Tq.right;function Gfe(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],a=i?i[uv]&&i[uv].value:void 0,s=n===kM,l=bp(t),c=Pfe(r,l);if(c===r.length||bp(r[c])!==l)return!1;if(a&&s){if(a.size===1)return!0;if(Hfe(r,l)-c<a.size)return!1}return!0}function Yfe(e,t){return ie(e)||ee("First argument to selectionTuples must be an array."),be(t)||ee("Second argument to selectionTuples must be an object."),e.map(n=>Pe(t.fields?{values:t.fields.map(i=>Cq(i)(n.datum))}:{[za]:bp(n.datum)},t))}function Xfe(e,t,n,i){for(var r=this.context.data[e],a=r?r.values.value:[],s={},l={},c={},f,d,g,p,y,v,b,S,_,w,A=a.length,T=0,$,k;T<A;++T)if(f=a[T],p=f.unit,d=f.fields,g=f.values,d&&g){for($=0,k=d.length;$<k;++$)y=d[$],b=s[y.field]||(s[y.field]={}),S=b[p]||(b[p]=[]),c[y.field]=_=y.type.charAt(0),w=a_[`${_}_union`],b[p]=w(S,Se(g[$]));n&&(S=l[p]||(l[p]=[]),S.push(Se(g).reduce((M,N,z)=>(M[d[z].field]=N,M),{})))}else y=za,v=bp(f),b=s[y]||(s[y]={}),S=b[p]||(b[p]=[]),S.push(v),n&&(S=l[p]||(l[p]=[]),S.push({[za]:v}));if(t=t||V4,s[za]?s[za]=a_[`${za}_${t}`](...Object.values(s[za])):Object.keys(s).forEach(M=>{s[M]=Object.keys(s[M]).map(N=>s[M][N]).reduce((N,z)=>N===void 0?z:a_[`${c[M]}_${t}`](N,z))}),a=Object.keys(l),n&&a.length){const M=i?$fe:Mfe;s[M]=t===V4?{[W4]:a.reduce((N,z)=>(N.push(...l[z]),N),[])}:{[kfe]:a.map(N=>({[W4]:l[N]}))}}return s}var a_={[`${za}_union`]:FW,[`${za}_intersect`]:RW,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=Zn(t[0]),i=Zn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=Zn(t[0]),i=Zn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const Vfe=":",Wfe="@";function DM(e,t,n,i){t[0].type!==Wu&&ee("First argument to selection functions must be a string literal.");const r=t[0].value,a=t.length>=2&&rt(t).value,s="unit",l=Wfe+s,c=Vfe+r;a===kM&&!Ee(i,l)&&(i[l]=n.getData(r).indataRef(n,s)),Ee(i,c)||(i[c]=n.getData(r).tuplesRef())}function Mq(e){const t=this.context.data[e];return t?t.values.value:[]}function Qfe(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count}function Zfe(e,t){const n=this.context.dataflow,i=this.context.data[e],r=i.input;return n.pulse(r,n.changeset().remove(Fr).insert(t)),1}function Kfe(e,t,n){if(e){const i=this.context.dataflow,r=e.mark.source;i.pulse(r,i.changeset().encode(e,t))}return n!==void 0?n:e}const sm=e=>function(t,n){const i=this.context.dataflow.locale();return t===null?"null":i[e](n)(t)},Jfe=sm("format"),$q=sm("timeFormat"),ede=sm("utcFormat"),tde=sm("timeParse"),nde=sm("utcParse"),d1=new Date(2e3,0,1);function Rb(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(d1.setYear(2e3),d1.setMonth(e),d1.setDate(t),$q.call(this,d1,n))}function ide(e){return Rb.call(this,e,1,"%B")}function rde(e){return Rb.call(this,e,1,"%b")}function ade(e){return Rb.call(this,0,2+e,"%A")}function sde(e){return Rb.call(this,0,2+e,"%a")}const ode=":",lde="@",bA="%",kq="$";function OM(e,t,n,i){t[0].type!==Wu&&ee("First argument to data functions must be a string literal.");const r=t[0].value,a=ode+r;if(!Ee(a,i))try{i[a]=n.getData(r).tuplesRef()}catch{}}function ude(e,t,n,i){t[0].type!==Wu&&ee("First argument to indata must be a string literal."),t[1].type!==Wu&&ee("Second argument to indata must be a string literal.");const r=t[0].value,a=t[1].value,s=lde+a;Ee(s,i)||(i[s]=n.getData(r).indataRef(n,a))}function yi(e,t,n,i){if(t[0].type===Wu)Z4(n,i,t[0].value);else for(e in n.scales)Z4(n,i,e)}function Z4(e,t,n){const i=bA+n;if(!Ee(t,i))try{t[i]=e.scaleRef(n)}catch{}}function ls(e,t){if(xe(e)){const n=t.scales[e];return n&&e6(n.value)?n.value:void 0}else if(He(e))return e6(e)?e:void 0}function cde(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=yi,n._range=yi,n._scale=yi;const i=r=>"_["+(r.type===Wu?ge(bA+r.value):ge(bA)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}function NM(e,t){return function(n,i,r){if(n){const a=ls(n,(r||this).context);return a&&a.path[e](i)}else return t(i)}}const fde=NM("area",$ae),dde=NM("bounds",Nae),hde=NM("centroid",Bae);function gde(e,t){const n=ls(e,(t||this).context);return n&&n.scale()}function pde(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function RM(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function mde(){return RM(this.context.dataflow,"warn",arguments)}function yde(){return RM(this.context.dataflow,"info",arguments)}function vde(){return RM(this.context.dataflow,"debug",arguments)}function s_(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function xA(e){const t=vl(e),n=s_(t.r),i=s_(t.g),r=s_(t.b);return .2126*n+.7152*i+.0722*r}function bde(e,t){const n=xA(e),i=xA(t),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function xde(){const e=[].slice.call(arguments);return e.unshift({}),Pe(...e)}function Dq(e,t){return e===t||e!==e&&t!==t?!0:ie(e)?ie(t)&&e.length===t.length?Sde(e,t):!1:be(e)&&be(t)?Oq(e,t):!1}function Sde(e,t){for(let n=0,i=e.length;n<i;++n)if(!Dq(e[n],t[n]))return!1;return!0}function Oq(e,t){for(const n in e)if(!Dq(e[n],t[n]))return!1;return!0}function K4(e){return t=>Oq(e,t)}function Ede(e,t,n,i,r,a){const s=this.context.dataflow,l=this.context.data[e],c=l.input,f=s.stamp();let d=l.changes,g,p;if(s._trigger===!1||!(c.value.length||t||i))return 0;if((!d||d.stamp<f)&&(l.changes=d=s.changeset(),d.stamp=f,s.runAfter(()=>{l.modified=!0,s.pulse(c,d).run()},!0,1)),n&&(g=n===!0?Fr:ie(n)||Pv(n)?n:K4(n),d.remove(g)),t&&d.insert(t),i&&(g=K4(i),c.value.some(g)?d.remove(g):d.insert(i)),r)for(p in a)d.modify(r,p,a[p]);return 1}function _de(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function wde(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const J4={};function Ade(e,t){const n=J4[t]||(J4[t]=zr(t));return ie(e)?e.map(n):n(e)}function zb(e){return ie(e)||ArrayBuffer.isView(e)?e:null}function zM(e){return zb(e)||(xe(e)?e:null)}function Cde(e,...t){return zb(e).join(...t)}function Tde(e,...t){return zM(e).indexOf(...t)}function Mde(e,...t){return zM(e).lastIndexOf(...t)}function $de(e,...t){return zM(e).slice(...t)}function kde(e,t,n){return He(n)&&ee("Function argument passed to replace."),!xe(t)&&!xC(t)&&ee("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function Dde(e){return zb(e).slice().reverse()}function Ode(e){return zb(e).slice().sort(Md)}function Nde(e,t,n){return V3(e||0,t||0,n||0)}function Rde(e,t){const n=ls(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function zde(e,t){const n=ls(e,(t||this).context);return n?n.copy():void 0}function Fde(e,t){const n=ls(e,(t||this).context);return n?n.domain():[]}function Lde(e,t,n){const i=ls(e,(n||this).context);return i?ie(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function Ude(e,t){const n=ls(e,(t||this).context);return n&&n.range?n.range():[]}function Bde(e,t,n){const i=ls(e,(n||this).context);return i?i(t):void 0}function jde(e,t,n,i,r){e=ls(e,(r||this).context);const a=_U(t,n);let s=e.domain(),l=s[0],c=rt(s),f=ii;return c-l?f=fU(e,l,c):e=(e.interpolator?ft("sequential")().interpolator(e.interpolator()):ft("linear")().interpolate(e.interpolate()).range(e.range())).domain([l=0,c=1]),e.ticks&&(s=e.ticks(+i||15),l!==s[0]&&s.unshift(l),c!==rt(s)&&s.push(c)),s.forEach(d=>a.stop(f(d),e(d))),a}function qde(e,t,n){const i=ls(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}}function Ide(e){let t=null;return function(n){return n?up(n,t=t||td(e)):e}}const Nq=e=>e.data;function Rq(e,t){const n=Mq.call(t,e);return n.root&&n.root.lookup||{}}function Pde(e,t,n){const i=Rq(e,this),r=i[t],a=i[n];return r&&a?r.path(a).map(Nq):void 0}function Hde(e,t){const n=Rq(e,this)[t];return n?n.ancestors().map(Nq):void 0}const zq=()=>typeof window<"u"&&window||null;function Gde(){const e=zq();return e?e.screen:{}}function Yde(){const e=zq();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Xde(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function Fq(e,t,n){if(!e)return[];const[i,r]=e,a=new un().set(i[0],i[1],r[0],r[1]),s=n||this.context.dataflow.scenegraph().root;return bB(s,a,Vde(t))}function Vde(e){let t=null;if(e){const n=Se(e.marktype),i=Se(e.markname);t=r=>(!n.length||n.some(a=>r.marktype===a))&&(!i.length||i.some(a=>r.name===a))}return t}function Wde(e,t,n,i=5){e=Se(e);const r=e[e.length-1];return r===void 0||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e}function Qde(e){return Se(e).reduce((t,[n,i],r)=>t+=r==0?`M ${n},${i} `:r===e.length-1?" Z":`L ${n},${i} `,"")}function Zde(e,t,n){const{x:i,y:r,mark:a}=n,s=new un().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[c,f]of t)c<s.x1&&(s.x1=c),c>s.x2&&(s.x2=c),f<s.y1&&(s.y1=f),f>s.y2&&(s.y2=f);return s.translate(i,r),Fq([[s.x1,s.y1],[s.x2,s.y2]],e,a).filter(c=>Kde(c.x,c.y,t))}function Kde(e,t,n){let i=0;for(let r=0,a=n.length-1;r<n.length;a=r++){const[s,l]=n[a],[c,f]=n[r];f>t!=l>t&&e<(s-c)*(t-f)/(l-f)+c&&i++}return i&1}const xp={random(){return Ur()},cumulativeNormal:Vv,cumulativeLogNormal:VC,cumulativeUniform:KC,densityNormal:PC,densityLogNormal:XC,densityUniform:ZC,quantileNormal:Wv,quantileLogNormal:WC,quantileUniform:JC,sampleNormal:Xv,sampleLogNormal:YC,sampleUniform:QC,isArray:ie,isBoolean:$l,isDate:ll,isDefined(e){return e!==void 0},isNumber:ut,isObject:be,isRegExp:xC,isString:xe,isTuple:Pv,isValid(e){return e!=null&&e===e},toBoolean:EC,toDate(e){return _C(e)},toNumber:Zn,toString:wC,indexof:Tde,join:Cde,lastindexof:Mde,replace:kde,reverse:Dde,sort:Ode,slice:$de,flush:P8,lerp:G8,merge:xde,pad:V8,peek:rt,pluck:Ade,span:Np,inrange:Tf,truncate:W8,rgb:vl,lab:py,hcl:my,hsl:hy,luminance:xA,contrast:bde,sequence:rr,format:Jfe,utcFormat:ede,utcParse:nde,utcOffset:M9,utcSequence:D9,timeFormat:$q,timeParse:tde,timeOffset:T9,timeSequence:k9,timeUnitSpecifier:m9,monthFormat:ide,monthAbbrevFormat:rde,dayFormat:ade,dayAbbrevFormat:sde,quarter:B8,utcquarter:j8,week:v9,utcweek:S9,dayofyear:y9,utcdayofyear:x9,warn:mde,info:yde,debug:vde,extent(e){return Xa(e)},inScope:pde,intersect:Fq,clampRange:q8,pinchDistance:_de,pinchAngle:wde,screen:Gde,containerSize:Xde,windowSize:Yde,bandspace:Nde,setdata:Zfe,pathShape:Ide,panLinear:z8,panLog:F8,panPow:L8,panSymlog:U8,zoomLinear:pC,zoomLog:mC,zoomPow:ey,zoomSymlog:yC,encode:Kfe,modify:Ede,lassoAppend:Wde,lassoPath:Qde,intersectLasso:Zde},Jde=["view","item","group","xy","x","y"],ehe="event.vega.",Lq="this.",FM={},Uq={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${ge(kq+e)}]`,functions:the,constants:_q,visitors:FM},SA=Aq(Uq);function the(e){const t=wq(e);Jde.forEach(n=>t[n]=ehe+n);for(const n in xp)t[n]=Lq+n;return Pe(t,cde(e,xp,FM)),t}function en(e,t,n){return arguments.length===1?xp[e]:(xp[e]=t,n&&(FM[e]=n),SA&&(SA.functions[e]=Lq+e),this)}en("bandwidth",Rde,yi);en("copy",zde,yi);en("domain",Fde,yi);en("range",Ude,yi);en("invert",Lde,yi);en("scale",Bde,yi);en("gradient",jde,yi);en("geoArea",fde,yi);en("geoBounds",dde,yi);en("geoCentroid",hde,yi);en("geoShape",qde,yi);en("geoScale",gde,yi);en("indata",Qfe,ude);en("data",Mq,OM);en("treePath",Pde,OM);en("treeAncestors",Hde,OM);en("vlSelectionTest",Ife,DM);en("vlSelectionIdTest",Gfe,DM);en("vlSelectionResolve",Xfe,DM);en("vlSelectionTuples",Yfe);function Ka(e,t){const n={};let i;try{e=xe(e)?e:ge(e)+"",i=$M(e)}catch{ee("Expression parse error: "+e)}i.visit(a=>{if(a.type!==mq)return;const s=a.callee.name,l=Uq.visitors[s];l&&l(s,a.arguments,t,n)});const r=SA(i);return r.globals.forEach(a=>{const s=kq+a;!Ee(n,s)&&t.getSignal(a)&&(n[s]=t.signalRef(a))}),{$expr:Pe({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function nhe(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const ihe=ca(["rule"]),ez=ca(["group","image","rect"]);function rhe(e,t){let n="";return ihe[t]||(e.x2&&(e.x?(ez[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(ez[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function LM(e){return(e+"").toLowerCase()}function ahe(e){return LM(e)==="operator"}function she(e){return LM(e)==="collect"}function og(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function ohe(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var lhe={operator:(e,t)=>og(e,["_"],t.code),parameter:(e,t)=>og(e,["datum","_"],t.code),event:(e,t)=>og(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return og(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const a in i){const s="o["+ge(a)+"]";r+=`$=${i[a].code};if(${s}!==$)${s}=$,m=1;`}return r+=rhe(i,n),r+="return m;",og(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(ge).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(a,s)=>{const l=t[s];let c,f;return a.path?(c=`a${a.path}`,f=`b${a.path}`):((n=n||{})["f"+s]=a,c=`this.f${s}(a)`,f=`this.f${s}(b)`),ohe(c,f,-l,l)},r=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?r.bind(n):r}}};function uhe(e){const t=this;ahe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function che(e){const t=this;if(e.params){const n=t.get(e.id);n||ee("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function fhe(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=ie(r)?r.map(a=>tz(a,n,t)):tz(r,n,t)}return t}function tz(e,t,n){if(!e||!be(e))return e;for(let i=0,r=nz.length,a;i<r;++i)if(a=nz[i],Ee(e,a.key))return a.parse(e,t,n);return e}var nz=[{key:"$ref",parse:dhe},{key:"$key",parse:ghe},{key:"$expr",parse:hhe},{key:"$field",parse:phe},{key:"$encode",parse:yhe},{key:"$compare",parse:mhe},{key:"$context",parse:vhe},{key:"$subflow",parse:bhe},{key:"$tupleid",parse:xhe}];function dhe(e,t){return t.get(e.$ref)||ee("Operator not defined: "+e.$ref)}function hhe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=Ii(t.parameterExpression(e.$expr),e.$fields))}function ghe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=SC(e.$key,e.$flat,t.expr.codegen))}function phe(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=zr(e.$field,e.$name,t.expr.codegen))}function mhe(e,t){const n="c:"+e.$compare+"_"+e.$order,i=Se(e.$compare).map(r=>r&&r.$tupleid?ke:r);return t.fn[n]||(t.fn[n]=vC(i,e.$order,t.expr.codegen))}function yhe(e,t){const n=e.$encode,i={};for(const r in n){const a=n[r];i[r]=Ii(t.encodeExpression(a.$expr),a.$fields),i[r].output=a.$output}return i}function vhe(e,t){return t}function bhe(e,t){const n=e.$subflow;return function(i,r,a){const s=t.fork().parse(n),l=s.get(n.operators[0].id),c=s.signals.parent;return c&&c.set(a),l.detachSubflow=()=>t.detach(s),l}}function xhe(){return ke}function She(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,r;e.source?i=t.events(e.source,e.type,n):e.merge&&(r=e.merge.map(a=>t.get(a)),i=r[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(a=>t.get(a)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&ee("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function Ehe(e){var t=this,n=be(n=e.source)?n.$ref:n,i=t.get(n),r=null,a=e.update,s=void 0;i||ee("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),a&&a.$expr&&(a.$params&&(s=t.parseParameters(a.$params)),a=t.handlerExpression(a.$expr)),t.update(e,i,r,a,s)}const _he={skip:!0};function whe(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(a=>{const s=t.signals[a];e.signals(a,s)&&(i[a]=s.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(a=>{const s=t.data[a];e.data(a,s)&&(r[a]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(a=>a.getState(e))),n}function Ahe(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(a=>{n.update(t.signals[a],r[a],_he)}),Object.keys(i||{}).forEach(a=>{n.pulse(t.data[a].input,n.changeset().remove(Fr).insert(i[a]))}),(e.subcontext||[]).forEach((a,s)=>{const l=t.subcontext[s];l&&l.setState(a)})}function Bq(e,t,n,i){return new jq(e,t,n,i)}function jq(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||lhe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function iz(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}jq.prototype=iz.prototype={fork(){const e=new iz(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),she(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let a=n.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(n.unresolved=n.unresolved||[]).push(()=>{a=n.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const a in e.data){const s=n.data[a]||(n.data[a]={});e.data[a].forEach(l=>s[l]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[LM(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:nhe,parseOperator:uhe,parseOperatorParameters:che,parseParameters:fhe,parseStream:She,parseUpdate:Ehe,getState:whe,setState:Ahe};function Che(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),qq(t,e.description()))}function qq(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function The(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const o_="default";function Mhe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:o_,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,a=r?xe(r)?r:r.user:o_,s=i.item&&i.item.cursor||null;return r&&a===r.user&&s==r.item?r:{user:a,item:s}}),e.add(null,function(n){let i=n.cursor,r=this.value;return xe(i)||(r=i.item,i=i.user),EA(e,i&&i!==o_?i:r||i),r},{cursor:t})}function EA(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function cv(e,t){var n=e._runtime.data;return Ee(n,t)||ee("Unrecognized data set: "+t),n[t]}function $he(e,t){return arguments.length<2?cv(this,e).values.value:Fb.call(this,e,dc().remove(Fr).insert(t))}function Fb(e,t){r7(t)||ee("Second argument to changes must be a changeset.");const n=cv(this,e);return n.modified=!0,this.pulse(n.input,t)}function khe(e,t){return Fb.call(this,e,dc().insert(t))}function Dhe(e,t){return Fb.call(this,e,dc().remove(t))}function Iq(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Pq(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Lb(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Ohe(e){var t=Lb(e),n=Iq(e),i=Pq(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(a){e.error(a)}})}function Nhe(e,t,n){var i=e._renderer,r=i&&i.canvas(),a,s,l;return r&&(l=Lb(e),s=t.changedTouches?t.changedTouches[0]:t,a=Eb(s,r),a[0]-=l[0],a[1]-=l[1]),t.dataflow=e,t.item=n,t.vega=Rhe(e,n,a),t}function Rhe(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function r(s){var l=i,c;if(s){for(c=t;c;c=c.mark.group)if(c.mark.name===s){l=c;break}}return l&&l.mark&&l.mark.interactive?l:{}}function a(s){if(!s)return n;xe(s)&&(s=r(s));const l=n.slice();for(;s;)l[0]-=s.x||0,l[1]-=s.y||0,s=s.mark&&s.mark.group;return l}return{view:ri(e),item:ri(t||{}),group:r,xy:a,x:s=>a(s)[0],y:s=>a(s)[1]}}const rz="view",zhe="timer",Fhe="window",Lhe={trap:!1};function Uhe(e){const t=Pe({defaults:{}},e),n=(i,r)=>{r.forEach(a=>{ie(i[a])&&(i[a]=ca(i[a]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function Hq(e,t,n,i){e._eventListeners.push({type:n,sources:Se(t),handler:i})}function Bhe(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[t]:r?!r[t]:e.preventDefault()}function h1(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||be(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function jhe(e,t,n){var i=this,r=new Yv(n),a=function(f,d){i.runAsync(null,()=>{e===rz&&Bhe(i,t)&&f.preventDefault(),r.receive(Nhe(i,f,d))})},s;if(e===zhe)h1(i,"timer",t)&&i.timer(a,t);else if(e===rz)h1(i,"view",t)&&i.addEventListener(t,a,Lhe);else if(e===Fhe?h1(i,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&h1(i,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)i.warn("Can not resolve event source: "+e);else{for(var l=0,c=s.length;l<c;++l)s[l].addEventListener(t,a);Hq(i,s,t,a)}return r}function az(e){return e.item}function sz(e){return e.item.mark.source}function oz(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function qhe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",az),sz,oz(e)),this.on(this.events("view","pointerout",az),sz,oz(t)),this}function Ihe(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),i=this._eventListeners,r,a,s,l,c;for(r=t.length;--r>=0;)t[r].stop();for(r=i.length;--r>=0;)for(s=i[r],a=s.sources.length;--a>=0;)s.sources[a].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),r=n.length;--r>=0;)c=n[r].type,l=n[r].handler,this._handler.off(c,l);return this}function lr(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return n!=null&&(i.textContent=n),i}const Phe="vega-bind",Hhe="vega-bind-name",Ghe="vega-bind-radio";function Yhe(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,s)})}},i.debounce&&(r.update=bC(i.debounce,r.update))),(i.input==null&&i.element?Xhe:Whe)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function Xhe(e,t,n,i){const r=n.event||"input",a=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,a),Hq(i,t,r,a),e.set=s=>{t.value=s,t.dispatchEvent(Vhe(r))}}function Vhe(e){return typeof Event<"u"?new Event(e):{type:e}}function Whe(e,t,n,i){const r=i.signal(n.signal),a=lr("div",{class:Phe}),s=n.input==="radio"?a:a.appendChild(lr("label"));s.appendChild(lr("span",{class:Hhe},n.name||n.signal)),t.appendChild(a);let l=Qhe;switch(n.input){case"checkbox":l=Zhe;break;case"select":l=Khe;break;case"radio":l=Jhe;break;case"range":l=ege;break}l(e,s,n,r)}function Qhe(e,t,n,i){const r=lr("input");for(const a in n)a!=="signal"&&a!=="element"&&r.setAttribute(a==="input"?"type":a,n[a]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=a=>r.value=a}function Zhe(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const a=lr("input",r);t.appendChild(a),a.addEventListener("change",()=>e.update(a.checked)),e.elements=[a],e.set=s=>a.checked=!!s||null}function Khe(e,t,n,i){const r=lr("select",{name:n.signal}),a=n.labels||[];n.options.forEach((s,l)=>{const c={value:s};fv(s,i)&&(c.selected=!0),r.appendChild(lr("option",c,(a[l]||s)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=s=>{for(let l=0,c=n.options.length;l<c;++l)if(fv(n.options[l],s)){r.selectedIndex=l;return}}}function Jhe(e,t,n,i){const r=lr("span",{class:Ghe}),a=n.labels||[];t.appendChild(r),e.elements=n.options.map((s,l)=>{const c={type:"radio",name:n.signal,value:s};fv(s,i)&&(c.checked=!0);const f=lr("input",c);f.addEventListener("change",()=>e.update(s));const d=lr("label",{},(a[l]||s)+"");return d.prepend(f),r.appendChild(d),f}),e.set=s=>{const l=e.elements,c=l.length;for(let f=0;f<c;++f)fv(l[f].value,s)&&(l[f].checked=!0)}}function ege(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,a=n.min||Math.min(0,r,+i)||0,s=n.step||pl(a,r,100),l=lr("input",{type:"range",name:n.signal,min:a,max:r,step:s});l.value=i;const c=lr("span",{},+i);t.appendChild(l),t.appendChild(c);const f=()=>{c.textContent=l.value,e.update(+l.value)};l.addEventListener("input",f),l.addEventListener("change",f),e.elements=[l],e.set=d=>{l.value=d,c.textContent=d}}function fv(e,t){return e===t||e+""==t+""}function Gq(e,t,n,i,r,a){return t=t||new i(e.loader()),t.initialize(n,Iq(e),Pq(e),Lb(e),r,a).background(e.background())}function UM(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function tge(e,t,n,i){const r=new i(e.loader(),UM(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Lb(e),e);return t&&t.handlers().forEach(a=>{r.on(a.type,a.handler)}),r}function nge(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,a=_b(i);e=n._el=e?l_(n,e,!0):null,Che(n),a||n.error("Unrecognized renderer type: "+i);const s=a.handler||Kp,l=e?a.renderer:a.headless;return n._renderer=l?Gq(n,n._renderer,e,l):null,n._handler=tge(n,n._handler,e,s),n._redraw=!0,e&&r!=="none"&&(t=t?n._elBind=l_(n,t,!0):e.appendChild(lr("form",{class:"vega-bindings"})),n._bind.forEach(c=>{c.param.element&&r!=="container"&&(c.element=l_(n,c.param.element,!!c.param.input))}),n._bind.forEach(c=>{Yhe(n,c.element||t,c)})),n}function l_(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const lg=e=>+e||0,ige=e=>({top:e,bottom:e,left:e,right:e});function lz(e){return be(e)?{top:lg(e.top),bottom:lg(e.bottom),left:lg(e.left),right:lg(e.right)}:ige(lg(e))}async function BM(e,t,n,i){const r=_b(t),a=r&&r.headless;return a||ee("Unrecognized renderer type: "+t),await e.runAsync(),Gq(e,null,null,a,n,i).renderAsync(e._scenegraph.root)}async function rge(e,t){e!==nl.Canvas&&e!==nl.SVG&&e!==nl.PNG&&ee("Unrecognized image type: "+e);const n=await BM(this,e,t);return e===nl.SVG?age(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function age(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function sge(e,t){return(await BM(this,nl.Canvas,e,t)).canvas()}async function oge(e){return(await BM(this,nl.SVG,e)).svg()}function lge(e,t,n){return Bq(e,Wf,xp,n).parse(t)}function uge(e){var t=this._runtime.scales;return Ee(t,e)||ee("Unrecognized scale or projection: "+e),t[e].value}var Yq="width",Xq="height",jM="padding",uz={skip:!0};function Vq(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===jM?i.left+i.right:0)}function Wq(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===jM?i.top+i.bottom:0)}function cge(e){var t=e._signals,n=t[Yq],i=t[Xq],r=t[jM];function a(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,l=>{e._width=l.size,e._viewWidth=Vq(e,l.size),a()},{size:n}),e._resizeHeight=e.add(null,l=>{e._height=l.size,e._viewHeight=Wq(e,l.size),a()},{size:i});const s=e.add(null,a,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,s.rank=r.rank+1}function fge(e,t,n,i,r,a){this.runAfter(s=>{let l=0;s._autosize=0,s.width()!==n&&(l=1,s.signal(Yq,n,uz),s._resizeWidth.skip(!0)),s.height()!==i&&(l=1,s.signal(Xq,i,uz),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==r[0]||s._origin[1]!==r[1])&&(s._resize=1,s._origin=r),l&&s.run("enter"),a&&s.runAfter(c=>c.resize())},!1,1)}function dge(e){return this._runtime.getState(e||{data:hge,signals:gge,recurse:!0})}function hge(e,t){return t.modified&&ie(t.input.value)&&!e.startsWith("_:vega:_")}function gge(e,t){return!(e==="parent"||t instanceof Wf.proxy)}function pge(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function mge(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(joe(n,t))}function yge(e,t,n,i){const r=e.element();r&&r.setAttribute("title",vge(i))}function vge(e){return e==null?"":ie(e)?Qq(e):be(e)&&!ll(e)?bge(e):e+""}function bge(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(ie(n)?Qq(n):Zq(n))}).join(`
`)}function Qq(e){return"["+e.map(Zq).join(", ")+"]"}function Zq(e){return ie(e)?"[]":be(e)&&!ll(e)?"{}":e}function xge(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e?.();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function Kq(e,t){const n=this;if(t=t||{},Rf.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const a=Pe({},e.locale,t.locale);n.locale(V9(a.number,a.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||nl.Canvas,n._scenegraph=new YU;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||yge,n._redraw=!0,n._handler=new Kp().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Uhe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=lge(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(a=>({state:null,param:Pe({},a)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=Vq(n,n._width),n._viewHeight=Wq(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,cge(n),The(n),Mhe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function g1(e,t){return Ee(e._signals,t)?e._signals[t]:ee("Unrecognized signal name: "+ge(t))}function Jq(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function cz(e,t,n,i){let r=Jq(n,i);return r||(r=UM(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function fz(e,t,n){const i=Jq(t,n);return i&&t._targets.remove(i),e}ye(Kq,Rf,{async evaluate(e,t,n){if(await Rf.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Ohe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&M1(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&qq(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=g1(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",lz(e)):lz(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(_b(e)||ee("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Rf.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(g1(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:fge,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=UM(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,r,a;--i>=0;)if(a=n[i].type,r=n[i].handler,e===a&&(t===r||t===r.raw)){this._handler.off(a,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return cz(this,e,g1(this,e),t)},removeSignalListener(e,t){return fz(this,g1(this,e),t)},addDataListener(e,t){return cz(this,e,cv(this,e).values,t)},removeDataListener(e,t){return fz(this,cv(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=EA(this,null);this._globalCursor=!!e,t&&EA(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:mge,events:jhe,finalize:Ihe,hover:qhe,data:$he,change:Fb,insert:khe,remove:Dhe,scale:uge,initialize:nge,toImageURL:rge,toCanvas:sge,toSVG:oge,getState:dge,setState:pge,_watchPixelRatio:xge});const Sge="view",dv="[",hv="]",eI="{",tI="}",Ege=":",nI=",",_ge="@",wge=">",Age=/[[\]{}]/,Cge={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let iI,rI;function zl(e,t,n){return iI=t||Sge,rI=n||Cge,aI(e.trim()).map(_A)}function Tge(e){return rI[e]}function Zg(e,t,n,i,r){const a=e.length;let s=0,l;for(;t<a;++t){if(l=e[t],!s&&l===n)return t;r&&r.includes(l)?--s:i&&i.includes(l)&&++s}return t}function aI(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=Zg(e,r,nI,dv+eI,hv+tI),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function _A(e){return e[0]==="["?Mge(e):$ge(e)}function Mge(e){const t=e.length;let n=1,i;if(n=Zg(e,n,hv,dv,hv),n===t)throw"Empty between selector: "+e;if(i=aI(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==wge)throw"Expected '>' after between selector: "+e;i=i.map(_A);const r=_A(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function $ge(e){const t={source:iI},n=[];let i=[0,0],r=0,a=0,s=e.length,l=0,c,f;if(e[s-1]===tI){if(l=e.lastIndexOf(eI),l>=0){try{i=kge(e.substring(l+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,l).trim(),s=e.length}else throw"Unmatched right brace: "+e;l=0}if(!s)throw e;if(e[0]===_ge&&(r=++l),c=Zg(e,l,Ege),c<s&&(n.push(e.substring(a,c).trim()),a=l=++c),l=Zg(e,l,dv),l===s)n.push(e.substring(a,s).trim());else if(n.push(e.substring(a,l).trim()),f=[],a=++l,a===s)throw"Unmatched left bracket: "+e;for(;l<s;){if(l=Zg(e,l,hv),l===s)throw"Unmatched left bracket: "+e;if(f.push(e.substring(a,l).trim()),l<s-1&&e[++l]!==dv)throw"Expected left bracket: "+e;a=++l}if(!(s=n.length)||Age.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],r?t.markname=n[0].slice(1):Tge(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),f!=null&&(t.filter=f),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function kge(e){const t=e.split(nI);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function Dge(e){return be(e)?e:{type:e||"pad"}}const ug=e=>+e||0,Oge=e=>({top:e,bottom:e,left:e,right:e});function Nge(e){return be(e)?e.signal?e:{top:ug(e.top),bottom:ug(e.bottom),left:ug(e.left),right:ug(e.right)}:Oge(ug(e))}const wn=e=>be(e)&&!ie(e)?Pe({},e):{value:e};function dz(e,t,n,i){return n!=null?(be(n)&&!ie(n)||ie(n)&&n.length&&be(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function In(e,t,n){for(const i in t)dz(e,i,t[i]);for(const i in n)dz(e,i,n[i],"update")}function jd(e,t,n){for(const i in t)n&&Ee(n,i)||(e[i]=Pe(e[i]||{},t[i]));return e}function Af(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const qM="mark",IM="frame",PM="scope",Rge="axis",zge="axis-domain",Fge="axis-grid",Lge="axis-label",Uge="axis-tick",Bge="axis-title",jge="legend",qge="legend-band",Ige="legend-entry",Pge="legend-gradient",sI="legend-label",Hge="legend-symbol",Gge="legend-title",Yge="title",Xge="title-text",Vge="title-subtitle";function Wge(e,t,n,i,r){const a={},s={};let l,c,f,d;c="lineBreak",t==="text"&&r[c]!=null&&!Af(c,e)&&u_(a,c,r[c]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),d=n===IM?r.group:n===qM?Pe({},r.mark,r[t]):null;for(c in d)f=Af(c,e)||(c==="fill"||c==="stroke")&&(Af("fill",e)||Af("stroke",e)),f||u_(a,c,d[c]);Se(i).forEach(g=>{const p=r.style&&r.style[g];for(const y in p)Af(y,e)||u_(a,y,p[y])}),e=Pe({},e);for(c in a)d=a[c],d.signal?(l=l||{})[c]=d:s[c]=d;return e.enter=Pe(s,e.enter),l&&(e.update=Pe(l,e.update)),e}function u_(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const oI=e=>xe(e)?ge(e):e.signal?`(${e.signal})`:lI(e);function Ub(e){if(e.gradient!=null)return Zge(e);let t=e.signal?`(${e.signal})`:e.color?Qge(e.color):e.field!=null?lI(e.field):e.value!==void 0?ge(e.value):void 0;return e.scale!=null&&(t=Kge(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${Y1(e.exponent)})`),e.mult!=null&&(t+=`*${Y1(e.mult)}`),e.offset!=null&&(t+=`+${Y1(e.offset)}`),e.round&&(t=`round(${t})`),t}const p1=(e,t,n,i)=>`(${e}(${[t,n,i].map(Ub).join(",")})+'')`;function Qge(e){return e.c?p1("hcl",e.h,e.c,e.l):e.h||e.s?p1("hsl",e.h,e.s,e.l):e.l||e.a?p1("lab",e.l,e.a,e.b):e.r||e.g||e.b?p1("rgb",e.r,e.g,e.b):null}function Zge(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:ge(n));for(;t.length&&rt(t)==null;)t.pop();return t.unshift(oI(e.gradient)),`gradient(${t.join(",")})`}function Y1(e){return be(e)?"("+Ub(e)+")":e}function lI(e){return uI(be(e)?e:{datum:e})}function uI(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):ee("Invalid field reference: "+ge(e));return e.signal||(i=xe(i)?ns(i).map(ge).join("]["):uI(i)),t+"["+i+"]"}function Kge(e,t){const n=oI(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+Y1(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function Jge(e){let t="";return e.forEach(n=>{const i=Ub(n);t+=n.test?`(${n.test})?${i}:`:i}),rt(t)===":"&&(t+="null"),t}function cI(e,t,n,i,r,a){const s={};a=a||{},a.encoders={$encode:s},e=Wge(e,t,n,i,r.config);for(const l in e)s[l]=epe(e[l],t,a,r);return a}function epe(e,t,n,i){const r={},a={};for(const s in e)e[s]!=null&&(r[s]=npe(tpe(e[s]),i,n,a));return{$expr:{marktype:t,channels:r},$fields:Object.keys(a),$output:Object.keys(e)}}function tpe(e){return ie(e)?Jge(e):Ub(e)}function npe(e,t,n,i){const r=Ka(e,t);return r.$fields.forEach(a=>i[a]=1),Pe(n,r.$params),r.$expr}const ipe="outer",rpe=["value","update","init","react","bind"];function hz(e,t){ee(e+' for "outer" push: '+ge(t))}function fI(e,t){const n=e.name;if(e.push===ipe)t.signals[n]||hz("No prior signal definition",n),rpe.forEach(i=>{e[i]!==void 0&&hz("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function wA(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function Bb(e,t,n,i){return new wA(e,t,n,i)}function gv(e,t){return Bb("operator",e,t)}function $e(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Sp(e,t){return t?{$field:e,$name:t}:{$field:e}}const AA=Sp("key");function gz(e,t){return{$compare:e,$order:t}}function ape(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const spe="ascending",ope="descending";function lpe(e){return be(e)?(e.order===ope?"-":"+")+jb(e.op,e.field):""}function jb(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const HM="scope",CA="view";function pn(e){return e&&e.signal}function upe(e){return e&&e.expr}function X1(e){if(pn(e))return!0;if(be(e)){for(const t in e)if(X1(e[t]))return!0}return!1}function Jr(e,t){return e??t}function zu(e){return e&&e.signal||e}const pz="timer";function Ep(e,t){return(e.merge?fpe:e.stream?dpe:e.type?hpe:ee("Invalid stream specification: "+ge(e)))(e,t)}function cpe(e){return e===HM?CA:e||CA}function fpe(e,t){const n=e.merge.map(r=>Ep(r,t)),i=GM({merge:n},e,t);return t.addStream(i).id}function dpe(e,t){const n=Ep(e.stream,t),i=GM({stream:n},e,t);return t.addStream(i).id}function hpe(e,t){let n;e.type===pz?(n=t.event(pz,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(cpe(e.source),e.type);const i=GM({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function GM(e,t,n){let i=t.between;return i&&(i.length!==2&&ee('Stream "between" parameter must have 2 entries: '+ge(t)),e.between=[Ep(i[0],n),Ep(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(gpe(t.marktype,t.markname,t.markrole)),t.source===HM&&i.push("inScope(event.item)"),i.length&&(e.filter=Ka("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function gpe(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const ppe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function mpe(e,t,n){const i=e.encode,r={target:n};let a=e.events,s=e.update,l=[];a||ee("Signal update missing events specification."),xe(a)&&(a=zl(a,t.isSubscope()?HM:CA)),a=Se(a).filter(c=>c.signal||c.scale?(l.push(c),0):1),l.length>1&&(l=[vpe(l)]),a.length&&l.push(a.length>1?{merge:a}:a[0]),i!=null&&(s&&ee("Signal encode and update are mutually exclusive."),s="encode(item(),"+ge(i)+")"),r.update=xe(s)?Ka(s,t):s.expr!=null?Ka(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:ppe,$params:{$value:t.signalRef(s.signal)}}:ee("Invalid signal update specification."),e.force&&(r.options={force:!0}),l.forEach(c=>t.addUpdate(Pe(ype(c,t),r)))}function ype(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Ep(e,t)}}function vpe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function bpe(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?ee("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=Ka(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>mpe(r,t,n.id))}const At=e=>(t,n,i)=>Bb(e,n,t||void 0,i),dI=At("aggregate"),xpe=At("axisticks"),hI=At("bound"),va=At("collect"),mz=At("compare"),Spe=At("datajoin"),gI=At("encode"),Epe=At("expression"),_pe=At("facet"),wpe=At("field"),Ape=At("key"),Cpe=At("legendentries"),Tpe=At("load"),Mpe=At("mark"),$pe=At("multiextent"),kpe=At("multivalues"),Dpe=At("overlap"),Ope=At("params"),pI=At("prefacet"),Npe=At("projection"),Rpe=At("proxy"),zpe=At("relay"),mI=At("render"),Fpe=At("scale"),mc=At("sieve"),Lpe=At("sortitems"),yI=At("viewlayout"),Upe=At("values");let Bpe=0;const vI={min:"min",max:"max",count:"sum"};function jpe(e,t){const n=e.type||"linear";aU(n)||ee("Unrecognized scale type: "+ge(n)),t.addScale(e.name,{type:n,domain:void 0})}function qpe(e,t){const n=t.getScale(e.name).params;let i;n.domain=bI(e.domain,e,t),e.range!=null&&(n.range=SI(e,t,n)),e.interpolate!=null&&Zpe(e.interpolate,n),e.nice!=null&&(n.nice=Qpe(e.nice,t)),e.bins!=null&&(n.bins=Wpe(e.bins,t));for(i in e)Ee(n,i)||i==="name"||(n[i]=Dr(e[i],t))}function Dr(e,t){return be(e)?e.signal?t.signalRef(e.signal):ee("Unsupported object: "+ge(e)):e}function V1(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Dr(n,t))}function qb(e){ee("Can not find data set: "+ge(e))}function bI(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&ee("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(ie(e)?Ipe:e.fields?Hpe:Ppe)(e,t,n)}function Ipe(e,t,n){return e.map(i=>Dr(i,n))}function Ppe(e,t,n){const i=n.getData(e.data);return i||qb(e.data),ed(t.type)?i.valuesRef(n,e.field,xI(e.sort,!1)):lU(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function Hpe(e,t,n){const i=e.data,r=e.fields.reduce((a,s)=>(s=xe(s)?{data:i,field:s}:ie(s)||s.signal?Gpe(s,n):s,a.push(s),a),[]);return(ed(t.type)?Ype:lU(t.type)?Xpe:Vpe)(e,n,r)}function Gpe(e,t){const n="_:vega:_"+Bpe++,i=va({});if(ie(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+ge(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,mc({})]),{data:n,field:"data"}}function Ype(e,t,n){const i=xI(e.sort,!0);let r,a;const s=n.map(f=>{const d=t.getData(f.data);return d||qb(f.data),d.countsRef(t,f.field,i)}),l={groupby:AA,pulse:s};i&&(r=i.op||"count",a=i.field?jb(r,i.field):"count",l.ops=[vI[r]],l.fields=[t.fieldRef(a)],l.as=[a]),r=t.add(dI(l));const c=t.add(va({pulse:$e(r)}));return a=t.add(Upe({field:AA,sort:t.sortRef(i),pulse:$e(c)})),$e(a)}function xI(e,t){return e&&(!e.field&&!e.op?be(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?ee("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!vI[e.op]&&ee("Multiple domain scales can not be sorted using "+e.op)),e}function Xpe(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||qb(r.data),a.domainRef(t,r.field)});return $e(t.add(kpe({values:i})))}function Vpe(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||qb(r.data),a.extentRef(t,r.field)});return $e(t.add($pe({extents:i})))}function Wpe(e,t){return e.signal||ie(e)?V1(e,t):t.objectProperty(e)}function Qpe(e,t){return e.signal?t.signalRef(e.signal):be(e)?{interval:Dr(e.interval),step:Dr(e.step)}:Dr(e)}function Zpe(e,t){t.interpolate=Dr(e.type||e),e.gamma!=null&&(t.interpolateGamma=Dr(e.gamma))}function SI(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(xe(r)){if(i&&Ee(i,r))return e=Pe({},e,{range:i[r]}),SI(e,t,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=ed(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:ee("Unrecognized scale range value: "+ge(r))}else if(r.scheme){n.scheme=ie(r.scheme)?V1(r.scheme,t):Dr(r.scheme,t),r.extent&&(n.schemeExtent=V1(r.extent,t)),r.count&&(n.schemeCount=Dr(r.count,t));return}else if(r.step){n.rangeStep=Dr(r.step,t);return}else{if(ed(e.type)&&!ie(r))return bI(r,e,t);ie(r)||ee("Unsupported range type: "+ge(r))}return r.map(a=>(ie(a)?V1:Dr)(a,t))}function Kpe(e,t){const n=t.config.projection||{},i={};for(const r in e)r!=="name"&&(i[r]=TA(e[r],r,t));for(const r in n)i[r]==null&&(i[r]=TA(n[r],r,t));t.addProjection(e.name,i)}function TA(e,t,n){return ie(e)?e.map(i=>TA(i,t,n)):be(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:ee("Unsupported parameter object: "+ge(e)):e}const ba="top",qd="left",Id="right",_l="bottom",EI="center",Jpe="vertical",eme="start",tme="middle",nme="end",MA="index",YM="label",ime="offset",ud="perc",rme="perc2",Nr="value",om="guide-label",XM="guide-title",ame="group-title",sme="group-subtitle",yz="symbol",W1="gradient",$A="discrete",kA="size",ome="shape",lme="fill",ume="stroke",cme="strokeWidth",fme="strokeDash",dme="opacity",VM=[kA,ome,lme,ume,cme,fme,dme],lm={name:1,style:1,interactive:1},at={value:0},Rr={value:1},Ib="group",_I="rect",WM="rule",hme="symbol",yc="text";function _p(e){return e.type=Ib,e.interactive=e.interactive||!1,e}function Pi(e,t){const n=(i,r)=>Jr(e[i],Jr(t[i],r));return n.isVertical=i=>Jpe===Jr(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Jr(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Jr(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Jr(e.columns,Jr(t.columns,+n.isVertical(!0))),n}function wI(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function gme(e,t,n){const i=t.config.style[n];return i&&i[e]}function Pb(e,t,n){return`item.anchor === '${eme}' ? ${e} : item.anchor === '${nme}' ? ${t} : ${n}`}const QM=Pb(ge(qd),ge(Id),ge(EI));function pme(e){const t=e("tickBand");let n=e("tickOffset"),i,r;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},be(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}function AI(e,t){return t?e?be(e)?Object.assign({},e,{offset:AI(e.offset,t)}):{value:e,offset:t}:t:e}function gr(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=jd(e.encode,t,lm)):e.interactive=!1,e}function mme(e,t,n,i){const r=Pi(e,n),a=r.isVertical(),s=r.gradientThickness(),l=r.gradientLength();let c,f,d,g,p;a?(f=[0,1],d=[0,0],g=s,p=l):(f=[0,0],d=[1,0],g=l,p=s);const y={enter:c={opacity:at,x:at,y:at,width:wn(g),height:wn(p)},update:Pe({},c,{opacity:Rr,fill:{gradient:t,start:f,stop:d}}),exit:{opacity:at}};return In(y,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),gr({type:_I,role:Pge,encode:y},i)}function yme(e,t,n,i,r){const a=Pi(e,n),s=a.isVertical(),l=a.gradientThickness(),c=a.gradientLength();let f,d,g,p,y="";s?(f="y",g="y2",d="x",p="width",y="1-"):(f="x",g="x2",d="y",p="height");const v={opacity:at,fill:{scale:t,field:Nr}};v[f]={signal:y+"datum."+ud,mult:c},v[d]=at,v[g]={signal:y+"datum."+rme,mult:c},v[p]=wn(l);const b={enter:v,update:Pe({},v,{opacity:Rr}),exit:{opacity:at}};return In(b,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),gr({type:_I,role:qge,key:Nr,from:r,encode:b},i)}const vme=`datum.${ud}<=0?"${qd}":datum.${ud}>=1?"${Id}":"${EI}"`,bme=`datum.${ud}<=0?"${_l}":datum.${ud}>=1?"${ba}":"${tme}"`;function vz(e,t,n,i){const r=Pi(e,t),a=r.isVertical(),s=wn(r.gradientThickness()),l=r.gradientLength();let c=r("labelOverlap"),f,d,g,p,y="";const v={enter:f={opacity:at},update:d={opacity:Rr,text:{field:YM}},exit:{opacity:at}};return In(v,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:Jr(e.labelLimit,t.gradientLabelLimit)}),a?(f.align={value:"left"},f.baseline=d.baseline={signal:bme},g="y",p="x",y="1-"):(f.align=d.align={signal:vme},f.baseline={value:"top"},g="x",p="y"),f[g]=d[g]={signal:y+"datum."+ud,mult:l},f[p]=d[p]=s,s.offset=Jr(e.labelOffset,t.gradientLabelOffset)||0,c=c?{separation:r("labelSeparation"),method:c,order:"datum."+MA}:void 0,gr({type:yc,role:sI,style:om,key:Nr,from:i,encode:v,overlap:c},n)}function xme(e,t,n,i,r){const a=Pi(e,t),s=n.entries,l=!!(s&&s.interactive),c=s?s.name:void 0,f=a("clipHeight"),d=a("symbolOffset"),g={data:"value"},p=`(${r}) ? datum.${ime} : datum.${kA}`,y=f?wn(f):{field:kA},v=`datum.${MA}`,b=`max(1, ${r})`;let S,_,w,A,T;y.mult=.5,S={enter:_={opacity:at,x:{signal:p,mult:.5,offset:d},y},update:w={opacity:Rr,x:_.x,y:_.y},exit:{opacity:at}};let $=null,k=null;e.fill||($=t.symbolBaseFillColor,k=t.symbolBaseStrokeColor),In(S,{fill:a("symbolFillColor",$),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",k),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),VM.forEach(j=>{e[j]&&(w[j]=_[j]={scale:e[j],field:Nr})});const M=gr({type:hme,role:Hge,key:Nr,from:g,clip:f?!0:void 0,encode:S},n.symbols),N=wn(d);N.offset=a("labelOffset"),S={enter:_={opacity:at,x:{signal:p,offset:N},y},update:w={opacity:Rr,text:{field:YM},x:_.x,y:_.y},exit:{opacity:at}},In(S,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const z=gr({type:yc,role:sI,style:om,key:Nr,from:g,encode:S},n.labels);return S={enter:{noBound:{value:!f},width:at,height:f?wn(f):at,opacity:at},exit:{opacity:at},update:w={opacity:Rr,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(A=`ceil(item.mark.items.length / ${b})`,w.row.signal=`${v}%${A}`,w.column.signal=`floor(${v} / ${A})`,T={field:["row",v]}):(w.row.signal=`floor(${v} / ${b})`,w.column.signal=`${v} % ${b}`,T={field:v}),w.column.signal=`(${r})?${w.column.signal}:${v}`,i={facet:{data:i,name:"value",groupby:MA}},_p({role:PM,from:i,encode:jd(S,s,lm),marks:[M,z],name:c,interactive:l,sort:T})}function Sme(e,t){const n=Pi(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const ZM='item.orient === "left"',KM='item.orient === "right"',Hb=`(${ZM} || ${KM})`,Eme=`datum.vgrad && ${Hb}`,_me=Pb('"top"','"bottom"','"middle"'),wme=Pb('"right"','"left"','"center"'),Ame=`datum.vgrad && ${KM} ? (${wme}) : (${Hb} && !(datum.vgrad && ${ZM})) ? "left" : ${QM}`,Cme=`item._anchor || (${Hb} ? "middle" : "start")`,Tme=`${Eme} ? (${ZM} ? -90 : 90) : 0`,Mme=`${Hb} ? (datum.vgrad ? (${KM} ? "bottom" : "top") : ${_me}) : "top"`;function $me(e,t,n,i){const r=Pi(e,t),a={enter:{opacity:at},update:{opacity:Rr,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:at}};return In(a,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:Cme},angle:{signal:Tme},align:{signal:Ame},baseline:{signal:Mme},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),gr({type:yc,role:Gge,style:XM,from:i,encode:a},n)}function kme(e,t){let n;return be(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+bz(e.path)+")":e.sphere&&(n="geoShape("+bz(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function bz(e){return be(e)&&e.signal?e.signal:ge(e)}function CI(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===Ib?PM:t||qM}function Dme(e){return{marktype:e.type,name:e.name||void 0,role:e.role||CI(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Ome(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function JM(e,t){const n=o7(e.type);n||ee("Unrecognized transform type: "+ge(e.type));const i=Bb(n.type.toLowerCase(),null,TI(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function TI(e,t,n){const i={},r=e.params.length;for(let a=0;a<r;++a){const s=e.params[a];i[s.name]=Nme(s,t,n)}return i}function Nme(e,t,n){const i=e.type,r=t[e.name];if(i==="index")return Rme(e,t,n);if(r===void 0){e.required&&ee("Missing required "+ge(t.type)+" parameter: "+ge(e.name));return}else{if(i==="param")return zme(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!pn(r)?r.map(a=>xz(e,a,n)):xz(e,r,n)}function xz(e,t,n){const i=e.type;if(pn(t))return Ez(i)?ee("Expression references can not be signals."):c_(i)?n.fieldRef(t):_z(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||c_(i);return r&&Fme(t)?n.exprRef(t.expr,t.as):r&&Lme(t)?Sp(t.field,t.as):Ez(i)?Ka(t,n):Ume(i)?$e(n.getData(t).values):c_(i)?Sp(t):_z(i)?n.compareRef(t):t}}function Rme(e,t,n){return xe(t.from)||ee('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function zme(e,t,n){const i=t[e.name];return e.array?(ie(i)||ee("Expected an array of sub-parameters. Instead: "+ge(i)),i.map(r=>Sz(e,r,n))):Sz(e,i,n)}function Sz(e,t,n){const i=e.params.length;let r;for(let s=0;s<i;++s){r=e.params[s];for(const l in r.key)if(r.key[l]!==t[l]){r=null;break}if(r)break}r||ee("Unsupported parameter: "+ge(t));const a=Pe(TI(r,t,n),r.key);return $e(n.add(Ope(a)))}const Fme=e=>e&&e.expr,Lme=e=>e&&e.field,Ume=e=>e==="data",Ez=e=>e==="expr",c_=e=>e==="field",_z=e=>e==="compare";function Bme(e,t,n){let i,r,a,s,l;return e?(i=e.facet)&&(t||ee("Only group marks can be faceted."),i.field!=null?s=l=Q1(i,n):(e.data?l=$e(n.getData(e.data).aggregate):(a=JM(Pe({type:"aggregate",groupby:Se(i.groupby)},i.aggregate),n),a.params.key=n.keyRef(i.groupby),a.params.pulse=Q1(i,n),s=l=$e(n.add(a))),r=n.keyRef(i.groupby,!0))):s=$e(n.add(va(null,[{}]))),s||(s=Q1(e,n)),{key:r,pulse:s,parent:l}}function Q1(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:$e(t.getData(e.data).output)}function Ku(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}Ku.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let a=t[0],s=null,l=1;for(a&&a.type==="load"&&(a=t[1]),e.add(t[0]);l<n;++l)t[l].params.pulse=$e(t[l-1]),e.add(t[l]),t[l].type==="aggregate"&&(s=t[l]);return new Ku(e,a,r,i,s)};function MI(e){return xe(e)?e:null}function wz(e,t,n){const i=jb(n.op,n.field);let r;if(t.ops){for(let a=0,s=t.as.length;a<s;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function cg(e,t,n,i,r,a,s){const l=t[n]||(t[n]={}),c=lpe(a);let f=MI(r),d,g;if(f!=null&&(e=t.scope,f=f+(c?"|"+c:""),d=l[f]),!d){const p=a?{field:AA,pulse:t.countsRef(e,r,a)}:{field:e.fieldRef(r),pulse:$e(t.output)};c&&(p.sort=e.sortRef(a)),g=e.add(Bb(i,void 0,p)),s&&(t.index[r]=g),d=$e(g),f!=null&&(l[f]=d)}return d}Ku.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),a=MI(t);let s,l,c;return a!=null&&(e=i.scope,s=r[a]),s?n&&n.field&&wz(e,s.agg.params,n):(c={groupby:e.fieldRef(t,"key"),pulse:$e(i.output)},n&&n.field&&wz(e,c,n),l=e.add(dI(c)),s=e.add(va({pulse:$e(l)})),s={agg:l,ref:$e(s)},a!=null&&(r[a]=s)),s.ref},tuplesRef(){return $e(this.values)},extentRef(e,t){return cg(e,this,"extent","extent",t,!1)},domainRef(e,t){return cg(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return cg(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return cg(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return cg(e,this,"indata","tupleindex",t,!0,!0)}};function jme(e,t,n){const i=e.from.facet,r=i.name,a=Q1(i,t);let s;i.name||ee("Facet must have a name: "+ge(i)),i.data||ee("Facet must reference a data set: "+ge(i)),i.field?s=t.add(pI({field:t.fieldRef(i.field),pulse:a})):i.groupby?s=t.add(_pe({key:t.keyRef(i.groupby),group:$e(t.proxy(n.parent)),pulse:a})):ee("Facet must specify groupby or field: "+ge(i));const l=t.fork(),c=l.add(va()),f=l.add(mc({pulse:$e(c)}));l.addData(r,new Ku(l,c,c,f)),l.addSignal("parent",null),s.params.subflow={$subflow:l.parse(e).toRuntime()}}function qme(e,t,n){const i=t.add(pI({pulse:n.pulse})),r=t.fork();r.add(mc()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}function $I(e,t,n){const i=e.remove,r=e.insert,a=e.toggle,s=e.modify,l=e.values,c=t.add(gv()),f="if("+e.trigger+',modify("'+n+'",'+[r,i,a,s,l].map(g=>g??"null").join(",")+"),0)",d=Ka(f,t);c.update=d.$expr,c.params=d.$params}function Gb(e,t){const n=CI(e),i=e.type===Ib,r=e.from&&e.from.facet,a=e.overlap;let s=e.layout||n===PM||n===IM,l,c,f,d,g,p,y;const v=n===qM||s||r,b=Bme(e.from,i,t);c=t.add(Spe({key:b.key||(e.key?Sp(e.key):void 0),pulse:b.pulse,clean:!i}));const S=$e(c);c=f=t.add(va({pulse:S})),c=t.add(Mpe({markdef:Dme(e),interactive:Ome(e.interactive,t),clip:kme(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:$e(c)}));const _=$e(c);c=d=t.add(gI(cI(e.encode,e.type,n,e.style,t,{mod:!1,pulse:_}))),c.params.parent=t.encode(),e.transform&&e.transform.forEach(k=>{const M=JM(k,t),N=M.metadata;(N.generates||N.changes)&&ee("Mark transforms should not generate new data."),N.nomod||(d.params.mod=!0),M.params.pulse=$e(c),t.add(c=M)}),e.sort&&(c=t.add(Lpe({sort:t.compareRef(e.sort),pulse:$e(c)})));const w=$e(c);(r||s)&&(s=t.add(yI({layout:t.objectProperty(e.layout),legends:t.legends,mark:_,pulse:w})),p=$e(s));const A=t.add(hI({mark:_,pulse:p||w}));y=$e(A),i&&(v&&(l=t.operators,l.pop(),s&&l.pop()),t.pushState(w,p||y,S),r?jme(e,t,b):v?qme(e,t,b):t.parse(e),t.popState(),v&&(s&&l.push(s),l.push(A))),a&&(y=Ime(a,y,t));const T=t.add(mI({pulse:y})),$=t.add(mc({pulse:$e(T)},void 0,t.parent()));e.name!=null&&(g=e.name,t.addData(g,new Ku(t,f,T,$)),e.on&&e.on.forEach(k=>{(k.insert||k.remove||k.toggle)&&ee("Marks only support modify triggers."),$I(k,t,g)}))}function Ime(e,t,n){const i=e.method,r=e.bound,a=e.separation,s={separation:pn(a)?n.signalRef(a.signal):a,method:pn(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),r){const l=r.tolerance;s.boundTolerance=pn(l)?n.signalRef(l.signal):+l,s.boundScale=n.scaleRef(r.scale),s.boundOrient=r.orient}return $e(n.add(Dpe(s)))}function Pme(e,t){const n=t.config.legend,i=e.encode||{},r=Pi(e,n),a=i.legend||{},s=a.name||void 0,l=a.interactive,c=a.style,f={};let d=0,g,p,y;VM.forEach(A=>e[A]?(f[A]=e[A],d=d||e[A]):0),d||ee("Missing valid scale for legend.");const v=Hme(e,t.scaleType(d)),b={title:e.title!=null,scales:f,type:v,vgrad:v!=="symbol"&&r.isVertical()},S=$e(t.add(va(null,[b]))),_={enter:{x:{value:0},y:{value:0}}},w=$e(t.add(Cpe(p={type:v,scale:t.scaleRef(d),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return v===W1?(y=[mme(e,d,n,i.gradient),vz(e,n,i.labels,w)],p.count=p.count||t.signalRef(`max(2,2*floor((${zu(r.gradientLength())})/100))`)):v===$A?y=[yme(e,d,n,i.gradient,w),vz(e,n,i.labels,w)]:(g=Sme(e,n),y=[xme(e,n,i,w,zu(g.columns))],p.size=Xme(e,t,y[0].marks)),y=[_p({role:Ige,from:S,encode:_,marks:y,layout:g,interactive:l})],b.title&&y.push($me(e,n,i.title,S)),Gb(_p({role:jge,from:S,encode:jd(Yme(r,e,n),a,lm),marks:y,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:s,interactive:l,style:c}),t)}function Hme(e,t){let n=e.type||yz;return!e.type&&Gme(e)===1&&(e.fill||e.stroke)&&(n=J3(t)?W1:Sw(t)?$A:yz),n!==W1?n:Sw(t)?$A:W1}function Gme(e){return VM.reduce((t,n)=>t+(e[n]?1:0),0)}function Yme(e,t,n){const i={enter:{},update:{}};return In(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function Xme(e,t,n){const i=zu(Az("size",e,n)),r=zu(Az("strokeWidth",e,n)),a=zu(Vme(n[1].encode,t,om));return Ka(`max(ceil(sqrt(${i})+${r}),${a})`,t)}function Az(e,t,n){return t[e]?`scale("${t[e]}",datum)`:wI(e,n[0].encode)}function Vme(e,t,n){return wI("fontSize",e)||gme("fontSize",t,n)}const Wme=`item.orient==="${qd}"?-90:item.orient==="${Id}"?90:0`;function Qme(e,t){e=xe(e)?{text:e}:e;const n=Pi(e,t.config.title),i=e.encode||{},r=i.group||{},a=r.name||void 0,s=r.interactive,l=r.style,c=[],f={},d=$e(t.add(va(null,[f])));return c.push(Jme(e,n,Zme(e),d)),e.subtitle&&c.push(e0e(e,n,i.subtitle,d)),Gb(_p({role:Yge,from:d,encode:Kme(n,r),marks:c,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:s,style:l}),t)}function Zme(e){const t=e.encode;return t&&t.title||Pe({name:e.name,interactive:e.interactive,style:e.style},t)}function Kme(e,t){const n={enter:{},update:{}};return In(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:QM},angle:{signal:Wme},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),jd(n,t,lm)}function Jme(e,t,n,i){const r={value:0},a=e.text,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return In(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),gr({type:yc,role:Xge,style:ame,from:i,encode:s},n)}function e0e(e,t,n,i){const r={value:0},a=e.subtitle,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return In(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),gr({type:yc,role:Vge,style:sme,from:i,encode:s},n)}function t0e(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(JM(i,t))}),e.on&&e.on.forEach(i=>{$I(i,t,e.name)}),t.addDataPipeline(e.name,n0e(e,t,n))}function n0e(e,t,n){const i=[];let r=null,a=!1,s=!1,l,c,f,d,g;for(e.values?pn(e.values)||X1(e.format)?(i.push(Cz(t,e)),i.push(r=cu())):i.push(r=cu({$ingest:e.values,$format:e.format})):e.url?X1(e.url)||X1(e.format)?(i.push(Cz(t,e)),i.push(r=cu())):i.push(r=cu({$request:e.url,$format:e.format})):e.source&&(r=l=Se(e.source).map(p=>$e(t.getData(p).output)),i.push(null)),c=0,f=n.length;c<f;++c)d=n[c],g=d.metadata,!r&&!g.source&&i.push(r=cu()),i.push(d),g.generates&&(s=!0),g.modifies&&!s&&(a=!0),g.source?r=d:g.changes&&(r=null);return l&&(f=l.length-1,i[0]=zpe({derive:a,pulse:f?l:l[0]}),(a||f)&&i.splice(1,0,cu())),r||i.push(cu()),i.push(mc({})),i}function cu(e){const t=va({},e);return t.metadata={source:!0},t}function Cz(e,t){return Tpe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const kI=e=>e===_l||e===ba,Yb=(e,t,n)=>pn(e)?s0e(e.signal,t,n):e===qd||e===ba?t:n,An=(e,t,n)=>pn(e)?r0e(e.signal,t,n):kI(e)?t:n,la=(e,t,n)=>pn(e)?a0e(e.signal,t,n):kI(e)?n:t,DI=(e,t,n)=>pn(e)?o0e(e.signal,t,n):e===ba?{value:t}:{value:n},i0e=(e,t,n)=>pn(e)?l0e(e.signal,t,n):e===Id?{value:t}:{value:n},r0e=(e,t,n)=>OI(`${e} === '${ba}' || ${e} === '${_l}'`,t,n),a0e=(e,t,n)=>OI(`${e} !== '${ba}' && ${e} !== '${_l}'`,t,n),s0e=(e,t,n)=>e$(`${e} === '${qd}' || ${e} === '${ba}'`,t,n),o0e=(e,t,n)=>e$(`${e} === '${ba}'`,t,n),l0e=(e,t,n)=>e$(`${e} === '${Id}'`,t,n),OI=(e,t,n)=>(t=t!=null?wn(t):t,n=n!=null?wn(n):n,Tz(t)&&Tz(n)?(t=t?t.signal||ge(t.value):null,n=n?n.signal||ge(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Pe({test:e},t)].concat(n||[])),Tz=e=>e==null||Object.keys(e).length===1,e$=(e,t,n)=>({signal:`${e} ? (${Of(t)}) : (${Of(n)})`}),u0e=(e,t,n,i,r)=>({signal:(i!=null?`${e} === '${qd}' ? (${Of(i)}) : `:"")+(n!=null?`${e} === '${_l}' ? (${Of(n)}) : `:"")+(r!=null?`${e} === '${Id}' ? (${Of(r)}) : `:"")+(t!=null?`${e} === '${ba}' ? (${Of(t)}) : `:"")+"(null)"}),Of=e=>pn(e)?e.signal:e==null?null:ge(e),c0e=(e,t)=>t===0?0:pn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Uf=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function xf(e,t,n,i){let r;if(t&&Ee(t,e))return t[e];if(Ee(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[XM][r]}else if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[om][r]}return null}function Mz(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function f0e(e,t){var n=t.config,i=n.style,r=n.axis,a=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,l,c,f;if(pn(s)){const g=Mz([n.axisX,n.axisY]),p=Mz([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);l={};for(f of g)l[f]=An(s,xf(f,n.axisX,r,i),xf(f,n.axisY,r,i));c={};for(f of p)c[f]=u0e(s.signal,xf(f,n.axisTop,r,i),xf(f,n.axisBottom,r,i),xf(f,n.axisLeft,r,i),xf(f,n.axisRight,r,i))}else l=s===ba||s===_l?n.axisX:n.axisY,c=n["axis"+s[0].toUpperCase()+s.slice(1)];return l||c||a?Pe({},r,l,c,a):r}function d0e(e,t,n,i){const r=Pi(e,t),a=e.orient;let s,l;const c={enter:s={opacity:at},update:l={opacity:Rr},exit:{opacity:at}};In(c,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const f=$z(e,0),d=$z(e,1);return s.x=l.x=An(a,f,at),s.x2=l.x2=An(a,d),s.y=l.y=la(a,f,at),s.y2=l.y2=la(a,d),gr({type:WM,role:zge,from:i,encode:c},n)}function $z(e,t){return{scale:e.scale,range:t}}function h0e(e,t,n,i,r){const a=Pi(e,t),s=e.orient,l=e.gridScale,c=Yb(s,1,-1),f=g0e(e.offset,c);let d,g,p;const y={enter:d={opacity:at},update:p={opacity:Rr},exit:g={opacity:at}};In(y,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const v={scale:e.scale,field:Nr,band:r.band,extra:r.extra,offset:r.offset,round:a("tickRound")},b=An(s,{signal:"height"},{signal:"width"}),S=l?{scale:l,range:0,mult:c,offset:f}:{value:0,offset:f},_=l?{scale:l,range:1,mult:c,offset:f}:Pe(b,{mult:c,offset:f});return d.x=p.x=An(s,v,S),d.y=p.y=la(s,v,S),d.x2=p.x2=la(s,_),d.y2=p.y2=An(s,_),g.x=An(s,v),g.y=la(s,v),gr({type:WM,role:Fge,key:Nr,from:i,encode:y},n)}function g0e(e,t){if(t!==1)if(!be(e))e=pn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Pe({},e);for(;n.mult!=null;)if(be(n.mult))n=n.mult=Pe({},n.mult);else return n.mult=pn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function p0e(e,t,n,i,r,a){const s=Pi(e,t),l=e.orient,c=Yb(l,-1,1);let f,d,g;const p={enter:f={opacity:at},update:g={opacity:Rr},exit:d={opacity:at}};In(p,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const y=wn(r);y.mult=c;const v={scale:e.scale,field:Nr,band:a.band,extra:a.extra,offset:a.offset,round:s("tickRound")};return g.y=f.y=An(l,at,v),g.y2=f.y2=An(l,y),d.x=An(l,v),g.x=f.x=la(l,at,v),g.x2=f.x2=la(l,y),d.y=la(l,v),gr({type:WM,role:Uge,key:Nr,from:i,encode:p},n)}function f_(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function m0e(e,t,n,i,r,a){const s=Pi(e,t),l=e.orient,c=e.scale,f=Yb(l,-1,1),d=zu(s("labelFlush")),g=zu(s("labelFlushOffset")),p=s("labelAlign"),y=s("labelBaseline");let v=d===0||!!d,b;const S=wn(r);S.mult=f,S.offset=wn(s("labelPadding")||0),S.offset.mult=f;const _={scale:c,field:Nr,band:.5,offset:AI(a.offset,s("labelOffset"))},w=An(l,v?f_(c,d,'"left"','"right"','"center"'):{value:"center"},i0e(l,"left","right")),A=An(l,DI(l,"bottom","top"),v?f_(c,d,'"top"','"bottom"','"middle"'):{value:"middle"}),T=f_(c,d,`-(${g})`,g,0);v=v&&g;const $={opacity:at,x:An(l,_,S),y:la(l,_,S)},k={enter:$,update:b={opacity:Rr,text:{field:YM},x:$.x,y:$.y,align:w,baseline:A},exit:{opacity:at,x:$.x,y:$.y}};In(k,{dx:!p&&v?An(l,T):null,dy:!y&&v?la(l,T):null}),In(k,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:p,baseline:y});const M=s("labelBound");let N=s("labelOverlap");return N=N||M?{separation:s("labelSeparation"),method:N,order:"datum.index",bound:M?{scale:c,orient:l,tolerance:M}:null}:void 0,b.align!==w&&(b.align=Uf(b.align,w)),b.baseline!==A&&(b.baseline=Uf(b.baseline,A)),gr({type:yc,role:Lge,style:om,key:Nr,from:i,encode:k,overlap:N},n)}function y0e(e,t,n,i){const r=Pi(e,t),a=e.orient,s=Yb(a,-1,1);let l,c;const f={enter:l={opacity:at,anchor:wn(r("titleAnchor",null)),align:{signal:QM}},update:c=Pe({},l,{opacity:Rr,text:wn(e.title)}),exit:{opacity:at}},d={signal:`lerp(range("${e.scale}"), ${Pb(0,1,.5)})`};return c.x=An(a,d),c.y=la(a,d),l.angle=An(a,at,c0e(s,90)),l.baseline=An(a,DI(a,_l,ba),{value:_l}),c.angle=l.angle,c.baseline=l.baseline,In(f,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),v0e(r,a,f,n),f.update.align=Uf(f.update.align,l.align),f.update.angle=Uf(f.update.angle,l.angle),f.update.baseline=Uf(f.update.baseline,l.baseline),gr({type:yc,role:Bge,style:XM,from:i,encode:f},n)}function v0e(e,t,n,i){const r=(l,c)=>l!=null?(n.update[c]=Uf(wn(l),n.update[c]),!1):!Af(c,i),a=r(e("titleX"),"x"),s=r(e("titleY"),"y");n.enter.auto=s===a?wn(s):An(t,wn(s),wn(a))}function b0e(e,t){const n=f0e(e,t),i=e.encode||{},r=i.axis||{},a=r.name||void 0,s=r.interactive,l=r.style,c=Pi(e,n),f=pme(c),d={scale:e.scale,ticks:!!c("ticks"),labels:!!c("labels"),grid:!!c("grid"),domain:!!c("domain"),title:e.title!=null},g=$e(t.add(va({},[d]))),p=$e(t.add(xpe({scale:t.scaleRef(e.scale),extra:t.property(f.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),y=[];let v;return d.grid&&y.push(h0e(e,n,i.grid,p,f)),d.ticks&&(v=c("tickSize"),y.push(p0e(e,n,i.ticks,p,v,f))),d.labels&&(v=d.ticks?v:0,y.push(m0e(e,n,i.labels,p,v,f))),d.domain&&y.push(d0e(e,n,i.domain,g)),d.title&&y.push(y0e(e,n,i.title,g)),Gb(_p({role:Rge,from:g,encode:jd(x0e(c,e),r,lm),marks:y,aria:c("aria"),description:c("description"),zindex:c("zindex"),name:a,interactive:s,style:l}),t)}function x0e(e,t){const n={enter:{},update:{}};return In(n,{orient:e("orient"),offset:e("offset")||0,position:Jr(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function NI(e,t,n){const i=Se(e.signals),r=Se(e.scales);return n||i.forEach(a=>fI(a,t)),Se(e.projections).forEach(a=>Kpe(a,t)),r.forEach(a=>jpe(a,t)),Se(e.data).forEach(a=>t0e(a,t)),r.forEach(a=>qpe(a,t)),(n||i).forEach(a=>bpe(a,t)),Se(e.axes).forEach(a=>b0e(a,t)),Se(e.marks).forEach(a=>Gb(a,t)),Se(e.legends).forEach(a=>Pme(a,t)),e.title&&Qme(e.title,t),t.parseLambdas(),t}const S0e=e=>jd({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function E0e(e,t){const n=t.config,i=$e(t.root=t.add(gv())),r=_0e(e,n);r.forEach(f=>fI(f,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const a=t.add(va()),s=t.add(gI(cI(S0e(e.encode),Ib,IM,e.style,t,{pulse:$e(a)}))),l=t.add(yI({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:$e(s)}));t.operators.pop(),t.pushState($e(s),$e(l),null),NI(e,t,r),t.operators.push(l);let c=t.add(hI({mark:i,pulse:$e(l)}));return c=t.add(mI({pulse:$e(c)})),c=t.add(mc({pulse:$e(c)})),t.addData("root",new Ku(t,a,a,c)),t}function fg(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function _0e(e,t){const n=s=>Jr(e[s],t[s]),i=[fg("background",n("background")),fg("autosize",Dge(n("autosize"))),fg("padding",Nge(n("padding"))),fg("width",n("width")||0),fg("height",n("height")||0)],r=i.reduce((s,l)=>(s[l.name]=l,s),{}),a={};return Se(e.signals).forEach(s=>{Ee(r,s.name)?s=Pe(r[s.name],s):i.push(s),a[s.name]=s}),Se(t.signals).forEach(s=>{!Ee(a,s.name)&&!Ee(r,s.name)&&i.push(s)}),i}function RI(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function kz(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}RI.prototype=kz.prototype={parse(e){return NI(e,this)},fork(){return new kz(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof wA?$e(e):e;return this.add(Rpe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,a){let s,l;i&&(s=i.data||(i.data={}),l=s[r]||(s[r]=[]),l.push(a))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push($e(this.add(mc({pulse:e})))),this._parent.push(t),this._lookup.push(n?$e(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return rt(this._parent)},encode(){return rt(this._encode)},lookup(){return rt(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(xe(e))return Sp(e,t);e.signal||ee("Unsupported field reference: "+ge(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=$e(this.add(wpe(r)))}return i},compareRef(e){let t=!1;const n=a=>pn(a)?(t=!0,this.signalRef(a.signal)):upe(a)?(t=!0,this.exprRef(a.expr)):a,i=Se(e.field).map(n),r=Se(e.order).map(n);return t?$e(this.add(mz({fields:i,orders:r}))):gz(i,r)},keyRef(e,t){let n=!1;const i=a=>pn(a)?(n=!0,$e(r[a.signal])):a,r=this.signals;return e=Se(e).map(i),n?$e(this.add(Ape({fields:e,flat:t}))):ape(e,t)},sortRef(e){if(!e)return e;const t=jb(e.op,e.field),n=e.order||spe;return n.signal?$e(this.add(mz({fields:t,orders:this.signalRef(n.signal)}))):gz(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return Ee(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&ee("Duplicate signal name: "+ge(e));const n=t instanceof wA?t:this.add(gv(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||ee("Unrecognized signal name: "+ge(e)),this.signals[e]},signalRef(e){return this.signals[e]?$e(this.signals[e]):(Ee(this.lambdas,e)||(this.lambdas[e]=this.add(gv(null))),$e(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=Ka(i,this),a=this.lambdas[i];a.params=r.$params,a.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!be(e)?e:this.signalRef(e.signal||t$(e))},exprRef(e,t){const n={expr:Ka(e,this)};return t&&(n.expr.$name=t),$e(this.add(Epe(n)))},addBinding(e,t){this.bindings||ee("Nested signals do not support binding: "+ge(e)),this.bindings.push(Pe({signal:e},t))},addScaleProj(e,t){Ee(this.scales,e)&&ee("Duplicate scale or projection name: "+ge(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Fpe(t))},addProjection(e,t){this.addScaleProj(e,Npe(t))},getScale(e){return this.scales[e]||ee("Unrecognized scale name: "+ge(e)),this.scales[e]},scaleRef(e){return $e(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ee(this.data,e)&&ee("Duplicate data set name: "+ge(e)),this.data[e]=t},getData(e){return this.data[e]||ee("Undefined data set name: "+ge(e)),this.data[e]},addDataPipeline(e,t){return Ee(this.data,e)&&ee("Duplicate data set name: "+ge(e)),this.addData(e,Ku.fromEntries(this,t))}};function t$(e){return(ie(e)?w0e:A0e)(e)}function w0e(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(be(r)?r.signal||t$(r):ge(r))}return n+"]"}function A0e(e){let t="{",n=0,i,r;for(i in e)r=e[i],t+=(++n>1?",":"")+ge(i)+":"+(be(r)?r.signal||t$(r):ge(r));return t+"}"}function C0e(){const e="sans-serif",i="#4c78a8",r="#000",a="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:a,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:a,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:a,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function T0e(e,t,n){return be(e)||ee("Input Vega specification must be an object."),t=Cd(C0e(),t,e.config),E0e(e,new RI(t,n)).toRuntime()}var M0e="6.2.0";Pe(Wf,mJ,Xre,Aae,coe,rle,Due,cue,Nue,ice,hce,xce);const $0e=M0e,k0e=Object.freeze(Object.defineProperty({__proto__:null,Bounds:un,CanvasHandler:Kp,CanvasRenderer:My,DATE:Li,DAY:Qn,DAYOFYEAR:Qa,Dataflow:Rf,Debug:k8,DisallowedObjectProperties:dC,Error:hC,EventStream:Yv,Gradient:_U,GroupItem:pb,HOURS:fr,Handler:wT,HybridHandler:hB,HybridRenderer:Ow,Info:$8,Item:gb,MILLISECONDS:fa,MINUTES:dr,MONTH:ei,Marks:hr,MultiPulse:UC,None:M8,Operator:Tt,Parameters:Gv,Pulse:cl,QUARTER:Fi,RenderType:nl,Renderer:Zp,ResourceLoader:$U,SECONDS:Lr,SVGHandler:eB,SVGRenderer:kT,SVGStringRenderer:dB,Scenegraph:YU,TIME_UNITS:MC,Transform:J,View:Kq,WEEK:hn,Warn:gC,YEAR:qn,accessor:Ii,accessorFields:Jn,accessorName:Vt,array:Se,ascending:Md,bandwidthNRD:IC,bin:c7,bootstrapCI:f7,boundClip:_B,boundContext:Xp,boundItem:Tw,boundMark:IU,boundStroke:lo,changeset:dc,clampRange:q8,codegenExpression:Aq,compare:vC,constant:ri,cumulativeLogNormal:VC,cumulativeNormal:Vv,cumulativeUniform:KC,dayofyear:y9,debounce:bC,defaultLocale:NC,definition:o7,densityLogNormal:XC,densityNormal:PC,densityUniform:ZC,domChild:dn,domClear:Tr,domCreate:el,domFind:_T,dotbin:d7,error:ee,expressionFunction:en,extend:Pe,extent:Xa,extentIndex:I8,falsy:Ho,fastmap:$d,field:zr,flush:P8,font:xb,fontFamily:Qp,fontSize:as,format:T1,formatLocale:sy,formats:FC,hasOwnProperty:Ee,id:Op,identity:ii,inferType:Q9,inferTypes:Z9,ingest:ht,inherits:ye,inrange:Tf,interpolate:eT,interpolateColors:db,interpolateRange:uU,intersect:bB,intersectBoxLine:Mf,intersectPath:lT,intersectPoint:uT,intersectRule:DU,isArray:ie,isBoolean:$l,isDate:ll,isFunction:He,isIterable:H8,isNumber:ut,isObject:be,isRegExp:xC,isString:xe,isTuple:Pv,key:SC,lerp:G8,lineHeight:xl,loader:qv,locale:V9,logger:Ov,lruCache:Y8,markup:$T,merge:X8,mergeConfig:Cd,multiLineOffset:xT,one:Ad,pad:V8,panLinear:z8,panLog:F8,panPow:L8,panSymlog:U8,parse:T0e,parseExpression:$M,parseSelector:zl,path:Jv,pathCurves:aT,pathEqual:wB,pathParse:td,pathRectangle:CU,pathRender:up,pathSymbols:AU,pathTrail:TU,peek:rt,point:Eb,projection:WT,quantileLogNormal:WC,quantileNormal:Wv,quantileUniform:JC,quantiles:jC,quantizeInterpolator:cU,quarter:B8,quartiles:qC,get random(){return Ur},randomInteger:xK,randomKDE:GC,randomLCG:bK,randomLogNormal:g7,randomMixture:p7,randomNormal:HC,randomUniform:m7,read:e7,regressionConstant:e3,regressionExp:v7,regressionLinear:t3,regressionLoess:S7,regressionLog:y7,regressionPoly:x7,regressionPow:b7,regressionQuad:n3,renderModule:_b,repeat:vg,resetDefaultLocale:yZ,resetSVGDefIds:fre,responseType:J9,runtimeContext:Bq,sampleCurve:Zv,sampleLogNormal:YC,sampleNormal:Xv,sampleUniform:QC,scale:ft,sceneEqual:DT,sceneFromJSON:HU,scenePickVisit:xy,sceneToJSON:PU,sceneVisit:da,sceneZOrder:cT,scheme:tT,serializeXML:lB,setHybridRendererOptions:ore,setRandom:yK,span:Np,splitAccessPath:ns,stringValue:ge,textMetrics:or,timeBin:R9,timeFloor:w9,timeFormatLocale:ip,timeInterval:Nd,timeOffset:T9,timeSequence:k9,timeUnitSpecifier:m9,timeUnits:$C,toBoolean:EC,toDate:_C,toNumber:Zn,toSet:ca,toString:wC,transform:l7,transforms:Wf,truncate:W8,truthy:Fr,tupleid:ke,typeParsers:uw,utcFloor:A9,utcInterval:Rd,utcOffset:M9,utcSequence:D9,utcdayofyear:x9,utcquarter:j8,utcweek:S9,version:$0e,visitArray:Xo,week:v9,writeConfig:Td,zero:Ko,zoomLinear:pC,zoomLog:mC,zoomPow:ey,zoomSymlog:yC},Symbol.toStringTag,{value:"Module"}));function D0e(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var O0e={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},N0e={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},R0e={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const z0e=Array.prototype.slice,fu=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,z0e.call(t,1))},F0e=(e,t=0,n=1,i=0,r=0,a=0,s=0)=>xe(e)?new Date(e):new Date(e,t,n,i,r,a,s);var L0e={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:F0e,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return fu("join",arguments)},indexof:function(){return fu("indexOf",arguments)},lastindexof:function(){return fu("lastIndexOf",arguments)},slice:function(){return fu("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(Md),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return fu("substring",arguments,String)},split:function(){return fu("split",arguments,String)},replace:function(){return fu("replace",arguments,String)},trim:e=>String(e).trim(),btoa:e=>btoa(e),atob:e=>atob(e),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const U0e=["view","item","group","xy","x","y"],DA=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&DA.add(setImmediate);const B0e={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:O0e[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),DA.has(i[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return}return i[r]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||L0e[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>N0e[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>R0e[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);e.memberDepth-=1;const a=e(i.value);return dC.has(r)?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):DA.has(a)?console.error(`Prevented interpretation of method "${r}" which could lead to insecure code execution`):n[r]=a,n},{})};function dg(e,t,n,i,r,a){const s=l=>B0e[l.type](s,l);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=i,s.event=r,s.item=a,U0e.forEach(l=>s.fn[l]=(...c)=>r.vega[l](...c)),s(e)}var j0e={operator(e,t){const n=t.ast,i=e.functions;return r=>dg(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,a)=>dg(n,i,a,r)},event(e,t){const n=t.ast,i=e.functions;return r=>dg(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,a)=>{const s=a.item&&a.item.datum;return dg(n,i,r,s,a)}},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,a=n==="group"||n==="image"||n==="rect";return(s,l)=>{const c=s.datum;let f=0,d;for(const g in i)d=dg(i[g].ast,r,l,c,void 0,s),s[g]!==d&&(s[g]=d,f=1);return n!=="rule"&&D0e(s,i,a),f}}},q0e="6.4.1",I0e={version:q0e};function n$(e){return ue(e,"or")}function i$(e){return ue(e,"and")}function r$(e){return ue(e,"not")}function Z1(e,t){if(r$(e))Z1(e.not,t);else if(i$(e))for(const n of e.and)Z1(n,t);else if(n$(e))for(const n of e.or)Z1(n,t);else t(e)}function Bf(e,t){return r$(e)?{not:Bf(e.not,t)}:i$(e)?{and:e.and.map(n=>Bf(n,t))}:n$(e)?{or:e.or.map(n=>Bf(n,t))}:t(e)}const Le=structuredClone;function zI(e){throw new Error(e)}function cd(e,t){const n={};for(const i of t)Ee(e,i)&&(n[i]=e[i]);return n}function ur(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>mt(e)).join(",")})`};function tt(e){if(ut(e))return e;const t=xe(e)?e:mt(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function OA(e){return e===!1||e===null}function We(e,t){return e.includes(t)}function fd(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function a$(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function FI(e,...t){for(const n of t)P0e(e,n??{});return e}function P0e(e,t){for(const n of le(t))Td(e,n,t[n],!0)}function Ba(e,t){const n=[],i={};let r;for(const a of e)r=t(a),!(r in i)&&(i[r]=1,n.push(a));return n}function H0e(e,t){const n=le(e),i=le(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function LI(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function s$(e,t){for(const n of e)if(t.has(n))return!0;return!1}function NA(e){const t=new Set;for(const n of e){const r=ns(n).map((s,l)=>l===0?s:`[${s}]`),a=r.map((s,l)=>r.slice(0,l+1).join(""));for(const s of a)t.add(s)}return t}function o$(e,t){return e===void 0||t===void 0?!0:s$(NA(e),NA(t))}function Mt(e){return le(e).length===0}const le=Object.keys,ln=Object.values,wl=Object.entries;function wp(e){return e===!0||e===!1}function Lt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Kg(e,t){return r$(e)?`!(${Kg(e.not,t)})`:i$(e)?`(${e.and.map(n=>Kg(n,t)).join(") && (")})`:n$(e)?`(${e.or.map(n=>Kg(n,t)).join(") || (")})`:t(e)}function pv(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&pv(e[n],t)&&delete e[n],Mt(e)}function um(e){return e.charAt(0).toUpperCase()+e.substr(1)}function l$(e,t="datum"){const n=ns(e),i=[];for(let r=1;r<=n.length;r++){const a=`[${n.slice(0,r).map(ge).join("][")}]`;i.push(`${t}${a}`)}return i.join(" && ")}function UI(e,t="datum"){return`${t}[${ge(ns(e).join("."))}]`}function bt(e){return`datum['${e.replaceAll("'","\\'")}']`}function BI(e){return e.replaceAll("\\'","'").replaceAll("\\.",".")}function G0e(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function jr(e){return`${ns(e).map(G0e).join("\\.")}`}function Ju(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Pd(e){return`${ns(e).join(".")}`}function dd(e){return e?ns(e).length:0}function Kt(...e){return e.find(t=>t!==void 0)}let jI=42;function qI(e){const t=++jI;return e?String(e)+t:t}function Y0e(){jI=42}function II(e){return PI(e)?e:`__${e}`}function PI(e){return e.startsWith("__")}function Ap(e){if(e!==void 0)return(e%360+360)%360}function Xb(e){return ut(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Dz=Object.getPrototypeOf(structuredClone({}));function ar(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!ar(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;for(const a of e.entries())if(!ar(a[1],t.get(a[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Dz.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Dz.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!ar(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function mt(e){const t=[];return(function n(i){if(i?.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?`${i}`:"null";if(typeof i!="object")return JSON.stringify(i);let r,a;if(Array.isArray(i)){for(a="[",r=0;r<i.length;r++)r&&(a+=","),a+=n(i[r])||"null";return`${a}]`}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const s=t.push(i)-1,l=Object.keys(i).sort();for(a="",r=0;r<l.length;r++){const c=l[r],f=n(i[c]);f&&(a&&(a+=","),a+=`${JSON.stringify(c)}:${f}`)}return t.splice(s,1),`{${a}}`})(e)}function ue(e,t){return be(e)&&Ee(e,t)&&e[t]!==void 0}const Zs="row",Ks="column",Vb="facet",Ut="x",$n="y",xa="x2",us="y2",Fl="xOffset",Hd="yOffset",Sa="radius",co="radius2",Pr="theta",fo="theta2",Ea="latitude",_a="longitude",wa="latitude2",qr="longitude2",Ll="time",Bi="color",cs="fill",fs="stroke",ji="shape",ho="size",vc="angle",go="opacity",Ul="fillOpacity",Bl="strokeOpacity",jl="strokeWidth",ql="strokeDash",cm="text",hd="order",fm="detail",Wb="key",ec="tooltip",Qb="href",Zb="url",Kb="description",X0e={x:1,y:1,x2:1,y2:1},HI={theta:1,theta2:1,radius:1,radius2:1};function GI(e){return Ee(HI,e)}const u$={longitude:1,longitude2:1,latitude:1,latitude2:1};function YI(e){switch(e){case Ea:return"y";case wa:return"y2";case _a:return"x";case qr:return"x2"}}function XI(e){return Ee(u$,e)}const V0e=le(u$),c$={...X0e,...HI,...u$,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function jf(e){return e===Bi||e===cs||e===fs}const VI={row:1,column:1,facet:1},Or=le(VI),f$={...c$,...VI},W0e=le(f$),{order:cAe,detail:fAe,tooltip:dAe,...Q0e}=f$,{row:hAe,column:gAe,facet:pAe,...Z0e}=Q0e;function K0e(e){return Ee(Z0e,e)}function WI(e){return Ee(f$,e)}const J0e=[xa,us,wa,qr,fo,co];function QI(e){return bc(e)!==e}function bc(e){switch(e){case xa:return Ut;case us:return $n;case wa:return Ea;case qr:return _a;case fo:return Pr;case co:return Sa}return e}function Al(e){if(GI(e))switch(e){case Pr:return"startAngle";case fo:return"endAngle";case Sa:return"outerRadius";case co:return"innerRadius"}return e}function ds(e){switch(e){case Ut:return xa;case $n:return us;case Ea:return wa;case _a:return qr;case Pr:return fo;case Sa:return co}}function qi(e){switch(e){case Ut:case xa:return"width";case $n:case us:return"height"}}function ZI(e){switch(e){case Ut:return"xOffset";case $n:return"yOffset";case xa:return"x2Offset";case us:return"y2Offset";case Pr:return"thetaOffset";case Sa:return"radiusOffset";case fo:return"theta2Offset";case co:return"radius2Offset"}}function d$(e){switch(e){case Ut:return"xOffset";case $n:return"yOffset"}}function e1e(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const t1e=le(c$),{x:mAe,y:yAe,x2:vAe,y2:bAe,xOffset:xAe,yOffset:SAe,latitude:EAe,longitude:_Ae,latitude2:wAe,longitude2:AAe,theta:CAe,theta2:TAe,radius:MAe,radius2:$Ae,...h$}=c$,n1e=le(h$),g$={x:1,y:1},po=le(g$);function Jt(e){return Ee(g$,e)}const p$={theta:1,radius:1},i1e=le(p$);function Jb(e){return e==="width"?Ut:$n}const KI={xOffset:1,yOffset:1};function dm(e){return Ee(KI,e)}const r1e={time:1};function d_(e){return e in r1e}const{text:kAe,tooltip:DAe,href:OAe,url:NAe,description:RAe,detail:zAe,key:FAe,order:LAe,...JI}=h$,a1e=le(JI);function s1e(e){return Ee(h$,e)}function o1e(e){switch(e){case Bi:case cs:case fs:case ho:case ji:case go:case jl:case ql:return!0;case Ul:case Bl:case vc:case Ll:return!1}}const eP={...g$,...p$,...KI,...JI},m$=le(eP);function hs(e){return Ee(eP,e)}function l1e(e,t){return c1e(e)[t]}const tP={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:UAe,...u1e}=tP;function c1e(e){switch(e){case Bi:case cs:case fs:case Kb:case fm:case Wb:case ec:case Qb:case hd:case go:case Ul:case Bl:case jl:case Vb:case Zs:case Ks:return tP;case Ut:case $n:case Fl:case Hd:case Ea:case _a:case Ll:return u1e;case xa:case us:case wa:case qr:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case ho:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case ql:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ji:return{point:"always",geoshape:"always"};case cm:return{text:"always"};case vc:return{point:"always",square:"always",text:"always"};case Zb:return{image:"always"};case Pr:return{text:"always",arc:"always"};case Sa:return{text:"always",arc:"always"};case fo:case co:return{arc:"always"}}}function h_(e){switch(e){case Ut:case $n:case Pr:case Sa:case Fl:case Hd:case ho:case vc:case jl:case go:case Ul:case Bl:case Ll:case xa:case us:case fo:case co:return;case Vb:case Zs:case Ks:case ji:case ql:case cm:case ec:case Qb:case Zb:case Kb:return"discrete";case Bi:case cs:case fs:return"flexible";case Ea:case _a:case wa:case qr:case fm:case Wb:case hd:return}}const f1e={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},d1e={count:1,min:1,max:1};function ao(e){return ue(e,"argmin")}function Il(e){return ue(e,"argmax")}function y$(e){return xe(e)&&Ee(f1e,e)}const h1e=new Set(["count","valid","missing","distinct"]);function ex(e){return xe(e)&&h1e.has(e)}function g1e(e){return xe(e)&&We(["min","max"],e)}const p1e=new Set(["count","sum","distinct","valid","missing"]),m1e=new Set(["mean","average","median","q1","q3","min","max"]);function nP(e){return $l(e)&&(e=dx(e,void 0)),`bin${le(e).map(t=>tx(e[t])?Lt(`_${t}_${wl(e[t])}`):Lt(`_${t}_${e[t]}`)).join("")}`}function $t(e){return e===!0||xc(e)&&!e.binned}function zn(e){return e==="binned"||xc(e)&&e.binned===!0}function xc(e){return be(e)}function tx(e){return ue(e,"param")}function Oz(e){switch(e){case Zs:case Ks:case ho:case Bi:case cs:case fs:case jl:case go:case Ul:case Bl:case ji:return 6;case ql:return 4;default:return 10}}function hm(e){return ue(e,"expr")}function Fn(e,{level:t}={level:0}){const n=le(e||{}),i={};for(const r of n)i[r]=t===0?ir(e[r]):Fn(e[r],{level:t-1});return i}function iP(e){const{anchor:t,frame:n,offset:i,orient:r,angle:a,limit:s,color:l,subtitleColor:c,subtitleFont:f,subtitleFontSize:d,subtitleFontStyle:g,subtitleFontWeight:p,subtitleLineHeight:y,subtitlePadding:v,...b}=e,S={...b,...l?{fill:l}:{}},_={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...a!==void 0?{angle:a}:{},...s!==void 0?{limit:s}:{}},w={...c?{subtitleColor:c}:{},...f?{subtitleFont:f}:{},...d?{subtitleFontSize:d}:{},...g?{subtitleFontStyle:g}:{},...p?{subtitleFontWeight:p}:{},...y?{subtitleLineHeight:y}:{},...v?{subtitlePadding:v}:{}},A=cd(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:S,subtitleMarkConfig:A,nonMarkTitleProperties:_,subtitle:w}}function Zo(e){return xe(e)||ie(e)&&xe(e[0])}function Ce(e){return ue(e,"signal")}function Sc(e){return ue(e,"step")}function y1e(e){return ie(e)?!1:ue(e,"fields")&&!ue(e,"data")}function v1e(e){return ie(e)?!1:ue(e,"fields")&&ue(e,"data")}function Xs(e){return ie(e)?!1:ue(e,"field")&&ue(e,"data")}const b1e={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},x1e=le(b1e),S1e={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},RA=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"],E1e="  ";function rP(e){const t=ie(e.condition)?e.condition.map(Nz):Nz(e.condition);return{...ir(e),condition:t}}function ir(e){if(hm(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Nz(e){if(hm(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Nt(e){if(hm(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Ce(e)?e:e!==void 0?{value:e}:void 0}function _1e(e){return Ce(e)?e.signal:ge(e)}function Rz(e){return Ce(e)?e.signal:ge(e.value)}function sa(e){return Ce(e)?e.signal:e==null?null:ge(e)}function w1e(e,t,n){for(const i of n){const r=Ja(i,t.markDef,t.config);r!==void 0&&(e[i]=Nt(r))}return e}function aP(e){return[].concat(e.type,e.style??[])}function pt(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:a}=i;return r&&ue(t,r)?t[r]:t[e]!==void 0?t[e]:a&&(!r||r===e)?void 0:Ja(e,t,n,i)}function Ja(e,t,n,{vgChannel:i}={}){const r=zA(e,t,n.style);return Kt(i?r:void 0,r,i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function zA(e,t,n){return sP(e,aP(t),n)}function sP(e,t,n){t=Se(t);let i;for(const r of t){const a=n[r];ue(a,e)&&(i=a[e])}return i}function oP(e,t){return Se(e).reduce((n,i)=>(n.field.push(ve(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function lP(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(ar(r,i))return;n.push(i)}),n}function uP(e,t){return ar(e,t)||!t?e:e?[...Se(e),...Se(t)].join(", "):t}function cP(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((Zo(n)||Ce(n))&&(Zo(i)||Ce(i)))return{explicit:e.explicit,value:uP(n,i)};if(Zo(n)||Ce(n))return{explicit:e.explicit,value:n};if(Zo(i)||Ce(i))return{explicit:e.explicit,value:i};if(!Zo(n)&&!Ce(n)&&!Zo(i)&&!Ce(i))return{explicit:e.explicit,value:lP(n,i)};throw new Error("It should never reach here")}function v$(e){return`Invalid specification ${mt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const A1e='Autosize "fit" only works for single views and layered views.';function zz(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Fz(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Lz(e){return e?`Dropping "fit-${e}" because spec has discrete ${qi(e)}.`:'Dropping "fit" because spec has discrete size.'}function b$(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Uz(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function C1e(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function T1e(e){return`The "nearest" transform is not supported for ${e} marks.`}function fP(e){return`Selection not supported for ${e} yet.`}function M1e(e){return`Cannot find a selection named "${e}".`}const $1e="Scale bindings are currently only supported for scales with unbinned, continuous domains.",k1e="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",D1e="Legend bindings are only supported for selections over an individual field or encoding channel.";function O1e(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function N1e(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const R1e="The same selection must be used to override scale domains in a layered view.",z1e='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function F1e(e){return`Unknown repeated value "${e}".`}function Bz(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const L1e="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",x$="Animation involving facet, layer, or concat is currently unsupported.";function U1e(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ge(e)}.`}function B1e(e,t,n,i){return`${e.length?"Multiple ":"No "}matching ${ge(t)} encoding found for selection ${ge(n.param)}. Using "field": ${ge(i)}.`}const j1e="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function q1e(e){return`Unrecognized parse "${e}".`}function jz(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const I1e="Attempt to add the same child twice.";function P1e(e){return`Ignoring an invalid transform: ${mt(e)}.`}const H1e='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function qz(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function G1e(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${mt(t)} is overridden by a child projection ${mt(n)}.`}const Y1e="Arc marks uses theta channel rather than angle, replacing angle with theta.";function X1e(e){return`${e}Offset dropped because ${e} is continuous`}function V1e(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${mt(n)}}.`}function dP(e){return`Invalid field type "${e}".`}function W1e(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Q1e(e){return`Invalid aggregation operator "${e}".`}function hP(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function Z1e(e){return`Position range does not support relative band size for ${e}.`}function FA(e,t){return`Dropping ${mt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const K1e="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function nx(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function J1e(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function eye(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function tye(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function nye(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function g_(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function iye(e){return`The ${e} for range marks cannot be an expression`}function rye(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function aye(e,t){return`Specified orient "${e}" overridden with "${t}".`}function sye(e){return`Cannot use the scale property "${e}" with non-color channel.`}function oye(e){return`Cannot use the relative band size with ${e} scale.`}function lye(e){return`Using unaggregated domain with raw field has no effect (${mt(e)}).`}function uye(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function cye(e){return`Unaggregated domain is currently unsupported for log scale (${mt(e)}).`}function fye(e){return`Cannot apply size to non-oriented mark "${e}".`}function dye(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function hye(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function gP(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function pP(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function gye(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${mt(n)} and ${mt(i)}). Using ${mt(n)}.`}function pye(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${mt(n)} and ${mt(i)}). Using the union of the two domains.`}function mye(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function yye(e){return`Dropping sort property ${mt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Iz="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",vye="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",bye="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",xye="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Sye(e){return`Cannot stack "${e}" if there is already "${e}2".`}function Eye(e){return`Stack is applied to a non-linear scale (${e}).`}function _ye(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function mv(e,t){return`Invalid ${e}: ${mt(t)}.`}function wye(e){return`Dropping day from datetime ${mt(e)} as day cannot be combined with other units.`}function Aye(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function Cye(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function Tye(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Pz(e){return`1D error band does not support ${e}.`}function mP(e){return`Channel ${e} is required for "binned" bin.`}function Mye(e){return`Channel ${e} should not be used with "binned" bin.`}function $ye(e){return`Domain for ${e} is required for threshold scale.`}const yP=Ov(gC);let tc=yP;function kye(e){return tc=e,tc}function Dye(){return tc=yP,tc}function S$(...e){tc.error(...e)}function de(...e){tc.warn(...e)}function Oye(...e){tc.debug(...e)}function Ec(e){if(e&&be(e)){for(const t of _$)if(ue(e,t))return!0}return!1}const vP=["january","february","march","april","may","june","july","august","september","october","november","december"],Nye=vP.map(e=>e.substr(0,3)),bP=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Rye=bP.map(e=>e.substr(0,3));function zye(e){if(Xb(e)&&(e=+e),ut(e))return e>4&&de(mv("quarter",e)),e-1;throw new Error(mv("quarter",e))}function Fye(e){if(Xb(e)&&(e=+e),ut(e))return e-1;{const t=e.toLowerCase(),n=vP.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=Nye.indexOf(i);if(r!==-1)return r;throw new Error(mv("month",e))}}function Lye(e){if(Xb(e)&&(e=+e),ut(e))return e%7;{const t=e.toLowerCase(),n=bP.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=Rye.indexOf(i);if(r!==-1)return r;throw new Error(mv("day",e))}}function E$(e,t){const n=[];if(t&&e.day!==void 0&&le(e).length>1&&(de(wye(e)),e=Le(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?Fye(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?zye(e.quarter):e.quarter;n.push(ut(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?Lye(e.day):e.day;n.push(ut(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function nc(e){const n=E$(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Uye(e){const n=E$(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Bye(e){const t=E$(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const xP={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},_$=le(xP);function jye(e){return Ee(xP,e)}function _c(e){return be(e)?e.binned:SP(e)}function SP(e){return e?.startsWith("binned")}function w$(e){return e.startsWith("utc")}function qye(e){return e.substring(3)}const Iye={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function ix(e){return _$.filter(t=>_P(e,t))}function EP(e){const t=ix(e);return t[t.length-1]}function _P(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Pye(e,t,{end:n}={end:!1}){const i=l$(t),r=w$(e)?"utc":"";function a(c){return c==="quarter"?`(${r}quarter(${i})-1)`:`${r}${c}(${i})`}let s;const l={};for(const c of _$)_P(e,c)&&(l[c]=a(c),s=c);return n&&(l[s]+="+1"),Uye(l)}function wP(e){if(!e)return;const t=ix(e);return`timeUnitSpecifier(${mt(t)}, ${mt(Iye)})`}function Hye(e,t,n){if(!e)return;const i=wP(e);return`${n||w$(e)?"utc":"time"}Format(${t}, ${i})`}function Cn(e){if(!e)return;let t;return xe(e)?SP(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:be(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),w$(t.unit)&&(t.utc=!0,t.unit=qye(t.unit)),t}function Gye(e){const{utc:t,...n}=Cn(e);return n.unit?(t?"utc":"")+le(n).map(i=>Lt(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):`${t?"utc":""}timeunit${le(n).map(i=>Lt(`_${i}_${n[i]}`)).join("")}`}function AP(e,t=n=>n){const n=Cn(e),i=EP(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:a,part:s}=CP(i,n.step),l={...r,[s]:+r[s]+a};return`${t(nc(l))} - ${t(nc(r))}`}}const Yye={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Xye(e){return Ee(Yye,e)}function CP(e,t=1){if(Xye(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function Vye(e){return ue(e,"param")}function A$(e){return!!e?.field&&e.equal!==void 0}function C$(e){return!!e?.field&&e.lt!==void 0}function T$(e){return!!e?.field&&e.lte!==void 0}function M$(e){return!!e?.field&&e.gt!==void 0}function $$(e){return!!e?.field&&e.gte!==void 0}function k$(e){if(e?.field){if(ie(e.range)&&e.range.length===2)return!0;if(Ce(e.range))return!0}return!1}function D$(e){return!!e?.field&&(ie(e.oneOf)||ie(e.in))}function Wye(e){return!!e?.field&&e.valid!==void 0}function TP(e){return D$(e)||A$(e)||k$(e)||C$(e)||M$(e)||T$(e)||$$(e)}function Da(e,t){return hx(e,{timeUnit:t,wrapTime:!0})}function Qye(e,t){return e.map(n=>Da(n,t))}function MP(e,t=!0){const{field:n}=e,i=Cn(e.timeUnit),{unit:r,binned:a}=i||{},s=ve(e,{expr:"datum"}),l=r?`time(${a?s:Pye(r,n)})`:s;if(A$(e))return`${l}===${Da(e.equal,r)}`;if(C$(e)){const c=e.lt;return`${l}<${Da(c,r)}`}else if(M$(e)){const c=e.gt;return`${l}>${Da(c,r)}`}else if(T$(e)){const c=e.lte;return`${l}<=${Da(c,r)}`}else if($$(e)){const c=e.gte;return`${l}>=${Da(c,r)}`}else{if(D$(e))return`indexof([${Qye(e.oneOf,r).join(",")}], ${l}) !== -1`;if(Wye(e))return rx(l,e.valid);if(k$(e)){const{range:c}=Fn(e),f=Ce(c)?{signal:`${c.signal}[0]`}:c[0],d=Ce(c)?{signal:`${c.signal}[1]`}:c[1];if(f!==null&&d!==null&&t)return`inrange(${l}, [${Da(f,r)}, ${Da(d,r)}])`;const g=[];return f!==null&&g.push(`${l} >= ${Da(f,r)}`),d!==null&&g.push(`${l} <= ${Da(d,r)}`),g.length>0?g.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${mt(e)}`)}function rx(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Zye(e){return TP(e)&&e.timeUnit?{...e,timeUnit:Cn(e.timeUnit)}:e}const gm={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Kye(e){return e==="quantitative"||e==="temporal"}function O$(e){return e==="ordinal"||e==="nominal"}const ic=gm.quantitative,N$=gm.ordinal,gd=gm.temporal,R$=gm.nominal,Gd=gm.geojson;function Jye(e){if(e)switch(e=e.toLowerCase(),e){case"q":case ic:return"quantitative";case"t":case gd:return"temporal";case"o":case N$:return"ordinal";case"n":case R$:return"nominal";case Gd:return"geojson"}}const Ln={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},LA={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function eve(e,t){const n=LA[e],i=LA[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const tve={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Hz(e){return tve[e]}const $P=new Set(["linear","log","pow","sqrt","symlog"]),kP=new Set([...$P,"time","utc"]);function DP(e){return $P.has(e)}const OP=new Set(["quantile","quantize","threshold"]),nve=new Set([...kP,...OP,"sequential","identity"]),ive=new Set(["ordinal","bin-ordinal","point","band"]);function Tn(e){return ive.has(e)}function ha(e){return nve.has(e)}function ja(e){return kP.has(e)}function pd(e){return OP.has(e)}const rve={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function ave(e){return!xe(e)&&ue(e,"name")}function NP(e){return ue(e,"param")}function sve(e){return ue(e,"unionWith")}function ove(e){return be(e)&&"field"in e}const lve={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:BAe,domain:jAe,range:qAe,rangeMax:IAe,rangeMin:PAe,scheme:HAe,...uve}=lve,cve=le(uve);function UA(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return ja(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return ja(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return ja(e);case"nice":return ja(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return ha(e)&&!We(["log","time","utc","threshold","quantile"],e)}}function RP(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return jf(e)?void 0:sye(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function fve(e,t){return We([N$,R$],t)?e===void 0||Tn(e):t===gd?We([Ln.TIME,Ln.UTC,void 0],e):t===ic?DP(e)||pd(e)||e===void 0:!0}function dve(e,t,n=!1){if(!hs(e))return!1;switch(e){case Ut:case $n:case Fl:case Hd:case Pr:case Sa:return ja(t)||t==="band"?!0:t==="point"?!n:!1;case Ll:return We(["linear","band"],t);case ho:case jl:case go:case Ul:case Bl:case vc:return ja(t)||pd(t)||We(["band","point","ordinal"],t);case Bi:case cs:case fs:return t!=="band";case ql:case ji:return t==="ordinal"||pd(t)}}function hve(e){return be(e)&&"value"in e}const Ei={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},zP=Ei.arc,ax=Ei.area,sx=Ei.bar,gve=Ei.image,ox=Ei.line,lx=Ei.point,pve=Ei.rect,yv=Ei.rule,FP=Ei.text,z$=Ei.tick,mve=Ei.trail,F$=Ei.circle,L$=Ei.square,LP=Ei.geoshape;function Pl(e){return["line","area","trail"].includes(e)}function Cp(e){return["rect","bar","image","arc","tick"].includes(e)}const yve=new Set(le(Ei));function es(e){return ue(e,"type")}const vve=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],bve=["fill","fillOpacity"],xve=[...vve,...bve],Sve={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Gz=le(Sve),p_=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],Eve={area:["line","point"],bar:p_,rect:p_,line:["point"],tick:["bandSize","thickness",...p_]},_ve={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},wve={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},UP=le(wve);function rc(e){return ue(e,"band")}const Ave={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Cve=5,U$={binSpacing:0,continuousBandSize:Cve,minBandSize:.25,timeUnitBandPosition:.5},Tve={...U$,binSpacing:1},Mve={...U$,thickness:1};function $ve(e){return es(e)?e.type:e}function BP(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function B$({markDef:e,config:t,scaleChannel:n,scaleType:i,isCountAggregate:r}){if(!i||!ha(i)||r)return"always-valid";const a=BP(pt("invalid",e,t),{isPath:Pl(e.type)});return t.scale?.invalid?.[n]!==void 0?"show":a}function kve(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function jP({scaleName:e,scale:t,mode:n}){const i=`domain('${e}')`;if(!t||!e)return;const r=`${i}[0]`,a=`peek(${i})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${n==="zeroOrMin"?r:a})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?r:a})`}}function qP({scaleChannel:e,channelDef:t,scale:n,scaleName:i,markDef:r,config:a}){const s=n?.get("type"),l=pa(t),c=ex(l?.aggregate),f=B$({scaleChannel:e,markDef:r,config:a,scaleType:s,isCountAggregate:c});if(l&&f==="show"){const d=a.scale.invalid?.[e]??"zero-or-min";return{test:rx(ve(l,{expr:"datum"}),!1),...Dve(d,n,i)}}}function Dve(e,t,n){if(hve(e)){const{value:i}=e;return Ce(i)?{signal:i.signal}:{value:i}}return jP({scale:t,scaleName:n,mode:"zeroOrMin"})}function j$(e){const{channel:t,channelDef:n,markDef:i,scale:r,scaleName:a,config:s}=e,l=bc(t),c=q$(e),f=qP({scaleChannel:l,channelDef:n,scale:r,scaleName:a,markDef:i,config:s});return f!==void 0?[f,c]:c}function Ove(e){const{datum:t}=e;return Ec(t)?nc(t):`${mt(t)}`}function Fu(e,t,n,i){const r={};if(t&&(r.scale=t),gs(e)){const{datum:a}=e;Ec(a)?r.signal=nc(a):Ce(a)?r.signal=a.signal:hm(a)?r.signal=a.expr:r.value=a}else r.field=ve(e,n);if(i){const{offset:a,band:s}=i;a&&(r.offset=a),s&&(r.band=s)}return r}function vv({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:a="end",bandPosition:s=.5}){const l=!Ce(s)&&0<s&&s<1?"datum":void 0,c=ve(t,{expr:l,suffix:r}),f=n!==void 0?ve(n,{expr:l}):ve(t,{suffix:a,expr:l}),d={};if(s===0||s===1){d.scale=e;const g=s===0?c:f;d.field=g}else{const g=Ce(s)?`(1-${s.signal}) * ${c} + ${s.signal} * ${f}`:`${1-s} * ${c} + ${s} * ${f}`;d.signal=`scale("${e}", ${g})`}return i&&(d.offset=i),d}function Nve({scaleName:e,fieldDef:t}){const n=ve(t,{expr:"datum"}),i=ve(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`}function q$({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:l,offset:c,defaultRef:f,bandPosition:d}){if(t){if(Ue(t)){const g=s?.get("type");if(xi(t)){d??=Cl({fieldDef:t,fieldDef2:n,markDef:i,config:r});const{bin:p,timeUnit:y,type:v}=t;if($t(p)||d&&y&&v===gd)return l?.impute?Fu(t,a,{binSuffix:"mid"},{offset:c}):d&&!Tn(g)?vv({scaleName:a,fieldOrDatumDef:t,bandPosition:d,offset:c}):Fu(t,a,bm(t,e)?{binSuffix:"range"}:{},{offset:c});if(zn(p)){if(fe(n))return vv({scaleName:a,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:d,offset:c});de(mP(e===Ut?xa:us))}}return Fu(t,a,Tn(g)?{binSuffix:"range"}:{},{offset:c,band:g==="band"?d??t.bandPosition??.5:void 0})}else if(ga(t)){const g=t.value,p=c?{offset:c}:{};return{...Jg(e,g),...p}}}return He(f)&&(f=f()),f&&{...f,...c?{offset:c}:{}}}function Jg(e,t){return We(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:We(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Nt(t)}function ac(e){return e&&e!=="number"&&e!=="time"}function IP(e,t,n){return`${e}(${t}${n?`, ${mt(n)}`:""})`}function I$({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a}){if(ac(n))return oa({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:a});const s=PP(e,i,r),l=md(e);if(t===void 0&&n===void 0&&a.customFormatTypes){if(l==="quantitative"){if(r&&a.normalizedNumberFormatType)return oa({fieldOrDatumDef:e,format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,expr:i,config:a});if(a.numberFormatType)return oa({fieldOrDatumDef:e,format:a.numberFormat,formatType:a.numberFormatType,expr:i,config:a})}if(l==="temporal"&&a.timeFormatType&&fe(e)&&e.timeUnit===void 0)return oa({fieldOrDatumDef:e,format:a.timeFormat,formatType:a.timeFormatType,expr:i,config:a})}function c(f){return fe(f)?Cn(f.timeUnit)||{}:{unit:void 0,utc:void 0}}if(vd(e)){const{unit:f,utc:d}=c(e),g=zve({field:s,timeUnit:f,format:t,formatType:a.timeFormatType,rawTimeFormat:a.timeFormat,isUTCScale:d||wc(e)&&e.scale?.type===Ln.UTC});return g?{signal:g}:void 0}if(t=BA({type:l,specifiedFormat:t,config:a,normalizeStack:r}),fe(e)&&$t(e.bin)){const f=ve(e,{expr:i,binSuffix:"end"});return{signal:pm(s,f,t,n,a)}}else return t||md(e)==="quantitative"?{signal:`${YP(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function PP(e,t,n){return fe(e)?n?`${ve(e,{expr:t,suffix:"end"})}-${ve(e,{expr:t,suffix:"start"})}`:ve(e,{expr:t}):Ove(e)}function oa({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a,field:s}){if(s??=PP(e,i,r),s!=="datum.value"&&fe(e)&&$t(e.bin)){const l=ve(e,{expr:i,binSuffix:"end"});return{signal:pm(s,l,t,n,a)}}return{signal:IP(n,s,t)}}function HP(e,t,n,i,r,a){if(!(xe(i)&&ac(i))&&!(n===void 0&&i===void 0&&r.customFormatTypes&&md(e)==="quantitative"&&(r.normalizedNumberFormatType&&yd(e)&&e.stack==="normalize"||r.numberFormatType))){if(yd(e)&&e.stack==="normalize"&&r.normalizedNumberFormat)return BA({type:"quantitative",config:r,normalizeStack:!0});if(vd(e)){const s=fe(e)?Cn(e.timeUnit)?.unit:void 0;return s===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:Rve({specifiedFormat:n,timeUnit:s,config:r,omitTimeFormatConfig:a})}return BA({type:t,specifiedFormat:n,config:r})}}function GP(e,t,n){if(e&&(Ce(e)||e==="number"||e==="time"))return e;if(vd(t)&&n!=="time"&&n!=="utc")return fe(t)&&Cn(t?.timeUnit)?.utc?"utc":"time"}function BA({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(xe(t))return t;if(e===ic)return i?n.normalizedNumberFormat:n.numberFormat}function Rve({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:wP(t)}:i?void 0:n.timeFormat)}function YP(e,t){return`format(${e}, "${t||""}")`}function Yz(e,t,n,i){return ac(n)?IP(n,e,t):YP(e,(xe(t)?t:void 0)??i.numberFormat)}function pm(e,t,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return pm(e,t,r.numberFormat,r.numberFormatType,r);const a=Yz(e,n,i,r),s=Yz(t,n,i,r);return`${rx(e,!1)} ? "null" : ${a} + "${E1e}" + ${s}`}function zve({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:a}){return!t||n?!t&&i?`${i}(${e}, ${mt(n)})`:(n=xe(n)?n:r,`${a?"utc":"time"}Format(${e}, ${mt(n)})`):Hye(t,e,a)}const ux="min",Fve={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Xz(e){return Ee(Fve,e)}function Lve(e){return ue(e,"encoding")}function Js(e){return e&&(e.op==="count"||ue(e,"field"))}function XP(e){return e&&ie(e)}function mm(e){return ue(e,"row")||ue(e,"column")}function P$(e){return ue(e,"header")}function cx(e){return ue(e,"facet")}function Uve(e){return ue(e,"param")}function Bve(e){return!xe(e)&&ue(e,"repeat")}function Vz(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function H$(e){return ue(e,"sort")}function Cl({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(Ue(e)&&e.bandPosition!==void 0)return e.bandPosition;if(fe(e)){const{timeUnit:r,bin:a}=e;if(r&&!t)return Ja("timeUnitBandPosition",n,i);if($t(a))return .5}}function VP({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:a,useVlSizeChannel:s}){const l=qi(e),c=pt(s?"size":l,i,r,{vgChannel:l});if(c!==void 0)return c;if(fe(t)){const{timeUnit:f,bin:d}=t;if(f&&!n)return{band:Ja("timeUnitBandSize",i,r)};if($t(d)&&!Tn(a))return{band:1}}if(Cp(i.type))return a?Tn(a)?r[i.type]?.discreteBandSize||{band:1}:r[i.type]?.continuousBandSize:r[i.type]?.discreteBandSize}function WP(e,t,n,i){return $t(e.bin)||e.timeUnit&&xi(e)&&e.type==="temporal"?Cl({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function QP(e){return ue(e,"sort")&&!ue(e,"field")}function ym(e){return ue(e,"condition")}function fx(e){const t=e?.condition;return!!t&&!ie(t)&&fe(t)}function vm(e){const t=e?.condition;return!!t&&!ie(t)&&Ue(t)}function jve(e){const t=e?.condition;return!!t&&(ie(t)||ga(t))}function fe(e){return ue(e,"field")||e?.aggregate==="count"}function md(e){return e?.type}function gs(e){return ue(e,"datum")}function ol(e){return xi(e)&&!xv(e)||bv(e)}function Wz(e){return xi(e)&&e.type==="quantitative"&&!e.bin||bv(e)}function bv(e){return gs(e)&&ut(e.datum)}function Ue(e){return fe(e)||gs(e)}function xi(e){return e&&(ue(e,"field")||e.aggregate==="count")&&ue(e,"type")}function ga(e){return ue(e,"value")}function wc(e){return ue(e,"scale")||ue(e,"sort")}function yd(e){return ue(e,"axis")||ue(e,"stack")||ue(e,"impute")}function ZP(e){return ue(e,"legend")}function KP(e){return ue(e,"format")||ue(e,"formatType")}function qve(e){return ur(e,["legend","axis","header","scale"])}function Ive(e){return ue(e,"op")}function ve(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,a="";if(Hve(e))n=II("count");else{let s;if(!t.nofn)if(Ive(e))s=e.op;else{const{bin:l,aggregate:c,timeUnit:f}=e;$t(l)?(s=nP(l),r=(t.binSuffix??"")+(t.suffix??"")):c?Il(c)?(a=`["${n}"]`,n=`argmax_${c.argmax}`):ao(c)?(a=`["${n}"]`,n=`argmin_${c.argmin}`):s=String(c):f&&!_c(f)&&(s=Gye(f),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?Pd(n):t.expr?UI(n,t.expr)+a:jr(n)+a}function xv(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return fe(e)&&!!e.bin;case"temporal":return!1}throw new Error(dP(e.type))}function Pve(e){return wc(e)&&pd(e.scale?.type)}function Hve(e){return e.aggregate==="count"}function Gve(e,t){const{field:n,bin:i,timeUnit:r,aggregate:a}=e;if(a==="count")return t.countTitle;if($t(i))return`${n} (binned)`;if(r&&!_c(r)){const s=Cn(r)?.unit;if(s)return`${n} (${ix(s).join("-")})`}else if(a)return Il(a)?`${n} for max ${a.argmax}`:ao(a)?`${n} for min ${a.argmin}`:`${um(a)} of ${n}`;return n}function Yve(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(Il(t))return`${r} for argmax(${t.argmax})`;if(ao(t))return`${r} for argmin(${t.argmin})`;const a=i&&!_c(i)?Cn(i):void 0,s=t||a?.unit||a?.maxbins&&"timeunit"||$t(n)&&"bin";return s?`${s.toUpperCase()}(${r})`:r}const JP=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Yve(e);default:return Gve(e,t)}};let eH=JP;function tH(e){eH=e}function Xve(){tH(JP)}function qf(e,t,{allowDisabling:n,includeDefault:i=!0}){const r=G$(e)?.title;if(!fe(e))return r??e.title;const a=e,s=i?Y$(a,t):void 0;return n?Kt(r,a.title,s):r??a.title??s}function G$(e){if(yd(e)&&e.axis)return e.axis;if(ZP(e)&&e.legend)return e.legend;if(P$(e)&&e.header)return e.header}function Y$(e,t){return eH(e,t)}function Sv(e){if(KP(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=G$(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function Vve(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(H$(e)&&ie(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!Il(n)&&!ao(n))return"quantitative";if(wc(e)&&e.scale?.type)switch(LA[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function pa(e){if(fe(e))return e;if(fx(e))return e.condition}function gn(e){if(Ue(e))return e;if(vm(e))return e.condition}function nH(e,t,n,i={}){if(xe(e)||ut(e)||$l(e)){const r=xe(e)?"string":ut(e)?"number":"boolean";return de(V1e(t,r,e)),{value:e}}return Ue(e)?Ev(e,t,n,i):vm(e)?{...e,condition:Ev(e.condition,t,n,i)}:e}function Ev(e,t,n,i){if(KP(e)){const{format:r,formatType:a,...s}=e;if(ac(a)&&!n.customFormatTypes)return de(qz(t)),Ev(s,t,n,i)}else{const r=yd(e)?"axis":ZP(e)?"legend":P$(e)?"header":null;if(r&&e[r]){const{format:a,formatType:s,...l}=e[r];if(ac(s)&&!n.customFormatTypes)return de(qz(t)),Ev({...e,[r]:l},t,n,i)}}return fe(e)?X$(e,t,i):Wve(e)}function Wve(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=ut(n)?"quantitative":xe(n)?"nominal":Ec(n)?"temporal":void 0,{...e,type:t}}function X$(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:a,field:s}=e,l={...e};if(!n&&i&&!y$(i)&&!Il(i)&&!ao(i)&&(de(Q1e(i)),delete l.aggregate),r&&(l.timeUnit=Cn(r)),s&&(l.field=`${s}`),$t(a)&&(l.bin=dx(a,t)),zn(a)&&!Jt(t)&&de(Mye(t)),xi(l)){const{type:c}=l,f=Jye(c);c!==f&&(l.type=f),c!=="quantitative"&&ex(i)&&(de(W1e(c,i)),l.type="quantitative")}else if(!QI(t)){const c=Vve(l,t);l.type=c}if(xi(l)){const{compatible:c,warning:f}=Qve(l,t)||{};c===!1&&de(f)}if(H$(l)&&xe(l.sort)){const{sort:c}=l;if(Xz(c))return{...l,sort:{encoding:c}};const f=c.substring(1);if(c.charAt(0)==="-"&&Xz(f))return{...l,sort:{encoding:f,order:"descending"}}}if(P$(l)){const{header:c}=l;if(c){const{orient:f,...d}=c;if(f)return{...l,header:{...d,labelOrient:c.labelOrient||f,titleOrient:c.titleOrient||f}}}}return l}function dx(e,t){return $l(e)?{maxbins:Oz(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Oz(t)}:e}const Sf={compatible:!0};function Qve(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Zs:case Ks:case Vb:return xv(e)?Sf:{compatible:!1,warning:eye(t)};case Ut:case $n:case Fl:case Hd:case Bi:case cs:case fs:case cm:case fm:case Wb:case ec:case Qb:case Zb:case vc:case Pr:case Sa:case Kb:return Sf;case _a:case qr:case Ea:case wa:return n!==ic?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Sf;case go:case Ul:case Bl:case jl:case ho:case fo:case co:case xa:case us:case Ll:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Sf;case ji:case ql:return!xv(e)&&!Pve(e)?{compatible:!1,warning:tye(t)}:Sf;case hd:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Sf}}function vd(e){const{formatType:t}=Sv(e);return t==="time"||!t&&Zve(e)}function Zve(e){return e&&(e.type==="temporal"||fe(e)&&!!e.timeUnit)}function hx(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){const a=t&&Cn(t)?.unit;let s=a||n==="temporal",l;return hm(e)?l=e.expr:Ce(e)?l=e.signal:Ec(e)?(s=!0,l=nc(e)):(xe(e)||ut(e))&&s&&(l=`datetime(${mt(e)})`,jye(a)&&(ut(e)&&e<1e4||xe(e)&&isNaN(Date.parse(e)))&&(l=nc({[a]:e}))),l?i&&s?`time(${l})`:l:r?void 0:mt(e)}function iH(e,t){const{type:n}=e;return t.map(i=>{const r=fe(e)&&!_c(e.timeUnit)?e.timeUnit:void 0,a=hx(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return a!==void 0?{signal:a}:i})}function bm(e,t){return $t(e.bin)?hs(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Qz={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function xm(e){return e?.condition}const rH=["domain","grid","labels","ticks","title"],Kve={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},aH={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Jve={...aH,style:1,labelExpr:1,encoding:1};function Zz(e){return Ee(Jve,e)}const ebe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},sH=le(ebe);function mo(e){return ue(e,"mark")}class gx{name;run;constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return mo(t)?$ve(t.mark)===this.name:!1}}function Lu(e,t){const n=e?.[t];return n?ie(n)?fd(n,i=>!!i.field):fe(n)||fx(n):!1}function oH(e,t){const n=e?.[t];return n?ie(n)?fd(n,i=>!!i.field):fe(n)||gs(n)||vm(n):!1}function lH(e,t){if(Jt(t)){const n=e[t];if((fe(n)||gs(n))&&(O$(n.type)||fe(n)&&n.timeUnit)){const i=d$(t);return oH(e,i)}}return!1}function uH(e){return fd(W0e,t=>{if(Lu(e,t)){const n=e[t];if(ie(n))return fd(n,i=>!!i.aggregate);{const i=pa(n);return i&&!!i.aggregate}}return!1})}function cH(e,t){const n=[],i=[],r=[],a=[],s={};return V$(e,(l,c)=>{if(fe(l)){const{field:f,aggregate:d,bin:g,timeUnit:p,...y}=l;if(d||p||g){const b=G$(l)?.title;let S=ve(l,{forAs:!0});const _={...b?[]:{title:qf(l,t,{allowDisabling:!0})},...y,field:S};if(d){let w;if(Il(d)?(w="argmax",S=ve({op:"argmax",field:d.argmax},{forAs:!0}),_.field=`${S}.${f}`):ao(d)?(w="argmin",S=ve({op:"argmin",field:d.argmin},{forAs:!0}),_.field=`${S}.${f}`):d!=="boxplot"&&d!=="errorbar"&&d!=="errorband"&&(w=d),w){const A={op:w,as:S};f&&(A.field=f),a.push(A)}}else if(n.push(S),xi(l)&&$t(g)){if(i.push({bin:g,field:f,as:S}),n.push(ve(l,{binSuffix:"end"})),bm(l,c)&&n.push(ve(l,{binSuffix:"range"})),Jt(c)){const w={field:`${S}_end`};s[`${c}2`]=w}_.bin="binned",QI(c)||(_.type=ic)}else if(p&&!_c(p)){r.push({timeUnit:p,field:f,as:S});const w=xi(l)&&l.type!==gd&&"time";w&&(c===cm||c===ec?_.formatType=w:s1e(c)?_.legend={formatType:w,..._.legend}:Jt(c)&&(_.axis={formatType:w,..._.axis}))}s[c]=_}else n.push(f),s[c]=e[c]}else s[c]=e[c]}),{bins:i,timeUnits:r,aggregate:a,groupby:n,encoding:s}}function tbe(e,t,n){const i=l1e(t,n);if(i){if(i==="binned"){const r=e[t===xa?Ut:$n];return!!(fe(r)&&fe(e[t])&&zn(r.bin))}}else return!1;return!0}function nbe(e,t,n,i){const r={};for(const a of le(e))WI(a)||de(J1e(a));for(let a of t1e){if(!e[a])continue;const s=e[a];if(dm(a)){const l=e1e(a),c=r[l];if(fe(c)&&Kye(c.type)&&fe(s)&&!c.timeUnit){de(X1e(l));continue}}if(a==="angle"&&t==="arc"&&!e.theta&&(de(Y1e),a=Pr),!tbe(e,a,t)){de(nx(a,t));continue}if(a===ho&&t==="line"&&pa(e[a])?.aggregate){de(K1e);continue}if(a===Bi&&(n?"fill"in e:"stroke"in e)){de(hP("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(a===fm||a===hd&&!ie(s)&&!ga(s)||a===ec&&ie(s)){if(s){if(a===hd){const l=e[a];if(QP(l)){r[a]=l;continue}}r[a]=Se(s).reduce((l,c)=>(fe(c)?l.push(X$(c,a)):de(FA(c,a)),l),[])}}else{if(a===ec&&s===null)r[a]=null;else if(!fe(s)&&!gs(s)&&!ga(s)&&!ym(s)&&!Ce(s)){de(FA(s,a));continue}r[a]=nH(s,a,i)}}return r}function px(e,t){const n={};for(const i of le(e)){const r=nH(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function ibe(e){const t=[];for(const n of le(e))if(Lu(e,n)){const i=e[n],r=Se(i);for(const a of r)fe(a)?t.push(a):fx(a)&&t.push(a.condition)}return t}function V$(e,t,n){if(e)for(const i of le(e)){const r=e[i];if(ie(r))for(const a of r)t.call(n,a,i);else t.call(n,r,i)}}function rbe(e,t,n,i){return e?le(e).reduce((r,a)=>{const s=e[a];return ie(s)?s.reduce((l,c)=>t.call(i,l,c,a),r):t.call(i,r,s,a)},n):n}function fH(e,t){return le(t).reduce((n,i)=>{switch(i){case Ut:case $n:case Qb:case Kb:case Zb:case xa:case us:case Fl:case Hd:case Pr:case fo:case Sa:case co:case Ll:case Ea:case _a:case wa:case qr:case cm:case ji:case vc:case ec:return n;case hd:if(e==="line"||e==="trail")return n;case fm:case Wb:{const r=t[i];if(ie(r)||fe(r))for(const a of Se(r))a.aggregate||n.push(ve(a,{}));return n}case ho:if(e==="trail")return n;case Bi:case cs:case fs:case go:case Ul:case Bl:case ql:case jl:{const r=pa(t[i]);return r&&!r.aggregate&&n.push(ve(r,{})),n}}},[])}function abe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(ie(t)){for(const a of t)a.aggregate?(i||(i=[]),i.push(a)):(r||(r=[]),r.push(a));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return ie(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function jA(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:s,titlePrefix:l})=>{const c=i?` of ${W$(t)}`:"";return{field:s+t.field,type:t.type,title:Ce(l)?{signal:`${l}"${escape(c)}"`}:l+c}}),a=ibe(n).map(qve);return{tooltip:[...r,...Ba(a,tt)]}}function W$(e){const{title:t,field:n}=e;return Kt(t,n)}function Q$(e,t,n,i,r){const{scale:a,axis:s}=n;return({partName:l,mark:c,positionPrefix:f,endPositionPrefix:d=void 0,extraEncoding:g={}})=>{const p=W$(n);return dH(e,l,r,{mark:c,encoding:{[t]:{field:`${f}_${n.field}`,type:n.type,...p!==void 0?{title:p}:{},...a!==void 0?{scale:a}:{},...s!==void 0?{axis:s}:{}},...xe(d)?{[`${t}2`]:{field:`${d}_${n.field}`}}:{},...i,...g}})}}function dH(e,t,n,i){const{clip:r,color:a,opacity:s}=e,l=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...a?{color:a}:{},...s?{opacity:s}:{},...es(i.mark)?i.mark:{type:i.mark},style:`${l}-${String(t)}`,...$l(e[t])?{}:e[t]}}]:[]}function hH(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",a=i[r],s=i[`${r}2`],l=i[`${r}Error`],c=i[`${r}Error2`];return{continuousAxisChannelDef:m1(a,n),continuousAxisChannelDef2:m1(s,n),continuousAxisChannelDefError:m1(l,n),continuousAxisChannelDefError2:m1(c,n),continuousAxis:r}}function m1(e,t){if(e?.aggregate){const{aggregate:n,...i}=e;return n!==t&&de(Tye(n,t)),i}else return e}function gH(e,t){const{mark:n,encoding:i}=e,{x:r,y:a}=i;if(es(n)&&n.orient)return n.orient;if(ol(r)){if(ol(a)){const s=fe(r)&&r.aggregate,l=fe(a)&&a.aggregate;if(!s&&l===t)return"vertical";if(!l&&s===t)return"horizontal";if(s===t&&l===t)throw new Error("Both x and y cannot have aggregate");return vd(a)&&!vd(r)?"horizontal":"vertical"}return"horizontal"}else{if(ol(a))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const _v="boxplot",sbe=["box","median","outliers","rule","ticks"],obe=new gx(_v,mH);function pH(e){return ut(e)?"tukey":e}function mH(e,{config:t}){e={...e,encoding:px(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:a,...s}=e,l=es(n)?n:{type:n};r&&de(fP("boxplot"));const c=l.extent??t.boxplot.extent,f=pt("size",l,t),d=l.invalid,g=pH(c),{bins:p,timeUnits:y,transform:v,continuousAxisChannelDef:b,continuousAxis:S,groupby:_,aggregate:w,encodingWithoutContinuousAxis:A,ticksOrient:T,boxOrient:$,customTooltipWithoutAggregatedField:k}=lbe(e,c,t),M=Pd(b.field),{color:N,size:z,...j}=A,U=Gr=>Q$(l,S,b,Gr,t.boxplot),X=U(j),H=U(A),q=(be(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",R=U({...j,...z?{size:z}:{},color:{condition:{test:`${bt(`lower_box_${b.field}`)} >= ${bt(`upper_box_${b.field}`)}`,...N||{value:q}}}}),O=jA([{fieldPrefix:g==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:g==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],b,A),B={type:"tick",color:"black",opacity:1,orient:T,invalid:d,aria:!1},Y=g==="min-max"?O:jA([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],b,A),Z=[...X({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Y}),...X({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Y}),...X({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:Y}),...X({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:Y})],oe=[...g!=="tukey"?Z:[],...H({partName:"box",mark:{type:"bar",...f?{size:f}:{},orient:$,invalid:d,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:O}),...R({partName:"median",mark:{type:"tick",invalid:d,...be(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...f?{size:f}:{},orient:T,aria:!1},positionPrefix:"mid_box",extraEncoding:O})];if(g==="min-max")return{...s,transform:(s.transform??[]).concat(v),layer:oe};const F=bt(`lower_box_${b.field}`),G=bt(`upper_box_${b.field}`),ae=`(${G} - ${F})`,he=`${F} - ${c} * ${ae}`,me=`${G} + ${c} * ${ae}`,Me=bt(b.field),Xe={joinaggregate:yH(b.field),groupby:_},Rt={transform:[{filter:`(${he} <= ${Me}) && (${Me} <= ${me})`},{aggregate:[{op:"min",field:b.field,as:`lower_whisker_${M}`},{op:"max",field:b.field,as:`upper_whisker_${M}`},{op:"min",field:`lower_box_${b.field}`,as:`lower_box_${M}`},{op:"max",field:`upper_box_${b.field}`,as:`upper_box_${M}`},...w],groupby:_}],layer:Z},{tooltip:pe,...Fe}=j,{scale:je,axis:ce}=b,tn=W$(b),Qe=dH(l,"outliers",t.boxplot,{transform:[{filter:`(${Me} < ${he}) || (${Me} > ${me})`}],mark:"point",encoding:{[S]:{field:b.field,type:b.type,...tn!==void 0?{title:tn}:{},...je!==void 0?{scale:je}:{},...ce!==void 0?{axis:ce}:{}},...Fe,...N?{color:N}:{},...k?{tooltip:k}:{}}})[0];let It;const nn=[...p,...y,Xe];return Qe?It={transform:nn,layer:[Qe,Rt]}:(It=Rt,It.transform.unshift(...nn)),{...s,layer:[It,{transform:v,layer:oe}]}}function yH(e){const t=Pd(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function lbe(e,t,n){const i=gH(e,_v),{continuousAxisChannelDef:r,continuousAxis:a}=hH(e,i,_v),s=r.field,l=Pd(s),c=pH(t),f=[...yH(s),{op:"median",field:s,as:`mid_box_${l}`},{op:"min",field:s,as:(c==="min-max"?"lower_whisker_":"min_")+l},{op:"max",field:s,as:(c==="min-max"?"upper_whisker_":"max_")+l}],d=c==="min-max"||c==="tukey"?[]:[{calculate:`${bt(`upper_box_${l}`)} - ${bt(`lower_box_${l}`)}`,as:`iqr_${l}`},{calculate:`min(${bt(`upper_box_${l}`)} + ${bt(`iqr_${l}`)} * ${t}, ${bt(`max_${l}`)})`,as:`upper_whisker_${l}`},{calculate:`max(${bt(`lower_box_${l}`)} - ${bt(`iqr_${l}`)} * ${t}, ${bt(`min_${l}`)})`,as:`lower_whisker_${l}`}],{[a]:g,...p}=e.encoding,{customTooltipWithoutAggregatedField:y,filteredEncoding:v}=abe(p),{bins:b,timeUnits:S,aggregate:_,groupby:w,encoding:A}=cH(v,n),T=i==="vertical"?"horizontal":"vertical",$=i,k=[...b,...S,{aggregate:[..._,...f],groupby:w},...d];return{bins:b,timeUnits:S,transform:k,groupby:w,aggregate:_,continuousAxisChannelDef:r,continuousAxis:a,encodingWithoutContinuousAxis:A,ticksOrient:T,boxOrient:$,customTooltipWithoutAggregatedField:y}}const Z$="errorbar",ube=["ticks","rule"],cbe=new gx(Z$,vH);function vH(e,{config:t}){e={...e,encoding:px(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,ticksOrient:s,markDef:l,outerSpec:c,tooltipEncoding:f}=bH(e,Z$,t);delete a.size;const d=Q$(l,r,i,a,t.errorbar),g=l.thickness,p=l.size,y={type:"tick",orient:s,aria:!1,...g!==void 0?{thickness:g}:{},...p!==void 0?{size:p}:{}},v=[...d({partName:"ticks",mark:y,positionPrefix:"lower",extraEncoding:f}),...d({partName:"ticks",mark:y,positionPrefix:"upper",extraEncoding:f}),...d({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...g!==void 0?{size:g}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})];return{...c,transform:n,...v.length>1?{layer:v}:{...v[0]}}}function fbe(e,t){const{encoding:n}=e;if(dbe(n))return{orient:gH(e,t),inputType:"raw"};const i=hbe(n),r=gbe(n),a=n.x,s=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const l=n.x2,c=n.y2;if(Ue(l)&&Ue(c))throw new Error(`${t} cannot have both x2 and y2`);if(Ue(l)){if(ol(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Ue(c)){if(ol(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const l=n.xError,c=n.xError2,f=n.yError,d=n.yError2;if(Ue(c)&&!Ue(l))throw new Error(`${t} cannot have xError2 without xError`);if(Ue(d)&&!Ue(f))throw new Error(`${t} cannot have yError2 without yError`);if(Ue(l)&&Ue(f))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Ue(l)){if(ol(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Ue(f)){if(ol(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function dbe(e){return(Ue(e.x)||Ue(e.y))&&!Ue(e.x2)&&!Ue(e.y2)&&!Ue(e.xError)&&!Ue(e.xError2)&&!Ue(e.yError)&&!Ue(e.yError2)}function hbe(e){return Ue(e.x2)||Ue(e.y2)}function gbe(e){return Ue(e.xError)||Ue(e.xError2)||Ue(e.yError)||Ue(e.yError2)}function bH(e,t,n){const{mark:i,encoding:r,params:a,projection:s,...l}=e,c=es(i)?i:{type:i};a&&de(fP(t));const{orient:f,inputType:d}=fbe(e,t),{continuousAxisChannelDef:g,continuousAxisChannelDef2:p,continuousAxisChannelDefError:y,continuousAxisChannelDefError2:v,continuousAxis:b}=hH(e,f,t),{errorBarSpecificAggregate:S,postAggregateCalculates:_,tooltipSummary:w,tooltipTitleWithFieldName:A}=pbe(c,g,p,y,v,d,t,n),{[b]:T,[b==="x"?"x2":"y2"]:$,[b==="x"?"xError":"yError"]:k,[b==="x"?"xError2":"yError2"]:M,...N}=r,{bins:z,timeUnits:j,aggregate:U,groupby:X,encoding:H}=cH(N,n),q=[...U,...S],R=d!=="raw"?[]:X,O=jA(w,g,H,A);return{transform:[...l.transform??[],...z,...j,...q.length===0?[]:[{aggregate:q,groupby:R}],..._],groupby:R,continuousAxisChannelDef:g,continuousAxis:b,encodingWithoutContinuousAxis:H,ticksOrient:f==="vertical"?"horizontal":"vertical",markDef:c,outerSpec:l,tooltipEncoding:O}}function pbe(e,t,n,i,r,a,s,l){let c=[],f=[];const d=t.field;let g,p=!1;if(a==="raw"){const y=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":l.errorbar.center,v=e.extent?e.extent:y==="mean"?"stderr":"iqr";if(y==="median"!=(v==="iqr")&&de(Cye(y,v,s)),v==="stderr"||v==="stdev")c=[{op:v,field:d,as:`extent_${d}`},{op:y,field:d,as:`center_${d}`}],f=[{calculate:`${bt(`center_${d}`)} + ${bt(`extent_${d}`)}`,as:`upper_${d}`},{calculate:`${bt(`center_${d}`)} - ${bt(`extent_${d}`)}`,as:`lower_${d}`}],g=[{fieldPrefix:"center_",titlePrefix:um(y)},{fieldPrefix:"upper_",titlePrefix:Kz(y,v,"+")},{fieldPrefix:"lower_",titlePrefix:Kz(y,v,"-")}],p=!0;else{let b,S,_;v==="ci"?(b="mean",S="ci0",_="ci1"):(b="median",S="q1",_="q3"),c=[{op:S,field:d,as:`lower_${d}`},{op:_,field:d,as:`upper_${d}`},{op:b,field:d,as:`center_${d}`}],g=[{fieldPrefix:"upper_",titlePrefix:qf({field:d,aggregate:_,type:"quantitative"},l,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:qf({field:d,aggregate:S,type:"quantitative"},l,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:qf({field:d,aggregate:b,type:"quantitative"},l,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&de(Aye(e.center,e.extent)),a==="aggregated-upper-lower"?(g=[],f=[{calculate:bt(n.field),as:`upper_${d}`},{calculate:bt(d),as:`lower_${d}`}]):a==="aggregated-error"&&(g=[{fieldPrefix:"",titlePrefix:d}],f=[{calculate:`${bt(d)} + ${bt(i.field)}`,as:`upper_${d}`}],r?f.push({calculate:`${bt(d)} + ${bt(r.field)}`,as:`lower_${d}`}):f.push({calculate:`${bt(d)} - ${bt(i.field)}`,as:`lower_${d}`}));for(const y of f)g.push({fieldPrefix:y.as.substring(0,6),titlePrefix:Ju(Ju(y.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:f,errorBarSpecificAggregate:c,tooltipSummary:g,tooltipTitleWithFieldName:p}}function Kz(e,t,n){return`${um(e)} ${n} ${t}`}const K$="errorband",mbe=["band","borders"],ybe=new gx(K$,xH);function xH(e,{config:t}){e={...e,encoding:px(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,markDef:s,outerSpec:l,tooltipEncoding:c}=bH(e,K$,t),f=s,d=Q$(f,r,i,a,t.errorband),g=e.encoding.x!==void 0&&e.encoding.y!==void 0;let p={type:g?"area":"rect"},y={type:g?"line":"rule"};const v={...f.interpolate?{interpolate:f.interpolate}:{},...f.tension&&f.interpolate?{tension:f.tension}:{}};return g?(p={...p,...v,ariaRoleDescription:"errorband"},y={...y,...v,aria:!1}):f.interpolate?de(Pz("interpolate")):f.tension&&de(Pz("tension")),{...l,transform:n,layer:[...d({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c}),...d({partName:"borders",mark:y,positionPrefix:"lower",extraEncoding:c}),...d({partName:"borders",mark:y,positionPrefix:"upper",extraEncoding:c})]}}const SH={};function J$(e,t,n){const i=new gx(e,t);SH[e]={normalizer:i,parts:n}}function vbe(){return le(SH)}J$(_v,mH,sbe);J$(Z$,vH,ube);J$(K$,xH,mbe);const bbe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],EH={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},_H={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},xbe=le(EH),Sbe=le(_H),Ebe={header:1,headerRow:1,headerColumn:1,headerFacet:1},wH=le(Ebe),AH=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],_be={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},wbe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},ma="_vgsid_",Abe={point:{on:"click",fields:[ma],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function ek(e){return e==="legend"||!!e?.legend}function m_(e){return ek(e)&&be(e)}function tk(e){return!!e?.select}function CH(e){const t=[];for(const n of e||[]){if(tk(n))continue;const{expr:i,bind:r,...a}=n;if(r&&i){const s={...a,bind:r,init:i};t.push(s)}else{const s={...a,...i?{update:i}:{},...r?{bind:r}:{}};t.push(s)}}return t}function Cbe(e){return mx(e)||ik(e)||nk(e)}function nk(e){return ue(e,"concat")}function mx(e){return ue(e,"vconcat")}function ik(e){return ue(e,"hconcat")}function TH({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function ts(e){return ue(e,"step")}function Jz(e){return ue(e,"view")||ue(e,"width")||ue(e,"height")}const eF=20,Tbe={align:1,bounds:1,center:1,columns:1,spacing:1},Mbe=le(Tbe);function $be(e,t,n){const i=n[t],r={},{spacing:a,columns:s}=i;a!==void 0&&(r.spacing=a),s!==void 0&&(cx(e)&&!mm(e.facet)||nk(e))&&(r.columns=s),mx(e)&&(r.columns=1);for(const l of Mbe)if(e[l]!==void 0)if(l==="spacing"){const c=e[l];r[l]=ut(c)?c:{row:c.row??a,column:c.column??a}}else r[l]=e[l];return r}function qA(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function IA(e,t){const n=wv(e,t);return ts(n)?n.step:MH}function wv(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Kt(n,{step:e.step})}const MH=20,kbe={continuousWidth:300,continuousHeight:300,step:MH},Dbe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:kbe,mark:_ve,arc:{},area:{},bar:Tve,circle:{},geoshape:{},image:{},line:{},point:{},rect:U$,rule:{color:"black"},square:{},text:{color:"black"},tick:Mve,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:rve,projection:{},legend:_be,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Abe,style:{},title:{},facet:{spacing:eF},concat:{spacing:eF},normalizedNumberFormat:".0%"},Fs=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],tF={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},nF={blue:Fs[0],orange:Fs[1],red:Fs[2],teal:Fs[3],green:Fs[4],yellow:Fs[5],purple:Fs[6],pink:Fs[7],brown:Fs[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Obe(e={}){return{signals:[{name:"color",value:be(e)?{...nF,...e}:nF}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Nbe(e){return{signals:[{name:"fontSize",value:be(e)?{...tF,...e}:tF}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Rbe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function $H(e){const t=le(e||{}),n={};for(const i of t){const r=e[i];n[i]=xm(r)?rP(r):ir(r)}return n}function zbe(e){const t=le(e),n={};for(const i of t)n[i]=$H(e[i]);return n}const Fbe=[...UP,...sH,...wH,"background","padding","legend","lineBreak","scale","style","title","view"];function kH(e={}){const{color:t,font:n,fontSize:i,selection:r,...a}=e,s=Cd({},Le(Dbe),n?Rbe(n):{},t?Obe(t):{},i?Nbe(i):{},a||{});r&&Td(s,"selection",r,!0);const l=ur(s,Fbe);for(const c of["background","lineBreak","padding"])s[c]&&(l[c]=ir(s[c]));for(const c of UP)s[c]&&(l[c]=Fn(s[c]));for(const c of sH)s[c]&&(l[c]=$H(s[c]));for(const c of wH)s[c]&&(l[c]=Fn(s[c]));if(s.legend&&(l.legend=Fn(s.legend)),s.scale){const{invalid:c,...f}=s.scale,d=Fn(c,{level:1});l.scale={...Fn(f),...le(d).length>0?{invalid:d}:{}}}return s.style&&(l.style=zbe(s.style)),s.title&&(l.title=Fn(s.title)),s.view&&(l.view=Fn(s.view)),l}const Lbe=new Set(["view",...yve]),Ube=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Bbe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...Eve};function jbe(e){e=Le(e);for(const t of Ube)delete e[t];if(e.axis)for(const t in e.axis)xm(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of bbe)delete e.legend[t];if(e.mark){for(const t of Gz)delete e.mark[t];e.mark.tooltip&&be(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(CH(e.params)),delete e.params);for(const t of Lbe){for(const i of Gz)delete e[t][i];const n=Bbe[t];if(n)for(const i of n)delete e[t][i];Ibe(e,t)}for(const t of vbe())delete e[t];qbe(e);for(const t in e)be(e[t])&&Mt(e[t])&&delete e[t];return Mt(e)?void 0:e}function qbe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=iP(e.title);Mt(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Mt(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Mt(i)?delete e.title:e.title=i}function Ibe(e,t,n,i){const r=e[t];t==="view"&&(n="cell");const a={...r,...e.style[n??t]};Mt(a)||(e.style[n??t]=a),delete e[t]}function yx(e){return ue(e,"layer")}function Pbe(e){return ue(e,"repeat")}function Hbe(e){return!ie(e.repeat)&&ue(e.repeat,"layer")}class rk{map(t,n){return cx(t)?this.mapFacet(t,n):Pbe(t)?this.mapRepeat(t,n):ik(t)?this.mapHConcat(t,n):mx(t)?this.mapVConcat(t,n):nk(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(yx(t))return this.mapLayer(t,n);if(mo(t))return this.mapUnit(t,n);throw new Error(v$(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(a=>this.map(a,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Gbe={zero:1,center:1,normalize:1};function Ybe(e){return Ee(Gbe,e)}const Xbe=new Set([zP,sx,ax,yv,lx,F$,L$,ox,FP,z$]),Vbe=new Set([sx,ax,zP]);function Ef(e){return fe(e)&&md(e)==="quantitative"&&!e.bin}function iF(e,t,{orient:n,type:i}){const r=t==="x"?"y":"radius",a=t==="x"&&["bar","area"].includes(i),s=e[t],l=e[r];if(fe(s)&&fe(l))if(Ef(s)&&Ef(l)){if(s.stack)return t;if(l.stack)return r;const c=fe(s)&&!!s.aggregate,f=fe(l)&&!!l.aggregate;if(c!==f)return c?t:r;if(a){if(n==="vertical")return r;if(n==="horizontal")return t}}else{if(Ef(s))return t;if(Ef(l))return r}else{if(Ef(s))return a&&n==="vertical"?void 0:t;if(Ef(l))return a&&n==="horizontal"?void 0:r}}function Wbe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function DH(e,t){const n=es(e)?e:{type:e},i=n.type;if(!Xbe.has(i))return null;const r=iF(t,"x",n)||iF(t,"theta",n);if(!r)return null;const a=t[r],s=fe(a)?ve(a,{}):void 0,l=Wbe(r),c=[],f=new Set;if(t[l]){const b=t[l],S=fe(b)?ve(b,{}):void 0;S&&S!==s&&(c.push(l),f.add(S))}const d=l==="x"?"xOffset":"yOffset",g=t[d],p=fe(g)?ve(g,{}):void 0;p&&p!==s&&(c.push(d),f.add(p));const y=n1e.reduce((b,S)=>{if(S!=="tooltip"&&Lu(t,S)){const _=t[S];for(const w of Se(_)){const A=pa(w);if(A.aggregate)continue;const T=ve(A,{});(!T||!f.has(T))&&b.push({channel:S,fieldDef:A})}}return b},[]);let v;return a.stack!==void 0?$l(a.stack)?v=a.stack?"zero":null:v=a.stack:Vbe.has(i)&&(v="zero"),!v||!Ybe(v)||uH(t)&&y.length===0?null:(a?.scale?.type&&a?.scale?.type!==Ln.LINEAR&&a?.stack&&de(Eye(a.scale.type)),Ue(t[ds(r)])?(a.stack!==void 0&&de(Sye(r)),null):(fe(a)&&a.aggregate&&!p1e.has(a.aggregate)&&de(_ye(a.aggregate)),{groupbyChannels:c,groupbyFields:f,fieldChannel:r,impute:a.impute===null?!1:Pl(i),stackBy:y,offset:v}))}function OH(e,t,n){const i=Fn(e),r=pt("orient",i,n);if(i.orient=Jbe(i.type,t,r),r!==void 0&&r!==i.orient&&de(aye(i.orient,r)),i.type==="bar"&&i.orient){const c=pt("cornerRadiusEnd",i,n);if(c!==void 0){const f=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:Ave[i.orient];for(const d of f)i[d]=c;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}const a=pt("opacity",i,n),s=pt("fillOpacity",i,n);return a===void 0&&s===void 0&&(i.opacity=Zbe(i.type,t)),pt("cursor",i,n)===void 0&&(i.cursor=Qbe(i,t,n)),i}function Qbe(e,t,n){return t.href||e.href||pt("href",e,n)?"pointer":e.cursor}const NH=.7;function Zbe(e,t){if(We([lx,z$,F$,L$],e)&&!uH(t))return NH}function Kbe(e,t,{graticule:n}){if(n)return!1;const i=Ja("filled",e,t),r=e.type;return Kt(i,r!==lx&&r!==ox&&r!==yv)}function Jbe(e,t,n){switch(e){case lx:case F$:case L$:case pve:case gve:return}const{x:i,y:r,x2:a,y2:s}=t;switch(e){case FP:case sx:if(fe(i)&&(zn(i.bin)||fe(r)&&r.aggregate&&!i.aggregate))return"vertical";if(fe(r)&&(zn(r.bin)||fe(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(s||a){if(n)return n;if(!a)return(fe(i)&&i.type===ic&&!$t(i.bin)||bv(i))&&fe(r)&&zn(r.bin)?"horizontal":"vertical";if(!s)return(fe(r)&&r.type===ic&&!$t(r.bin)||bv(r))&&fe(i)&&zn(i.bin)?"vertical":"horizontal"}case yv:if(a&&!(fe(i)&&zn(i.bin))&&s&&!(fe(r)&&zn(r.bin)))return;case ax:if(s)return fe(r)&&zn(r.bin)?"horizontal":"vertical";if(a)return fe(i)&&zn(i.bin)?"vertical":"horizontal";if(e===yv){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case ox:case z$:{const l=Wz(i),c=Wz(r);if(n)return n;if(l&&!c)return e!=="tick"?"horizontal":"vertical";if(!l&&c)return e!=="tick"?"vertical":"horizontal";if(l&&c)return"vertical";{const f=xi(i)&&i.type===gd,d=xi(r)&&r.type===gd;if(f&&!d)return"vertical";if(!f&&d)return"horizontal"}return}}return"vertical"}function exe(e){const{point:t,line:n,...i}=e;return le(i).length>1?i:i.type}function txe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ur(e[t],["point","line"])});return e}function y_(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?be(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?be(t.point)?t.point:{}:void 0}function rF(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class nxe{name="path-overlay";hasMatchingType(t,n){if(mo(t)){const{mark:i,encoding:r}=t,a=es(i)?i:{type:i};switch(a.type){case"line":case"rule":case"trail":return!!y_(a,n[a.type],r);case"area":return!!y_(a,n[a.type],r)||!!rF(a,n[a.type])}}return!1}run(t,n,i){const{config:r}=n,{params:a,projection:s,mark:l,name:c,encoding:f,...d}=t,g=px(f,r),p=es(l)?l:{type:l},y=y_(p,r[p.type],g),v=p.type==="area"&&rF(p,r[p.type]),b=[{name:c,...a?{params:a}:{},mark:exe({...p.type==="area"&&pt("opacity",p,r)==null&&pt("fillOpacity",p,r)==null?{opacity:NH}:{},...p}),encoding:ur(g,["shape"])}],S=DH(OH(p,g,r),g);let _=g;if(S){const{fieldChannel:w,offset:A}=S;_={...g,[w]:{...g[w],...A?{stack:A}:{}}}}return _=ur(_,["y2","x2"]),v&&b.push({...s?{projection:s}:{},mark:{type:"line",...cd(p,["clip","interpolate","tension","tooltip"]),...v},encoding:_}),y&&b.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...cd(p,["clip","tooltip"]),...y},encoding:_}),i({...d,layer:b},{...n,config:txe(r)})}}function ixe(e,t){return t?mm(e)?zH(e,t):RH(e,t):e}function v_(e,t){return t?zH(e,t):e}function PA(e,t,n){const i=t[e];if(Bve(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};de(F1e(i.repeat));return}return t}function RH(e,t){if(e=PA("field",e,t),e!==void 0){if(e===null)return null;if(H$(e)&&Js(e.sort)){const n=PA("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function aF(e,t){if(fe(e))return RH(e,t);{const n=PA("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function sF(e,t){if(Ue(e)){const n=aF(e,t);if(n)return n;if(ym(e))return{condition:e.condition}}else{if(vm(e)){const n=aF(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}}function zH(e,t){const n={};for(const i in e)if(ue(e,i)){const r=e[i];if(ie(r))n[i]=r.map(a=>sF(a,t)).filter(a=>a);else{const a=sF(r,t);a!==void 0&&(n[i]=a)}}return n}class rxe{name="RuleForRangedLine";hasMatchingType(t){if(mo(t)){const{encoding:n,mark:i}=t;if(i==="line"||es(i)&&i.type==="line")for(const r of J0e){const a=bc(r),s=n[a];if(n[r]&&(fe(s)&&!zn(s.bin)||gs(s)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:a}=t;return de(rye(!!r.x2,!!r.y2)),i({...t,mark:be(a)?{...a,type:"rule"}:"rule"},n)}}class axe extends rk{nonFacetUnitNormalizers=[obe,cbe,ybe,new nxe,new rxe];map(t,n){if(mo(t)){const i=Lu(t.encoding,Zs),r=Lu(t.encoding,Ks),a=Lu(t.encoding,Vb);if(i||r||a)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,a=v_(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(c=>c).join("_")}:{},...a?{encoding:a}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(s,n);const l=this.mapLayerOrUnit.bind(this);for(const c of this.nonFacetUnitNormalizers)if(c.hasMatchingType(s,n.config))return c.run(s,n,l);return s}mapRepeat(t,n){return Hbe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r,...a}=t,{row:s,column:l,layer:c}=i,{repeater:f={},repeaterPrefix:d=""}=n;return s||l?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...l?{column:l}:{}},spec:{repeat:{layer:c},spec:r}},n):{...a,layer:c.map(g=>{const p={...f,layer:g},y=`${(r.name?`${r.name}_`:"")+d}child__layer_${Lt(g)}`,v=this.mapLayerOrUnit(r,{...n,repeater:p,repeaterPrefix:y});return v.name=y,v})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:a,...s}=t;!ie(i)&&t.columns&&(t=ur(t,["columns"]),de(Bz("repeat")));const l=[],{repeater:c={},repeaterPrefix:f=""}=n,d=!ie(i)&&i.row||[c?c.row:null],g=!ie(i)&&i.column||[c?c.column:null],p=ie(i)&&i||[c?c.repeat:null];for(const v of p)for(const b of d)for(const S of g){const _={repeat:v,row:b,column:S,layer:c.layer},w=`${(r.name?`${r.name}_`:"")+f}child__${ie(i)?`${Lt(v)}`:(i.row?`row_${Lt(b)}`:"")+(i.column?`column_${Lt(S)}`:"")}`,A=this.map(r,{...n,repeater:_,repeaterPrefix:w});A.name=w,l.push(ur(A,["data"]))}const y=ie(i)?t.columns:i.column?i.column.length:1;return{data:r.data??a,align:"all",...s,columns:y,concat:l}}mapFacet(t,n){const{facet:i}=t;return mm(i)&&t.columns&&(t=ur(t,["columns"]),de(Bz("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:a,parentProjection:s,config:l}=n,c=lF({parentProjection:s,projection:r}),f=oF({parentEncoding:a,encoding:v_(i,n.repeater)});return this.mapUnit({...t,...c?{projection:c}:{},...f?{encoding:f}:{}},{config:l})}mapFacetedUnit(t,n){const{row:i,column:r,facet:a,...s}=t.encoding,{mark:l,width:c,projection:f,height:d,view:g,params:p,encoding:y,...v}=t,{facetMapping:b,layout:S}=this.getFacetMappingAndLayout({row:i,column:r,facet:a},n),_=v_(s,n.repeater);return this.mapFacet({...v,...S,facet:b,spec:{...c?{width:c}:{},...d?{height:d}:{},...g?{view:g}:{},...f?{projection:f}:{},mark:l,encoding:_,...p?{params:p}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:a}=t;if(i||r){a&&de(nye([...i?[Zs]:[],...r?[Ks]:[]]));const s={},l={};for(const c of[Zs,Ks]){const f=t[c];if(f){const{align:d,center:g,spacing:p,columns:y,...v}=f;s[c]=v;for(const b of["align","center","spacing"])f[b]!==void 0&&(l[b]??={},l[b][c]=f[b])}}return{facetMapping:s,layout:l}}else{const{align:s,center:l,spacing:c,columns:f,...d}=a;return{facetMapping:ixe(d,n.repeater),layout:{...s?{align:s}:{},...l?{center:l}:{},...c?{spacing:c}:{},...f?{columns:f}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:a,projection:s,...l}=t,c={...r,parentEncoding:oF({parentEncoding:n,encoding:a,layer:!0}),parentProjection:lF({parentProjection:i,projection:s})};return super.mapLayer({...l,...t.name?{name:[c.repeaterPrefix,t.name].filter(f=>f).join("_")}:{}},c)}}function oF({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...le(e),...le(t)]);for(const a of r){const s=t[a],l=e[a];if(Ue(s)){const c={...l,...s};i[a]=c}else vm(s)?i[a]={...s,condition:{...l,...s.condition}}:s||s===null?i[a]=s:(n||ga(l)||Ce(l)||Ue(l)||ie(l))&&(i[a]=l)}}else i=t;return!i||Mt(i)?void 0:i}function lF(e){const{parentProjection:t,projection:n}=e;return t&&n&&de(G1e({parentProjection:t,projection:n})),n??t}function ak(e){return ue(e,"filter")}function sxe(e){return ue(e,"stop")}function FH(e){return ue(e,"lookup")}function oxe(e){return ue(e,"data")}function lxe(e){return ue(e,"param")}function uxe(e){return ue(e,"pivot")}function cxe(e){return ue(e,"density")}function fxe(e){return ue(e,"quantile")}function dxe(e){return ue(e,"regression")}function hxe(e){return ue(e,"loess")}function gxe(e){return ue(e,"sample")}function pxe(e){return ue(e,"window")}function mxe(e){return ue(e,"joinaggregate")}function yxe(e){return ue(e,"flatten")}function vxe(e){return ue(e,"calculate")}function LH(e){return ue(e,"bin")}function bxe(e){return ue(e,"impute")}function xxe(e){return ue(e,"timeUnit")}function Sxe(e){return ue(e,"aggregate")}function Exe(e){return ue(e,"stack")}function _xe(e){return ue(e,"fold")}function wxe(e){return ue(e,"extent")&&!ue(e,"density")&&!ue(e,"regression")}function Axe(e){return e.map(t=>ak(t)?{filter:Bf(t.filter,Zye)}:t)}class Cxe extends rk{map(t,n){return n.emptySelections??={},n.selectionPredicates??={},t=uF(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=uF(t,n),t.encoding){const i={};for(const[r,a]of wl(t.encoding))i[r]=UH(a,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:wl(i).map(([a,s])=>{const{init:l,bind:c,empty:f,...d}=s;d.type==="single"?(d.type="point",d.toggle=!1):d.type==="multi"&&(d.type="point"),n.emptySelections[a]=f!=="none";for(const g of ln(n.selectionPredicates[a]??{}))g.empty=f!=="none";return{name:a,value:l,select:d,bind:c}})}:t}}function uF(e,t){const{transform:n,...i}=e;if(n){const r=n.map(a=>{if(ak(a))return{filter:HA(a,t)};if(LH(a)&&xc(a.bin))return{...a,bin:BH(a.bin)};if(FH(a)){const{selection:s,...l}=a.from;return s?{...a,from:{param:s,...l}}:a}return a});return{...i,transform:r}}return e}function UH(e,t){const n=Le(e);if(fe(n)&&xc(n.bin)&&(n.bin=BH(n.bin)),wc(n)&&n.scale?.domain?.selection){const{selection:i,...r}=n.scale.domain;n.scale.domain={...r,...i?{param:i}:{}}}if(ym(n))if(ie(n.condition))n.condition=n.condition.map(i=>{const{selection:r,param:a,test:s,...l}=i;return a?i:{...l,test:HA(i,t)}});else{const{selection:i,param:r,test:a,...s}=UH(n.condition,t);n.condition=r?n.condition:{...s,test:HA(n.condition,t)}}return n}function BH(e){const t=e.extent;if(t?.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function HA(e,t){const n=i=>Bf(i,r=>{const a=t.emptySelections[r]??!0,s={param:r,empty:a};return t.selectionPredicates[r]??=[],t.selectionPredicates[r].push(s),s});return e.selection?n(e.selection):Bf(e.test||e.filter,i=>i.selection?n(i.selection):i)}class GA extends rk{map(t,n){const i=n.selections??[];if(t.params&&!mo(t)){const r=[];for(const a of t.params)tk(a)?i.push(a):r.push(a);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),a=[];for(const s of i)if(!s.views||!s.views.length)a.push(s);else for(const l of s.views)(xe(l)&&(l===t.name||r.includes(l))||ie(l)&&l.map(c=>r.indexOf(c)).every((c,f,d)=>c!==-1&&(f===0||c>d[f-1])))&&a.push(s);return a.length&&(t.params=a),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=GA.prototype[e];GA.prototype[e]=function(n,i){return t.call(this,n,Txe(n,i))}}function Txe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function jH(e,t){t===void 0&&(t=kH(e.config));const n=Dxe(e,t),{width:i,height:r}=e,a=Oxe(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...a?{autosize:a}:{}}}const Mxe=new axe,$xe=new Cxe,kxe=new GA;function Dxe(e,t={}){const n={config:t};return kxe.map(Mxe.map($xe.map(e,n),n),n)}function cF(e){return xe(e)?{type:e}:e??{}}function Oxe(e,t,n){let{width:i,height:r}=t;const a=mo(e)||yx(e),s={};a?i=="container"&&r=="container"?(s.type="fit",s.contains="padding"):i=="container"?(s.type="fit-x",s.contains="padding"):r=="container"&&(s.type="fit-y",s.contains="padding"):(i=="container"&&(de(zz("width")),i=void 0),r=="container"&&(de(zz("height")),r=void 0));const l={type:"pad",...s,...n?cF(n.autosize):{},...cF(e.autosize)};if(l.type==="fit"&&!a&&(de(A1e),l.type="pad"),i=="container"&&!(l.type=="fit"||l.type=="fit-x")&&de(Fz("width")),r=="container"&&!(l.type=="fit"||l.type=="fit-y")&&de(Fz("height")),!ar(l,{type:"pad"}))return l}function Nxe(e){return["fit","fit-x","fit-y"].includes(e)}function Rxe(e){return e?`fit-${Jb(e)}`:"fit"}const zxe=["background","padding"];function fF(e,t){const n={};for(const i of zxe)e&&e[i]!==void 0&&(n[i]=ir(e[i]));return t&&(n.params=e.params),n}class yo{explicit;implicit;constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new yo(Le(this.explicit),Le(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Kt(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of le(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Ra(e){return{explicit:!0,value:e}}function er(e){return{explicit:!1,value:e}}function qH(e){return(t,n,i,r)=>{const a=e(t.value,n.value);return a>0?t:a<0?n:vx(t,n,i,r)}}function vx(e,t,n,i){return e.explicit&&t.explicit&&de(gye(n,i,e.value,t.value)),e}function Tl(e,t,n,i,r=vx){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:ar(e.value,t.value)?e:r(e,t,n,i)}class Fxe extends yo{explicit;implicit;parseNothing;constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function bd(e){return ue(e,"url")}function Tp(e){return ue(e,"values")}function IH(e){return ue(e,"name")&&!bd(e)&&!Tp(e)&&!hl(e)}function hl(e){return e&&(PH(e)||HH(e)||sk(e))}function PH(e){return ue(e,"sequence")}function HH(e){return ue(e,"sphere")}function sk(e){return ue(e,"graticule")}var qt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(qt||(qt={}));function GH({invalid:e,isPath:t}){switch(BP(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function Lxe(e){const{marks:t,scales:n}=GH(e);return t===n?qt.Main:n==="include-invalid-values"?qt.PreFilterInvalid:qt.PostFilterInvalid}class St{debugName;_children=[];_parent=null;_hash;constructor(t,n){this.debugName=n,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){de(I1e);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class zi extends St{type;refCounts;_source;_name;clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${qI()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function b_(e){return e.as!==void 0}function dF(e){return`${e}_end`}class Ha extends St{timeUnits;clone(){return new Ha(null,Le(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{const{field:l,timeUnit:c}=a;if(c){let f;if(_c(c)){if(jt(n)){const{mark:d,markDef:g,config:p}=n,y=Cl({fieldDef:a,markDef:g,config:p});(Cp(d)||y)&&(f={timeUnit:Cn(c),field:l})}}else f={as:ve(a,{forAs:!0}),field:l,timeUnit:c};if(jt(n)){const{mark:d,markDef:g,config:p}=n,y=Cl({fieldDef:a,markDef:g,config:p});Cp(d)&&Jt(s)&&y!==.5&&(f.rectBandPosition=y)}f&&(r[tt(f)]=f)}return r},{});return Mt(i)?null:new Ha(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},a=Cn(i),s={...r,timeUnit:a};return new Ha(t,{[tt(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of wl(this.timeUnits)){const a=b_(r)?r.as:`${r.field}_end`;t.has(a)||(n[i]=r)}this.timeUnits=n}producedFields(){return new Set(ln(this.timeUnits).map(t=>b_(t)?t.as:dF(t.field)))}dependentFields(){return new Set(ln(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${tt(this.timeUnits)}`}assemble(){const t=[];for(const n of ln(this.timeUnits)){const{rectBandPosition:i}=n,r=Cn(n.timeUnit);if(b_(n)){const{field:a,as:s}=n,{unit:l,utc:c,...f}=r,d=[s,`${s}_end`];t.push({field:jr(a),type:"timeunit",...l?{units:ix(l)}:{},...c?{timezone:"utc"}:{},...f,as:d}),t.push(...hF(d,i,r))}else if(n){const{field:a}=n,s=BI(a),l=YH({timeUnit:r,field:s}),c=dF(s);t.push({type:"formula",expr:l,as:c}),t.push(...hF([s,c],i,r))}}return t}}const bx="offsetted_rect_start",xx="offsetted_rect_end";function YH({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,a=EP(i),{part:s,step:l}=CP(a,e.step);return`${r?"utcOffset":"timeOffset"}('${s}', ${bt(t)}, ${n?-l:l})`}function hF([e,t],n,i){if(n!==void 0&&n!==.5){const r=bt(e),a=bt(t);return[{type:"formula",expr:gF([YH({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${bx}`},{type:"formula",expr:gF([r,a],n+.5),as:`${e}_${xx}`}]}return[]}function gF([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const Sm="_tuple_fields";class Uxe{hasChannel;hasField;hasSelectionId;timeUnit;items;constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Bxe={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??=new Uxe,a={},s={},l=new Set,c=(v,b)=>{const S=b==="visual"?v.channel:v.field;let _=Lt(`${i}_${S}`);for(let w=1;l.has(_);w++)_=Lt(`${i}_${S}_${w}`);return l.add(_),{[b]:_}},f=t.type,d=e.config.selection[f],g=n.value!==void 0?Se(n.value):null;let{fields:p,encodings:y}=be(n.select)?n.select:{};if(!p&&!y&&g){for(const v of g)if(be(v))for(const b of le(v))K0e(b)?(y||(y=[])).push(b):f==="interval"?(de(z1e),y=d.encodings):(p??=[]).push(b)}!p&&!y&&(y=d.encodings,"fields"in d&&(p=d.fields));for(const v of y??[]){const b=e.fieldDef(v);if(b){let S=b.field;if(b.aggregate){de(C1e(v,b.aggregate));continue}else if(!S){de(Uz(v));continue}if(b.timeUnit&&!_c(b.timeUnit)){S=e.vgField(v);const _={timeUnit:b.timeUnit,as:S,field:b.field};s[tt(_)]=_}if(!a[S]){const _=f==="interval"&&hs(v)&&ha(e.getScaleComponent(v).get("type"))?"R":b.bin?"R-RE":"E",w={field:S,channel:v,type:_,index:r.items.length};w.signals={...c(w,"data"),...c(w,"visual")},r.items.push(a[S]=w),r.hasField[S]=a[S],r.hasSelectionId=r.hasSelectionId||S===ma,XI(v)?(w.geoChannel=v,w.channel=YI(v),r.hasChannel[w.channel]=a[S]):r.hasChannel[v]=a[S]}}else de(Uz(v))}for(const v of p??[]){if(r.hasField[v])continue;const b={type:"E",field:v,index:r.items.length};b.signals={...c(b,"data")},r.items.push(b),r.hasField[v]=b,r.hasSelectionId=r.hasSelectionId||v===ma}g&&(t.init=g.map(v=>r.items.map(b=>be(v)?v[b.geoChannel||b.channel]!==void 0?v[b.geoChannel||b.channel]:v[b.field]:v))),Mt(s)||(r.timeUnit=new Ha(null,s))},signals:(e,t,n)=>{const i=t.name+Sm;return n.filter(a=>a.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(QH)})}},XH="_curr",K1="anim_value",Cf="anim_clock",YA="eased_anim_clock",VH="min_extent",WH="max_range_extent",x_="last_tick_at",S_="is_playing",jxe=1/60*1e3,qxe=(e,t)=>[{name:YA,update:Cf},{name:`${e}_domain`,init:`domain('${t}')`},{name:VH,init:`extent(${e}_domain)[0]`},{name:WH,init:`extent(range('${t}'))[1]`},{name:K1,update:`invert('${t}', ${YA})`}],Ixe={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Ga(t)&&(n=n.concat([{name:Cf,init:"0",on:[{events:{type:"timer",throttle:jxe},update:`${S_} ? (${Cf} + (now() - ${x_}) > ${WH} ? 0 : ${Cf} + (now() - ${x_})) : ${Cf}`}]},{name:x_,init:"now()",on:[{events:[{signal:Cf},{signal:S_}],update:"now()"}]},{name:S_,init:"true"}])),n),signals:(e,t,n)=>{const i=t.name,r=i+Sm,a=t.project,s="(item().isVoronoi ? datum.datum : datum)",l=ln(e.component.selection??{}).reduce((d,g)=>g.type==="interval"?d.concat(g.name+If):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),c=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${l?` && ${l}`:""}`;let f=`unit: ${Uu(e)}, `;if(t.project.hasSelectionId)f+=`${ma}: ${s}[${ge(ma)}]`;else if(Ga(t))f+=`fields: ${r}, values: [${K1} ? ${K1} : ${VH}]`;else{const d=a.items.map(g=>e.fieldDef(g.channel)?.bin?`[${s}[${ge(e.vgField(g.channel,{}))}], ${s}[${ge(e.vgField(g.channel,{binSuffix:"end"}))}]]`:`${s}[${ge(g.field)}]`).join(", ");f+=`fields: ${r}, values: [${d}]`}if(Ga(t))return n.concat(qxe(t.name,e.scaleName(Ll)),[{name:i+oo,on:[{events:[{signal:YA},{signal:K1}],update:`{${f}}`,force:!0}]}]);{const d=t.events;return n.concat([{name:i+oo,on:d?[{events:d,update:`${c} ? {${f}} : null`,force:!0}]:[]}])}}};function QH(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=jr(r.field),r}function sc(e,t=!0,n=ii){if(ie(e)){const i=e.map(r=>sc(r,t,n));return t?`[${i.join(", ")}]`:i}else if(Ec(e))return n(t?nc(e):Bye(e));return t?n(mt(e)):e}function Pxe(e,t){for(const n of ln(e.component.selection??{})){const i=n.name;let r=`${i}${oo}, ${n.resolve==="global"?"true":`{unit: ${Uu(e)}}`}`;for(const a of Sx)a.defined(n)&&(a.signals&&(t=a.signals(e,n,t)),a.modifyExpr&&(r=a.modifyExpr(e,n,r)));t.push({name:i+m2e,on:[{events:{signal:n.name+oo},update:`modify(${ge(n.name+oc)}, ${r})`}]})}return ok(t)}function Hxe(e,t){if(e.component.selection&&le(e.component.selection).length){const n=ge(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:zl("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return ok(t)}function Gxe(e,t){let n=!1;for(const i of ln(e.component.selection??{})){const r=i.name,a=ge(r+oc);if(t.filter(l=>l.name===r).length===0){const l=i.resolve==="global"?"union":i.resolve,c=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${gG}(${a}, ${ge(l)}${c}`})}n=!0;for(const l of Sx)l.defined(i)&&l.topLevelSignals&&(t=l.topLevelSignals(e,i,t))}return n&&t.filter(r=>r.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),ok(t)}function Yxe(e,t){const n=[],i=[],r=Uu(e,{escape:!1});for(const a of ln(e.component.selection??{})){const s={name:a.name+oc};if(a.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:ma}}]),a.init){const c=a.project.items.map(QH);s.values=a.project.hasSelectionId?a.init.map(f=>({unit:r,[ma]:sc(f,!1)[0]})):a.init.map(f=>({unit:r,fields:c,values:sc(f,!1)}))}if([...n,...t].filter(c=>c.name===a.name+oc).length||n.push(s),Ga(a)&&t.length){const c=e.lookupDataSource(e.getDataName(qt.Main)),f=t.find(g=>g.name===c),d=f.transform.find(g=>g.type==="filter"&&g.expr.includes("vlSelectionTest"));if(d){f.transform=f.transform.filter(p=>p!==d);const g={name:f.name+XH,source:f.name,transform:[d]};i.push(g)}}}return n.concat(t,i)}function ZH(e,t){for(const n of ln(e.component.selection??{}))for(const i of Sx)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function Xxe(e,t){for(const n of e.children)jt(n)&&(t=ZH(n,t));return t}function Vxe(e,t,n,i){const r=bG(e,t.param,t);return{signal:ha(n.get("type"))&&ie(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function ok(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const eo={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!hs(r))continue;const a=e.getScaleComponent(r),s=a?a.get("type"):void 0;if(s=="sequential"&&de(k1e),!a||!ha(s)){de($1e);continue}a.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(s=>n.filter(l=>l.name===s.signals.data).length===0);if(!e.parent||VA(e)||i.length===0)return n;const r=n.find(s=>s.name===t.name);let a=r.update;if(a.includes(gG))r.update=`{${i.map(s=>`${ge(jr(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of i){const l=`${ge(jr(s.field))}: ${s.signals.data}`;a.includes(l)||(a=`${a.substring(0,a.length-1)}, ${l}}`)}r.update=a}return n.concat(i.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!VA(e))for(const i of t.scales){const r=n.find(a=>a.name===i.signals.data);r.push="outer",delete r.value,delete r.update}return n}};function XA(e,t){return`domain(${ge(e.scaleName(t))})`}function VA(e){return e.parent&&Qd(e.parent)&&(!e.parent.parent||VA(e.parent.parent))}const If="_brush",KH="_scale_trigger",hg="geo_interval_init_tick",JH="_init",Wxe="_center",Qxe={defined:e=>e.type==="interval",parse:(e,t,n)=>{if(e.hasProjection){const i={...be(n.select)?n.select:{}};i.fields=[ma],i.encodings||(i.encodings=n.value?le(n.value):[_a,Ea]),n.select={type:"interval",...i}}if(t.translate&&!eo.defined(t)){const i=`!event.item || event.item.mark.name !== ${ge(t.name+If)}`;for(const r of t.events){if(!r.between){de(`${r} is not an ordered event stream for interval selections.`);continue}const a=Se(r.between[0].filter??=[]);a.includes(i)||a.push(i)}}},signals:(e,t,n)=>{const i=t.name,r=i+oo,a=ln(t.project.hasChannel).filter(l=>l.channel===Ut||l.channel===$n),s=t.init?t.init[0]:null;if(n.push(...a.reduce((l,c)=>l.concat(Zxe(e,t,c,s?.[c.index])),[])),e.hasProjection){const l=ge(e.projectionName()),c=e.projectionName()+Wxe,{x:f,y:d}=t.project.hasChannel,g=f?.signals.visual,p=d?.signals.visual,y=f?s?.[f.index]:`${c}[0]`,v=d?s?.[d.index]:`${c}[1]`,b=$=>e.getSizeSignalRef($).signal,S=`[[${g?`${g}[0]`:"0"}, ${p?`${p}[0]`:"0"}],[${g?`${g}[1]`:b("width")}, ${p?`${p}[1]`:b("height")}]]`;s&&(n.unshift({name:i+JH,init:`[scale(${l}, [${f?y[0]:y}, ${d?v[0]:v}]), scale(${l}, [${f?y[1]:y}, ${d?v[1]:v}])]`}),(!f||!d)&&(n.find(k=>k.name===c)||n.unshift({name:c,update:`invert(${l}, [${b("width")}/2, ${b("height")}/2])`})));const _=`intersect(${S}, {markname: ${ge(e.getName("marks"))}}, unit.mark)`,w=`{unit: ${Uu(e)}}`,A=`vlSelectionTuples(${_}, ${w})`,T=a.map($=>$.signals.visual);return n.concat({name:r,on:[{events:[...T.length?[{signal:T.join(" || ")}]:[],...s?[{signal:hg}]:[]],update:A}]})}else{if(!eo.defined(t)){const f=i+KH,d=a.map(g=>{const p=g.channel,{data:y,visual:v}=g.signals,b=ge(e.scaleName(p)),S=e.getScaleComponent(p).get("type"),_=ha(S)?"+":"";return`(!isArray(${y}) || (${_}invert(${b}, ${v})[0] === ${_}${y}[0] && ${_}invert(${b}, ${v})[1] === ${_}${y}[1]))`});d.length&&n.push({name:f,value:{},on:[{events:a.map(g=>({scale:e.scaleName(g.channel)})),update:`${d.join(" && ")} ? ${f} : {}`}]})}const l=a.map(f=>f.signals.data),c=`unit: ${Uu(e)}, fields: ${i+Sm}, values`;return n.concat({name:r,...s?{init:`{${c}: ${sc(s)}}`}:{},...l.length?{on:[{events:[{signal:l.join(" || ")}],update:`${l.join(" && ")} ? {${c}: [${l}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(jt(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===hg).length||n.unshift({name:hg,value:null,on:[{events:"timer{1}",update:`${hg} === null ? {} : ${hg}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:a}=t.project.hasChannel,s=r?.signals.visual,l=a?.signals.visual,c=`data(${ge(t.name+oc)})`;if(eo.defined(t)||!r&&!a)return n;const f={x:r!==void 0?{signal:`${s}[0]`}:{value:0},y:a!==void 0?{signal:`${l}[0]`}:{value:0},x2:r!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:a!==void 0?{signal:`${l}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const S of le(f))f[S]=[{test:`${c}.length && ${c}[0].unit === ${Uu(e)}`,...f[S]},{value:0}];const{fill:d,fillOpacity:g,cursor:p,...y}=t.mark,v=le(y).reduce((S,_)=>(S[_]=[{test:[r!==void 0&&`${s}[0] !== ${s}[1]`,a!==void 0&&`${l}[0] !== ${l}[1]`].filter(w=>w).join(" && "),value:y[_]},{value:null}],S),{}),b=p??(t.translate?"move":null);return[{name:`${i+If}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:g}},update:f}},...n,{name:i+If,type:"rect",clip:!0,encode:{enter:{...b?{cursor:{value:b}}:{},fill:{value:"transparent"}},update:{...f,...v}}}]}};function Zxe(e,t,n,i){const r=!e.hasProjection,a=n.channel,s=n.signals.visual,l=ge(r?e.scaleName(a):e.projectionName()),c=p=>`scale(${l}, ${p})`,f=e.getSizeSignalRef(a===Ut?"width":"height").signal,d=`${a}(unit)`,g=t.events.reduce((p,y)=>[...p,{events:y.between[0],update:`[${d}, ${d}]`},{events:y,update:`[${s}[0], clamp(${d}, 0, ${f})]`}],[]);if(r){const p=n.signals.data,y=eo.defined(t),v=e.getScaleComponent(a),b=v?v.get("type"):void 0,S=i?{init:sc(i,!0,c)}:{value:[]};return g.push({events:{signal:t.name+KH},update:ha(b)?`[${c(`${p}[0]`)}, ${c(`${p}[1]`)}]`:"[0, 0]"}),y?[{name:p,on:[]}]:[{name:s,...S,on:g},{name:p,...i?{init:sc(i)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${l}, ${s})`}]}]}else{const p=a===Ut?0:1,y=t.name+JH,v=i?{init:`[${y}[0][${p}], ${y}[1][${p}]]`}:{value:[]};return[{name:s,...v,on:g}]}}function Yd({model:e,channelDef:t,vgChannel:n,invalidValueRef:i,mainRefFn:r}){const a=ym(t)&&t.condition;let s=[];a&&(s=Se(a).map(f=>{const d=r(f);if(Uve(f)){const{param:g,empty:p}=f;return{test:vG(e,{param:g,empty:p}),...d}}else return{test:Tv(e,f.test),...d}})),i!==void 0&&s.push(i);const l=r(t);return l!==void 0&&s.push(l),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function lk(e,t="text"){const n=e.encoding[t];return Yd({model:e,channelDef:n,vgChannel:t,mainRefFn:i=>uk(i,e.config),invalidValueRef:void 0})}function uk(e,t,n="datum"){if(e){if(ga(e))return Nt(e.value);if(Ue(e)){const{format:i,formatType:r}=Sv(e);return I$({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function eG(e,t={}){const{encoding:n,markDef:i,config:r,stack:a}=e,s=n.tooltip;if(ie(s))return{tooltip:pF({tooltip:s},a,r,t)};{const l=t.reactiveGeom?"datum.datum":"datum";return Yd({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:f=>{const d=nG(f,r,l);if(d)return d;if(f===null)return;let g=pt("tooltip",i,r);if(g===!0&&(g={content:"encoding"}),xe(g))return{value:g};if(be(g))return Ce(g)?g:g.content==="encoding"?pF(n,a,r,t):{signal:l}},invalidValueRef:void 0})}}function tG(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},a=new Set,s=i?"datum.datum":"datum",l=[];function c(d,g){const p=bc(g),y=xi(d)?d:{...d,type:e[p].type},v=y.title||Y$(y,r),b=Se(v).join(", ").replaceAll(/"/g,'\\"');let S;if(Jt(g)){const _=g==="x"?"x2":"y2",w=pa(e[_]);if(zn(y.bin)&&w){const A=ve(y,{expr:s}),T=ve(w,{expr:s}),{format:$,formatType:k}=Sv(y);S=pm(A,T,$,k,r),a.add(_)}}if((Jt(g)||g===Pr||g===Sa)&&t&&t.fieldChannel===g&&t.offset==="normalize"){const{format:_,formatType:w}=Sv(y);S=I$({fieldOrDatumDef:y,format:_,formatType:w,expr:s,config:r,normalizeStack:!0}).signal}S??=nG(y,r,s).signal,l.push({channel:g,key:b,value:S})}V$(e,(d,g)=>{fe(d)?c(d,g):fx(d)&&c(d.condition,g)});const f={};for(const{channel:d,key:g,value:p}of l)!a.has(d)&&!f[g]&&(f[g]=p);return f}function pF(e,t,n,{reactiveGeom:i}={}){const r=tG(e,t,n,{reactiveGeom:i}),a=wl(r).map(([s,l])=>`"${s}": ${l}`);return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function nG(e,t,n="datum"){if(fe(e)&&O$(e.type)&&!ue(e,"format")){const i=`datum["${e.field}"]`;return{signal:`isValid(${i}) ? isArray(${i}) ? join(${i}, '\\n') : ${i} : ""+${i}`}}return uk(e,t,n)}function Kxe(e){const{markDef:t,config:n}=e,i=pt("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...Jxe(e),...e2e(e)}}function Jxe(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=pt("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:Ee(S1e,t)?{}:{ariaRoleDescription:{value:t}}}function e2e(e){const{encoding:t,markDef:n,config:i,stack:r}=e,a=t.description;if(a)return Yd({model:e,channelDef:a,vgChannel:"description",mainRefFn:c=>uk(c,e.config),invalidValueRef:void 0});const s=pt("description",n,i);if(s!=null)return{description:Nt(s)};if(i.aria===!1)return{};const l=tG(t,r,i);if(!Mt(l))return{description:{signal:wl(l).filter(([c])=>!c.startsWith("_")).map(([c,f])=>[c,f.replaceAll("\\n"," ")]).map(([c,f],d)=>`"${d>0?"; ":""}${c}: " + (${f})`).join(" + ")}}}function Un(e,t,n={}){const{markDef:i,encoding:r,config:a}=t,{vgChannel:s}=n;let{defaultRef:l,defaultValue:c}=n;const f=r[e];l===void 0&&(c??=pt(e,i,a,{vgChannel:s,ignoreVgConfig:!ym(f)}),c!==void 0&&(l=Nt(c)));const d={markDef:i,config:a,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},g=qP({...d,scaleChannel:e,channelDef:f});return Yd({model:t,channelDef:f,vgChannel:s??e,invalidValueRef:g,mainRefFn:y=>q$({...d,channel:e,channelDef:y,stack:null,defaultRef:l})})}function iG(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:a}=n,s=t.filled??pt("filled",n,r),l=We(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,c=pt(s===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[s===!0&&"color"]??l,f=pt(s===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[s===!1&&"color"],d=s?"fill":"stroke",g={...c?{fill:Nt(c)}:{},...f?{stroke:Nt(f)}:{}};return n.color&&(s?n.fill:n.stroke)&&de(hP("property",{fill:"fill"in n,stroke:"stroke"in n})),{...g,...Un("color",e,{vgChannel:d,defaultValue:s?c:f}),...Un("fill",e,{defaultValue:i.fill?c:void 0}),...Un("stroke",e,{defaultValue:i.stroke?f:void 0})}}function t2e(e){const{encoding:t,mark:n}=e,i=t.order;return!Pl(n)&&ga(i)?Yd({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:r=>Nt(r.value),invalidValueRef:void 0}):{}}function xd({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const a=`${e}Offset`,s=t[a],l=n[a];if((a==="xOffset"||a==="yOffset")&&l)return{offsetType:"encoding",offset:q$({channel:a,channelDef:l,markDef:t,config:i?.config,scaleName:i.scaleName(a),scale:i.getScaleComponent(a),stack:null,defaultRef:Nt(s),bandPosition:r})};const c=t[a];return c?{offsetType:"visual",offset:c}:{}}function pi(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:a,config:s,stack:l}=t,c=r[e],f=r[ds(e)],d=t.scaleName(e),g=t.getScaleComponent(e),{offset:p,offsetType:y}=xd({channel:e,markDef:a,encoding:r,model:t,bandPosition:.5}),v=ck({model:t,defaultPos:n,channel:e,scaleName:d,scale:g}),b=!c&&Jt(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:n2e({channel:e,channelDef:c,channel2Def:f,markDef:a,config:s,scaleName:d,scale:g,stack:l,offset:p,defaultRef:v,bandPosition:y==="encoding"?0:void 0});return b?{[i||e]:b}:void 0}function n2e(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:a,markDef:s}=e;if(Ue(n)&&r&&t===r.fieldChannel){if(fe(n)){let l=n.bandPosition;if(l===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(l=.5),l!==void 0)return vv({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:l,offset:a})}return Fu(n,i,{suffix:"end"},{offset:a})}return j$(e)}function ck({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:a,config:s}=e;return()=>{const l=bc(n),c=Al(n),f=pt(n,a,s,{vgChannel:c});if(f!==void 0)return Jg(n,f);switch(t){case"zeroOrMin":return mF({scaleName:i,scale:r,mode:"zeroOrMin",mainChannel:l,config:s});case"zeroOrMax":return mF({scaleName:i,scale:r,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:l,config:s});case"mid":return{...e[qi(n)],mult:.5}}}}function mF({mainChannel:e,config:t,...n}){const i=jP(n),{mode:r}=n;if(i)return i;switch(e){case"radius":{if(r==="zeroOrMin")return{value:0};const{widthSignal:a,heightSignal:s}=r.zeroOrMax;return{signal:`min(${a},${s})/2`}}case"theta":return r==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return r==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return r==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const i2e={left:"x",center:"xc",right:"x2"},r2e={top:"y",middle:"yc",bottom:"y2"};function rG(e,t,n,i="middle"){if(e==="radius"||e==="theta")return Al(e);const r=e==="x"?"align":"baseline",a=pt(r,t,n);let s;return Ce(a)?(de(iye(r)),s=void 0):s=a,e==="x"?i2e[s||(i==="top"?"left":"center")]:r2e[s||i]}function Av(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?aG(e,t,{defaultPos:n,defaultPos2:i}):pi(e,t,{defaultPos:n})}function aG(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:a}=t,s=ds(e),l=qi(e),c=a2e(t,i,s),f=c[l]?rG(e,r,a):Al(e);return{...pi(e,t,{defaultPos:n,vgChannel:f}),...c}}function a2e(e,t,n){const{encoding:i,mark:r,markDef:a,stack:s,config:l}=e,c=bc(n),f=qi(n),d=Al(n),g=i[c],p=e.scaleName(c),y=e.getScaleComponent(c),{offset:v}=n in i||n in a?xd({channel:n,markDef:a,encoding:i,model:e}):xd({channel:c,markDef:a,encoding:i,model:e});if(!g&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const S=qi(n),_=e.markDef[S];return _!=null?{[S]:{value:_}}:{[d]:{field:e.getName(n)}}}const b=s2e({channel:n,channelDef:g,channel2Def:i[n],markDef:a,config:l,scaleName:p,scale:y,stack:s,offset:v,defaultRef:void 0});return b!==void 0?{[d]:b}:y1(n,a)||y1(n,{[n]:zA(n,a,l.style),[f]:zA(f,a,l.style)})||y1(n,l[r])||y1(n,l.mark)||{[d]:ck({model:e,defaultPos:t,channel:n,scaleName:p,scale:y})()}}function s2e({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:l,offset:c,defaultRef:f}){return Ue(t)&&l&&e.charAt(0)===l.fieldChannel.charAt(0)?Fu(t,a,{suffix:"start"},{offset:c}):j$({channel:e,channelDef:n,scaleName:a,scale:s,stack:l,markDef:i,config:r,offset:c,defaultRef:f})}function y1(e,t){const n=qi(e),i=Al(e);if(t[i]!==void 0)return{[i]:Jg(e,t[i])};if(t[e]!==void 0)return{[i]:Jg(e,t[e])};if(t[n]){const r=t[n];if(rc(r))de(Z1e(n));else return{[n]:Jg(e,r)}}}function so(e,t){const{config:n,encoding:i,markDef:r}=e,a=r.type,s=ds(t),l=qi(t),c=i[t],f=i[s],d=e.getScaleComponent(t),g=d?d.get("type"):void 0,p=r.orient,y=i[l]??i.size??pt("size",r,n,{vgChannel:l}),v=ZI(t),b=a==="bar"&&(t==="x"?p==="vertical":p==="horizontal")||a==="tick"&&(t==="y"?p==="vertical":p==="horizontal");return fe(c)&&($t(c.bin)||zn(c.bin)||c.timeUnit&&!f)&&!(y&&!rc(y))&&!i[v]&&!Tn(g)?u2e({fieldDef:c,fieldDef2:f,channel:t,model:e}):(Ue(c)&&Tn(g)||b)&&!f?l2e(c,t,e):aG(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function o2e(e,t,n,i,r,a,s){if(rc(r))if(n){const c=n.get("type");if(c==="band"){let f=`bandwidth('${t}')`;r.band!==1&&(f=`${r.band} * ${f}`);const d=Ja("minBandSize",{type:s},i);return{signal:d?`max(${sa(d)}, ${f})`:f}}else r.band!==1&&(de(oye(c)),r=void 0)}else return{mult:r.band,field:{group:e}};else{if(Ce(r))return r;if(r)return{value:r}}if(n){const c=n.get("range");if(Sc(c)&&ut(c.step))return{value:c.step-2}}if(!a){const{bandPaddingInner:c,barBandPaddingInner:f,rectBandPaddingInner:d,tickBandPaddingInner:g}=i.scale,p=Kt(c,s==="tick"?g:s==="bar"?f:d);if(Ce(p))return{signal:`(1 - (${p.signal})) * ${e}`};if(ut(p))return{signal:`${1-p} * ${e}`}}return{value:IA(i.view,e)-2}}function l2e(e,t,n){const{markDef:i,encoding:r,config:a,stack:s}=n,l=i.orient,c=n.scaleName(t),f=n.getScaleComponent(t),d=qi(t),g=ds(t),p=ZI(t),y=n.scaleName(p),v=n.getScaleComponent(d$(t)),b=i.type==="tick"||l==="horizontal"&&t==="y"||l==="vertical"&&t==="x";let S;(r.size||i.size)&&(b?S=Un("size",n,{vgChannel:d,defaultRef:Nt(i.size)}):de(fye(i.type)));const _=!!S,w=VP({channel:t,fieldDef:e,markDef:i,config:a,scaleType:(f||v)?.get("type"),useVlSizeChannel:b});S=S||{[d]:o2e(d,y||c,v||f,a,w,!!e,i.type)};const A=(f||v)?.get("type")==="band"&&rc(w)&&!_?"top":"middle",T=rG(t,i,a,A),$=T==="xc"||T==="yc",{offset:k,offsetType:M}=xd({channel:t,markDef:i,encoding:r,model:n,bandPosition:$?.5:0}),N=j$({channel:t,channelDef:e,markDef:i,config:a,scaleName:c,scale:f,stack:s,offset:k,defaultRef:ck({model:n,defaultPos:"mid",channel:t,scaleName:c,scale:f}),bandPosition:$?M==="encoding"?0:.5:Ce(w)?{signal:`(1-${w})/2`}:rc(w)?(1-w.band)/2:0});if(d)return{[T]:N,...S};{const z=Al(g),j=S[d],U=k?{...j,offset:k}:j;return{[T]:N,[z]:ie(N)?[N[0],{...N[1],offset:U}]:{...N,offset:U}}}}function yF(e,t,n,i,r,a,s){if(GI(e))return 0;const l=e==="x"||e==="y2",c=l?-t/2:t/2;if(Ce(n)||Ce(r)||Ce(i)||a){const f=sa(n),d=sa(r),g=sa(i),p=sa(a),v=a?`(${s} < ${p} ? ${l?"":"-"}0.5 * (${p} - (${s})) : ${c})`:c,b=g?`${g} + `:"",S=f?`(${f} ? -1 : 1) * `:"",_=d?`(${d} + ${v})`:v;return{signal:b+S+_}}else return r=r||0,i+(n?-r-c:+r+c)}function u2e({fieldDef:e,fieldDef2:t,channel:n,model:i}){const{config:r,markDef:a,encoding:s}=i,l=i.getScaleComponent(n),c=i.scaleName(n),f=l?l.get("type"):void 0,d=l.get("reverse"),g=VP({channel:n,fieldDef:e,markDef:a,config:r,scaleType:f}),y=i.component.axes[n]?.[0]?.get("translate")??.5,v=Jt(n)?pt("binSpacing",a,r)??0:0,b=ds(n),S=Al(n),_=Al(b),w=Ja("minBandSize",a,r),{offset:A}=xd({channel:n,markDef:a,encoding:s,model:i,bandPosition:0}),{offset:T}=xd({channel:b,markDef:a,encoding:s,model:i,bandPosition:0}),$=Nve({fieldDef:e,scaleName:c}),k=yF(n,v,d,y,A,w,$),M=yF(b,v,d,y,T??A,w,$),N=Ce(g)?{signal:`(1-${g.signal})/2`}:rc(g)?(1-g.band)/2:.5,z=Cl({fieldDef:e,fieldDef2:t,markDef:a,config:r});if($t(e.bin)||e.timeUnit){const j=e.timeUnit&&z!==.5;return{[_]:vF({fieldDef:e,scaleName:c,bandPosition:N,offset:M,useRectOffsetField:j}),[S]:vF({fieldDef:e,scaleName:c,bandPosition:Ce(N)?{signal:`1-${N.signal}`}:1-N,offset:k,useRectOffsetField:j})}}else if(zn(e.bin)){const j=Fu(e,c,{},{offset:M});if(fe(t))return{[_]:j,[S]:Fu(t,c,{},{offset:k})};if(xc(e.bin)&&e.bin.step)return{[_]:j,[S]:{signal:`scale("${c}", ${ve(e,{expr:"datum"})} + ${e.bin.step})`,offset:k}}}de(mP(b))}function vF({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return vv({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:bx,endSuffix:xx}:{}})}const c2e=new Set(["aria","width","height"]);function Hr(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?iG(e):{};return{...f2e(e.markDef,t),...bF("fill",n),...bF("stroke",i),...Un("opacity",e),...Un("fillOpacity",e),...Un("strokeOpacity",e),...Un("strokeWidth",e),...Un("strokeDash",e),...t2e(e),...eG(e),...lk(e,"href"),...Kxe(e)}}function bF(e,t){return t?{[e]:t}:{}}function f2e(e,t){return x1e.reduce((n,i)=>(!c2e.has(i)&&ue(e,i)&&t[i]!=="ignore"&&(n[i]=Nt(e[i])),n),{})}function fk(e){const{config:t,markDef:n}=e,i=new Set;if(e.forEachFieldDef((r,a)=>{let s;if(!hs(a)||!(s=e.getScaleType(a)))return;const l=ex(r.aggregate),c=B$({scaleChannel:a,markDef:n,config:t,scaleType:s,isCountAggregate:l});if(kve(c)){const f=e.vgField(a,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});f&&i.add(f)}}),i.size>0)return{defined:{signal:[...i].map(a=>rx(a,!0)).join(" && ")}}}function xF(e,t){if(t!==void 0)return{[e]:Nt(t)}}const E_="voronoi",sG={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(E_)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,a=e.mark;if(Pl(a))return de(T1e(a)),n;const s={name:e.getName(E_),type:"path",interactive:!0,aria:!1,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...eG(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let l=0,c=!1;return n.forEach((f,d)=>{const g=f.name??"";g===e.component.mark[0].name?l=d:g.includes(E_)&&(c=!0)}),c||n.splice(l+1,0,s),n}},oG={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!ek(e.bind),parse:(e,t,n)=>pG(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,a=t.bind,s=t.init?.[0],l=sG.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((c,f)=>{const d=Lt(`${i}_${c.field}`);n.filter(p=>p.name===d).length||n.unshift({name:d,...s?{init:sc(s[f])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${l}[${ge(c.field)}] : null`}]:[],bind:a[c.field]??a[c.channel]??a})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(f=>f.name===i+oo),s=i+Sm,l=r.items.map(f=>Lt(`${i}_${f.field}`)),c=l.map(f=>`${f} !== null`).join(" && ");return l.length&&(a.update=`${c} ? {fields: ${s}, values: [${l.join(", ")}]} : null`),delete a.value,delete a.on,n}},Cv="_toggle",lG={defined:e=>e.type==="point"&&!Ga(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Cv,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+oo,i=t.name+Cv;return`${i} ? null : ${n}, ${t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${Uu(e)}}, `}${i} ? ${n} : null`}},d2e={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Ga(e),parse:(e,t)=>{t.clear&&(t.clear=xe(t.clear)?zl(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(oG.defined(t))for(const i of t.project.items){const r=n.findIndex(a=>a.name===Lt(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,a){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:a})}if(t.type==="interval")for(const r of t.project.items){const a=n.findIndex(s=>s.name===r.signals.visual);if(i(a,"[0, 0]"),a===-1){const s=n.findIndex(l=>l.name===r.signals.data);i(s,"null")}}else{let r=n.findIndex(a=>a.name===t.name+oo);i(r,"null"),lG.defined(t)&&(r=n.findIndex(a=>a.name===t.name+Cv),i(r,"false"))}return n}},uG={defined:e=>{const t=e.resolve==="global"&&e.bind&&ek(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ma;return t&&!n&&de(D1e),t&&n},parse:(e,t,n)=>{const i=Le(n);if(i.select=xe(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},pG(t,i),be(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const l of t.events)l.filter=Se(l.filter??[]),l.filter.includes(s)||l.filter.push(s)}const r=m_(t.bind)?t.bind.legend:"click",a=xe(r)?zl(r,"view"):Se(r);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=m_(t.bind)&&t.bind.legend,a=s=>l=>{const c=Le(l);return c.markname=s,c};for(const s of t.project.items){if(!s.hasLegend)continue;const l=`${Lt(s.field)}_legend`,c=`${i}_${l}`;if(n.filter(d=>d.name===c).length===0){const d=r.merge.map(a(`${l}_symbols`)).concat(r.merge.map(a(`${l}_labels`))).concat(r.merge.map(a(`${l}_entries`)));n.unshift({name:c,...t.init?{}:{value:null},on:[{events:d,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${c}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(p=>p.name===i+oo),s=i+Sm,l=r.items.filter(p=>p.hasLegend).map(p=>Lt(`${i}_${Lt(p.field)}_legend`)),f=`${l.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${s}, values: [${l.join(", ")}]} : null`;t.events&&l.length>0?a.on.push({events:l.map(p=>({signal:p})),update:f}):l.length>0&&(a.update=f,delete a.value,delete a.on);const d=n.find(p=>p.name===i+Cv),g=m_(t.bind)&&t.bind.legend;return d&&(t.events?d.on.push({...d.on[0],events:g}):d.on[0].events=g),n}};function h2e(e,t,n){const i=e.fieldDef(t)?.field;for(const r of ln(e.component.selection??{})){const a=r.project.hasField[i]??r.project.hasChannel[t];if(a&&uG.defined(r)){const s=n.get("selections")??[];s.push(r.name),n.set("selections",s,!1),a.hasLegend=!0}}}const cG="_translate_anchor",fG="_translate_delta",g2e={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=eo.defined(t),a=i+cG,{x:s,y:l}=t.project.hasChannel;let c=zl(t.translate,"scope");return r||(c=c.map(f=>(f.between[0].markname=i+If,f))),n.push({name:a,value:{},on:[{events:c.map(f=>f.between[0]),update:`{x: x(unit), y: y(unit)${s!==void 0?`, extent_x: ${r?XA(e,Ut):`slice(${s.signals.visual})`}`:""}${l!==void 0?`, extent_y: ${r?XA(e,$n):`slice(${l.signals.visual})`}`:""}}`}]},{name:i+fG,value:{},on:[{events:c,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),s!==void 0&&SF(e,t,s,"width",n),l!==void 0&&SF(e,t,l,"height",n),n}};function SF(e,t,n,i,r){const a=t.name,s=a+cG,l=a+fG,c=n.channel,f=eo.defined(t),d=r.find($=>$.name===n.signals[f?"data":"visual"]),g=e.getSizeSignalRef(i).signal,p=e.getScaleComponent(c),y=p?.get("type"),v=p?.get("reverse"),b=f?c===Ut?v?"":"-":v?"-":"":"",S=`${s}.extent_${c}`,_=`${b}${l}.${c} / ${f?`${g}`:`span(${S})`}`,w=!f||!p?"panLinear":y==="log"?"panLog":y==="symlog"?"panSymlog":y==="pow"?"panPow":"panLinear",A=f?y==="pow"?`, ${p.get("exponent")??1}`:y==="symlog"?`, ${p.get("constant")??1}`:"":"",T=`${w}(${S}, ${_}${A})`;d.on.push({events:{signal:l},update:f?T:`clampRange(${T}, 0, ${g})`})}const dG="_zoom_anchor",hG="_zoom_delta",p2e={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=eo.defined(t),a=i+hG,{x:s,y:l}=t.project.hasChannel,c=ge(e.scaleName(Ut)),f=ge(e.scaleName($n));let d=zl(t.zoom,"scope");return r||(d=d.map(g=>(g.markname=i+If,g))),n.push({name:i+dG,on:[{events:d,update:r?`{${[c?`x: invert(${c}, x(unit))`:"",f?`y: invert(${f}, y(unit))`:""].filter(g=>g).join(", ")}}`:"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:d,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&EF(e,t,s,"width",n),l!==void 0&&EF(e,t,l,"height",n),n}};function EF(e,t,n,i,r){const a=t.name,s=n.channel,l=eo.defined(t),c=r.find(w=>w.name===n.signals[l?"data":"visual"]),f=e.getSizeSignalRef(i).signal,d=e.getScaleComponent(s),g=d?.get("type"),p=l?XA(e,s):c.name,y=a+hG,v=`${a}${dG}.${s}`,b=!l||!d?"zoomLinear":g==="log"?"zoomLog":g==="symlog"?"zoomSymlog":g==="pow"?"zoomPow":"zoomLinear",S=l?g==="pow"?`, ${d.get("exponent")??1}`:g==="symlog"?`, ${d.get("constant")??1}`:"":"",_=`${b}(${p}, ${v}, ${y}${S})`;c.on.push({events:{signal:y},update:l?_:`clampRange(${_}, 0, ${f})`})}const oc="_store",oo="_tuple",m2e="_modify",gG="vlSelectionResolve",Sx=[Ixe,Qxe,Bxe,lG,oG,eo,uG,d2e,g2e,p2e,sG];function y2e(e){let t=e.parent;for(;t&&!cr(t);)t=t.parent;return t}function Uu(e,{escape:t}={escape:!0}){let n=t?ge(e.name):e.name;const i=y2e(e);if(i){const{facet:r}=i;for(const a of Or)r[a]&&(n+=` + '__facet_${a}_' + (facet[${ge(i.vgField(a))}])`)}return n}function dk(e){return ln(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function pG(e,t){(xe(t.select)||!t.select.on)&&delete e.events,(xe(t.select)||!t.select.clear)&&delete e.clear,(xe(t.select)||!t.select.toggle)&&delete e.toggle}function Ga(e){return e.events?.find(t=>"type"in t&&t.type==="timer")}function WA(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...WA(e.object)),t.push(...WA(e.property))),t)}function mG(e){return e.object.type==="MemberExpression"?mG(e.object):e.object.name==="datum"}function yG(e){const t=$M(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&mG(i)&&n.add(WA(i).slice(1).join("."))}),n}class Xd extends St{model;filter;expr;_dependentFields;clone(){return new Xd(null,this.model,Le(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=Tv(this.model,this.filter,this),this._dependentFields=yG(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function v2e(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;let r=0;for(const a of t){const s=Lt(a.name),l=a.select,c=xe(l)?l:l.type,f=be(l)?Le(l):{type:c},d=i[c];for(const y in d)y==="fields"||y==="encodings"||(y==="mark"&&(f.mark={...d.mark,...f.mark}),(f[y]===void 0||f[y]===!0)&&(f[y]=Le(d[y]??f[y])));const g=n[s]={...f,name:s,type:c,init:a.value,bind:a.bind,events:xe(f.on)?zl(f.on,"scope"):Se(Le(f.on))};if(Ga(g)&&(r++,r>1)){delete n[s];continue}const p=Le(a);for(const y of Sx)y.defined(g)&&y.parse&&y.parse(e,g,p)}return r>1&&de(L1e),n}function vG(e,t,n,i="datum"){const r=xe(t)?t:t.param,a=Lt(r),s=ge(a+oc);let l;try{l=e.getSelectionComponent(a,r)}catch{return`!!${a}`}if(l.project.timeUnit){const p=n??e.component.data.raw,y=l.project.timeUnit.clone();p.parent?y.insertAsParentOf(p):p.parent=y}const c=l.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",f=l.resolve==="global"?")":`, ${ge(l.resolve)})`,d=`${c}${s}, ${i}${f}`,g=`length(data(${s}))`;return t.empty===!1?`${g} && ${d}`:`!${g} || ${d}`}function bG(e,t,n){const i=Lt(t),r=n.encoding;let a=n.field,s;try{s=e.getSelectionComponent(i,t)}catch{return i}if(!r&&!a)a=s.project.items[0].field,s.project.items.length>1&&de(U1e(a));else if(r&&!a){const l=s.project.items.filter(c=>c.channel===r);!l.length||l.length>1?(a=s.project.items[0].field,de(B1e(l,r,n,a))):a=l[0].field}return`${s.name}[${ge(jr(a))}]`}function b2e(e,t){for(const[n,i]of wl(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new zi(new Xd(t,e,{param:n}),r,qt.Lookup,e.component.data.outputNodeRefCounts)}}function Tv(e,t,n){return Kg(t,i=>xe(i)?i:Vye(i)?vG(e,i,n):MP(i))}function x2e(e,t){if(e)return ie(e)&&!Zo(e)?e.map(n=>Y$(n,t)).join(", "):e}function __(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function Bg(e,t,n,i={header:!1}){const{disable:r,orient:a,scale:s,labelExpr:l,title:c,zindex:f,...d}=e.combine();if(!r){for(const g in d){const p=g,y=Kve[p],v=d[p];if(y&&y!==t&&y!=="both")delete d[p];else if(xm(v)){const{condition:b,...S}=v,_=Se(b),w=Qz[p];if(w){const{vgProp:A,part:T}=w,$=[..._.map(k=>{const{test:M,...N}=k;return{test:Tv(null,M),...N}}),S];__(d,T,A,$),delete d[p]}else if(w===null){const A={signal:_.map(T=>{const{test:$,...k}=T;return`${Tv(null,$)} ? ${Rz(k)} : `}).join("")+Rz(S)};d[p]=A}}else if(Ce(v)){const b=Qz[p];if(b){const{vgProp:S,part:_}=b;__(d,_,S,v),delete d[p]}}We(["labelAlign","labelBaseline"],p)&&d[p]===null&&delete d[p]}if(t==="grid"){if(!d.grid)return;if(d.encode){const{grid:g}=d.encode;d.encode={...g?{grid:g}:{}},Mt(d.encode)&&delete d.encode}return{scale:s,orient:a,...d,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Kt(f,0)}}else{if(!i.header&&e.mainExtracted)return;if(l!==void 0){let p=l;d.encode?.labels?.update&&Ce(d.encode.labels.update.text)&&(p=Ju(l,"datum.label",d.encode.labels.update.text.signal)),__(d,"labels","text",{signal:p})}if(d.labelAlign===null&&delete d.labelAlign,d.encode){for(const p of rH)e.hasAxisPart(p)||delete d.encode[p];Mt(d.encode)&&delete d.encode}const g=x2e(c,n);return{scale:s,orient:a,grid:!1,...g?{title:g}:{},...d,...n.aria===!1?{aria:!1}:{},zindex:Kt(f,0)}}}}function xG(e){const{axes:t}=e.component,n=[];for(const i of po)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const a=i==="x"?"height":"width",s=e.getSizeSignalRef(a).signal;a!==s&&n.push({name:a,update:s})}}return n}function S2e(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>Bg(r,"grid",t)),...i.map(r=>Bg(r,"grid",t)),...n.map(r=>Bg(r,"main",t)),...i.map(r=>Bg(r,"main",t))].filter(r=>r)}function _F(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const a=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},l=t[n==="x"?"axisTop":"axisRight"]||{},c=new Set([...le(s),...le(l)]),f={};for(const d of c.values())f[d]={signal:`${i.signal} === "${a}" ? ${sa(s[d])} : ${sa(l[d])}`};return f}return t[r]})])}function E2e(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:DP(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],a=e==="x"?"axisX":"axisY",s=Ce(n)?"axisOrient":`axis${um(n)}`,l=[...r,...r.map(f=>a+f.substr(4))],c=["axis",s,a];return{vlOnlyAxisConfig:_F(l,i,e,n),vgAxisConfig:_F(c,i,e,n),axisConfigStyle:_2e([...c,...l],i)}}function _2e(e,t){const n=[{}];for(const i of e){let r=t[i]?.style;if(r){r=Se(r);for(const a of r)n.push(t.style[a])}}return Object.assign.apply(null,n)}function QA(e,t,n,i={}){const r=sP(e,n,t);if(r!==void 0)return{configFrom:"style",configValue:r};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(i[a]?.[e]!==void 0)return{configFrom:a,configValue:i[a][e]};return{}}const wF={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??w2e(n,e),gridScale:({model:e,channel:t})=>A2e(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||EG(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||SG(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??T2e(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??M2e(t.type,n,fe(t)&&!!t.timeUnit,fe(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const a=e==="x"?"width":e==="y"?"height":void 0,s=a?t.getSizeSignalRef(a):void 0;return n.tickCount??k2e({fieldOrDatumDef:i,scaleType:r,size:s,values:n.values})},tickMinStep:({axis:e,format:t,fieldOrDatumDef:n})=>e.tickMinStep??D2e({format:t,fieldOrDatumDef:n}),title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=_G(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),a=n==="x"?"x2":"y2",s=t.fieldDef(a);return lP(r?[Vz(r)]:[],fe(s)?[Vz(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>O2e(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??N2e(n,t)};function w2e(e,t){return!Tn(e)&&fe(t)&&!$t(t?.bin)&&!zn(t?.bin)}function A2e(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function C2e(e,t,n,i,r){const a=t?.labelAngle;if(a!==void 0)return Ce(a)?a:Ap(a);{const{configValue:s}=QA("labelAngle",i,t?.style,r);return s!==void 0?Ap(s):n===Ut&&We([R$,N$],e.type)&&!(fe(e)&&e.timeUnit)?270:void 0}}function ZA(e){return`(((${e.signal} % 360) + 360) % 360)`}function SG(e,t,n,i){if(e!==void 0)if(n==="x"){if(Ce(e)){const r=ZA(e),a=Ce(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${a} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Ce(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Ce(e)){const r=ZA(e),a=Ce(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${a} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(Ce(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function EG(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,a=i?"bottom":"left";if(Ce(e)){const s=ZA(e),l=Ce(t)?`(${t.signal} === "${a}")`:t===a;return{signal:`(${r?`(${s} + 90)`:s} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${s} && ${s} < ${180+r}) === ${l} ? "left" : "right"`}}if((e+r)%180===0)return i?null:"center";if(Ce(t)){const s=r<e&&e<180+r?"===":"!==";return{signal:`${`${t.signal} ${s} "${a}"`} ? "left" : "right"`}}return(r<e&&e<180+r)==(t===a)?"left":"right"}function T2e(e,t){if(t==="x"&&We(["quantitative","temporal"],e))return!0}function M2e(e,t,n,i){if(n&&!be(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function $2e(e){return e==="x"?"bottom":"left"}function k2e({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){if(!i&&!Tn(t)&&t!=="log"){if(fe(e)){if($t(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&We(["month","hours","day","quarter"],Cn(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function D2e({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(fe(t)){const{timeUnit:n}=t;if(n){const i=AP(n);if(i)return{signal:i}}}}function _G(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),a=i?i.title:void 0,s=r?r.title:void 0;if(a&&s)return uP(a,s);if(a)return a;if(s)return s;if(a!==void 0)return a;if(s!==void 0)return s}function O2e(e,t){const n=e.values;if(ie(n))return iH(t,n);if(Ce(n))return n}function N2e(e,t){return e==="rect"&&xv(t)?1:0}class Sd extends St{transform;_dependentFields;clone(){return new Sd(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=yG(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(wc(i)&&XP(i.sort)){const{field:a,timeUnit:s}=i,l=i.sort,c=l.map((f,d)=>`${MP({field:a,timeUnit:s,equal:f})} ? ${d} : `).join("")+l.length;t=new Sd(t,{calculate:c,as:Ed(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${tt(this.transform)}`}}function Ed(e,t,n){return ve(e,{prefix:t,suffix:"sort_index",...n})}function Ex(e,t){return We(["top","bottom"],t)?"column":We(["left","right"],t)||e==="row"?"row":"column"}function _d(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return Kt((t||{})[e],r[e],n.header[e])}function _x(e,t,n,i){const r={};for(const a of e){const s=_d(a,t||{},n,i);s!==void 0&&(r[a]=s)}return r}const hk=["row","column"],gk=["header","footer"];function R2e(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:a,titleAngle:s,titleOrient:l}=_x(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),c=Ex(t,l),f=Ap(s);return{name:`${t}-title`,type:"group",role:`${c}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...AG(f,c),...wG(c,f,a),...CG(i,r,t,xbe,EH)}}}function wG(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=EG(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function AG(e,t){const n=SG(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function z2e(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of gk)if(n[r])for(const a of n[r]){const s=L2e(e,t,r,n,a);s!=null&&i.push(s)}return i}function F2e(e,t){const{sort:n}=e;return Js(n)?{field:ve(n,{expr:"datum"}),order:n.order??"ascending"}:ie(n)?{field:Ed(e,t,{expr:"datum"}),order:"ascending"}:{field:ve(e,{expr:"datum"}),order:n??"ascending"}}function KA(e,t,n){const{format:i,formatType:r,labelAngle:a,labelAnchor:s,labelOrient:l,labelExpr:c}=_x(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),f=I$({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,d=Ex(t,l);return{text:{signal:c?Ju(Ju(c,"datum.label",f),"datum.value",ve(e,{expr:"parent"})):f},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...AG(a,d),...wG(d,a,s),...CG(n,e,t,Sbe,_H)}}function L2e(e,t,n,i,r){if(r){let a=null;const{facetFieldDef:s}=i,l=e.config?e.config:void 0;if(s&&r.labels){const{labelOrient:g}=_x(["labelOrient"],s.header,l,t);(t==="row"&&!We(["top","bottom"],g)||t==="column"&&!We(["left","right"],g))&&(a=KA(s,t,l))}const c=cr(e)&&!mm(e.facet),f=r.axes,d=f?.length>0;if(a||d){const g=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:F2e(s,t)}:{},...d&&c?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...a?{title:a}:{},...r.sizeSignal?{encode:{update:{[g]:r.sizeSignal}}}:{},...d?{axes:f}:{}}}}return null}const U2e={column:{start:0,end:1},row:{start:1,end:0}};function B2e(e,t){return U2e[t][e]}function j2e(e,t){const n={};for(const i of Or){const r=e[i];if(r?.facetFieldDef){const{titleAnchor:a,titleOrient:s}=_x(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),l=Ex(i,s),c=B2e(a,l);c!==void 0&&(n[l]=c)}}return Mt(n)?void 0:n}function CG(e,t,n,i,r){const a={};for(const s of i){if(!r[s])continue;const l=_d(s,t?.header,e,n);l!==void 0&&(a[r[s]]=l)}return a}function pk(e){return[...v1(e,"width"),...v1(e,"height"),...v1(e,"childWidth"),...v1(e,"childHeight")]}function v1(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(i==null||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const a=e.getScaleComponent(n);if(a){const s=a.get("type"),l=a.get("range");if(Tn(s)&&Sc(l)){const c=e.scaleName(n);return cr(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[AF(c,l)]:[AF(c,l),{name:r,update:TG(c,a,`domain('${c}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const a=r.endsWith("width"),s=a?"containerSize()[0]":"containerSize()[1]",l=qA(e.config.view,a?"width":"height"),c=`isFinite(${s}) ? ${s} : ${l}`;return[{name:r,init:c,on:[{update:c,events:"window:resize"}]}]}else return[{name:r,value:i}]}function AF(e,t){const n=`${e}_step`;return Ce(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function TG(e,t,n){const i=t.get("type"),r=t.get("padding"),a=Kt(t.get("paddingOuter"),r);let s=t.get("paddingInner");return s=i==="band"?s!==void 0?s:r:1,`bandspace(${n}, ${sa(s)}, ${sa(a)}) * ${e}_step`}function MG(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function $G(e,t){return le(e).reduce((n,i)=>({...n,...Yd({model:t,channelDef:e[i],vgChannel:i,mainRefFn:r=>Nt(r.value),invalidValueRef:void 0})}),{})}function kG(e,t){if(cr(t))return e==="theta"?"independent":"shared";if(Qd(t))return"shared";if(Ek(t))return Jt(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function mk(e,t){const n=e.scale[t],i=Jt(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&de(mye(t)),"independent"):e[i][t]||"shared"}const q2e={...wbe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},DG=le(q2e);class I2e extends yo{}const CF={symbols:P2e,gradient:H2e,labels:G2e,entries:Y2e};function P2e(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:a}){if(a!=="symbol")return;const{markDef:s,encoding:l,config:c,mark:f}=n,d=s.filled&&f!=="trail";let g={...w1e({},n,xve),...iG(n,{filled:d})};const p=r.get("symbolOpacity")??c.legend.symbolOpacity,y=r.get("symbolFillColor")??c.legend.symbolFillColor,v=r.get("symbolStrokeColor")??c.legend.symbolStrokeColor,b=p===void 0?OG(l.opacity)??s.opacity:void 0;if(g.fill){if(i==="fill"||d&&i===Bi)delete g.fill;else if(ue(g.fill,"field"))y?delete g.fill:(g.fill=Nt(c.legend.symbolBaseFillColor??"black"),g.fillOpacity=Nt(b??1));else if(ie(g.fill)){const S=JA(l.fill??l.color)??s.fill??(d&&s.color);S&&(g.fill=Nt(S))}}if(g.stroke){if(i==="stroke"||!d&&i===Bi)delete g.stroke;else if(ue(g.stroke,"field")||v)delete g.stroke;else if(ie(g.stroke)){const S=Kt(JA(l.stroke||l.color),s.stroke,d?s.color:void 0);S&&(g.stroke={value:S})}}if(i!==go){const S=fe(t)&&RG(n,r,t);S?g.opacity=[{test:S,...Nt(b??1)},Nt(c.legend.unselectedOpacity)]:b&&(g.opacity=Nt(b))}return g={...g,...e},Mt(g)?void 0:g}function H2e(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:a,encoding:s}=t;let l={};const f=(i.get("gradientOpacity")??r.legend.gradientOpacity)===void 0?OG(s.opacity)||a.opacity:void 0;return f&&(l.opacity=Nt(f)),l={...l,...e},Mt(l)?void 0:l}function G2e(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const a=n.legend(i)||{},s=n.config,l=fe(t)?RG(n,r,t):void 0,c=l?[{test:l,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:f,formatType:d}=a;let g;ac(d)?g=oa({fieldOrDatumDef:t,field:"datum.value",format:f,formatType:d,config:s}):f===void 0&&d===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?g=oa({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&fe(t)&&t.timeUnit===void 0&&(g=oa({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const p={...c?{opacity:c}:{},...g?{text:g}:{},...e};return Mt(p)?void 0:p}function Y2e(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}function OG(e){return NG(e,(t,n)=>Math.max(t,n.value))}function JA(e){return NG(e,(t,n)=>Kt(t,n.value))}function NG(e,t){if(jve(e))return Se(e.condition).reduce(t,e.value);if(ga(e))return e.value}function RG(e,t,n){const i=t.get("selections");if(!i?.length)return;const r=ge(n.field);return i.map(a=>`(!length(data(${ge(Lt(a)+oc)})) || (${a}[${r}] && indexof(${a}[${r}], datum.value) >= 0))`).join(" || ")}const TF={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return HP(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return GP(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??J2e(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??eSe(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??V2e(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>qf(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(jf(n)&&ja(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>X2e(t,e)};function X2e(e,t){const n=e.values;if(ie(n))return iH(t,n);if(Ce(n))return n}function V2e(e,t,n,i){if(t!=="shape"){const r=JA(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function W2e(e){const{legend:t}=e;return Kt(t.type,Q2e(e))}function Q2e({channel:e,timeUnit:t,scaleType:n}){if(jf(e)){if(We(["quarter","month","day"],t))return"symbol";if(ja(n))return"gradient"}return"symbol"}function Z2e({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??K2e(n,t)}function K2e(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function J2e({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:s,gradientVerticalMaxLength:l,gradientVerticalMinLength:c}=e;if(ja(r))return n==="horizontal"?i==="top"||i==="bottom"?MF(t,"width",s,a):s:MF(t,"height",c,l)}function MF(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function eSe(e){if(We(["quantile","threshold","log","symlog"],e))return"greedy"}function zG(e){const t=jt(e)?tSe(e):aSe(e);return e.component.legends=t,t}function tSe(e){const{encoding:t}=e,n={};for(const i of[Bi,...AH]){const r=gn(t[i]);!r||!e.getScaleComponent(i)||i===ji&&fe(r)&&r.type===Gd||(n[i]=rSe(e,i))}return n}function nSe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function iSe(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===i?.title)return!0}return e===(n||{})[t]}function rSe(e,t){let n=e.legend(t);const{markDef:i,encoding:r,config:a}=e,s=a.legend,l=new I2e({},nSe(e,t));h2e(e,t,l);const c=n!==void 0?!n:s.disable;if(l.set("disable",c,n!==void 0),c)return l;n=n||{};const f=e.getScaleComponent(t).get("type"),d=gn(r[t]),g=fe(d)?Cn(d.timeUnit)?.unit:void 0,p=n.orient||a.legend.orient||"right",y=W2e({legend:n,channel:t,timeUnit:g,scaleType:f}),v=Z2e({legend:n,legendType:y,orient:p,legendConfig:s}),b={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:d,legendConfig:s,config:a,scaleType:f,orient:p,legendType:y,direction:v};for(const T of DG){if(y==="gradient"&&T.startsWith("symbol")||y==="symbol"&&T.startsWith("gradient"))continue;const $=T in TF?TF[T](b):n[T];if($!==void 0){const k=iSe($,T,n,e.fieldDef(t));(k||a.legend[T]===void 0)&&l.set(T,$,k)}}const S=n?.encoding??{},_=l.get("selections"),w={},A={fieldOrDatumDef:d,model:e,channel:t,legendCmpt:l,legendType:y};for(const T of["labels","legend","title","symbols","gradient","entries"]){const $=$G(S[T]??{},e),k=T in CF?CF[T]($,A):$;k!==void 0&&!Mt(k)&&(w[T]={..._?.length&&fe(d)?{name:`${Lt(d.field)}_legend_${T}`}:{},..._?.length?{interactive:!0}:{},update:_?.length?{...k,cursor:{value:"pointer"}}:k})}return Mt(w)||l.set("encode",w,!!n?.encoding),l}function aSe(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){zG(i);for(const r of le(i.component.legends))n.legend[r]=mk(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=FG(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of le(t))for(const r of e.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return t}function FG(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const a of DG){const s=Tl(e.getWithExplicit(a),t.getWithExplicit(a),a,"legend",(l,c)=>{switch(a){case"symbolType":return sSe(l,c);case"title":return cP(l,c);case"type":return r=!0,er("symbol")}return vx(l,c,a,"legend")});e.setWithExplicit(a,s)}return r&&(e.implicit?.encode?.gradient&&pv(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&pv(e.explicit,["encode","gradient"])),e}function sSe(e,t){return t.value==="circle"?t:e}function oSe(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function LG(e){const t=e.component.legends,n={};for(const r of le(t)){const a=e.getScaleComponent(r),s=mt(a.get("domains"));if(n[s])for(const l of n[s])FG(l,t[r])||n[s].push(t[r]);else n[s]=[t[r].clone()]}return ln(n).flat().map(r=>lSe(r,e.config)).filter(r=>r!==void 0)}function lSe(e,t){const{disable:n,labelExpr:i,selections:r,...a}=e.combine();if(!n){if(t.aria===!1&&a.aria==null&&(a.aria=!1),a.encode?.symbols){const s=a.encode.symbols.update;s.fill&&s.fill.value!=="transparent"&&!s.stroke&&!a.stroke&&(s.stroke={value:"transparent"});for(const l of AH)a[l]&&delete s[l]}if(a.title||delete a.title,i!==void 0){let s=i;a.encode?.labels?.update&&Ce(a.encode.labels.update.text)&&(s=Ju(i,"datum.label",a.encode.labels.update.text.signal)),oSe(a,"labels","text",{signal:s})}return a}}function uSe(e){return Qd(e)||Ek(e)?cSe(e):UG(e)}function cSe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),UG(e))}function UG(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},a=t.data.reduce((s,l)=>{const c=Ce(l)?l.signal:`data('${e.lookupDataSource(l)}')`;return We(s,c)||s.push(c),s},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const fSe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class BG extends yo{specifiedProjection;size;data;merged=!1;constructor(t,n,i,r){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=r}get isFit(){return!!this.data}}function jG(e){e.component.projection=jt(e)?dSe(e):pSe(e)}function dSe(e){if(e.hasProjection){const t=Fn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?hSe(e):void 0,a=new BG(e.projectionName(!0),{...Fn(e.config.projection),...t},i,r);return a.get("type")||a.set("type","equalEarth",!1),a}}function hSe(e){const t=[],{encoding:n}=e;for(const i of[[_a,Ea],[qr,wa]])(gn(n[i[0]])||gn(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(ji)&&e.typedFieldDef(ji).type===Gd&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(qt.Main)),t}function gSe(e,t){const n=a$(fSe,r=>!!(!Ee(e.explicit,r)&&!Ee(t.explicit,r)||Ee(e.explicit,r)&&Ee(t.explicit,r)&&ar(e.get(r),t.get(r))));if(ar(e.size,t.size)){if(n)return e;if(ar(e.explicit,{}))return t;if(ar(t.explicit,{}))return e}return null}function pSe(e){if(e.children.length===0)return;let t;for(const i of e.children)jG(i);const n=a$(e.children,i=>{const r=i.component.projection;if(r)if(t){const a=gSe(t,r);return a&&(t=a),!!a}else return t=r,!0;else return!0});if(t&&n){const i=e.projectionName(!0),r=new BG(i,t.specifiedProjection,t.size,Le(t.data));for(const a of e.children){const s=a.component.projection;s&&(s.isFit&&r.data.push(...a.component.projection.data),a.renameProjection(s.get("name"),i),s.merged=!0)}return r}}function mSe(e,t,n,i){if(bm(t,n)){const r=jt(e)?e.axis(n)??e.legend(n)??{}:{},a=ve(t,{expr:"datum"}),s=ve(t,{expr:"datum",binSuffix:"end"});return{formulaAs:ve(t,{binSuffix:"range",forAs:!0}),formula:pm(a,s,r.format,r.formatType,i)}}return{}}function qG(e,t){return`${nP(e)}_${t}`}function ySe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function yk(e,t,n){const i=dx(n,void 0)??{},r=qG(i,t);return e.getName(`${r}_bins`)}function vSe(e){return"as"in e}function $F(e,t,n){let i,r;vSe(e)?i=xe(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[ve(e,{forAs:!0}),ve(e,{binSuffix:"end",forAs:!0})];const a={...dx(t,void 0)},s=qG(a,e.field),{signal:l,extentSignal:c}=ySe(n,s);if(tx(a.extent)){const d=a.extent;r=bG(n,d.param,d),delete a.extent}const f={bin:a,field:e.field,as:[i],...l?{signal:l}:{},...c?{extentSignal:c}:{},...r?{span:r}:{}};return{key:s,binComponent:f}}class Ya extends St{bins;clone(){return new Ya(null,Le(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{if(xi(a)&&$t(a.bin)){const{key:l,binComponent:c}=$F(a,a.bin,n);r[l]={...c,...r[l],...mSe(n,a,s,n.config)}}return r},{});return Mt(i)?null:new Ya(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:a}=$F(n,n.bin,i);return new Ya(t,{[r]:a})}merge(t,n){for(const i of le(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=Ba([...this.bins[i].as,...t.bins[i].as],tt)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(ln(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(ln(this.bins).map(t=>t.field))}hash(){return`Bin ${tt(this.bins)}`}assemble(){return ln(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:a,...s}=t.bin,l={type:"bin",field:jr(t.field),as:i,signal:t.signal,...tx(a)?{extent:null}:{extent:a},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!a&&t.extentSignal&&(n.push({type:"extent",field:jr(t.field),signal:t.extentSignal}),l.extent={signal:t.extentSignal}),n.push(l);for(const c of r)for(let f=0;f<2;f++)n.push({type:"formula",expr:ve({field:i[f]},{expr:"datum"}),as:c[f]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function bSe(e,t,n,i){const r=jt(i)?i.encoding[ds(t)]:void 0;if(xi(n)&&jt(i)&&WP(n,r,i.markDef,i.config)){e.add(ve(n,{})),e.add(ve(n,{suffix:"end"}));const{mark:a,markDef:s,config:l}=i,c=Cl({fieldDef:n,markDef:s,config:l});Cp(a)&&c!==.5&&Jt(t)&&(e.add(ve(n,{suffix:bx})),e.add(ve(n,{suffix:xx}))),n.bin&&bm(n,t)&&e.add(ve(n,{binSuffix:"range"}))}else if(XI(t)){const a=YI(t);e.add(i.getName(a))}else e.add(ve(n));return wc(n)&&ove(n.scale?.range)&&e.add(n.scale.range.field),e}function xSe(e,t){for(const n of le(t)){const i=t[n];for(const r of le(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}class ua extends St{dimensions;measures;clone(){return new ua(null,new Set(this.dimensions),Le(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(s=>{s.aggregate&&(i=!0)});const r={},a=new Set;return!i||(n.forEachFieldDef((s,l)=>{const{aggregate:c,field:f}=s;if(c)if(c==="count")r["*"]??={},r["*"].count=new Set([ve(s,{forAs:!0})]);else{if(ao(c)||Il(c)){const d=ao(c)?"argmin":"argmax",g=c[d];r[g]??={},r[g][d]=new Set([ve({op:d,field:g},{forAs:!0})])}else r[f]??={},r[f][c]=new Set([ve(s,{forAs:!0})]);hs(l)&&n.scaleDomain(l)==="unaggregated"&&(r[f]??={},r[f].min=new Set([ve({field:f,aggregate:"min"},{forAs:!0})]),r[f].max=new Set([ve({field:f,aggregate:"max"},{forAs:!0})]))}else bSe(a,l,s,n)}),a.size+le(r).length===0)?null:new ua(t,a,r)}static makeFromTransform(t,n){const i=new Set,r={};for(const a of n.aggregate){const{op:s,field:l,as:c}=a;s&&(s==="count"?(r["*"]??={},r["*"].count=new Set([c||ve(a,{forAs:!0})])):(r[l]??={},r[l][s]??=new Set,r[l][s].add(c||ve(a,{forAs:!0}))))}for(const a of n.groupby??[])i.add(a);return i.size+le(r).length===0?null:new ua(t,i,r)}merge(t){return LI(this.dimensions,t.dimensions)?(xSe(this.measures,t.measures),!0):(Oye("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...le(this.measures)])}producedFields(){const t=new Set;for(const n of le(this.measures))for(const i of le(this.measures[n])){const r=this.measures[n][i];r.size===0?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${tt({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const a of le(this.measures))for(const s of le(this.measures[a]))for(const l of this.measures[a][s])i.push(l),t.push(s),n.push(a==="*"?null:jr(a));return{type:"aggregate",groupby:[...this.dimensions].map(jr),ops:t,fields:n,as:i}}}class Vd extends St{model;name;data;column;row;facet;childModel;constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const a of Or){const s=n.facet[a];if(s){const{bin:l,sort:c}=s;this[a]={name:n.getName(`${a}_domain`),fields:[ve(s),...$t(l)?[ve(s,{binSuffix:"end"})]:[]],...Js(c)?{sortField:c}:ie(c)?{sortIndexField:Ed(s,a)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Or)this[n]&&(t+=` ${n.charAt(0)}:${tt(this[n])}`);return t}get fields(){const t=[];for(const n of Or)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Or)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of po){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),a=i.get("range");if(Tn(r)&&Sc(a)){const s=wx(this.childModel,n),l=Sk(s);l?t[n]=l:de(b$(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],a=[],s=[],l=[];r&&i&&i[r]&&(n?(a.push(`distinct_${i[r]}`),s.push("max")):(a.push(i[r]),s.push("distinct")),l.push(`distinct_${i[r]}`));const{sortField:c,sortIndexField:f}=this[t];if(c){const{op:d=ux,field:g}=c;a.push(g),s.push(d),l.push(ve(c,{forAs:!0}))}else f&&(a.push(f),s.push("max"),l.push(f));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...a.length?{fields:a,ops:s,as:l}:{}}]}}assembleFacetHeaderData(t){const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],a={};for(const c of hk){for(const f of gk){const d=i[c]?.[f]??[];for(const g of d)if(g.axes?.length>0){a[c]=!0;break}}if(a[c]){const f=`length(data("${this.facet.name}"))`,d=c==="row"?n?{signal:`ceil(${f} / ${n})`}:1:n?{signal:`min(${f}, ${n})`}:{signal:f};r.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:s,column:l}=a;return(s||l)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:a,facet:s}=this;if(r&&a&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const l=[].concat(i.x??[],i.y??[]),c=l.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:l,ops:c}]})}for(const l of[Ks,Zs])this[l]&&t.push(this.assembleRowColumnHeaderData(l,n,i));if(s){const l=this.assembleFacetHeaderData(i);l&&t.push(...l)}return t}}function kF(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function SSe(e,t){const n=l$(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=kF(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=kF(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return de(q1e(t)),null}function ESe(e){const t={};return Z1(e.filter,n=>{if(TP(n)){let i=null;A$(n)?i=ir(n.equal):T$(n)?i=ir(n.lte):C$(n)?i=ir(n.lt):M$(n)?i=ir(n.gt):$$(n)?i=ir(n.gte):k$(n)?i=n.range[0]:D$(n)&&(i=(n.oneOf??n.in)[0]),i&&(Ec(i)?t[n.field]="date":ut(i)?t[n.field]="number":xe(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function _Se(e){const t={};function n(i){vd(i)?t[i.field]="date":i.type==="quantitative"&&g1e(i.aggregate)?t[i.field]="number":dd(i.field)>1?i.field in t||(t[i.field]="flatten"):wc(i)&&Js(i.sort)&&dd(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((jt(e)||cr(e))&&e.forEachFieldDef((i,r)=>{if(xi(i))n(i);else{const a=bc(r),s=e.fieldDef(a);n({...i,type:s.type})}}),jt(e)){const{mark:i,markDef:r,encoding:a}=e;if(Pl(i)&&!e.encoding.order){const s=r.orient==="horizontal"?"y":"x",l=a[s];fe(l)&&l.type==="quantitative"&&!(l.field in t)&&(t[l.field]="number")}}return t}function wSe(e){const t={};if(jt(e)&&e.component.selection)for(const n of le(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&dd(r.field)>1&&(t[r.field]="flatten")}return t}class Kn extends St{_parse;clone(){return new Kn(null,Le(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${tt(this._parse)}`}static makeExplicit(t,n,i){let r={};const a=n.data;return!hl(a)&&a?.format?.parse&&(r=a.format.parse),this.makeWithAncestors(t,r,{},i)}static makeWithAncestors(t,n,i,r){for(const l of le(i)){const c=r.getWithExplicit(l);c.value!==void 0&&(c.explicit||c.value===i[l]||c.value==="derived"||i[l]==="flatten"?delete i[l]:de(jz(l,i[l],c.value)))}for(const l of le(n)){const c=r.get(l);c!==void 0&&(c===n[l]?delete n[l]:de(jz(l,n[l],c)))}const a=new yo(n,i);r.copyAll(a);const s={};for(const l of le(a.combine())){const c=a.get(l);c!==null&&(s[l]=c)}return le(s).length===0||r.parseNothing?null:new Kn(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of le(this._parse)){const i=this._parse[n];dd(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(le(this._parse))}dependentFields(){return new Set(le(this._parse))}assembleTransforms(t=!1){return le(this._parse).filter(n=>t?dd(n)>1:!0).map(n=>{const i=SSe(n,this._parse[n]);return i?{type:"formula",expr:i,as:Pd(n)}:null}).filter(n=>n!==null)}}class Ml extends St{clone(){return new Ml(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ma])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ma}}}class Em extends St{params;clone(){return new Em(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${tt(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class _m extends St{params;clone(){return new _m(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${tt(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class lc extends St{_data;_name;_generator;constructor(t){super(null),t??={name:"source"};let n;if(hl(t)||(n=t.format?{...ur(t.format,["parse"])}:{}),Tp(t))this._data={values:t.values};else if(bd(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];We(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else HH(t)?this._data={values:[{type:"Sphere"}]}:(IH(t)||hl(t))&&(this._data={});this._generator=hl(t),t.name&&(this._name=t.name),n&&!Mt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}function vk(e){return e instanceof lc||e instanceof Em||e instanceof _m}class bk{#e;constructor(){this.#e=!1}setModified(){this.#e=!0}get modifiedFlag(){return this.#e}}class Ac extends bk{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,a)=>a[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class xk extends bk{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class ASe extends xk{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of le(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class CSe extends xk{requiresSelectionId;constructor(t){super(),this.requiresSelectionId=t&&dk(t)}run(t){t instanceof Ml&&(this.requiresSelectionId&&(vk(t.parent)||t.parent instanceof ua||t.parent instanceof Kn)||(this.setModified(),t.remove()))}}class TSe extends bk{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof Ha&&(i=t.producedFields(),s$(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class MSe extends xk{constructor(){super()}run(t){t instanceof zi&&!t.isRequired()&&(this.setModified(),t.remove())}}class $Se extends Ac{run(t){if(!vk(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Kn)if(t instanceof Kn)this.setModified(),t.merge(n);else{if(o$(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class kSe extends Ac{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof Kn);if(t.numChildren()>1&&i.length>=1){const r={},a=new Set;for(const s of i){const l=s.parse;for(const c of le(l))c in r?r[c]!==l[c]&&a.add(c):r[c]=l[c]}for(const s of a)delete r[s];if(!Mt(r)){this.setModified();const s=new Kn(t,r);for(const l of n){if(l instanceof Kn)for(const c of le(r))delete l.parse[c];t.removeChild(l),l.parent=s,l instanceof Kn&&le(l.parse).length===0&&l.remove()}}}}}class DSe extends Ac{run(t){t instanceof zi||t.numChildren()>0||t instanceof Vd||t instanceof lc||(this.setModified(),t.remove())}}class OSe extends Ac{run(t){const n=t.children.filter(r=>r instanceof Ha),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class NSe extends Ac{run(t){const n=t.children.filter(r=>r instanceof ua),i={};for(const r of n){const a=tt(r.groupBy);a in i||(i[a]=[]),i[a].push(r)}for(const r of le(i)){const a=i[r];if(a.length>1){const s=a.pop();for(const l of a)s.merge(l)&&(t.removeChild(l),l.parent=s,l.remove(),this.setModified())}}}}class RSe extends Ac{model;constructor(t){super(),this.model=t}run(t){const n=!(vk(t)||t instanceof Xd||t instanceof Kn||t instanceof Ml),i=[],r=[];for(const a of t.children)a instanceof Ya&&(n&&!o$(t.producedFields(),a.dependentFields())?i.push(a):r.push(a));if(i.length>0){const a=i.pop();for(const s of i)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Ya?t.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(r.length>1){const a=r.pop();for(const s of r)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class zSe extends Ac{run(t){const n=[...t.children];if(!fd(n,s=>s instanceof zi)||t.numChildren()<=1)return;const r=[];let a;for(const s of n)if(s instanceof zi){let l=s;for(;l.numChildren()===1;){const[c]=l.children;if(c instanceof zi)l=c;else break}r.push(...l.children),a?(t.removeChild(s),s.parent=a.parent,a.parent.removeChild(a),a.parent=l,this.setModified()):a=l}else r.push(s);if(r.length){this.setModified();for(const s of r)s.parent.removeChild(s),s.parent=a}}}class Cc extends St{transform;clone(){return new Cc(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ba(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??ve(t)}hash(){return`JoinAggregateTransform ${tt(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const a of this.transform.joinaggregate)n.push(a.op),i.push(this.getDefaultName(a)),t.push(a.field===void 0?null:a.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...r!==void 0?{groupby:r}:{}}}}class wd extends St{filter;clone(){return new wd(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,i){const{config:r,markDef:a}=n,{marks:s,scales:l}=i;if(s==="include-invalid-values"&&l==="include-invalid-values")return null;const c=n.reduceFieldDef((f,d,g)=>{const p=hs(g)&&n.getScaleComponent(g);if(p){const y=p.get("type"),{aggregate:v}=d,b=B$({scaleChannel:g,markDef:a,config:r,scaleType:y,isCountAggregate:ex(v)});b!=="show"&&b!=="always-valid"&&(f[d.field]=d)}return f},{});return le(c).length?new wd(t,c):null}dependentFields(){return new Set(le(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${tt(this.filter)}`}assemble(){const t=le(this.filter).reduce((n,i)=>{const r=this.filter[i],a=ve(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${a}) || (${eC(a)}))`):r.type==="quantitative"&&n.push(eC(a))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function eC(e){return`isValid(${e}) && isFinite(+${e})`}function FSe(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=ve(i);return r&&t.push(r),t},[])}function LSe(e){return ie(e)&&e.every(t=>xe(t))&&e.length>1}class to extends St{_stack;clone(){return new to(null,Le(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:r,as:a,offset:s="zero"}=n,l=[],c=[];if(n.sort!==void 0)for(const g of n.sort)l.push(g.field),c.push(Kt(g.order,"ascending"));const f={field:l,order:c};let d;return LSe(a)?d=a:xe(a)?d=[a,`${a}_end`]:d=[`${n.stack}_start`,`${n.stack}_end`],new to(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:s,sort:f,facetby:[],as:d})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:a,fieldChannel:s,offset:l,impute:c}=i,f=a.map(y=>{const v=r[y];return pa(v)}).filter(y=>!!y),d=FSe(n),g=n.encoding.order;let p;if(ie(g)||fe(g))p=oP(g);else{const y=QP(g)?g.sort:s==="y"?"descending":"ascending";p=d.reduce((v,b)=>(v.field.includes(b)||(v.field.push(b),v.order.push(y)),v),{field:[],order:[]})}return new to(t,{dimensionFieldDefs:f,stackField:n.vgField(s),facetby:[],stackby:d,sort:p,offset:l,impute:c,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${tt(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[ve(r,{binSuffix:"mid"})]:[ve(r,{}),ve(r,{binSuffix:"end"})]:[ve(r)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:a,sort:s,offset:l,impute:c,as:f}=this._stack;if(c)for(const d of i){const{bandPosition:g=.5,bin:p}=d;if(p){const y=ve(d,{expr:"datum"}),v=ve(d,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${eC(y)} ? ${g}*${y}+${1-g}*${v} : ${y}`,as:ve(d,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...a,...n],key:ve(d,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:s,as:f,offset:l}),t}}class Wd extends St{transform;clone(){return new Wd(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ba(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??ve(t)}hash(){return`WindowTransform ${tt(this.transform)}`}assemble(){const t=[],n=[],i=[],r=[];for(const g of this.transform.window)n.push(g.op),i.push(this.getDefaultName(g)),r.push(g.param===void 0?null:g.param),t.push(g.field===void 0?null:g.field);const a=this.transform.frame,s=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&n.every(g=>y$(g)))return{type:"joinaggregate",as:i,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const l=[],c=[];if(this.transform.sort!==void 0)for(const g of this.transform.sort)l.push(g.field),c.push(g.order??"ascending");const f={field:l,order:c},d=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:f,...d!==void 0?{ignorePeers:d}:{},...s!==void 0?{groupby:s}:{},...a!==void 0?{frame:a}:{}}}}function USe(e){function t(n){if(!(n instanceof Vd)){const i=n.clone();if(i instanceof zi){const r=nC+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof ua||i instanceof to||i instanceof Wd||i instanceof Cc)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}return t}function tC(e){if(e instanceof Vd)if(e.numChildren()===1&&!(e.children[0]instanceof zi)){const t=e.children[0];(t instanceof ua||t instanceof to||t instanceof Wd||t instanceof Cc)&&t.addDimensions(e.fields),t.swapWithParent(),tC(e)}else{const t=e.model.component.data.main;IG(t);const n=USe(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else e.children.map(tC)}function IG(e){if(e instanceof zi&&e.type===qt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Vd||(t.swapWithParent(),IG(e))}}const nC="scale_",b1=5;function iC(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!iC(t.children))return!1}return!0}function Wr(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function DF(e,t,n){let i=e.sources,r=!1;return r=Wr(new MSe,i)||r,r=Wr(new CSe(t),i)||r,i=i.filter(a=>a.numChildren()>0),r=Wr(new DSe,i)||r,i=i.filter(a=>a.numChildren()>0),n||(r=Wr(new $Se,i)||r,r=Wr(new RSe(t),i)||r,r=Wr(new TSe,i)||r,r=Wr(new kSe,i)||r,r=Wr(new NSe,i)||r,r=Wr(new OSe,i)||r,r=Wr(new ASe,i)||r,r=Wr(new zSe,i)||r),e.sources=i,r}function BSe(e,t){iC(e.sources);let n=0,i=0;for(let r=0;r<b1&&DF(e,t,!0);r++)n++;e.sources.map(tC);for(let r=0;r<b1&&DF(e,t,!1);r++)i++;iC(e.sources),Math.max(n,i)===b1&&de(`Maximum optimization runs(${b1}) reached.`)}class xn{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}signal;static fromName(t,n){return new xn(()=>t(n))}}function PG(e){jt(e)?jSe(e):qSe(e)}function jSe(e){const t=e.component.scales;for(const n of le(t)){const i=PSe(e,n);if(t[n].setWithExplicit("domains",i),GSe(e,n),e.component.data.isFaceted){let a=e;for(;!cr(a)&&a.parent;)a=a.parent;if(a.component.resolve.scale[n]==="shared")for(const l of i.value)Xs(l)&&(l.data=nC+l.data.replace(nC,""))}}}function qSe(e){for(const n of e.children)PG(n);const t=e.component.scales;for(const n of le(t)){let i,r=null;for(const a of e.children){const s=a.component.scales[n];if(s){i===void 0?i=s.getWithExplicit("domains"):i=Tl(i,s.getWithExplicit("domains"),"domains","scale",rC);const l=s.get("selectionExtent");r&&l&&r.param!==l.param&&de(R1e),r=l}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}function ISe(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:a}=OF(t,n);if(!r){de(a);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=OF(t,n);if(r)return"unaggregated"}return e}function PSe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=ISe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),t==="x"&&gn(i.x2)?gn(i.x)?Tl(Yo(n,r,e,"x"),Yo(n,r,e,"x2"),"domain","scale",rC):Yo(n,r,e,"x2"):t==="y"&&gn(i.y2)?gn(i.y)?Tl(Yo(n,r,e,"y"),Yo(n,r,e,"y2"),"domain","scale",rC):Yo(n,r,e,"y2"):Yo(n,r,e,t)}function HSe(e,t,n){return e.map(i=>({signal:`{data: ${hx(i,{timeUnit:n,type:t})}}`}))}function w_(e,t,n){const i=Cn(n)?.unit;return t==="temporal"||i?HSe(e,t,i):[e]}function Yo(e,t,n,i){const{encoding:r,markDef:a,mark:s,config:l,stack:c}=n,f=gn(r[i]),{type:d}=f,g=f.timeUnit,p=Lxe({invalid:Ja("invalid",a,l),isPath:Pl(s)});if(sve(t)){const b=Yo(e,void 0,n,i),S=w_(t.unionWith,d,g);return Ra([...S,...b.value])}else{if(Ce(t))return Ra([t]);if(t&&t!=="unaggregated"&&!NP(t))return Ra(w_(t,d,g))}if(c&&i===c.fieldChannel){if(c.offset==="normalize")return er([[0,1]]);const b=n.requestDataName(p);return er([{data:b,field:n.vgField(i,{suffix:"start"})},{data:b,field:n.vgField(i,{suffix:"end"})}])}const y=hs(i)&&fe(f)?YSe(n,i,e):void 0;if(gs(f)){const b=w_([f.datum],d,g);return er(b)}const v=f;if(t==="unaggregated"){const{field:b}=f;return er([{data:n.requestDataName(p),field:ve({field:b,aggregate:"min"})},{data:n.requestDataName(p),field:ve({field:b,aggregate:"max"})}])}else if($t(v.bin)){if(Tn(e))return er(e==="bin-ordinal"?[]:[{data:wp(y)?n.requestDataName(p):n.requestDataName(qt.Raw),field:n.vgField(i,bm(v,i)?{binSuffix:"range"}:{}),sort:y===!0||!be(y)?{field:n.vgField(i,{}),op:"min"}:y}]);{const{bin:b}=v;if($t(b)){const S=yk(n,v.field,b);return er([new xn(()=>{const _=n.getSignalName(S);return`[${_}.start, ${_}.stop]`})])}else return er([{data:n.requestDataName(p),field:n.vgField(i,{})}])}}else if(v.timeUnit&&We(["time","utc"],e)){const b=r[ds(i)];if(WP(v,b,a,l)){const S=n.requestDataName(p),_=Cl({fieldDef:v,fieldDef2:b,markDef:a,config:l}),w=Cp(s)&&_!==.5&&Jt(i);return er([{data:S,field:n.vgField(i,w?{suffix:bx}:{})},{data:S,field:n.vgField(i,{suffix:w?xx:"end"})}])}}return er(y?[{data:wp(y)?n.requestDataName(p):n.requestDataName(qt.Raw),field:n.vgField(i),sort:y}]:[{data:n.requestDataName(p),field:n.vgField(i)}])}function A_(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":ux),...i?{field:jr(i)}:{},...r?{order:r}:{}}}function GSe(e,t){const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=e.fieldDef(t)?.bin,a=NP(i)?i:void 0,s=xc(r)&&tx(r.extent)?r.extent:void 0;(a||s)&&n.set("selectionExtent",a??s,!0)}function YSe(e,t,n){if(!Tn(n))return;const i=e.fieldDef(t),r=i.sort;if(XP(r))return{op:"min",field:Ed(i,t),order:"ascending"};const{stack:a}=e,s=a?new Set([...a.groupbyFields,...a.stackBy.map(l=>l.fieldDef.field)]):void 0;if(Js(r)){const l=a&&!s.has(r.field);return A_(r,l)}else if(Lve(r)){const{encoding:l,order:c}=r,f=e.fieldDef(l),{aggregate:d,field:g}=f,p=a&&!s.has(g);if(ao(d)||Il(d))return A_({field:ve(f),order:c},p);if(y$(d)||!d)return A_({op:d,field:g,order:c},p)}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(We(["ascending",void 0],r))return!0}}function OF(e,t){const{aggregate:n,type:i}=e;return n?xe(n)&&!m1e.has(n)?{valid:!1,reason:uye(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:cye(e)}:{valid:!0}:{valid:!1,reason:lye(e)}}function rC(e,t,n,i){return e.explicit&&t.explicit&&de(pye(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function XSe(e){const t=Ba(e.map(s=>{if(Xs(s)){const{sort:l,...c}=s;return c}return s}),tt),n=Ba(e.map(s=>{if(Xs(s)){const l=s.sort;return l!==void 0&&!wp(l)&&("op"in l&&l.op==="count"&&delete l.field,l.order==="ascending"&&delete l.order),l}}).filter(s=>s!==void 0),tt);if(t.length===0)return;if(t.length===1){const s=e[0];if(Xs(s)&&n.length>0){let l=n[0];if(n.length>1){de(Iz);const c=n.filter(f=>be(f)&&"op"in f&&f.op!=="min");n.every(f=>be(f)&&"op"in f)&&c.length===1?l=c[0]:l=!0}else if(be(l)&&"field"in l){const c=l.field;s.field===c&&(l=l.order?{order:l.order}:!0)}return{...s,sort:l}}return s}const i=Ba(n.map(s=>wp(s)||!("op"in s)||xe(s.op)&&Ee(d1e,s.op)?s:(de(yye(s)),!0)),tt);let r;i.length===1?r=i[0]:i.length>1&&(de(Iz),r=!0);const a=Ba(e.map(s=>Xs(s)?s.data:null),s=>s);return a.length===1&&a[0]!==null?{data:a[0],fields:t.map(l=>l.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}function Sk(e){if(Xs(e)&&xe(e.field))return e.field;if(y1e(e)){let t;for(const n of e.fields)if(Xs(n)&&xe(n.field)){if(!t)t=n.field;else if(t!==n.field)return de(vye),t}return de(bye),t}else if(v1e(e)){de(xye);const t=e.fields[0];return xe(t)?t:void 0}}function wx(e,t){const i=e.component.scales[t].get("domains").map(r=>(Xs(r)&&(r.data=e.lookupDataSource(r.data)),r));return XSe(i)}function HG(e){return Qd(e)||Ek(e)?e.children.reduce((t,n)=>t.concat(HG(n)),NF(e)):NF(e)}function NF(e){return le(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:a,type:s,selectionExtent:l,domains:c,range:f,reverse:d,...g}=r,p=VSe(r.range,a,n,e),y=wx(e,n),v=l?Vxe(e,l,i,y):null;return t.push({name:a,type:s,...y?{domain:y}:{},...v?{domainRaw:v}:{},range:p,...d!==void 0?{reverse:d}:{},...g}),t},[])}function VSe(e,t,n,i){if(Jt(n)){if(Sc(e))return{step:{signal:`${t}_step`}}}else if(be(e)&&Xs(e))return{...e,data:i.lookupDataSource(e.data)};return e}class GG extends yo{merged=!1;constructor(t,n){super({},{name:t}),this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(We([Ln.LOG,Ln.TIME,Ln.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&We([Ln.LINEAR,Ln.SQRT,Ln.POW],t))return"definitely";const i=this.get("domains");if(i.length>0){let r=!1,a=!1,s=!1;for(const l of i){if(ie(l)){const c=l[0],f=l[l.length-1];if(ut(c)&&ut(f))if(c<=0&&f>=0){r=!0;continue}else{a=!0;continue}}s=!0}if(r)return"definitely";if(a&&!s)return"definitely-not"}return"maybe"}}const WSe=["range","scheme"];function QSe(e){const t=e.component.scales;for(const n of m$){const i=t[n];if(!i)continue;const r=ZSe(n,e);i.setWithExplicit("range",r)}}function RF(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:i,field:r}=n,a=qi(t),s=e.getName(a);if(be(i)&&i.binned&&i.step!==void 0)return new xn(()=>{const l=e.scaleName(t),c=`(domain("${l}")[1] - domain("${l}")[0]) / ${i.step}`;return`${e.getSignalName(s)} / (${c})`});if($t(i)){const l=yk(e,r,i);return new xn(()=>{const c=e.getSignalName(l),f=`(${c}.stop - ${c}.start) / ${c}.step`;return`${e.getSignalName(s)} / (${f})`})}}}function ZSe(e,t){const n=t.specifiedScales[e],{size:i}=t,a=t.getScaleComponent(e).get("type");for(const g of WSe)if(n[g]!==void 0){const p=UA(a,g),y=RP(e,g);if(!p)de(gP(a,g,e));else if(y)de(y);else switch(g){case"range":{const v=n.range;if(ie(v)){if(Jt(e))return Ra(v.map(b=>{if(b==="width"||b==="height"){const S=t.getName(b),_=t.getSignalName.bind(t);return xn.fromName(_,S)}return b}))}else if(be(v))return Ra({data:t.requestDataName(qt.Main),field:v.field,sort:{op:"min",field:t.vgField(e)}});return Ra(v)}case"scheme":return Ra(KSe(n[g]))}}const s=e===Ut||e==="xOffset"?"width":"height",l=i[s];if(ts(l)){if(Jt(e))if(Tn(a)){const g=XG(l,t,e);if(g)return Ra({step:g})}else de(pP(s));else if(dm(e)){const g=e===Fl?"x":"y";if(t.getScaleComponent(g).get("type")==="band"){const v=VG(l,a);if(v)return Ra(v)}}}const{rangeMin:c,rangeMax:f}=n,d=JSe(e,t);return(c!==void 0||f!==void 0)&&UA(a,"rangeMin")&&ie(d)&&d.length===2?Ra([c??d[0],f??d[1]]):er(d)}function KSe(e){return ave(e)?{scheme:e.name,...ur(e,["name"])}:{scheme:e}}function YG(e,t,n,{center:i}={}){const r=qi(e),a=t.getName(r),s=t.getSignalName.bind(t);return e===$n&&ha(n)?i?[xn.fromName(l=>`${s(l)}/2`,a),xn.fromName(l=>`-${s(l)}/2`,a)]:[xn.fromName(s,a),0]:i?[xn.fromName(l=>`-${s(l)}/2`,a),xn.fromName(l=>`${s(l)}/2`,a)]:[0,xn.fromName(s,a)]}function JSe(e,t){const{size:n,config:i,mark:r,encoding:a}=t,{type:s}=gn(a[e]),c=t.getScaleComponent(e).get("type"),{domain:f,domainMid:d}=t.specifiedScales[e];switch(e){case Ut:case $n:{if(We(["point","band"],c)){const g=WG(e,n,i.view);if(ts(g))return{step:XG(g,t,e)}}return YG(e,t,c)}case Fl:case Hd:return eEe(e,t,c);case ho:{const g=iEe(r,i),p=rEe(r,n,t,i);return pd(c)?nEe(g,p,tEe(c,i,f,e)):[g,p]}case Pr:return[0,Math.PI*2];case vc:return[0,360];case Sa:return[0,new xn(()=>{const g=t.getSignalName(cr(t.parent)?"child_width":"width"),p=t.getSignalName(cr(t.parent)?"child_height":"height");return`min(${g},${p})/2`})];case Ll:return{step:1e3/i.scale.framesPerSecond};case jl:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case ql:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ji:return"symbol";case Bi:case cs:case fs:return c==="ordinal"?s==="nominal"?"category":"ordinal":d!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case go:case Ul:case Bl:return[i.scale.minOpacity,i.scale.maxOpacity]}}function XG(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),a=d$(n),s=i[a];if(TH({step:e,offsetIsDiscrete:Ue(s)&&O$(s.type)})==="offset"&&oH(i,a)){const c=t.getScaleComponent(a);let d=`domain('${t.scaleName(a)}').length`;if(c.get("type")==="band"){const p=c.get("paddingInner")??c.get("padding")??0,y=c.get("paddingOuter")??c.get("padding")??0;d=`bandspace(${d}, ${p}, ${y})`}const g=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${d} / (1-${_1e(g)})`}}else return e.step}function VG(e,t){if(TH({step:e,offsetIsDiscrete:Tn(t)})==="offset")return{step:e.step}}function eEe(e,t,n){const i=e===Fl?"x":"y",r=t.getScaleComponent(i);if(!r)return YG(i,t,n,{center:!0});const a=r.get("type"),s=t.scaleName(i),{markDef:l,config:c}=t;if(a==="band"){const f=WG(i,t.size,t.config.view);if(ts(f)){const d=VG(f,n);if(d)return d}return[0,{signal:`bandwidth('${s}')`}]}else{const f=t.encoding[i];if(fe(f)&&f.timeUnit){const d=AP(f.timeUnit,v=>`scale('${s}', ${v})`),g=t.config.scale.bandWithNestedOffsetPaddingInner,p=Cl({fieldDef:f,markDef:l,config:c})-.5,y=p!==0?` + ${p}`:"";if(g){const v=Ce(g)?`${g.signal}/2${y}`:`${g/2+p}`,b=Ce(g)?`(1 - ${g.signal}/2)${y}`:`${1-g/2+p}`;return[{signal:`${v} * (${d})`},{signal:`${b} * (${d})`}]}return[0,{signal:d}]}return zI(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function WG(e,t,n){const i=e===Ut?"width":"height",r=t[i];return r!==void 0?r:wv(n,i)}function tEe(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&ie(n)?n.length+1:(de($ye(i)),3)}}function nEe(e,t,n){const i=()=>{const r=sa(t),a=sa(e),s=`(${r} - ${a}) / (${n} - 1)`;return`sequence(${a}, ${r} + ${s}, ${s})`};return Ce(t)?new xn(i):{signal:i()}}function iEe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(nx("size",e))}const zF=.95;function rEe(e,t,n,i){const r={x:RF(n,"x"),y:RF(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const a=FF(t,r,i.view);return ut(a)?a-1:new xn(()=>`${a.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const a=FF(t,r,i.view);return ut(a)?Math.pow(zF*a,2):new xn(()=>`pow(${zF} * ${a.signal}, 2)`)}}throw new Error(nx("size",e))}function FF(e,t,n){const i=ts(e.width)?e.width.step:IA(n,"width"),r=ts(e.height)?e.height.step:IA(n,"height");return t.x||t.y?new xn(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function QG(e,t){jt(e)?aEe(e,t):KG(e,t)}function aEe(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:a,specifiedScales:s}=e;for(const l of le(n)){const c=s[l],f=n[l],d=e.getScaleComponent(l),g=gn(r[l]),p=c[t],y=d.get("type"),v=d.get("padding"),b=d.get("paddingInner"),S=UA(y,t),_=RP(l,t);if(p!==void 0&&(S?_&&de(_):de(gP(y,t,l))),S&&_===void 0)if(p!==void 0){const w=g.timeUnit,A=g.type;switch(t){case"domainMax":case"domainMin":Ec(c[t])||A==="temporal"||w?f.set(t,{signal:hx(c[t],{type:A,timeUnit:w})},!0):f.set(t,c[t],!0);break;default:f.copyKeyFromObject(t,c)}}else{const w=ue(LF,t)?LF[t]({model:e,channel:l,fieldOrDatumDef:g,scaleType:y,scalePadding:v,scalePaddingInner:b,domain:c.domain,domainMin:c.domainMin,domainMax:c.domainMax,markDef:a,config:i,hasNestedOffsetScale:lH(r,l),hasSecondaryRangeChannel:!!r[ds(l)]}):i.scale[t];w!==void 0&&f.set(t,w,!1)}}}const LF={bins:({model:e,fieldOrDatumDef:t})=>fe(t)?sEe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>oEe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:a})=>lEe(e,t,n,i,r,a),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>uEe(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:a})=>cEe(e,t,n.type,i,r.scale,a),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:a})=>fEe(e,t,n,i,r.scale,a),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=fe(e)?e.sort:void 0;return dEe(t,r,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:a,hasSecondaryRangeChannel:s})=>hEe(e,t,n,i,r,a.scale,s)};function ZG(e){jt(e)?QSe(e):KG(e,"range")}function KG(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?ZG(i):QG(i,t);for(const i of le(n)){let r;for(const a of e.children){const s=a.component.scales[i];if(s){const l=s.getWithExplicit(t);r=Tl(r,l,t,"scale",qH((c,f)=>{switch(t){case"range":return c.step&&f.step?c.step-f.step:0}return 0}))}}n[i].setWithExplicit(t,r)}}function sEe(e,t){const n=t.bin;if($t(n)){const i=yk(e,t.field,n);return new xn(()=>e.getSignalName(i))}else if(zn(n)&&xc(n)&&n.step!==void 0)return{step:n.step}}function oEe(e,t){if(We([Bi,cs,fs],e)&&t!=="nominal")return"hcl"}function lEe(e,t,n,i,r,a){if(!(pa(a)?.bin||ie(n)||r!=null||i!=null||We([Ln.TIME,Ln.UTC],e)))return Jt(t)?!0:void 0}function uEe(e,t,n,i,r,a){if(Jt(e)){if(ja(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:l}=r;if(s==="bar"&&!(fe(i)&&(i.bin||i.timeUnit))&&(l==="vertical"&&e==="x"||l==="horizontal"&&e==="y"))return a.continuousBandSize}if(t===Ln.POINT)return n.pointPadding}}function cEe(e,t,n,i,r,a=!1){if(e===void 0){if(Jt(t)){const{bandPaddingInner:s,barBandPaddingInner:l,rectBandPaddingInner:c,tickBandPaddingInner:f,bandWithNestedOffsetPaddingInner:d}=r;return a?d:Kt(s,n==="bar"?l:n==="tick"?f:c)}else if(dm(t)&&i===Ln.BAND)return r.offsetBandPaddingInner}}function fEe(e,t,n,i,r,a=!1){if(e===void 0){if(Jt(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:l}=r;if(a)return l;if(n===Ln.BAND)return Kt(s,Ce(i)?{signal:`${i.signal}/2`}:i/2)}else if(dm(t)){if(n===Ln.POINT)return .5;if(n===Ln.BAND)return r.offsetBandPaddingOuter}}}function dEe(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return ha(e)&&t==="descending"?Ce(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(ha(e)&&t==="descending")return!0}function hEe(e,t,n,i,r,a,s){if(!!n&&n!=="unaggregated"&&ha(r)){if(ie(n)){const c=n[0],f=n[n.length-1];if(ut(c)&&c<=0&&ut(f)&&f>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!pd(r))return!0;if(!(fe(t)&&t.bin)&&We([...po,...i1e],e)){const{orient:c,type:f}=i;return We(["bar","area","line","trail"],f)&&(c==="horizontal"&&e==="y"||c==="vertical"&&e==="x")?!1:We(["bar","area"],f)&&!s?!0:a?.zero}return!1}function gEe(e,t,n,i,r=!1){const a=pEe(t,n,i,r),{type:s}=e;return hs(t)?s!==void 0?dve(t,s)?fe(n)&&!fve(s,n.type)?(de(hye(s,a)),a):s:(de(dye(t,s,a)),a):a:null}function pEe(e,t,n,i){switch(t.type){case"nominal":case"ordinal":{if(jf(e)||h_(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&de(g_(e,"ordinal")),"ordinal";if(d_(e))return"band";if(Jt(e)||dm(e)){if(We(["rect","bar","image","rule","tick"],n.type)||i)return"band"}else if(n.type==="arc"&&e in p$)return"band";const r=n[qi(e)];return rc(r)||yd(t)&&t.axis?.tickBand?"band":"point"}case"temporal":return jf(e)?"time":h_(e)==="discrete"?(de(g_(e,"temporal")),"ordinal"):fe(t)&&t.timeUnit&&Cn(t.timeUnit).utc?"utc":d_(e)?"band":"time";case"quantitative":return jf(e)?fe(t)&&$t(t.bin)?"bin-ordinal":"linear":h_(e)==="discrete"?(de(g_(e,"quantitative")),"ordinal"):d_(e)?"band":"linear";case"geojson":return}throw new Error(dP(t.type))}function mEe(e,{ignoreRange:t}={}){JG(e),PG(e);for(const n of cve)QG(e,n);t||ZG(e)}function JG(e){jt(e)?e.component.scales=yEe(e):e.component.scales=bEe(e)}function yEe(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const a of m$){const s=gn(t[a]);if(s&&n===LP&&a===ji&&s.type===Gd)continue;let l=s&&s.scale;if(s&&l!==null&&l!==!1){l??={};const c=lH(t,a),f=gEe(l,a,s,i,c);r[a]=new GG(e.scaleName(`${a}`,!0),{value:f,explicit:l.type===f})}}return r}const vEe=qH((e,t)=>Hz(e)-Hz(t));function bEe(e){const t=e.component.scales={},n={},i=e.component.resolve;for(const r of e.children){JG(r);for(const a of le(r.component.scales))if(i.scale[a]??=kG(a,e),i.scale[a]==="shared"){const s=n[a],l=r.component.scales[a].getWithExplicit("type");s?eve(s.value,l.value)?n[a]=Tl(s,l,"type","scale",vEe):(i.scale[a]="independent",delete n[a]):n[a]=l}}for(const r of le(n)){const a=e.scaleName(r,!0),s=n[r];t[r]=new GG(a,s);for(const l of e.children){const c=l.component.scales[r];c&&(l.renameScale(c.get("name"),a),c.merged=!0)}}return t}class C_{nameMap;constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function jt(e){return e?.type==="unit"}function cr(e){return e?.type==="facet"}function Ek(e){return e?.type==="concat"}function Qd(e){return e?.type==="layer"}class _k{type;parent;config;name;size;title;description;data;transforms;layout;scaleNameMap;projectionNameMap;signalNameMap;component;view;constructor(t,n,i,r,a,s,l){this.type=n,this.parent=i,this.config=a,this.parent=i,this.config=a,this.view=Fn(l),this.name=t.name??r,this.title=Zo(t.title)?{text:t.title}:t.title?Fn(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new C_,this.projectionNameMap=i?i.projectionNameMap:new C_,this.signalNameMap=i?i.signalNameMap:new C_,this.data=t.data,this.description=t.description,this.transforms=Axe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:$be(t,n,a),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:cx(t)||i?.component.data.isFaceted&&t.data===void 0},layoutSize:new yo,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?Le(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){mEe(this)}parseProjection(){jG(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){zG(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const a of le(i)){const s=i[a];s!==void 0&&(r[a]=Nt(s))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Nt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Mt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,a=j2e(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...a?{titleBand:a}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of Or)t[i].title&&n.push(R2e(this,i));for(const i of hk)n=n.concat(z2e(this,i));return n}assembleAxes(){return S2e(this.component.axes,this.config)}assembleLegends(){return LG(this)}assembleProjections(){return uSe(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...iP(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return We(["unit","layer"],this.type)?We(["middle",void 0],i.anchor)&&(i.frame??="group"):i.anchor??="start",Mt(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||cr(this.parent)?HG(this):[];r.length>0&&(n.scales=r);const a=this.assembleAxes();a.length>0&&(n.axes=a);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Lt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(qt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(cr(this.parent)){const n=MG(t),i=Jb(n),r=this.component.scales[i];if(r&&!r.merged){const a=r.get("type"),s=r.get("range");if(Tn(a)&&Sc(s)){const l=r.get("name"),c=wx(this,i),f=Sk(c);if(f){const d=ve({aggregate:"distinct",field:f},{expr:"datum"});return{signal:TG(l,r,d)}}else return de(b$(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(WI(t)&&hs(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(M1e(n));return i}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}}class eY extends _k{vgField(t,n={}){const i=this.fieldDef(t);if(i)return ve(i,n)}reduceFieldDef(t,n){return rbe(this.getMapping(),(i,r,a)=>{const s=pa(r);return s?t(i,s,a):i},n)}forEachFieldDef(t,n){V$(this.getMapping(),(i,r)=>{const a=pa(i);a&&t(a,r)},n)}}class Ax extends St{transform;clone(){return new Ax(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];const r=this.transform.resolve??"shared";this.transform.resolve=r}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${tt(this.transform)}`}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return i.resolve=this.transform.resolve,i}}class Cx extends St{transform;clone(){return new Cx(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${tt(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class Tx extends St{transform;clone(){return new Tx(this.parent,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((a,s)=>r[s]??a)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${tt(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class Mx extends St{transform;clone(){return new Mx(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${tt(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Pf extends St{fields;geojson;signal;clone(){return new Pf(null,Le(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[_a,Ea],[qr,wa]]){const a=r.map(s=>{const l=gn(n.encoding[s]);return fe(l)?l.field:gs(l)?{expr:`${l.datum}`}:ga(l)?{expr:`${l.value}`}:void 0});(a[0]||a[1])&&(t=new Pf(t,a,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(ji)){const r=n.typedFieldDef(ji);r.type===Gd&&(t=new Pf(t,null,r.field,n.getName(`geojson_${i++}`)))}return t}constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}dependentFields(){const t=(this.fields??[]).filter(xe);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${tt(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Mp extends St{projection;fields;as;clone(){return new Mp(null,this.projection,Le(this.fields),Le(this.as))}constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[_a,Ea],[qr,wa]]){const r=i.map(s=>{const l=gn(n.encoding[s]);return fe(l)?l.field:gs(l)?{expr:`${l.datum}`}:ga(l)?{expr:`${l.value}`}:void 0}),a=i[0]===qr?"2":"";(r[0]||r[1])&&(t=new Mp(t,n.projectionName(),r,[n.getName(`x${a}`),n.getName(`y${a}`)]))}return t}dependentFields(){return new Set(this.fields.filter(xe))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${tt(this.fields)} ${tt(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Bu extends St{transform;clone(){return new Bu(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new Bu(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,a=i.y;if(fe(r)&&fe(a)){const s=r.impute?r:a.impute?a:void 0;if(s===void 0)return;const l=r.impute?a:a.impute?r:void 0,{method:c,value:f,frame:d,keyvals:g}=s.impute,p=fH(n.mark,i);return new Bu(t,{impute:s.field,key:l.field,...c?{method:c}:{},...f!==void 0?{value:f}:{},...d?{frame:d}:{},...g!==void 0?{keyvals:g}:{},...p.length?{groupby:p}:{}})}return null}hash(){return`Impute ${tt(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:a,value:s,frame:l=[null,null]}=this.transform,c={type:"impute",field:t,key:n,...i?{keyvals:sxe(i)?this.processSequence(i):i}:{},method:"value",...a?{groupby:a}:{},value:!r||r==="value"?s:null};if(r&&r!=="value"){const f={type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:l,ignorePeers:!1,...a?{groupby:a}:{}},d={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[c,f,d]}else return[c]}}class $x extends St{transform;clone(){return new $x(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${tt(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class $p extends St{transform;secondary;clone(){return new $p(null,Le(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,r){const a=n.component.data.sources,{from:s}=i;let l=null;if(oxe(s)){let c=iY(s.data,a);c||(c=new lc(s.data),a.push(c));const f=n.getName(`lookup_${r}`);l=new zi(c,f,qt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[f]=l}else if(lxe(s)){const c=s.param;i={as:c,...i};let f;try{f=n.getSelectionComponent(Lt(c),c)}catch{throw new Error(O1e(c))}if(l=f.materialized,!l)throw new Error(N1e(c))}return new $p(t,i,l.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Se(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${tt({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Se(this.transform.as)}:{}};else{let n=this.transform.as;xe(n)||(de(H1e),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class kx extends St{transform;clone(){return new kx(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${tt(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class Dx extends St{transform;clone(){return new Dx(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${tt(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class Ox extends St{transform;clone(){return new Ox(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ba((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${tt(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:a}=this.transform;return{type:"pivot",field:t,value:n,...r!==void 0?{limit:r}:{},...a!==void 0?{op:a}:{},...i!==void 0?{groupby:i}:{}}}}class Nx extends St{transform;clone(){return new Nx(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${tt(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function tY(e){let t=0;function n(i,r){if(i instanceof lc&&!i.isGenerator&&!bd(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof Kn&&(i.parent instanceof lc&&!r.source?(r.format={...r.format,parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof Vd){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return}switch((i instanceof Em||i instanceof _m||i instanceof wd||i instanceof Xd||i instanceof Sd||i instanceof Mp||i instanceof ua||i instanceof $p||i instanceof Wd||i instanceof Cc||i instanceof Mx||i instanceof Tx||i instanceof Ax||i instanceof $x||i instanceof kx||i instanceof Dx||i instanceof Ml||i instanceof Nx||i instanceof Ox||i instanceof Cx)&&r.transform.push(i.assemble()),(i instanceof Ya||i instanceof Ha||i instanceof Bu||i instanceof to||i instanceof Pf)&&r.transform.push(...i.assemble()),i instanceof zi&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof zi?i.setSource(r.name):(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof zi&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let a=r.name;!r.source||r.transform.length>0?e.push(r):a=r.source;for(const s of i.children)n(s,{name:null,source:a,transform:[]});break}}}return n}function xEe(e){const t=[],n=tY(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function SEe(e,t){const n=[],i=tY(n);let r=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${r++}`);const l=s.assemble();i(s,l)}for(const s of n)s.transform.length===0&&delete s.transform;let a=0;for(const[s,l]of n.entries())(l.transform??[]).length===0&&!l.source&&n.splice(a++,0,n.splice(s,1)[0]);for(const s of n)for(const l of s.transform??[])l.type==="lookup"&&(l.from=e.outputNodes[l.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function EEe(e){return e==="top"||e==="left"||Ce(e)?"header":"footer"}function _Ee(e){for(const t of Or)wEe(e,t);UF(e,"x"),UF(e,"y")}function wEe(e,t){const{facet:n,config:i,child:r,component:a}=e;if(e.channelHasField(t)){const s=n[t],l=_d("title",null,i,t);let c=qf(s,i,{allowDisabling:!0,includeDefault:l===void 0||!!l});r.component.layoutHeaders[t].title&&(c=ie(c)?c.join(", "):c,c+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const f=_d("labelOrient",s.header,i,t),d=s.header!==null?Kt(s.header?.labels,i.header.labels,!0):!1,g=We(["bottom","right"],f)?"footer":"header";a.layoutHeaders[t]={title:s.header!==null?c:null,facetFieldDef:s,[g]:t==="facet"?[]:[nY(e,t,d)]}}}function nY(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function UF(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=mk(r,t),r.axis[t]==="shared"){const a=t==="x"?"column":"row",s=i[a];for(const l of n.component.axes[t]){const c=EEe(l.get("orient"));s[c]??=[nY(e,a,!1)];const f=Bg(l,"main",e.config,{header:!0});f&&s[c][0].axes.push(f),l.mainExtracted=!0}}}}function AEe(e){wk(e),Mv(e,"width"),Mv(e,"height")}function CEe(e){wk(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";Mv(e,t),Mv(e,n)}function wk(e){for(const t of e.children)t.parseLayoutSize()}function Mv(e,t){const n=MG(t),i=Jb(n),r=e.component.resolve,a=e.component.layoutSize;let s;for(const l of e.children){const c=l.component.layoutSize.getWithExplicit(n),f=r.scale[i]??kG(i,e);if(f==="independent"&&c.value==="step"){s=void 0;break}if(s){if(f==="independent"&&s.value!==c.value){s=void 0;break}s=Tl(s,c,n,"")}else s=c}if(s){for(const l of e.children)e.renameSignal(l.getName(n),e.getName(t)),l.component.layoutSize.set(n,"merged",!1);a.setWithExplicit(t,s)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function TEe(e){const{size:t,component:n}=e;for(const i of po){const r=qi(i);if(t[r]!=null&&t[r]!=null){const a=t[r];n.layoutSize.set(r,ts(a)?"step":a,!0)}else{const a=MEe(e,r);n.layoutSize.set(r,a,!1)}}}function MEe(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const a=r.get("type"),s=r.get("range");if(Tn(a)){const l=wv(i.view,t);return Sc(s)||ts(l)?"step":l}else return qA(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return qA(i.view,t);{const a=wv(i.view,t);return ts(a)?a.step:a}}}function aC(e,t,n){return ve(t,{suffix:`by_${ve(e)}`,...n})}class ep extends eY{facet;child;children;constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=$k(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!mm(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=le(t),i={};for(const r of n){if(![Zs,Ks].includes(r)){de(nx(r,"facet"));break}const a=t[r];if(a.field===void 0){de(FA(a,r));break}i[r]=this.initFacetFieldDef(a,r)}return i}initFacetFieldDef(t,n){const i=X$(t,n);return i.header?i.header=Fn(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return ue(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=Rx(this),this.child.parseData()}parseLayoutSize(){wk(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,ln(this.component.selection).some(t=>Ga(t))&&S$(x$)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),_Ee(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Or)for(const i of gk){const r=this.component.layoutHeaders[n],a=r[i],{facetFieldDef:s}=r;if(s){const l=_d("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(l)){const c=Ex(n,l);t.titleAnchor??={},t.titleAnchor[c]="end"}}if(a?.[0]){const l=n==="row"?"height":"width",c=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(l)&&(t[c]??={},t[c][n]=.5),r.title&&(t.offset??={},t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof ep))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof ep?{...this.channelHasField("column")?{encode:{update:{columns:{field:ve(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof ep){if(this.child.channelHasField("column")){const r=ve(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of po){const a=this.child.component.scales[r];if(a&&!a.merged){const s=a.get("type"),l=a.get("range");if(Tn(s)&&Sc(l)){const c=wx(this.child,r),f=Sk(c);f?(t.push(f),n.push("distinct"),i.push(`distinct_${f}`)):de(b$(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:a,ops:s,as:l}=this.getCardinalityAggregateForChild(),c=[];for(const d of Or){const g=this.facet[d];if(g){c.push(ve(g));const{bin:p,sort:y}=g;if($t(p)&&c.push(ve(g,{binSuffix:"end"})),Js(y)){const{field:v,op:b=ux}=y,S=aC(g,y);i&&r?(a.push(S),s.push("max"),l.push(S)):(a.push(v),s.push(b),l.push(S))}else if(ie(y)){const v=Ed(g,d);a.push(v),s.push("max"),l.push(v)}}}const f=!!i&&!!r;return{name:t,data:n,groupby:c,...f||a.length>0?{aggregate:{...f?{cross:f}:{},...a.length?{fields:a,ops:s,as:l}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?Js(i.sort)?[aC(i,i.sort,{expr:"datum"})]:ie(i.sort)?[Ed(i,t,{expr:"datum"})]:[ve(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(Js(r)?r.order:!ie(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return KA(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const r of hk)if(t[r]){const a=_d("labelOrient",t[r]?.header,n,r);if(i[r].includes(a))return KA(t[r],r,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=xEe(n),r=t.assembleGroupEncodeEntry(!1),a=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...a?{title:a}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:Or.map(c=>this.facetSortFields(c)).flat(),order:Or.map(c=>this.facetSortOrder(c)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(Hxe(this,[]))}]}getMapping(){return this.facet}}function $Ee(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const a of[n,i])if(Js(a.sort)){const{field:s,op:l=ux}=a.sort;e=r=new Cc(e,{joinaggregate:[{op:l,field:s,as:aC(a,a.sort,{forAs:!0})}],groupby:[ve(a)]})}return r}return null}function iY(e,t){for(const n of t){const i=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,a=i.format?.feature;if(r&&a)continue;const s=e.format?.feature;if((s||a)&&s!==a)continue;const l=i.format?.mesh;if(!((r||l)&&r!==l)){if(Tp(e)&&Tp(i)){if(ar(e.values,i.values))return n}else if(bd(e)&&bd(i)){if(e.url===i.url)return n}else if(IH(e)&&e.name===n.dataName)return n}}return null}function kEe(e,t){if(e.data||!e.parent){if(e.data===null){const i=new lc({values:[]});return t.push(i),i}const n=iY(e.data,t);if(n)return hl(e.data)||(n.data.format=FI({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new lc(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function DEe(e,t,n){let i=0;for(const r of t.transforms){let a,s;if(vxe(r))s=e=new Sd(e,r),a="derived";else if(ak(r)){const l=ESe(r);s=e=Kn.makeWithAncestors(e,{},l,n)??e,e=new Xd(e,t,r.filter)}else if(LH(r))s=e=Ya.makeFromTransform(e,r,t),a="number";else if(xxe(r))a="date",n.getWithExplicit(r.field).value===void 0&&(e=new Kn(e,{[r.field]:a}),n.set(r.field,a,!1)),s=e=Ha.makeFromTransform(e,r);else if(Sxe(r))s=e=ua.makeFromTransform(e,r),a="number",dk(t)&&(e=new Ml(e));else if(FH(r))s=e=$p.make(e,t,r,i++),a="derived";else if(pxe(r))s=e=new Wd(e,r),a="number";else if(mxe(r))s=e=new Cc(e,r),a="number";else if(Exe(r))s=e=to.makeFromTransform(e,r),a="derived";else if(_xe(r))s=e=new Mx(e,r),a="derived";else if(wxe(r))s=e=new Cx(e,r),a="derived";else if(yxe(r))s=e=new Tx(e,r),a="derived";else if(uxe(r))s=e=new Ox(e,r),a="derived";else if(gxe(r))e=new Nx(e,r);else if(bxe(r))s=e=Bu.makeFromTransform(e,r),a="derived";else if(cxe(r))s=e=new Ax(e,r),a="derived";else if(fxe(r))s=e=new kx(e,r),a="derived";else if(dxe(r))s=e=new Dx(e,r),a="derived";else if(hxe(r))s=e=new $x(e,r),a="derived";else{de(P1e(r));continue}if(s&&a!==void 0)for(const l of s.producedFields()??[])n.set(l,a,!1)}return e}function Rx(e){let t=kEe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,s=!(r&&(hl(r)||bd(r)||Tp(r)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Fxe;hl(r)?(PH(r)?t=new _m(t,r.sequence):sk(r)&&(t=new Em(t,r.graticule)),s.parseNothing=!0):r?.format?.parse===null&&(s.parseNothing=!0),t=Kn.makeExplicit(t,e,s)??t,t=new Ml(t);const l=e.parent&&Qd(e.parent);(jt(e)||cr(e))&&l&&(t=Ya.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=DEe(t,e,s));const c=wSe(e),f=_Se(e);t=Kn.makeWithAncestors(t,{},{...c,...f},s)??t,jt(e)&&(t=Pf.parseAll(t,e),t=Mp.parseAll(t,e)),(jt(e)||cr(e))&&(l||(t=Ya.makeFromEncoding(t,e)??t),t=Ha.makeFromEncoding(t,e)??t,t=Sd.parseAllForSortIndex(t,e));const d=t=x1(qt.Raw,e,t);if(jt(e)){const S=ua.makeFromEncoding(t,e);S&&(t=S,dk(e)&&(t=new Ml(t))),t=Bu.makeFromEncoding(t,e)??t,t=to.makeFromEncoding(t,e)??t}let g,p;if(jt(e)){const{markDef:S,mark:_,config:w}=e,A=pt("invalid",S,w),{marks:T,scales:$}=p=GH({invalid:A,isPath:Pl(_)});T!==$&&$==="include-invalid-values"&&(g=t=x1(qt.PreFilterInvalid,e,t)),T==="exclude-invalid-values"&&(t=wd.make(t,e,p)??t)}const y=t=x1(qt.Main,e,t);let v;if(jt(e)&&p){const{marks:S,scales:_}=p;S==="include-invalid-values"&&_==="exclude-invalid-values"&&(t=wd.make(t,e,p)??t,v=t=x1(qt.PostFilterInvalid,e,t))}jt(e)&&b2e(e,y);let b=null;if(cr(e)){const S=e.getName("facet");t=$Ee(t,e.facet)??t,b=new Vd(t,e,S,y.getSource()),n[S]=b}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:y,facetRoot:b,ancestorParse:s,preFilterInvalid:g,postFilterInvalid:v}}function x1(e,t,n){const{outputNodes:i,outputNodeRefCounts:r}=t.component.data,a=t.getDataName(e),s=new zi(n,a,e,r);return i[a]=s,s}class OEe extends _k{children;constructor(t,n,i,r){super(t,"concat",n,i,r,t.resolve),(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&de(j1e),this.children=this.getChildren(t).map((a,s)=>$k(a,this,this.getName(`concat_${s}`),void 0,r))}parseData(){this.component.data=Rx(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of le(t.component.selection))this.component.selection[n]=t.component.selection[n]}ln(this.component.selection).some(t=>Ga(t))&&S$(x$)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return mx(t)?t.vconcat:ik(t)?t.hconcat:t.concat}parseLayoutSize(){CEe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=pk(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function NEe(e){return e===!1||e===null}const REe={disable:1,gridScale:1,scale:1,...aH,labelExpr:1,encode:1},rY=le(REe);class Ak extends yo{explicit;implicit;mainExtracted;constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new Ak(Le(this.explicit),Le(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!NEe(this.get(t))}hasOrientSignalRef(){return Ce(this.explicit.orient)}}function zEe(e,t,n){const{encoding:i,config:r}=e,a=gn(i[t])??gn(i[ds(t)]),s=e.axis(t)||{},{format:l,formatType:c}=s;if(ac(c))return{text:oa({fieldOrDatumDef:a,field:"datum.value",format:l,formatType:c,config:r}),...n};if(l===void 0&&c===void 0&&r.customFormatTypes){if(md(a)==="quantitative"){if(yd(a)&&a.stack==="normalize"&&r.normalizedNumberFormatType)return{text:oa({fieldOrDatumDef:a,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:oa({fieldOrDatumDef:a,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if(md(a)==="temporal"&&r.timeFormatType&&fe(a)&&!a.timeUnit)return{text:oa({fieldOrDatumDef:a,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}function FEe(e){return po.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[PEe(n,e)]),t),{})}const LEe={bottom:"top",top:"bottom",left:"right",right:"left"};function UEe(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const a of le(r.component.axes))n.axis[a]=mk(e.component.resolve,a),n.axis[a]==="shared"&&(t[a]=BEe(t[a],r.component.axes[a]),t[a]||(n.axis[a]="independent",delete t[a]))}for(const r of po){for(const a of e.children)if(a.component.axes[r]){if(n.axis[r]==="independent"){t[r]=(t[r]??[]).concat(a.component.axes[r]);for(const s of a.component.axes[r]){const{value:l,explicit:c}=s.getWithExplicit("orient");if(!Ce(l)){if(i[l]>0&&!c){const f=LEe[l];i[l]>i[f]&&s.set("orient",f,!1)}i[l]++}}}delete a.component.axes[r]}if(n.axis[r]==="independent"&&t[r]&&t[r].length>1)for(const[a,s]of(t[r]||[]).entries())a>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function BEe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],a=t[i];if(!!r!=!!a)return;if(r&&a){const s=r.getWithExplicit("orient"),l=a.getWithExplicit("orient");if(s.explicit&&l.explicit&&s.value!==l.value)return;e[i]=jEe(r,a)}}}else return t.map(n=>n.clone());return e}function jEe(e,t){for(const n of rY){const i=Tl(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,a)=>{switch(n){case"title":return cP(r,a);case"gridScale":return{explicit:r.explicit,value:Kt(r.value,a.value)}}return vx(r,a,n,"axis")});e.setWithExplicit(n,i)}return e}function qEe(e,t,n,i,r){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Ce(n.labelAngle)?n.labelAngle:Ap(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===_G(i,r))return!0}return e===n[t]}const IEe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function PEe(e,t){let n=t.axis(e);const i=new Ak,r=gn(t.encoding[e]),{mark:a,config:s}=t,l=n?.orient||s[e==="x"?"axisX":"axisY"]?.orient||s.axis?.orient||$2e(e),c=t.getScaleComponent(e).get("type"),f=E2e(e,c,l,t.config),d=n!==void 0?!n:QA("disable",s.style,n?.style,f).configValue;if(i.set("disable",d,n!==void 0),d)return i;n=n||{};const g=C2e(r,n,e,s.style,f),p=GP(n.formatType,r,c),y=HP(r,r.type,n.format,n.formatType,s,!0),v={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:c,orient:l,labelAngle:g,format:y,formatType:p,mark:a,config:s};for(const _ of rY){const w=_ in wF?wF[_](v):Zz(_)?n[_]:void 0,A=w!==void 0,T=qEe(w,_,n,t,e);if(A&&T)i.set(_,w,T);else{const{configValue:$=void 0,configFrom:k=void 0}=Zz(_)&&_!=="values"?QA(_,s.style,n.style,f):{},M=$!==void 0;A&&!M?i.set(_,w,T):(k!=="vgAxisConfig"||IEe.has(_)&&M||xm($)||Ce($))&&i.set(_,$,!1)}}const b=n.encoding??{},S=rH.reduce((_,w)=>{if(!i.hasAxisPart(w))return _;const A=$G(b[w]??{},t),T=w==="labels"?zEe(t,e,A):A;return T!==void 0&&!Mt(T)&&(_[w]={update:T}),_},{});return Mt(S)||i.set("encode",S,!!n.encoding||n.labelAngle!==void 0),i}function HEe({encoding:e,size:t}){for(const n of po){const i=qi(n);ts(t[i])&&ol(e[n])&&(delete t[i],de(pP(i)))}return t}const GEe={vgMark:"arc",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...pi("x",e,{defaultPos:"mid"}),...pi("y",e,{defaultPos:"mid"}),...so(e,"radius"),...so(e,"theta")})},YEe={vgMark:"area",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Av("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...Av("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...fk(e)})},XEe={vgMark:"rect",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...so(e,"x"),...so(e,"y")})},VEe={vgMark:"shape",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&fe(n)&&n.type===Gd?{field:ve(n,{expr:"datum"})}:{}}]}},WEe={vgMark:"image",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...so(e,"x"),...so(e,"y"),...lk(e,"url")})},QEe={vgMark:"line",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...pi("x",e,{defaultPos:"mid"}),...pi("y",e,{defaultPos:"mid"}),...Un("size",e,{vgChannel:"strokeWidth"}),...fk(e)})},ZEe={vgMark:"trail",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...pi("x",e,{defaultPos:"mid"}),...pi("y",e,{defaultPos:"mid"}),...Un("size",e),...fk(e)})};function Ck(e,t){const{config:n}=e;return{...Hr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...pi("x",e,{defaultPos:"mid"}),...pi("y",e,{defaultPos:"mid"}),...Un("size",e),...Un("angle",e),...KEe(e,n,t)}}function KEe(e,t,n){return n?{shape:{value:n}}:Un("shape",e)}const JEe={vgMark:"symbol",encodeEntry:e=>Ck(e)},e_e={vgMark:"symbol",encodeEntry:e=>Ck(e,"circle")},t_e={vgMark:"symbol",encodeEntry:e=>Ck(e,"square")},n_e={vgMark:"rect",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...so(e,"x"),...so(e,"y")})},i_e={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Hr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Av("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...Av("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Un("size",e,{vgChannel:"strokeWidth"})}}},r_e={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Hr(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...pi("x",e,{defaultPos:"mid"}),...pi("y",e,{defaultPos:"mid"}),...lk(e),...Un("size",e,{vgChannel:"fontSize"}),...Un("angle",e),...xF("align",a_e(e.markDef,n,t)),...xF("baseline",s_e(e.markDef,n,t)),...pi("radius",e,{defaultPos:null}),...pi("theta",e,{defaultPos:null})}}};function a_e(e,t,n){if(pt("align",e,n)===void 0)return"center"}function s_e(e,t,n){if(pt("baseline",e,n)===void 0)return"middle"}const o_e={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"x":"y",a=i==="horizontal"?"y":"x",s=i==="horizontal"?"height":"width";return{...Hr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...so(e,r),...pi(a,e,{defaultPos:"mid",vgChannel:a==="y"?"yc":"xc"}),[s]:Nt(pt("thickness",n,t))}}},S1={arc:GEe,area:YEe,bar:XEe,circle:e_e,geoshape:VEe,image:WEe,line:QEe,point:JEe,rect:n_e,rule:i_e,square:t_e,text:r_e,tick:o_e,trail:ZEe};function l_e(e){if(We([ox,ax,mve],e.mark)){const t=fH(e.mark,e.encoding);if(t.length>0)return u_e(e,t)}else if(e.mark===sx){const t=RA.some(n=>pt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return c_e(e)}return Tk(e)}const BF="faceted_path_";function u_e(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:BF+e.requestDataName(qt.Main),data:e.requestDataName(qt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Tk(e,{fromPrefix:BF})}]}const jF="stack_group_";function c_e(e){const[t]=Tk(e,{fromPrefix:jF}),n=e.scaleName(e.stack.fieldChannel),i=(f={})=>e.vgField(e.stack.fieldChannel,f),r=(f,d)=>{const g=[i({prefix:"min",suffix:"start",expr:d}),i({prefix:"max",suffix:"start",expr:d}),i({prefix:"min",suffix:"end",expr:d}),i({prefix:"max",suffix:"end",expr:d})];return`${f}(${g.map(p=>`scale('${n}',${p})`).join(",")})`};let a,s;e.stack.fieldChannel==="x"?(a={...cd(t.encode.update,["y","yc","y2","height",...RA]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ur(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(a={...cd(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ur(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const f of RA){const d=Ja(f,e.markDef,e.config);t.encode.update[f]?(a[f]=t.encode.update[f],delete t.encode.update[f]):d&&(a[f]=Nt(d)),d&&(t.encode.update[f]={value:0})}const l=[];if(e.stack.groupbyChannels?.length>0)for(const f of e.stack.groupbyChannels){const d=e.fieldDef(f),g=ve(d);g&&l.push(g),(d?.bin||d?.timeUnit)&&l.push(ve(d,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((f,d)=>{if(t.encode.update[d])return{...f,[d]:t.encode.update[d]};{const g=Ja(d,e.markDef,e.config);return g!==void 0?{...f,[d]:Nt(g)}:f}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(qt.Main),name:jF+e.requestDataName(qt.Main),groupby:l,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function f_e(e){const{encoding:t,stack:n,mark:i,markDef:r,config:a}=e,s=t.order;if(!(!ie(s)&&ga(s)&&OA(s.value)||!s&&OA(pt("order",r,a)))){if((ie(s)||fe(s))&&!n)return oP(s,{expr:"datum"});if(Pl(i)){const l=r.orient==="horizontal"?"y":"x",c=t[l];if(fe(c))return{field:l}}}}function Tk(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:a}=e,s=Kt(i.clip,d_e(e),h_e(e)),l=aP(i),c=r.key,f=f_e(e),d=g_e(e);d&&Object.values(e.component.selection).some(y=>y.type==="point"&&!y.bind&&y.on!=="pointerover")&&(e.markDef.cursor??="pointer");const g=pt("aria",i,a),p=S1[n].postEncodingTransform?S1[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:S1[n].vgMark,...s?{clip:s}:{},...l?{style:l}:{},...c?{key:c.field}:{},...f?{sort:f}:{},...d||{},...g===!1?{aria:g}:{},from:{data:t.fromPrefix+e.requestDataName(qt.Main)},encode:{update:S1[n].encodeEntry(e)},...p?{transform:p}:{}}]}function d_e(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0}function h_e(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function g_e(e){if(!e.component.selection)return null;const t=le(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=le(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class aY extends eY{markDef;encoding;specifiedScales={};stack;specifiedAxes={};specifiedLegends={};specifiedProjection={};selection=[];children=[];constructor(t,n,i,r={},a){super(t,"unit",n,i,a,void 0,Jz(t)?t.view:void 0);const s=es(t.mark)?{...t.mark}:{type:t.mark},l=s.type;s.filled===void 0&&(s.filled=Kbe(s,a,{graticule:t.data&&sk(t.data)}));const c=this.encoding=nbe(t.encoding||{},l,s.filled,a);this.markDef=OH(s,c,a),this.size=HEe({encoding:c,size:Jz(t)?{...r,...t.width!==void 0?{width:t.width}:{},...t.height!==void 0?{height:t.height}:{}}:r}),this.stack=DH(this.markDef,c),this.specifiedScales=this.initScales(l,c),this.specifiedAxes=this.initAxes(c),this.specifiedLegends=this.initLegends(c),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(f=>tk(f)),this.alignStackOrderWithColorDomain()}get hasProjection(){const{encoding:t}=this,n=this.mark===LP,i=t&&V0e.some(r=>Ue(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return m$.reduce((i,r)=>{const a=gn(n[r]);return a&&(i[r]=this.initScale(a.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=Fn(t);return ie(n)&&(r.domain=n.map(ir)),ie(i)&&(r.range=i.map(ir)),r}initAxes(t){return po.reduce((n,i)=>{const r=t[i];if(Ue(r)||i===Ut&&Ue(t.x2)||i===$n&&Ue(t.y2)){const a=Ue(r)?r.axis:void 0;n[i]=a&&this.initAxis({...a})}return n},{})}initAxis(t){const n=le(t),i={};for(const r of n){const a=t[r];i[r]=xm(a)?rP(a):ir(a)}return i}initLegends(t){return a1e.reduce((n,i)=>{const r=gn(t[i]);if(r&&o1e(i)){const a=r.legend;n[i]=a&&Fn(a)}return n},{})}alignStackOrderWithColorDomain(){const{color:t,fill:n,order:i,xOffset:r,yOffset:a}=this.encoding,s=n||t,l=fe(s)?s:void 0,c=l?.field,f=l?.scale,d=l?.type,g=f?.domain,p=r||a,y=fe(p)?p:void 0,v=`_${c}_sort_index`;if(!i&&Array.isArray(g)&&typeof c=="string"&&d==="nominal")if(y&&!y.sort)y.sort=g;else{if(!this.stack)return;const b=`indexof(${ge(g)}, datum['${c}'])`,S=this.markDef?.orient==="horizontal"?"ascending":"descending";this.transforms.push({calculate:b,as:v}),this.encoding.order={field:v,type:"quantitative",sort:S}}}parseData(){this.component.data=Rx(this)}parseLayoutSize(){TEe(this)}parseSelections(){this.component.selection=v2e(this,this.selection)}parseMarkGroup(){this.component.mark=l_e(this)}parseAxesAndHeaders(){this.component.axes=FEe(this)}assembleSelectionTopLevelSignals(t){return Gxe(this,t)}assembleSignals(){return[...xG(this),...Pxe(this,[])]}assembleSelectionData(t){return Yxe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return pk(this)}correctDataNames=t=>(t.from?.data&&(t.from.data=this.lookupDataSource(t.from.data),"time"in this.encoding&&(t.from.data=t.from.data+XH)),t.from?.facet?.data&&(t.from.facet.data=this.lookupDataSource(t.from.facet.data)),t);assembleMarks(){let t=this.component.mark??[];return(!this.parent||!Qd(this.parent))&&(t=ZH(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Lu(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return pa(n)}typedFieldDef(t){const n=this.fieldDef(t);return xi(n)?n:null}}class Mk extends _k{children;constructor(t,n,i,r,a){super(t,"layer",n,i,a,t.resolve,t.view);const s={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((l,c)=>{if(yx(l))return new Mk(l,this,this.getName(`layer_${c}`),s,a);if(mo(l))return new aY(l,this,this.getName(`layer_${c}`),s,a);throw new Error(v$(l))})}parseData(){this.component.data=Rx(this);for(const t of this.children)t.parseData()}parseLayoutSize(){AEe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of le(t.component.selection))this.component.selection[n]=t.component.selection[n]}ln(this.component.selection).some(t=>Ga(t))&&S$(x$)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){UEe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),xG(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),pk(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of Se(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Xxe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),LG(this))}}function $k(e,t,n,i,r){if(cx(e))return new ep(e,t,n,r);if(yx(e))return new Mk(e,t,n,i,r);if(mo(e))return new aY(e,t,n,i,r);if(Cbe(e))return new OEe(e,t,n,r);throw new Error(v$(e))}function p_e(e,t={}){t.logger&&kye(t.logger),t.fieldTitle&&tH(t.fieldTitle);try{const n=kH(Cd(t.config,e.config)),i=jH(e,n),r=$k(i,null,"",void 0,n);return r.parse(),BSe(r.component.data,r),{spec:y_e(r,m_e(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&Dye(),t.fieldTitle&&Xve()}}function m_e(e,t,n,i){const r=i.component.layoutSize.get("width"),a=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):xe(t)&&(t={type:t}),r&&a&&Nxe(t.type)){if(r==="step"&&a==="step")de(Lz()),t.type="pad";else if(r==="step"||a==="step"){const s=r==="step"?"width":"height";de(Lz(Jb(s)));const l=s==="width"?"height":"width";t.type=Rxe(l)}}return{...le(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...fF(n,!1),...fF(e,!0)}}function y_e(e,t,n={},i){const r=e.config?jbe(e.config):void 0,a=SEe(e.component.data,n),s=e.assembleSelectionData(a),l=e.assembleProjections(),c=e.assembleTitle(),f=e.assembleGroupStyle(),d=e.assembleGroupEncodeEntry(!0);let g=e.assembleLayoutSignals();g=g.filter(v=>(v.name==="width"||v.name==="height")&&v.value!==void 0?(t[v.name]=+v.value,!1):!0);const{params:p,...y}=t;return{$schema:"https://vega.github.io/schema/vega/v6.json",...e.description?{description:e.description}:{},...y,...c?{title:c}:{},...f?{style:f}:{},...d?{encode:{update:d}}:{},data:s,...l.length>0?{projections:l}:{},...e.assembleGroup([...g,...e.assembleSelectionTopLevelSignals([]),...CH(p)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const v_e=I0e.version,b_e=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:dd,accessPathWithDatum:l$,accessWithDatumToUnescapedPath:bt,compile:p_e,contains:We,deepEqual:ar,deleteNestedProperty:pv,duplicate:Le,entries:wl,every:a$,fieldIntersection:o$,flatAccessWithDatum:UI,getFirstDefined:Kt,hasIntersection:s$,hasProperty:ue,hash:tt,internalField:II,isBoolean:wp,isEmpty:Mt,isEqual:H0e,isInternalField:PI,isNullOrFalse:OA,isNumeric:Xb,keys:le,logicalExpr:Kg,mergeDeep:FI,never:zI,normalize:jH,normalizeAngle:Ap,omit:ur,pick:cd,prefixGenerator:NA,removePathFromField:Pd,replaceAll:Ju,replacePathInField:jr,resetIdCounter:Y0e,setEqual:LI,some:fd,stringify:mt,titleCase:um,unescapeSingleQuoteAndPathDot:BI,unique:Ba,uniqueId:qI,vals:ln,varName:Lt,version:v_e},Symbol.toStringTag,{value:"Module"}));function sY(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var x_e="3.0.0",S_e={version:x_e};const _f="#fff",qF="#888",E_e={background:"#333",view:{stroke:qF},title:{color:_f,subtitleColor:_f},style:{"guide-label":{fill:_f},"guide-title":{fill:_f}},axis:{domainColor:_f,gridColor:qF,tickColor:_f}},du="#4572a7",__e={background:"#fff",arc:{fill:du},area:{fill:du},line:{stroke:du,strokeWidth:2},path:{stroke:du},rect:{fill:du},shape:{stroke:du},symbol:{fill:du,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},hu="#30a2da",T_="#cbcbcb",w_e="#999",A_e="#333",IF="#f0f0f0",PF="#333",C_e={arc:{fill:hu},area:{fill:hu},axis:{domainColor:T_,grid:!0,gridColor:T_,gridWidth:1,labelColor:w_e,labelFontSize:10,titleColor:A_e,tickColor:T_,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:IF,group:{fill:IF},legend:{labelColor:PF,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:PF,titleFontSize:14,titlePadding:10},line:{stroke:hu,strokeWidth:2},path:{stroke:hu,strokeWidth:.5},rect:{fill:hu},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:hu},bar:{binSpacing:2,fill:hu,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},gu="#000",T_e={group:{fill:"#e5e5e5"},arc:{fill:gu},area:{fill:gu},line:{stroke:gu},path:{stroke:gu},rect:{fill:gu},shape:{stroke:gu},symbol:{fill:gu,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},M_e=22,$_e="normal",HF="Benton Gothic, sans-serif",GF=11.5,k_e="normal",pu="#82c6df",M_="Benton Gothic Bold, sans-serif",YF="normal",XF=13,gg={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},D_e={background:"#ffffff",title:{anchor:"start",color:"#000000",font:M_,fontSize:M_e,fontWeight:$_e},arc:{fill:pu},area:{fill:pu},line:{stroke:pu,strokeWidth:2},path:{stroke:pu},rect:{fill:pu},shape:{stroke:pu},symbol:{fill:pu,size:30},axis:{labelFont:HF,labelFontSize:GF,labelFontWeight:k_e,titleFont:M_,titleFontSize:XF,titleFontWeight:YF},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:HF,labelFontSize:GF,symbolType:"square",titleFont:M_,titleFontSize:XF,titleFontWeight:YF},range:{category:gg["category-6"],diverging:gg["fireandice-6"],heatmap:gg["fire-7"],ordinal:gg["fire-7"],ramp:gg["fire-7"]}},mu="#ab5787",E1="#979797",O_e={background:"#f9f9f9",arc:{fill:mu},area:{fill:mu},line:{stroke:mu},path:{stroke:mu},rect:{fill:mu},shape:{stroke:mu},symbol:{fill:mu,size:30},axis:{domainColor:E1,domainWidth:.5,gridWidth:.2,labelColor:E1,tickColor:E1,tickWidth:.2,titleColor:E1},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},yu="#3e5c69",N_e={background:"#fff",arc:{fill:yu},area:{fill:yu},line:{stroke:yu},path:{stroke:yu},rect:{fill:yu},shape:{stroke:yu},symbol:{fill:yu},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Cr="#1696d2",VF="#000000",R_e="#FFFFFF",_1="Lato",$_="Lato",z_e="Lato",F_e="#DEDDDD",L_e=18,pg={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},U_e={background:R_e,title:{anchor:"start",fontSize:L_e,font:_1},axisX:{domain:!0,domainColor:VF,domainWidth:1,grid:!1,labelFontSize:12,labelFont:$_,labelAngle:0,tickColor:VF,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:_1},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:F_e,gridWidth:1,labelFontSize:12,labelFont:$_,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:_1,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:$_,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:_1,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:pg["six-groups-cat-1"],diverging:pg["diverging-colors"],heatmap:pg["diverging-colors"],ordinal:pg["six-groups-seq"],ramp:pg["shades-blue"]},area:{fill:Cr},rect:{fill:Cr},line:{color:Cr,stroke:Cr,strokeWidth:5},trail:{color:Cr,stroke:Cr,strokeWidth:0,size:1},path:{stroke:Cr,strokeWidth:.5},point:{filled:!0},text:{font:z_e,color:Cr,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Cr,stroke:null}},arc:{fill:Cr},shape:{stroke:Cr},symbol:{fill:Cr,size:30}},vu="#3366CC",WF="#ccc",w1="Arial, sans-serif",B_e={arc:{fill:vu},area:{fill:vu},path:{stroke:vu},rect:{fill:vu},shape:{stroke:vu},symbol:{stroke:vu},circle:{fill:vu},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:w1,fontSize:12},"guide-title":{font:w1,fontSize:12},"group-title":{font:w1,fontSize:12}},title:{font:w1,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:WF,tickColor:WF,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},kk=e=>e*(1/3+1),QF=kk(9),ZF=kk(10),KF=kk(12),mg="Segoe UI",JF="wf_standard-font, helvetica, arial, sans-serif",e8="#252423",yg="#605E5C",t8="transparent",j_e="#C8C6C4",Zr="#118DFF",q_e="#12239E",I_e="#E66C37",P_e="#6B007B",H_e="#E044A7",G_e="#744EC2",Y_e="#D9B300",X_e="#D64550",oY=Zr,lY="#DEEFFF",n8=[lY,oY],V_e=[lY,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",oY],W_e={view:{stroke:t8},background:t8,font:mg,header:{titleFont:JF,titleFontSize:KF,titleColor:e8,labelFont:mg,labelFontSize:ZF,labelColor:yg},axis:{ticks:!1,grid:!1,domain:!1,labelColor:yg,labelFontSize:QF,titleFont:JF,titleColor:e8,titleFontSize:KF,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:j_e,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Zr},line:{stroke:Zr,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:mg,fontSize:QF,fill:yg},arc:{fill:Zr},area:{fill:Zr,line:!0,opacity:.6},path:{stroke:Zr},rect:{fill:Zr},point:{fill:Zr,filled:!0,size:75},shape:{stroke:Zr},symbol:{fill:Zr,strokeWidth:1.5,size:50},legend:{titleFont:mg,titleFontWeight:"bold",titleColor:yg,labelFont:mg,labelFontSize:ZF,labelColor:yg,symbolType:"circle",symbolSize:75},range:{category:[Zr,q_e,I_e,P_e,H_e,G_e,Y_e,X_e],diverging:n8,heatmap:n8,ordinal:V_e}},k_='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Q_e='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',D_=400,A1={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Z_e=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],K_e=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function zx({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",i=A1.gridBg[e],r=A1.textPrimary[e],a=A1.textSecondary[e],s=n==="dark"?Z_e:K_e,l=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:l},area:{fill:l},path:{stroke:l},rect:{fill:l},shape:{stroke:l},symbol:{stroke:l},circle:{fill:l},view:{fill:i,stroke:i},group:{fill:i},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:k_,fontWeight:600},axis:{labelColor:a,labelFontSize:12,labelFont:Q_e,labelFontWeight:D_,titleColor:r,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:A1.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:k_,fill:a,fontWeight:D_},"guide-title":{font:k_,fill:a,fontWeight:D_}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const J_e=zx({theme:"white",background:"#ffffff"}),ewe=zx({theme:"g10",background:"#f4f4f4"}),twe=zx({theme:"g90",background:"#262626"}),nwe=zx({theme:"g100",background:"#161616"}),iwe=S_e.version,rwe=Object.freeze(Object.defineProperty({__proto__:null,carbong10:ewe,carbong100:nwe,carbong90:twe,carbonwhite:J_e,dark:E_e,excel:__e,fivethirtyeight:C_e,ggplot2:T_e,googlecharts:B_e,latimes:D_e,powerbi:W_e,quartz:O_e,urbaninstitute:U_e,version:iwe,vox:N_e},Symbol.toStringTag,{value:"Module"}));function awe(e,t,n,i){if(ie(e))return`[${e.map(r=>t(xe(r)?r:i8(r,n))).join(", ")}]`;if(be(e)){let r="";const{title:a,image:s,...l}=e;a&&(r+=`<h2>${t(a)}</h2>`),s&&(r+=`<img src="${new URL(t(s),i||location.href).href}">`);const c=Object.keys(l);if(c.length>0){r+="<table>";for(const f of c){let d=l[f];d!==void 0&&(be(d)&&(d=i8(d,n)),r+=`<tr><td class="key">${t(f)}</td><td class="value">${t(d)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function swe(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function i8(e,t){return JSON.stringify(e,swe(t))}var owe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const uY="vg-tooltip-element",lwe={offsetX:10,offsetY:10,id:uY,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:uwe,maxDepth:2,formatTooltip:awe,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function uwe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function cwe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return owe.toString().replaceAll(uY,e)}function cY(e,t,{offsetX:n,offsetY:i}){const r=fY({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,i),a=["bottom-right","bottom-left","top-right","top-left"];for(const s of a)if(dY(r[s],t))return r[s];return r["top-left"]}function fwe(e,t,n,i,r){const{position:a,offsetX:s,offsetY:l}=r,c=e._el.getBoundingClientRect(),f=e._origin,d=dwe(c,f,n),g=fY(d,i,s,l),p=Array.isArray(a)?a:[a];for(const y of p)if(dY(g[y],i)&&!hwe(t,g[y],i))return g[y];return cY(t,i,r)}function dwe(e,t,n){const i=n.isVoronoi?n.datum.bounds:n.bounds;let r=e.left+t[0]+i.x1,a=e.top+t[1]+i.y1,s=n;for(;s.mark.group;)s=s.mark.group,r+=s.x??0,a+=s.y??0;const l=i.x2-i.x1,c=i.y2-i.y1;return{x1:r,x2:r+l,y1:a,y2:a+c}}function fY(e,t,n,i){const r=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,s=e.x1-t.width-n,l=r-t.width/2,c=e.x2+n,f=e.y1-t.height-i,d=a-t.height/2,g=e.y2+i;return{top:{x:l,y:f},bottom:{x:l,y:g},left:{x:s,y:d},right:{x:c,y:d},"top-left":{x:s,y:f},"top-right":{x:c,y:f},"bottom-left":{x:s,y:g},"bottom-right":{x:c,y:g}}}function dY(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function hwe(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class gwe{call;options;el;constructor(t){this.options={...lwe,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=cwe(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:s}=this.options.anchor==="mark"?fwe(t,n,i,this.el.getBoundingClientRect(),this.options):cY(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${s}px`,this.el.style.left=`${a}px`}}var O_={};var pwe=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}})(),mwe=Object.prototype.hasOwnProperty;function sC(e,t){return mwe.call(e,t)}function oC(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)sC(e,r)&&i.push(r);return i}function sr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function lC(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function Su(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function hY(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function uC(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(uC(e[t]))return!0}else if(typeof e=="object"){for(var i=oC(e),r=i.length,a=0;a<r;a++)if(uC(e[i[a]]))return!0}}return!1}function r8(e,t){var n=[e];for(var i in t){var r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var gY=(function(e){pwe(t,e);function t(n,i,r,a,s){var l=this.constructor,c=e.call(this,r8(n,{name:i,index:r,operation:a,tree:s}))||this;return c.name=i,c.index=r,c.operation=a,c.tree=s,Object.setPrototypeOf(c,l.prototype),c.message=r8(n,{name:i,index:r,operation:a,tree:s}),c}return t})(Error),Yt=gY,ywe=sr,Nf={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=$v(n,this.path);i&&(i=sr(i));var r=ju(n,{op:"remove",path:this.from}).removed;return ju(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=$v(n,this.from);return ju(n,{op:"add",path:this.path,value:sr(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:kp(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},vwe={add:function(e,t,n){return lC(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:Nf.move,copy:Nf.copy,test:Nf.test,_get:Nf._get};function $v(e,t){if(t=="")return e;var n={op:"_get",path:t};return ju(e,n),n.value}function ju(e,t,n,i,r,a){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):kv(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=$v(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=kp(e,t.value),s.test===!1)throw new Yt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Yt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return s}}else{i||(e=sr(e));var l=t.path||"",c=l.split("/"),f=e,d=1,g=c.length,p=void 0,y=void 0,v=void 0;for(typeof n=="function"?v=n:v=kv;;){if(y=c[d],y&&y.indexOf("~")!=-1&&(y=hY(y)),r&&(y=="__proto__"||y=="prototype"&&d>0&&c[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(f[y]===void 0?p=c.slice(0,d).join("/"):d==g-1&&(p=t.path),p!==void 0&&v(t,0,e,p)),d++,Array.isArray(f)){if(y==="-")y=f.length;else{if(n&&!lC(y))throw new Yt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);lC(y)&&(y=~~y)}if(d>=g){if(n&&t.op==="add"&&y>f.length)throw new Yt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var s=vwe[t.op].call(t,f,y,e);if(s.test===!1)throw new Yt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}}else if(d>=g){var s=Nf[t.op].call(t,f,y,e);if(s.test===!1)throw new Yt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}if(f=f[y],n&&d<g&&(!f||typeof f!="object"))throw new Yt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function Fx(e,t,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(t))throw new Yt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=sr(e));for(var a=new Array(t.length),s=0,l=t.length;s<l;s++)a[s]=ju(e,t[s],n,!0,r,s),e=a[s].newDocument;return a.newDocument=e,a}function bwe(e,t,n){var i=ju(e,t);if(i.test===!1)throw new Yt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function kv(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new Yt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Nf[e.op]){if(typeof e.path!="string")throw new Yt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Yt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Yt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Yt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&uC(e.value))throw new Yt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var r=e.path.split("/").length,a=i.split("/").length;if(r!==a+1&&r!==a)throw new Yt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new Yt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},l=pY([s],n);if(l&&l.name==="OPERATION_PATH_UNRESOLVABLE")throw new Yt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Yt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function pY(e,t,n){try{if(!Array.isArray(e))throw new Yt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Fx(sr(t),sr(e),n||!0);else{n=n||kv;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof Yt)return r;throw r}}function kp(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,a,s;if(n&&i){if(a=e.length,a!=t.length)return!1;for(r=a;r--!==0;)if(!kp(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var l=Object.keys(e);if(a=l.length,a!==Object.keys(t).length)return!1;for(r=a;r--!==0;)if(!t.hasOwnProperty(l[r]))return!1;for(r=a;r--!==0;)if(s=l[r],!kp(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}var xwe=Object.freeze({__proto__:null,JsonPatchError:Yt,_areEquals:kp,applyOperation:ju,applyPatch:Fx,applyReducer:bwe,deepClone:ywe,getValueByPointer:$v,validate:pY,validator:kv});var Dk=new WeakMap,Swe=(function(){function e(t){this.observers=new Map,this.obj=t}return e})(),Ewe=(function(){function e(t,n){this.callback=t,this.observer=n}return e})();function _we(e){return Dk.get(e)}function wwe(e,t){return e.observers.get(t)}function Awe(e,t){e.observers.delete(t.callback)}function Cwe(e,t){t.unobserve()}function Twe(e,t){var n=[],i,r=_we(e);if(!r)r=new Swe(e),Dk.set(e,r);else{var a=wwe(r,t);i=a&&a.observer}if(i)return i;if(i={},r.value=sr(e),t){i.callback=t,i.next=null;var s=function(){cC(i)},l=function(){clearTimeout(i.next),i.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",l),window.addEventListener("keyup",l),window.addEventListener("mousedown",l),window.addEventListener("keydown",l),window.addEventListener("change",l))}return i.patches=n,i.object=e,i.unobserve=function(){cC(i),clearTimeout(i.next),Awe(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",l),window.removeEventListener("keyup",l),window.removeEventListener("mousedown",l),window.removeEventListener("keydown",l),window.removeEventListener("change",l))},r.observers.set(t,new Ewe(t,i)),i}function cC(e,t){t===void 0&&(t=!1);var n=Dk.get(e.object);Ok(n.value,e.object,e.patches,"",t),e.patches.length&&Fx(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function Ok(e,t,n,i,r){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=oC(t),s=oC(e),l=!1,c=s.length-1;c>=0;c--){var f=s[c],d=e[f];if(sC(t,f)&&!(t[f]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var g=t[f];typeof d=="object"&&d!=null&&typeof g=="object"&&g!=null&&Array.isArray(d)===Array.isArray(g)?Ok(d,g,n,i+"/"+Su(f),r):d!==g&&(r&&n.push({op:"test",path:i+"/"+Su(f),value:sr(d)}),n.push({op:"replace",path:i+"/"+Su(f),value:sr(g)}))}else Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+Su(f),value:sr(d)}),n.push({op:"remove",path:i+"/"+Su(f)}),l=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!l&&a.length==s.length))for(var c=0;c<a.length;c++){var f=a[c];!sC(e,f)&&t[f]!==void 0&&n.push({op:"add",path:i+"/"+Su(f),value:sr(t[f])})}}}function Mwe(e,t,n){n===void 0&&(n=!1);var i=[];return Ok(e,t,i,"",n),i}var $we=Object.freeze({__proto__:null,compare:Mwe,generate:cC,observe:Twe,unobserve:Cwe});Object.assign({},xwe,$we,{JsonPatchError:gY,deepClone:sr,escapePathComponent:Su,unescapePathComponent:hY});function kwe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var N_,a8;function Dwe(){if(a8)return N_;a8=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const i=this.map.get(n);if(i!==void 0)return this.map.delete(n),this.map.set(n,i),i}delete(n){return this.map.delete(n)}set(n,i){if(!this.delete(n)&&i!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,i)}return this}}return N_=e,N_}var R_,s8;function Nk(){if(s8)return R_;s8=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return R_=i=>i?typeof i!="object"?e:i:t,R_}var C1={exports:{}},z_,o8;function Rk(){if(o8)return z_;o8=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,r=t-6;return z_={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:r,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},z_}var F_,l8;function Lx(){return l8||(l8=1,F_=typeof process=="object"&&O_&&O_.NODE_DEBUG&&/\bsemver\b/i.test(O_.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),F_}var u8;function zk(){return u8||(u8=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=Rk(),a=Lx();t=e.exports={};const s=t.re=[],l=t.safeRe=[],c=t.src=[],f=t.safeSrc=[],d=t.t={};let g=0;const p="[a-zA-Z0-9-]",y=[["\\s",1],["\\d",r],[p,i]],v=S=>{for(const[_,w]of y)S=S.split(`${_}*`).join(`${_}{0,${w}}`).split(`${_}+`).join(`${_}{1,${w}}`);return S},b=(S,_,w)=>{const A=v(_),T=g++;a(S,T,_),d[S]=T,c[T]=_,f[T]=A,s[T]=new RegExp(_,w?"g":void 0),l[T]=new RegExp(A,w?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*"),b("NUMERICIDENTIFIERLOOSE","\\d+"),b("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),b("MAINVERSION",`(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})`),b("MAINVERSIONLOOSE",`(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASEIDENTIFIER",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIER]})`),b("PRERELEASEIDENTIFIERLOOSE",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASE",`(?:-(${c[d.PRERELEASEIDENTIFIER]}(?:\\.${c[d.PRERELEASEIDENTIFIER]})*))`),b("PRERELEASELOOSE",`(?:-?(${c[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[d.PRERELEASEIDENTIFIERLOOSE]})*))`),b("BUILDIDENTIFIER",`${p}+`),b("BUILD",`(?:\\+(${c[d.BUILDIDENTIFIER]}(?:\\.${c[d.BUILDIDENTIFIER]})*))`),b("FULLPLAIN",`v?${c[d.MAINVERSION]}${c[d.PRERELEASE]}?${c[d.BUILD]}?`),b("FULL",`^${c[d.FULLPLAIN]}$`),b("LOOSEPLAIN",`[v=\\s]*${c[d.MAINVERSIONLOOSE]}${c[d.PRERELEASELOOSE]}?${c[d.BUILD]}?`),b("LOOSE",`^${c[d.LOOSEPLAIN]}$`),b("GTLT","((?:<|>)?=?)"),b("XRANGEIDENTIFIERLOOSE",`${c[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),b("XRANGEIDENTIFIER",`${c[d.NUMERICIDENTIFIER]}|x|X|\\*`),b("XRANGEPLAIN",`[v=\\s]*(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:${c[d.PRERELEASE]})?${c[d.BUILD]}?)?)?`),b("XRANGEPLAINLOOSE",`[v=\\s]*(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:${c[d.PRERELEASELOOSE]})?${c[d.BUILD]}?)?)?`),b("XRANGE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAIN]}$`),b("XRANGELOOSE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAINLOOSE]}$`),b("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),b("COERCE",`${c[d.COERCEPLAIN]}(?:$|[^\\d])`),b("COERCEFULL",c[d.COERCEPLAIN]+`(?:${c[d.PRERELEASE]})?(?:${c[d.BUILD]})?(?:$|[^\\d])`),b("COERCERTL",c[d.COERCE],!0),b("COERCERTLFULL",c[d.COERCEFULL],!0),b("LONETILDE","(?:~>?)"),b("TILDETRIM",`(\\s*)${c[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",b("TILDE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAIN]}$`),b("TILDELOOSE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAINLOOSE]}$`),b("LONECARET","(?:\\^)"),b("CARETTRIM",`(\\s*)${c[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",b("CARET",`^${c[d.LONECARET]}${c[d.XRANGEPLAIN]}$`),b("CARETLOOSE",`^${c[d.LONECARET]}${c[d.XRANGEPLAINLOOSE]}$`),b("COMPARATORLOOSE",`^${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]})$|^$`),b("COMPARATOR",`^${c[d.GTLT]}\\s*(${c[d.FULLPLAIN]})$|^$`),b("COMPARATORTRIM",`(\\s*)${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]}|${c[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",b("HYPHENRANGE",`^\\s*(${c[d.XRANGEPLAIN]})\\s+-\\s+(${c[d.XRANGEPLAIN]})\\s*$`),b("HYPHENRANGELOOSE",`^\\s*(${c[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[d.XRANGEPLAINLOOSE]})\\s*$`),b("STAR","(<|>)?=?\\s*\\*"),b("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),b("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(C1,C1.exports)),C1.exports}var L_,c8;function Owe(){if(c8)return L_;c8=1;const e=/^[0-9]+$/,t=(i,r)=>{const a=e.test(i),s=e.test(r);return a&&s&&(i=+i,r=+r),i===r?0:a&&!s?-1:s&&!a?1:i<r?-1:1};return L_={compareIdentifiers:t,rcompareIdentifiers:(i,r)=>t(r,i)},L_}var U_,f8;function Fk(){if(f8)return U_;f8=1;const e=Lx(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=Rk(),{safeRe:i,t:r}=zk(),a=Nk(),{compareIdentifiers:s}=Owe();class l{constructor(f,d){if(d=a(d),f instanceof l){if(f.loose===!!d.loose&&f.includePrerelease===!!d.includePrerelease)return f;f=f.version}else if(typeof f!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof f}".`);if(f.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",f,d),this.options=d,this.loose=!!d.loose,this.includePrerelease=!!d.includePrerelease;const g=f.trim().match(d.loose?i[r.LOOSE]:i[r.FULL]);if(!g)throw new TypeError(`Invalid Version: ${f}`);if(this.raw=f,this.major=+g[1],this.minor=+g[2],this.patch=+g[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");g[4]?this.prerelease=g[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const y=+p;if(y>=0&&y<n)return y}return p}):this.prerelease=[],this.build=g[5]?g[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(f){if(e("SemVer.compare",this.version,this.options,f),!(f instanceof l)){if(typeof f=="string"&&f===this.version)return 0;f=new l(f,this.options)}return f.version===this.version?0:this.compareMain(f)||this.comparePre(f)}compareMain(f){return f instanceof l||(f=new l(f,this.options)),s(this.major,f.major)||s(this.minor,f.minor)||s(this.patch,f.patch)}comparePre(f){if(f instanceof l||(f=new l(f,this.options)),this.prerelease.length&&!f.prerelease.length)return-1;if(!this.prerelease.length&&f.prerelease.length)return 1;if(!this.prerelease.length&&!f.prerelease.length)return 0;let d=0;do{const g=this.prerelease[d],p=f.prerelease[d];if(e("prerelease compare",d,g,p),g===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(g===void 0)return-1;if(g===p)continue;return s(g,p)}while(++d)}compareBuild(f){f instanceof l||(f=new l(f,this.options));let d=0;do{const g=this.build[d],p=f.build[d];if(e("build compare",d,g,p),g===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(g===void 0)return-1;if(g===p)continue;return s(g,p)}while(++d)}inc(f,d,g){if(f.startsWith("pre")){if(!d&&g===!1)throw new Error("invalid increment argument: identifier is empty");if(d){const p=`-${d}`.match(this.options.loose?i[r.PRERELEASELOOSE]:i[r.PRERELEASE]);if(!p||p[1]!==d)throw new Error(`invalid identifier: ${d}`)}}switch(f){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",d,g);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",d,g);break;case"prepatch":this.prerelease.length=0,this.inc("patch",d,g),this.inc("pre",d,g);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",d,g),this.inc("pre",d,g);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(g)?1:0;if(this.prerelease.length===0)this.prerelease=[p];else{let y=this.prerelease.length;for(;--y>=0;)typeof this.prerelease[y]=="number"&&(this.prerelease[y]++,y=-2);if(y===-1){if(d===this.prerelease.join(".")&&g===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(d){let y=[d,p];g===!1&&(y=[d]),s(this.prerelease[0],d)===0?isNaN(this.prerelease[1])&&(this.prerelease=y):this.prerelease=y}break}default:throw new Error(`invalid increment argument: ${f}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return U_=l,U_}var B_,d8;function Zd(){if(d8)return B_;d8=1;const e=Fk();return B_=(n,i,r)=>new e(n,r).compare(new e(i,r)),B_}var j_,h8;function Nwe(){if(h8)return j_;h8=1;const e=Zd();return j_=(n,i,r)=>e(n,i,r)===0,j_}var q_,g8;function Rwe(){if(g8)return q_;g8=1;const e=Zd();return q_=(n,i,r)=>e(n,i,r)!==0,q_}var I_,p8;function zwe(){if(p8)return I_;p8=1;const e=Zd();return I_=(n,i,r)=>e(n,i,r)>0,I_}var P_,m8;function Fwe(){if(m8)return P_;m8=1;const e=Zd();return P_=(n,i,r)=>e(n,i,r)>=0,P_}var H_,y8;function Lwe(){if(y8)return H_;y8=1;const e=Zd();return H_=(n,i,r)=>e(n,i,r)<0,H_}var G_,v8;function Uwe(){if(v8)return G_;v8=1;const e=Zd();return G_=(n,i,r)=>e(n,i,r)<=0,G_}var Y_,b8;function Bwe(){if(b8)return Y_;b8=1;const e=Nwe(),t=Rwe(),n=zwe(),i=Fwe(),r=Lwe(),a=Uwe();return Y_=(l,c,f,d)=>{switch(c){case"===":return typeof l=="object"&&(l=l.version),typeof f=="object"&&(f=f.version),l===f;case"!==":return typeof l=="object"&&(l=l.version),typeof f=="object"&&(f=f.version),l!==f;case"":case"=":case"==":return e(l,f,d);case"!=":return t(l,f,d);case">":return n(l,f,d);case">=":return i(l,f,d);case"<":return r(l,f,d);case"<=":return a(l,f,d);default:throw new TypeError(`Invalid operator: ${c}`)}},Y_}var X_,x8;function jwe(){if(x8)return X_;x8=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,g){if(g=n(g),d instanceof t){if(d.loose===!!g.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),s("comparator",d,g),this.options=g,this.loose=!!g.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(d){const g=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],p=d.match(g);if(!p)throw new TypeError(`Invalid comparator: ${d}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new l(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(s("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new l(d,this.options)}catch{return!1}return a(d,this.operator,this.semver,this.options)}intersects(d,g){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(d.value,g).test(this.value):d.operator===""?d.value===""?!0:new c(this.value,g).test(d.semver):(g=n(g),g.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!g.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||a(this.semver,"<",d.semver,g)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||a(this.semver,">",d.semver,g)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}X_=t;const n=Nk(),{safeRe:i,t:r}=zk(),a=Bwe(),s=Lx(),l=Fk(),c=mY();return X_}var V_,S8;function mY(){if(S8)return V_;S8=1;const e=/\s+/g;class t{constructor(R,O){if(O=r(O),R instanceof t)return R.loose===!!O.loose&&R.includePrerelease===!!O.includePrerelease?R:new t(R.raw,O);if(R instanceof a)return this.raw=R.value,this.set=[[R]],this.formatted=void 0,this;if(this.options=O,this.loose=!!O.loose,this.includePrerelease=!!O.includePrerelease,this.raw=R.trim().replace(e," "),this.set=this.raw.split("||").map(B=>this.parseRange(B.trim())).filter(B=>B.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const B=this.set[0];if(this.set=this.set.filter(Y=>!b(Y[0])),this.set.length===0)this.set=[B];else if(this.set.length>1){for(const Y of this.set)if(Y.length===1&&S(Y[0])){this.set=[Y];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let R=0;R<this.set.length;R++){R>0&&(this.formatted+="||");const O=this.set[R];for(let B=0;B<O.length;B++)B>0&&(this.formatted+=" "),this.formatted+=O[B].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(R){const B=((this.options.includePrerelease&&y)|(this.options.loose&&v))+":"+R,Y=i.get(B);if(Y)return Y;const Z=this.options.loose,oe=Z?c[f.HYPHENRANGELOOSE]:c[f.HYPHENRANGE];R=R.replace(oe,X(this.options.includePrerelease)),s("hyphen replace",R),R=R.replace(c[f.COMPARATORTRIM],d),s("comparator trim",R),R=R.replace(c[f.TILDETRIM],g),s("tilde trim",R),R=R.replace(c[f.CARETTRIM],p),s("caret trim",R);let F=R.split(" ").map(me=>w(me,this.options)).join(" ").split(/\s+/).map(me=>U(me,this.options));Z&&(F=F.filter(me=>(s("loose invalid filter",me,this.options),!!me.match(c[f.COMPARATORLOOSE])))),s("range list",F);const G=new Map,ae=F.map(me=>new a(me,this.options));for(const me of ae){if(b(me))return[me];G.set(me.value,me)}G.size>1&&G.has("")&&G.delete("");const he=[...G.values()];return i.set(B,he),he}intersects(R,O){if(!(R instanceof t))throw new TypeError("a Range is required");return this.set.some(B=>_(B,O)&&R.set.some(Y=>_(Y,O)&&B.every(Z=>Y.every(oe=>Z.intersects(oe,O)))))}test(R){if(!R)return!1;if(typeof R=="string")try{R=new l(R,this.options)}catch{return!1}for(let O=0;O<this.set.length;O++)if(H(this.set[O],R,this.options))return!0;return!1}}V_=t;const n=Dwe(),i=new n,r=Nk(),a=jwe(),s=Lx(),l=Fk(),{safeRe:c,t:f,comparatorTrimReplace:d,tildeTrimReplace:g,caretTrimReplace:p}=zk(),{FLAG_INCLUDE_PRERELEASE:y,FLAG_LOOSE:v}=Rk(),b=q=>q.value==="<0.0.0-0",S=q=>q.value==="",_=(q,R)=>{let O=!0;const B=q.slice();let Y=B.pop();for(;O&&B.length;)O=B.every(Z=>Y.intersects(Z,R)),Y=B.pop();return O},w=(q,R)=>(s("comp",q,R),q=k(q,R),s("caret",q),q=T(q,R),s("tildes",q),q=N(q,R),s("xrange",q),q=j(q,R),s("stars",q),q),A=q=>!q||q.toLowerCase()==="x"||q==="*",T=(q,R)=>q.trim().split(/\s+/).map(O=>$(O,R)).join(" "),$=(q,R)=>{const O=R.loose?c[f.TILDELOOSE]:c[f.TILDE];return q.replace(O,(B,Y,Z,oe,F)=>{s("tilde",q,B,Y,Z,oe,F);let G;return A(Y)?G="":A(Z)?G=`>=${Y}.0.0 <${+Y+1}.0.0-0`:A(oe)?G=`>=${Y}.${Z}.0 <${Y}.${+Z+1}.0-0`:F?(s("replaceTilde pr",F),G=`>=${Y}.${Z}.${oe}-${F} <${Y}.${+Z+1}.0-0`):G=`>=${Y}.${Z}.${oe} <${Y}.${+Z+1}.0-0`,s("tilde return",G),G})},k=(q,R)=>q.trim().split(/\s+/).map(O=>M(O,R)).join(" "),M=(q,R)=>{s("caret",q,R);const O=R.loose?c[f.CARETLOOSE]:c[f.CARET],B=R.includePrerelease?"-0":"";return q.replace(O,(Y,Z,oe,F,G)=>{s("caret",q,Y,Z,oe,F,G);let ae;return A(Z)?ae="":A(oe)?ae=`>=${Z}.0.0${B} <${+Z+1}.0.0-0`:A(F)?Z==="0"?ae=`>=${Z}.${oe}.0${B} <${Z}.${+oe+1}.0-0`:ae=`>=${Z}.${oe}.0${B} <${+Z+1}.0.0-0`:G?(s("replaceCaret pr",G),Z==="0"?oe==="0"?ae=`>=${Z}.${oe}.${F}-${G} <${Z}.${oe}.${+F+1}-0`:ae=`>=${Z}.${oe}.${F}-${G} <${Z}.${+oe+1}.0-0`:ae=`>=${Z}.${oe}.${F}-${G} <${+Z+1}.0.0-0`):(s("no pr"),Z==="0"?oe==="0"?ae=`>=${Z}.${oe}.${F}${B} <${Z}.${oe}.${+F+1}-0`:ae=`>=${Z}.${oe}.${F}${B} <${Z}.${+oe+1}.0-0`:ae=`>=${Z}.${oe}.${F} <${+Z+1}.0.0-0`),s("caret return",ae),ae})},N=(q,R)=>(s("replaceXRanges",q,R),q.split(/\s+/).map(O=>z(O,R)).join(" ")),z=(q,R)=>{q=q.trim();const O=R.loose?c[f.XRANGELOOSE]:c[f.XRANGE];return q.replace(O,(B,Y,Z,oe,F,G)=>{s("xRange",q,B,Y,Z,oe,F,G);const ae=A(Z),he=ae||A(oe),me=he||A(F),Me=me;return Y==="="&&Me&&(Y=""),G=R.includePrerelease?"-0":"",ae?Y===">"||Y==="<"?B="<0.0.0-0":B="*":Y&&Me?(he&&(oe=0),F=0,Y===">"?(Y=">=",he?(Z=+Z+1,oe=0,F=0):(oe=+oe+1,F=0)):Y==="<="&&(Y="<",he?Z=+Z+1:oe=+oe+1),Y==="<"&&(G="-0"),B=`${Y+Z}.${oe}.${F}${G}`):he?B=`>=${Z}.0.0${G} <${+Z+1}.0.0-0`:me&&(B=`>=${Z}.${oe}.0${G} <${Z}.${+oe+1}.0-0`),s("xRange return",B),B})},j=(q,R)=>(s("replaceStars",q,R),q.trim().replace(c[f.STAR],"")),U=(q,R)=>(s("replaceGTE0",q,R),q.trim().replace(c[R.includePrerelease?f.GTE0PRE:f.GTE0],"")),X=q=>(R,O,B,Y,Z,oe,F,G,ae,he,me,Me)=>(A(B)?O="":A(Y)?O=`>=${B}.0.0${q?"-0":""}`:A(Z)?O=`>=${B}.${Y}.0${q?"-0":""}`:oe?O=`>=${O}`:O=`>=${O}${q?"-0":""}`,A(ae)?G="":A(he)?G=`<${+ae+1}.0.0-0`:A(me)?G=`<${ae}.${+he+1}.0-0`:Me?G=`<=${ae}.${he}.${me}-${Me}`:q?G=`<${ae}.${he}.${+me+1}-0`:G=`<=${G}`,`${O} ${G}`.trim()),H=(q,R,O)=>{for(let B=0;B<q.length;B++)if(!q[B].test(R))return!1;if(R.prerelease.length&&!O.includePrerelease){for(let B=0;B<q.length;B++)if(s(q[B].semver),q[B].semver!==a.ANY&&q[B].semver.prerelease.length>0){const Y=q[B].semver;if(Y.major===R.major&&Y.minor===R.minor&&Y.patch===R.patch)return!0}return!1}return!0};return V_}var W_,E8;function qwe(){if(E8)return W_;E8=1;const e=mY();return W_=(n,i,r)=>{try{i=new e(i,r)}catch{return!1}return i.test(n)},W_}var Iwe=qwe(),yY=kwe(Iwe);function Pwe(e,t,n){const i=e.open(t),r=250,{origin:a}=new URL(t);let s=40;function l(f){f.source===i&&(s=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function c(){s<=0||(i.postMessage(n,a),setTimeout(c,r),s-=1)}setTimeout(c,r)}var Hwe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function vY(e,...t){for(const n of t)Gwe(e,n);return e}function Gwe(e,t){for(const n of Object.keys(t))Td(e,n,t[n],!0)}const Oa=k0e;let Dp=b_e;const _8=typeof window<"u"?window:void 0;Dp===void 0&&_8?.vl?.compile&&(Dp=_8.vl);const Ywe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Xwe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},jg={vega:"Vega","vega-lite":"Vega-Lite"},Dv={vega:Oa.version,"vega-lite":Dp?Dp.version:"not available"},Vwe={vega:e=>e,"vega-lite":(e,t,n)=>Dp.compile(e,{config:n,logger:t}).spec},Wwe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Qwe="chart-wrapper";function Zwe(e){return typeof e=="function"}function w8(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,a=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(r+e+a),s.document.title=`${jg[i]} JSON Source`}function Kwe(e,t,n){if(e.$schema){const i=sY(e.$schema);n&&n!==i.library&&t.warn(`The given visualization spec is written in ${jg[i.library]}, but mode argument sets ${jg[n]??n}.`);const r=i.library;return yY(Dv[r],`^${i.version.slice(1)}`)||t.warn(`The input spec uses ${jg[r]} ${i.version}, but the current version of ${jg[r]} is v${Dv[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":n??"vega"}function bY(e){return!!(e&&"load"in e)}function A8(e){return bY(e)?e:Oa.loader(e)}function Jwe(e){const t=e.usermeta?.embedOptions??{};return xe(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Ux(e,t,n={}){let i,r;xe(t)?(r=A8(n.loader),i=JSON.parse(await r.load(t))):i=t;const a=Jwe(i),s=a.loader;(!r||s)&&(r=A8(n.loader??s));const l=await C8(a,r),c=await C8(n,r),f={...vY(c,l),config:Cd(c.config??{},l.config??{})};return await tAe(e,i,f,r)}async function C8(e,t){const n=xe(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=xe(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}function eAe(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function tAe(e,t,n={},i){const r=n.theme?Cd(rwe[n.theme],n.config??{}):n.config,a=$l(n.actions)?n.actions:vY({},Ywe,n.actions??{}),s={...Xwe,...n.i18n},l=n.renderer??"svg",c=n.logger??Ov(Oa.Warn);n.logLevel!==void 0&&c.level(n.logLevel);const f=n.downloadFileName??"visualization",d=typeof e=="string"?document.querySelector(e):e;if(!d)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const $="vega-embed-style",{root:k,rootContainer:M}=eAe(d);if(!k.getElementById($)){const N=document.createElement("style");N.id=$,N.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Hwe.toString():n.defaultStyle,M.appendChild(N)}}const g=Kwe(t,c,n.mode);let p=Vwe[g](t,c,r);if(g==="vega-lite"&&p.$schema){const $=sY(p.$schema);yY(Dv.vega,`^${$.version.slice(1)}`)||c.warn(`The compiled spec uses Vega ${$.version}, but current version is v${Dv.vega}.`)}d.classList.add("vega-embed"),a&&d.classList.add("has-actions"),d.innerHTML="";let y=d;if(a){const $=document.createElement("div");$.classList.add(Qwe),d.appendChild($),y=$}const v=n.patch;if(v&&(p=v instanceof Function?v(p):Fx(p,v,!0,!1).newDocument),n.formatLocale&&Oa.formatLocale(n.formatLocale),n.timeFormatLocale&&Oa.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const $ in n.expressionFunctions){const k=n.expressionFunctions[$];"fn"in k?Oa.expressionFunction($,k.fn,k.visitor):k instanceof Function&&Oa.expressionFunction($,k)}const{ast:b}=n,S=Oa.parse(p,g==="vega-lite"?{}:r,{ast:b}),_=new(n.viewClass||Oa.View)(S,{loader:i,logger:c,renderer:l,...b?{expr:Oa.expressionInterpreter??n.expr??j0e}:{}});if(_.addSignalListener("autosize",($,k)=>{const{type:M}=k;M=="fit-x"?(y.classList.add("fit-x"),y.classList.remove("fit-y")):M=="fit-y"?(y.classList.remove("fit-x"),y.classList.add("fit-y")):M=="fit"?y.classList.add("fit-x","fit-y"):y.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:$,tooltip:k}=n,M=$&&!bY($)?$?.baseURL:void 0,N=Zwe(k)?k:new gwe({baseURL:M,...k===!0?{}:k}).call;_.tooltip(N)}let{hover:w}=n;if(w===void 0&&(w=g==="vega"),w){const{hoverSet:$,updateSet:k}=typeof w=="boolean"?{}:w;_.hover($,k)}n&&(n.width!=null&&_.width(n.width),n.height!=null&&_.height(n.height),n.padding!=null&&_.padding(n.padding)),await _.initialize(y,n.bind).runAsync();let A;if(a!==!1){let $=d;if(n.defaultStyle!==!1||n.forceActionsMenu){const M=document.createElement("details");M.title=s.CLICK_TO_VIEW_ACTIONS,d.append(M),$=M;const N=document.createElement("summary");N.innerHTML=Wwe,M.append(N),A=z=>{M.contains(z.target)||M.removeAttribute("open")},document.addEventListener("click",A)}const k=document.createElement("div");if($.append(k),k.classList.add("vega-actions"),a===!0||a.export!==!1){for(const M of["svg","png"])if(a===!0||a.export===!0||a.export[M]){const N=s[`${M.toUpperCase()}_ACTION`],z=document.createElement("a"),j=be(n.scaleFactor)?n.scaleFactor[M]:n.scaleFactor;z.text=N,z.href="#",z.target="_blank",z.download=`${f}.${M}`,z.addEventListener("mousedown",async function(U){U.preventDefault();const X=await _.toImageURL(M,j);this.href=X}),k.append(z)}}if(a===!0||a.source!==!1){const M=document.createElement("a");M.text=s.SOURCE_ACTION,M.href="#",M.addEventListener("click",function(N){w8(sE(t),n.sourceHeader??"",n.sourceFooter??"",g),N.preventDefault()}),k.append(M)}if(g==="vega-lite"&&(a===!0||a.compiled!==!1)){const M=document.createElement("a");M.text=s.COMPILED_ACTION,M.href="#",M.addEventListener("click",function(N){w8(sE(p),n.sourceHeader??"",n.sourceFooter??"","vega"),N.preventDefault()}),k.append(M)}if(a===!0||a.editor!==!1){const M=n.editorUrl??"https://vega.github.io/editor/",N=document.createElement("a");N.text=s.EDITOR_ACTION,N.href="#",N.addEventListener("click",function(z){Pwe(window,M,{config:r,mode:v?"vega":g,renderer:l,spec:sE(v?p:t)}),z.preventDefault()}),k.append(N)}}function T(){A&&document.removeEventListener("click",A),_.finalize()}return{view:_,spec:t,vgSpec:p,finalize:T,embedOptions:n}}const nAe=({data:e,onPointClick:t,selectedCommunity:n,colorMode:i})=>{const r=Ie.useRef(null),a=Ie.useRef(null),[s,l]=Ie.useState({width:500,height:400});Ie.useEffect(()=>{const f=()=>{if(r.current){const{width:d,height:g}=r.current.getBoundingClientRect();l({width:Math.max(d-20,300),height:Math.max(g-20,300)})}};return f(),window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]);const c=Ie.useMemo(()=>{const f={criticalFound:{field:"criticalFound",type:"nominal",scale:{domain:[0,1],range:["#48BB78","#F56565"]},legend:{title:"Critical Violation",labelExpr:"datum.value == 0 ? 'No' : 'Yes'",orient:"bottom-right"}},passFlag:{field:"pass_flag",type:"nominal",scale:{domain:[0,1],range:["#F56565","#48BB78"]},legend:{title:"Inspection Outcome",labelExpr:"datum.value == 0 ? 'Failed' : 'Passed'",orient:"bottom-right"}},results:{field:"Results",type:"nominal",scale:{domain:["Pass","Fail","Pass w/ Conditions","No Entry","Not Ready","Out of Business"],range:["#48BB78","#F56565","#ECC94B","#A0AEC0","#9F7AEA","#718096"]},legend:{title:"Result",orient:"bottom-right"}}};return f[i]||f.criticalFound},[i]);return Ie.useEffect(()=>{if(!r.current||e.length===0)return;const f={$schema:"https://vega.github.io/schema/vega-lite/v5.json",width:s.width,height:s.height,autosize:{type:"fit",contains:"padding"},data:{values:e},params:[{name:"highlight",select:{type:"point",on:"pointerover",clear:"pointerout"}}],mark:{type:"circle",stroke:"#333",strokeWidth:.5,cursor:"pointer"},encoding:{x:{field:"tsne_x",type:"quantitative",scale:{zero:!1},axis:{title:"Dimension 1",grid:!0,gridOpacity:.3,labels:!1}},y:{field:"tsne_y",type:"quantitative",scale:{zero:!1},axis:{title:"Dimension 2",grid:!0,gridOpacity:.3,labels:!1}},color:c,opacity:{condition:{test:n?`datum.community_name === '${n}'`:"true",value:.7},value:.15},size:{condition:{param:"highlight",value:80},value:n?50:30},tooltip:[{field:"DBA_Name",title:"Business"},{field:"Address",title:"Address"},{field:"Results",title:"Result"},{field:"Inspection_Date",title:"Date"},{field:"community_name",title:"Community"},{field:"Facility_Type",title:"Facility Type"}]},config:{background:"transparent",view:{stroke:null}}};return a.current&&(a.current.finalize(),a.current=null),r.current&&(r.current.innerHTML=""),(async()=>{try{const g=await Ux(r.current,f,{actions:!1,renderer:"canvas"});a.current=g.view,g.view.addEventListener("click",(p,y)=>{y&&y.datum&&y.datum.community_name&&t(y.datum.community_name)})}catch(g){console.error("Error embedding scatter plot:",g)}})(),()=>{a.current&&(a.current.finalize(),a.current=null)}},[e,s,c,n,t]),Te.jsx("div",{className:"vega-container",ref:r})},iAe=({geoData:e,inspectionData:t,selectedCommunity:n,onCommunitySelect:i})=>{const r=Ie.useRef(null),a=Ie.useRef(null),[s,l]=Ie.useState({width:500,height:400});Ie.useEffect(()=>{const g=()=>{if(r.current){const{width:p,height:y}=r.current.getBoundingClientRect();l({width:Math.max(p-20,300),height:Math.max(y-20,300)})}};return g(),window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]);const c=Ie.useMemo(()=>{if(!t||t.length===0)return{};const g={};return t.forEach(p=>{const y=p.community_name;!y||y==="Unknown"||(g[y]||(g[y]={total:0,critical:0,passed:0}),g[y].total+=1,g[y].critical+=p.criticalFound||0,g[y].passed+=p.pass_flag||0)}),Object.keys(g).forEach(p=>{const y=g[p];y.criticalRate=y.total>0?y.critical/y.total*100:0,y.passRate=y.total>0?y.passed/y.total*100:0}),g},[t]),f=Ie.useMemo(()=>{if(!e)return null;const g=e.features.map(p=>{const y=p.properties.community_name,v=c[y]||{total:0,critical:0,criticalRate:0,passRate:0};return{...p,properties:{...p.properties,...v,isSelected:y===n}}});return{...e,features:g}},[e,c,n]),d=Ie.useCallback((g,p)=>{p&&p.datum&&p.datum.properties&&i(p.datum.properties.community_name)},[i]);return Ie.useEffect(()=>{if(!r.current||!f)return;const g={$schema:"https://vega.github.io/schema/vega-lite/v5.json",width:s.width,height:s.height,autosize:{type:"fit",contains:"padding"},data:{values:f,format:{type:"json",property:"features"}},projection:{type:"mercator"},params:[{name:"highlight",select:{type:"point",on:"pointerover"}}],mark:{type:"geoshape",stroke:"#fff",strokeWidth:1,cursor:"pointer"},encoding:{color:{field:"properties.criticalRate",type:"quantitative",scale:{scheme:"reds",domain:[0,30]},legend:{title:"Critical Rate (%)",orient:"bottom-right"}},opacity:{condition:{test:n?`datum.properties.community_name === '${n}'`:"false",value:1},value:n?.4:.8},strokeWidth:{condition:[{param:"highlight",empty:!1,value:2},{test:n?`datum.properties.community_name === '${n}'`:"false",value:3}],value:1},stroke:{condition:{test:n?`datum.properties.community_name === '${n}'`:"false",value:"#2563eb"},value:"#fff"},tooltip:[{field:"properties.community_name",title:"Community"},{field:"properties.total",title:"Total Inspections"},{field:"properties.critical",title:"Critical Violations"},{field:"properties.criticalRate",title:"Critical Rate (%)",format:".1f"},{field:"properties.passRate",title:"Pass Rate (%)",format:".1f"}]},config:{background:"transparent",view:{stroke:null}}};return a.current&&(a.current.finalize(),a.current=null),r.current&&(r.current.innerHTML=""),(async()=>{try{const y=await Ux(r.current,g,{actions:!1,renderer:"canvas"});a.current=y.view,y.view.addEventListener("click",d)}catch(y){console.error("Error embedding map:",y)}})(),()=>{a.current&&(a.current.finalize(),a.current=null)}},[f,s,n,d]),e?Te.jsx("div",{className:"vega-container",ref:r}):Te.jsx("div",{className:"vega-container",children:Te.jsx("p",{children:"Loading map data..."})})},rAe=({data:e,selectedCommunity:t})=>{const n=Ie.useRef(null),i=Ie.useRef(null),[r,a]=Ie.useState({width:800,height:250});Ie.useEffect(()=>{const l=()=>{if(n.current){const{width:c,height:f}=n.current.getBoundingClientRect();a({width:Math.max(c-40,400),height:Math.max(f-20,200)})}};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]);const s=Ie.useMemo(()=>{if(!e||e.length===0)return[];let l=e;t&&(l=e.filter(g=>g.community_name===t));const c=l.filter(g=>g.Results==="Fail");if(c.length===0)return[];const f={};return c.forEach(g=>{const p=g.Facility_Type||"Unknown";f[p]=(f[p]||0)+1}),Object.entries(f).map(([g,p])=>({facilityType:g,count:p})).sort((g,p)=>p.count-g.count).slice(0,10)},[e,t]);return Ie.useEffect(()=>{if(!n.current||(i.current&&(i.current.finalize(),i.current=null),n.current&&(n.current.innerHTML=""),s.length===0))return;const l={$schema:"https://vega.github.io/schema/vega-lite/v5.json",width:r.width,height:r.height,autosize:{type:"fit",contains:"padding"},data:{values:s},mark:{type:"bar",cornerRadiusTopRight:4,cornerRadiusBottomRight:4,color:"#F56565"},encoding:{y:{field:"facilityType",type:"nominal",axis:{title:null,labelLimit:200},sort:"-x"},x:{field:"count",type:"quantitative",axis:{title:"Number of Failed Inspections",grid:!0,gridOpacity:.3}},tooltip:[{field:"facilityType",title:"Facility Type"},{field:"count",title:"Failed Inspections"}]},config:{background:"transparent",view:{stroke:null}}};return(async()=>{try{const f=await Ux(n.current,l,{actions:!1,renderer:"canvas"});i.current=f.view}catch(f){console.error("Error embedding facility chart:",f)}})(),()=>{i.current&&(i.current.finalize(),i.current=null)}},[s,r]),Te.jsx("div",{className:"vega-container",ref:n,style:{position:"relative"},children:s.length===0&&Te.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#718096"},children:"No failed inspections in current selection"})})},aAe=()=>{const e=Ie.useRef(null),t=Ie.useRef(null),[n,i]=Ie.useState([]),[r,a]=Ie.useState({width:800,height:250});return Ie.useEffect(()=>{const s=()=>{if(e.current){const{width:l,height:c}=e.current.getBoundingClientRect();a({width:Math.max(l-40,400),height:Math.max(c-20,200)})}};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),Ie.useEffect(()=>{(async()=>{try{const c=await(await fetch("data/quarterly_failure_rates.json")).json();i(c)}catch(l){console.error("Error loading quarterly data:",l)}})()},[]),Ie.useEffect(()=>{if(!e.current||n.length===0)return;const s={$schema:"https://vega.github.io/schema/vega-lite/v5.json",width:r.width,height:r.height,autosize:{type:"fit",contains:"padding"},data:{values:n},layer:[{mark:{type:"line",strokeWidth:2,color:"#95a5a6"},encoding:{x:{field:"Year-Quarter",type:"ordinal",sort:null,axis:{title:"Quarter",labelAngle:-45,labelFontSize:9}},y:{field:"Failure_Rate",type:"quantitative",axis:{title:"Max Failure Rate (%)",titleFontSize:11},scale:{domain:[0,35]}}}},{mark:{type:"point",size:100,filled:!0,strokeWidth:1,stroke:"white"},encoding:{x:{field:"Year-Quarter",type:"ordinal",sort:null},y:{field:"Failure_Rate",type:"quantitative"},color:{field:"Facility_Type",type:"nominal",scale:{scheme:"tableau10"},legend:{title:"Worst Performer",orient:"bottom",columns:2,labelFontSize:9,titleFontSize:10}},tooltip:[{field:"Year-Quarter",title:"Quarter"},{field:"Facility_Type",title:"Worst Performing"},{field:"Failure_Rate",title:"Max Failure Rate (%)",format:".1f"},{field:"Failures",title:"Failures"},{field:"Total",title:"Inspections"}]}}],config:{background:"transparent",view:{stroke:null}}};return t.current&&(t.current.finalize(),t.current=null),e.current&&(e.current.innerHTML=""),(async()=>{try{const c=await Ux(e.current,s,{actions:!1,renderer:"canvas"});t.current=c.view}catch(c){console.error("Error embedding temporal chart:",c)}})(),()=>{t.current&&(t.current.finalize(),t.current=null)}},[n,r]),n.length===0?Te.jsx("div",{className:"vega-container",children:Te.jsx("p",{children:"Loading temporal data..."})}):Te.jsx("div",{className:"vega-container",ref:e})};function sAe(){const[e,t]=Ie.useState([]),[n,i]=Ie.useState([]),[r,a]=Ie.useState([]),[s,l]=Ie.useState([]),[c,f]=Ie.useState(null),[d,g]=Ie.useState(!0),[p,y]=Ie.useState(null),[v,b]=Ie.useState("violations_umap"),[S,_]=Ie.useState(null),[w,A]=Ie.useState(5e3),[T,$]=Ie.useState("passFlag"),k=Ie.useMemo(()=>{switch(v){case"violations_tsne":return e;case"violations_umap":return n;case"direct":return r;case"mlp":return s;default:return n}},[v,e,n,r,s]);Ie.useEffect(()=>{(async()=>{try{g(!0);const[H,q,R,O,B]=await Promise.all([fetch("data/tsne_violations_with_community.csv"),fetch("data/umap_violations_with_community.csv"),fetch("data/tsne_direct_with_community.csv"),fetch("data/tsne_mlp_with_community.csv"),fetch("data/chicago_communities.geojson")]),[Y,Z,oe,F,G]=await Promise.all([H.text(),q.text(),R.text(),O.text(),B.json()]),ae=M(Y),he=M(Z),me=M(oe),Me=M(F);t(ae),i(he),a(me),l(Me),f(G),g(!1)}catch(H){console.error("Error loading data:",H),y(H.message),g(!1)}})()},[]);const M=X=>{const H=X.trim().split(`
`),q=H[0].split(",");return H.slice(1).map(R=>{const O=N(R),B={};return q.forEach((Y,Z)=>{const oe=O[Z];["Inspection_ID","License","Latitude","Longitude","criticalFound","pass_flag","fail_flag","criticalCount","seriousCount","minorCount","tsne_x","tsne_y","area_num"].includes(Y)?B[Y]=parseFloat(oe)||0:B[Y]=oe}),B})},N=X=>{const H=[];let q="",R=!1;for(let O=0;O<X.length;O++){const B=X[O];B==='"'?R=!R:B===","&&!R?(H.push(q.trim()),q=""):q+=B}return H.push(q.trim()),H},z=Ie.useMemo(()=>{let H=[...k].sort((q,R)=>new Date(R.Inspection_Date)-new Date(q.Inspection_Date)).slice(0,w);return S&&(H=H.filter(q=>q.community_name===S)),H},[k,w,S]),j=X=>{_(X===S?null:X)},U=()=>{_(null)};return d?Te.jsxs("div",{className:"loading",children:[Te.jsx("div",{className:"spinner"}),Te.jsx("p",{children:"Loading Chicago Food Inspection Data..."})]}):p?Te.jsxs("div",{className:"error",children:[Te.jsx("h2",{children:"Error Loading Data"}),Te.jsx("p",{children:p}),Te.jsx("p",{children:"Make sure to run the preprocessing script first:"}),Te.jsx("code",{children:"python scripts/preprocess_data.py"})]}):Te.jsxs("div",{className:"app",children:[Te.jsxs("header",{className:"header",children:[Te.jsx("h1",{children:"Chicago Food Inspection Embedding Explorer"}),Te.jsxs("p",{className:"subtitle",children:["Analyzing ",z.length.toLocaleString()," food inspections"]})]}),Te.jsxs("div",{className:"controls",children:[Te.jsxs("div",{className:"embedding-source-control",children:[Te.jsx("label",{htmlFor:"embedding-source",children:"Embedding Source:"}),Te.jsxs("select",{id:"embedding-source",value:v,onChange:X=>{b(X.target.value),_(null)},children:[Te.jsx("option",{value:"violations_umap",children:"Violations Text (UMAP)"}),Te.jsx("option",{value:"violations_tsne",children:"Violations Text (t-SNE)"}),Te.jsx("option",{value:"direct",children:"Feature-based (t-SNE)"}),Te.jsx("option",{value:"mlp",children:"MLP Hidden Layer (t-SNE)"})]})]}),Te.jsxs("div",{className:"slider-control",children:[Te.jsxs("label",{htmlFor:"inspection-slider",children:["Show latest inspections: ",Math.min(w,k.length).toLocaleString()," / ",k.length.toLocaleString()]}),Te.jsx("input",{id:"inspection-slider",type:"range",min:"500",max:k.length||8e3,step:"500",value:Math.min(w,k.length),onChange:X=>A(parseInt(X.target.value))})]}),Te.jsxs("div",{className:"color-mode-control",children:[Te.jsx("label",{children:"Color by:"}),Te.jsxs("div",{className:"button-group",children:[Te.jsx("button",{className:T==="criticalFound"?"active":"",onClick:()=>$("criticalFound"),children:"Critical Violation"}),Te.jsx("button",{className:T==="passFlag"?"active":"",onClick:()=>$("passFlag"),children:"Pass/Fail"}),Te.jsx("button",{className:T==="results"?"active":"",onClick:()=>$("results"),children:"Results"})]})]}),S&&Te.jsx("button",{className:"clear-btn",onClick:U,children:"Clear Selection"}),S&&Te.jsxs("span",{className:"selection-badge",children:["Selected: ",S]})]}),Te.jsxs("div",{className:"dashboard",children:[Te.jsxs("div",{className:"main-views",children:[Te.jsxs("div",{className:"view-container scatter-container",children:[Te.jsx("h2",{children:"Embedding Space"}),Te.jsx(nAe,{data:z,onPointClick:j,selectedCommunity:S,colorMode:T})]}),Te.jsxs("div",{className:"view-container map-container",children:[Te.jsx("h2",{children:"Chicago Community Areas"}),Te.jsx(iAe,{geoData:c,inspectionData:z,selectedCommunity:S,onCommunitySelect:j})]})]}),Te.jsxs("div",{className:"secondary-views",children:[Te.jsxs("div",{className:"view-container chart-container",children:[Te.jsxs("h2",{children:["Failed Inspections by Facility Type",S&&` - ${S}`]}),Te.jsx(rAe,{data:z,selectedCommunity:S})]}),Te.jsxs("div",{className:"view-container chart-container",children:[Te.jsx("h2",{children:"Peak Failure Rate per Quarter"}),Te.jsx(aAe,{})]})]})]}),Te.jsx("footer",{className:"footer",children:Te.jsxs("p",{children:["Data source:"," ",Te.jsx("a",{href:"https://data.cityofchicago.org/Health-Human-Services/Food-Inspections/4ijn-s7e5",target:"_blank",rel:"noopener noreferrer",children:"Chicago Data Portal - Food Inspections"})]})})]})}ZV.createRoot(document.getElementById("root")).render(Te.jsx(Ie.StrictMode,{children:Te.jsx(sAe,{})}));
